/*! For license information please see index.min.js.LICENSE.txt */
( () => {
    var __webpack_modules__ = {
        41325: () => {
            "use strict";
            const e = {};
            let t, n;
            function r(e) {
                const t = [].slice.call(arguments, 1);
                return e.replace(/{(\d+)}/g, (function(e, n) {
                    return void 0 !== t[n] ? t[n] : e
                }
                ))
            }
            function s(t) {
                return {
                    value: e[t] || t,
                    notfound: !e[t]
                }
            }
            function o(e) {
                return "[object Object]" === Object.prototype.toString.call(e)
            }
            t = n = function(e) {
                return e % 10 == 1 && e % 100 != 11 ? 0 : e % 10 >= 2 && e % 10 <= 4 && (e % 100 < 10 || e % 100 >= 20) ? 1 : 2
            }
            ,
            $.localize = function() {
                if (1 === arguments.length)
                    return o(arguments[0]) ? void ("function" == typeof (t = arguments[0].pluralRule) && 1 == t.length && (n = t)) : s(arguments[0]).value;
                var t;
                if (2 == arguments.length && o(arguments[1]))
                    Object.assign(e, arguments[1]);
                else if (arguments.length > 1 && arguments[0] && arguments[0].indexOf(!1)) {
                    const e = [].slice.call(arguments, 1);
                    return e.unshift(s(arguments[0]).value),
                    r.apply(this, e)
                }
            }
            ,
            $.pluralize = function() {
                if (arguments.length < 2)
                    return arguments[0];
                const e = new Array(arguments.length - 1);
                for (let t = 0; t < arguments.length - 1; t++)
                    e[t] = arguments[t + 1];
                const o = s(e.join(","))
                  , i = o.value.split(",")
                  , a = o.notfound ? t(arguments[0]) : n(arguments[0])
                  , l = i[a < i.length ? a : i.length - 1];
                return l.indexOf("{0}") > -1 ? r(l, arguments[0]) : l
            }
        }
        ,
        33345: () => {
            "use strict";
            DOMTokenList.prototype.addMany = function(e) {
                if (null == e || !Array.isArray(e))
                    throw new Error("DOMTokenList.prototype.addMany accepts only array");
                e.forEach((e => this.add(e)))
            }
            ,
            DOMTokenList.prototype.removeMany = function(e) {
                if (null == e || !Array.isArray(e))
                    throw new Error("DOMTokenList.prototype.removeMany accepts only array");
                e.forEach((e => this.remove(e)))
            }
        }
        ,
        54729: () => {
            "use strict";
            HTMLElement.prototype.hide = function() {
                this.style.display = "none"
            }
            ,
            HTMLElement.prototype.show = function() {
                this.style.display = "block"
            }
            ,
            HTMLElement.prototype.width = function() {
                return 0 == this.clientWidth ? getComputedStyle(this).width.replace("px", "") : this.clientWidth
            }
            ,
            HTMLElement.prototype.wrap = function(e) {
                let t = (new DOMParser).parseFromString(e, "text/html").body.firstElementChild;
                for (this.parentNode.insertBefore(t, this); null != t.firstElementChild; )
                    t = t.firstElementChild;
                t.appendChild(this)
            }
            ,
            HTMLElement.prototype.parents = function(e) {
                for (var t = [], n = this, r = void 0 !== e; null !== (n = n.parentElement); )
                    n.nodeType === Node.ELEMENT_NODE && (r && !n.matches(e) || t.push(n));
                return t
            }
            ,
            HTMLElement.prototype.isHidden = function() {
                return 0 === this.offsetWidth && 0 === this.offsetHeight || "none" === window.getComputedStyle(this).display
            }
            ,
            HTMLElement.prototype.isVisible = function() {
                return !this.isHidden()
            }
        }
        ,
        22333: () => {
            "use strict";
            URLSearchParams.prototype.toDictionary = function() {
                const e = {};
                return this.forEach(( (t, n) => e[n] = t)),
                e
            }
            ,
            URLSearchParams.prototype.hasOwnProperty("size") || Object.defineProperty(URLSearchParams.prototype, "size", {
                get: function() {
                    let e = 0;
                    for (let t of this.keys())
                        e++;
                    return e
                }
            })
        }
        ,
        68815: () => {
            "use strict";
            Array.prototype.getIntesection = function(e) {
                return Array.isArray(e) ? this.filter((t => e.includes(t))) : (console.error("Argument must be an array"),
                [])
            }
            ,
            Array.prototype.last || (Array.prototype.last = function() {
                return this[this.length - 1]
            }
            ),
            Array.prototype.first || (Array.prototype.first = function() {
                return this[0]
            }
            ),
            Array.prototype.max = function() {
                return Math.max.apply(null, this)
            }
            ,
            Array.prototype.min = function() {
                return Math.min.apply(null, this)
            }
            ,
            Array.prototype.findWhere = function(e) {
                return this.find((t => Object.keys(e).every((n => t[n] === e[n]))))
            }
            ,
            Array.prototype.distinct = function() {
                return this.filter((function(e, t, n) {
                    return n.indexOf(e) === t
                }
                ))
            }
            ,
            Array.prototype.toHashSet = function(e) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("toHashSet method require callback function or null");
                return this.reduce(( (t, n) => {
                    var r;
                    return t.add(null !== (r = null == e ? void 0 : e(n)) && void 0 !== r ? r : n),
                    t
                }
                ), new Set)
            }
            ,
            Array.prototype.toMap = function(e, t) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("toMap method require callback function or null");
                if (null != t && "function" != typeof t)
                    throw new TypeError("toMap method require callback function or null");
                return this.reduce(( (n, r) => (n.set(null == e ? r : e(r), null == t ? r : t(r)),
                n)), new Map)
            }
            ,
            Array.prototype.sum = function(e) {
                let t = 0;
                for (let n = 0, r = this.length; n < r; n++)
                    t += e ? this[n][e] : this[n];
                return t
            }
            ,
            Array.prototype.sumBy = function(e) {
                let t = 0;
                for (let n = 0, r = this.length; n < r; n++)
                    t += e(this[n]);
                return t
            }
            ,
            Array.prototype.groupBy = function(e) {
                const t = new Map;
                return this.forEach((n => {
                    const r = e(n)
                      , s = t.get(r);
                    s ? s.push(n) : t.set(r, [n])
                }
                )),
                t
            }
            ,
            Array.prototype.selectMany = function(e) {
                return this.length ? this.map((t => e(t))).reduce(( (e, t) => e.concat(t))) : []
            }
            ,
            Array.prototype.toChunk = function(e) {
                const t = Math.ceil(this.length / e)
                  , n = new Array(t);
                for (let r = 0; r < t; r++) {
                    const t = e * r;
                    n[r] = this.slice(t, t + e)
                }
                return n
            }
            ,
            Array.prototype.merge = function(e, {lookup: t=e => e, hasConflict: n= (e, t) => !1}={}) {
                if (!e || 0 == e.length)
                    return !1;
                const r = new Map;
                for (const e of this || []) {
                    const n = JSON.stringify(t(e));
                    r.set(n, e)
                }
                let s = !1;
                for (const o of e) {
                    const e = JSON.stringify(t(o));
                    if (r.has(e)) {
                        const t = r.get(e);
                        n(o, t) && (Object.assign(t, o),
                        s = !0)
                    } else
                        this.push(o),
                        s = !0
                }
                return s
            }
            ,
            Array.prototype.diff = function(e, {lookup: t=e => e, hasConflict: n= (e, t) => !1}={}) {
                const r = [];
                if (!e || 0 == e.length)
                    return r;
                const s = new Map;
                for (const e of this || []) {
                    const n = JSON.stringify(t(e));
                    s.set(n, e)
                }
                for (const o of e) {
                    const e = JSON.stringify(t(o));
                    if (s.has(e)) {
                        n(o, s.get(e)) && r.push(o)
                    } else
                        r.push(o)
                }
                return r
            }
            ,
            Array.prototype.remove = function(e) {
                let t = this.indexOf(e);
                t > -1 && this.splice(t, 1)
            }
        }
        ,
        35136: () => {
            "use strict";
            Date.prototype.format = function(e, t) {
                var n, r, s, o, i = (n = /d{1,4}|M{1,5}|yy(?:yy)?|([HhmsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,
                r = /\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
                s = /[^-+\dA-Z]/g,
                o = function(e, t) {
                    for (e = String(e),
                    t = t || 2; e.length < t; )
                        e = "0" + e;
                    return e
                }
                ,
                function(e, t, a) {
                    var l = i;
                    if (1 != arguments.length || "[object String]" != Object.prototype.toString.call(e) || /\d/.test(e) || (t = e,
                    e = void 0),
                    e = e ? new Date(e) : new Date,
                    isNaN(e))
                        throw SyntaxError("invalid date");
                    "UTC:" == (t = String(l.masks[t] || t || l.masks.default)).slice(0, 4) && (t = t.slice(4),
                    a = !0);
                    var c = a ? "getUTC" : "get"
                      , u = e[c + "Date"]()
                      , d = e[c + "Day"]()
                      , h = e[c + "Month"]()
                      , p = e[c + "FullYear"]()
                      , m = e[c + "Hours"]()
                      , g = e[c + "Minutes"]()
                      , f = e[c + "Seconds"]()
                      , y = e[c + "Milliseconds"]()
                      , v = a ? 0 : e.getTimezoneOffset()
                      , b = {
                        d: u,
                        dd: o(u),
                        ddd: l.i18n.dayNames[d],
                        dddd: l.i18n.dayNames[d + 7],
                        M: h + 1,
                        MM: o(h + 1),
                        MMM: l.i18n.monthShortNames[h],
                        MMMM: l.i18n.monthNames[h + 12],
                        MMMMM: l.i18n.monthNames[h + 24],
                        yy: String(p).slice(2),
                        yyyy: p,
                        h: m % 12 || 12,
                        hh: o(m % 12 || 12),
                        H: m,
                        HH: o(m),
                        m: g,
                        mm: o(g),
                        s: f,
                        ss: o(f),
                        l: o(y, 3),
                        L: o(y > 99 ? Math.round(y / 10) : y),
                        t: m < 12 ? "a" : "p",
                        tt: m < 12 ? "am" : "pm",
                        T: m < 12 ? "A" : "P",
                        TT: m < 12 ? "AM" : "PM",
                        Z: a ? "UTC" : (String(e).match(r) || [""]).pop().replace(s, ""),
                        o: (v > 0 ? "-" : "+") + o(100 * Math.floor(Math.abs(v) / 60) + Math.abs(v) % 60, 4),
                        S: ["th", "st", "nd", "rd"][u % 10 > 3 ? 0 : (u % 100 - u % 10 != 10) * u % 10]
                    };
                    return t.replace(n, (function(e) {
                        return e in b ? b[e] : e.slice(1, e.length - 1)
                    }
                    ))
                }
                );
                return i.masks = {
                    default: "ddd mmm dd yyyy HH:MM:ss",
                    shortDate: "m/d/yy",
                    mediumDate: "mmm d, yyyy",
                    longDate: "mmmm d, yyyy",
                    fullDate: "dddd, mmmm d, yyyy",
                    shortTime: "h:MM TT",
                    mediumTime: "h:MM:ss TT",
                    longTime: "h:MM:ss TT Z",
                    isoDate: "yyyy-mm-dd",
                    isoTime: "HH:MM:ss",
                    isoDateTime: "yyyy-mm-dd'T'HH:MM:ss",
                    isoUtcDateTime: "UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"
                },
                i.i18n = {
                    dayNames: ["Вс", "Пн", "Вт", "Ср", "Чт", "Пт", "Сб", "Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"],
                    monthNames: ["Янв", "Фев", "Мар", "Апр", "Май", "Июн", "Июл", "Авг", "Сен", "Окт", "Ноя", "Дек", "января", "февраля", "марта", "апреля", "мая", "июня", "июля", "августа", "сентября", "октября", "ноября", "декабря"],
                    monthShortNames: ["янв", "февр", "марта", "апр", "мая", "июня", "июля", "авг", "сент", "окт", "нояб", "дек"]
                },
                $.localize.dfr && (i.i18n.dayNames = $.localize.dfr.abbreviatedDayNames.concat($.localize.dfr.dayNames),
                $.localize.dfr.abbreviatedMonthNames[1] = "февр",
                $.localize.dfr.abbreviatedMonthNames[2] = "марта",
                $.localize.dfr.abbreviatedMonthNames[4] = "мая",
                $.localize.dfr.abbreviatedMonthNames[5] = "июня",
                $.localize.dfr.abbreviatedMonthNames[6] = "июля",
                $.localize.dfr.abbreviatedMonthNames[8] = "сент",
                $.localize.dfr.abbreviatedMonthNames[10] = "нояб",
                i.i18n.monthNames = $.localize.dfr.abbreviatedMonthNames.concat($.localize.dfr.monthGenitiveNames).concat($.localize.dfr.monthNames.map((e => e.charAt(0).toUpperCase() + e.slice(1))))),
                i(this, e, t)
            }
            ,
            Date.prototype.daysBetween = function(e) {
                var t = new Date(this.getFullYear(),this.getMonth(),this.getDate())
                  , n = (new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime() - t.getTime()) / 864e5;
                return Math.floor(n)
            }
            ,
            Date.prototype.dateEqual = function(e) {
                return this.getDate() === e.getDate() && this.getMonth() === e.getMonth() && this.getFullYear() === e.getFullYear()
            }
            ,
            Date.prototype.is1stJan = function() {
                return 1 === this.getDate() && 0 === this.getMonth()
            }
            ,
            Date.prototype.getUtcTime = function() {
                return this.getTime() - 6e4 * this.getTimezoneOffset()
            }
            ,
            Date.utcNow = function() {
                return (new Date).getUtcTime()
            }
            ,
            Date.prototype.addDays = function(e) {
                let t = new Date(this.valueOf());
                return t.setDate(t.getDate() + e),
                t
            }
            ,
            Date.prototype.addMinutes = function(e) {
                let t = new Date(this.valueOf());
                return t.setMinutes(t.getMinutes() + e),
                t
            }
            ,
            Date.prototype.addHours = function(e) {
                const t = new Date(this.valueOf());
                return isNaN(e) || t.setHours(t.getHours() + +e),
                t
            }
            ,
            Date.prototype.addMinutes = function(e) {
                let t = new Date(this.valueOf());
                return t.setMinutes(t.getMinutes() + e),
                t
            }
        }
        ,
        35342: () => {
            "use strict";
            var e;
            Event.prototype.stopPropagation = (e = Event.prototype.stopPropagation,
            function() {
                this.isPropagationStopped = !0,
                e.call(this)
            }
            )
        }
        ,
        73704: () => {
            "use strict";
            Map.prototype.every = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                let t = !0;
                return this.forEach(( (n, r, s) => {
                    t &= e(n, r, s)
                }
                )),
                1 == t
            }
            ,
            Map.prototype.some = function(e) {
                if (!(e instanceof Function))
                    throw new TypeError("Callback is not a function");
                let t = !1;
                return this.forEach(( (n, r, s) => {
                    t || (t = e(n, r, s))
                }
                )),
                t
            }
            ,
            Map.prototype.reduce = function(e, t) {
                if ("function" != typeof e)
                    throw new TypeError("Map reduce argument 1 must be a function");
                let n = t
                  , r = 0;
                return this.forEach(( (s, o, i) => {
                    r++,
                    n = 1 != r || null != t ? e(n, s, o, i) : s
                }
                )),
                n
            }
            ,
            Map.prototype.map = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                const t = new Map;
                return this.forEach(( (n, r, s) => {
                    t.set(r, e(n, r, s))
                }
                )),
                t
            }
            ,
            Map.prototype.toArray = function(e) {
                if ("function" != typeof e && null != e)
                    throw new TypeError("Callback if not a function");
                const t = [];
                return this.forEach(( (n, r, s) => t.push(null == e ? n : e(n, r, s)))),
                t
            }
            ,
            Map.prototype.find = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback is not a function");
                let t = null;
                return this.forEach(( (n, r, s) => {
                    t || e(n, r, s) && (t = n)
                }
                )),
                t
            }
            ,
            Map.prototype.sort = function(e) {
                let t = new Map;
                this[Symbol.iterator] = function*() {
                    yield*[...this.entries()].sort(e)
                }
                ;
                for (let[e,n] of this)
                    t.set(e, n);
                return t
            }
        }
        ,
        8913: () => {
            "use strict";
            Number.prototype.formatMoney = function(e, t, n) {
                var r = this
                  , s = (e = isNaN(e = Math.abs(e)) ? 2 : e,
                t = null == t ? "." : t,
                n = null == n ? "," : n,
                r < 0 ? "-" : "")
                  , o = parseInt(r = Math.abs(+r || 0).toFixed(e)) + ""
                  , i = (i = o.length) > 3 ? i % 3 : 0;
                return s + (i ? o.substr(0, i) + n : "") + o.substr(i).replace(/(\d{3})(?=\d)/g, "$1" + n) + (e ? t + Math.abs(r - o).toFixed(e).slice(2) : "")
            }
            ,
            Number.prototype.countDecimals = function() {
                return Math.floor(this.valueOf()) === this.valueOf() ? 0 : this.toString().split(".")[1].length || 0
            }
            ,
            Number.prototype.toFixedNumber = function(e, t) {
                var n = Math.pow(t || 10, e);
                return Math.round(this * n) / n
            }
            ,
            Number.tryParseInt = function(e) {
                const t = parseInt(e);
                return isNaN(t) ? null : t
            }
        }
        ,
        8730: () => {
            "use strict";
            Set.prototype.toArray = function(e) {
                if (null != e && "function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.toArray must be null or function");
                const t = [];
                return this.forEach((n => t.push(null == e ? n : e(n)))),
                t
            }
            ,
            Set.prototype.map = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.map must be function");
                const t = new Set;
                return this.forEach((n => t.add(e(n)))),
                t
            }
            ,
            Set.prototype.filter = function(e) {
                if ("function" != typeof e)
                    throw new TypeError("Callback at Set.prototype.map must be function");
                const t = new Set;
                return this.forEach((n => {
                    e(n) && t.add(n)
                }
                )),
                t
            }
        }
        ,
        98479: () => {
            "use strict";
            if ("localStorage"in window || null !== window.localStorage) {
                const e = Storage.prototype.setItem;
                Storage.prototype.setItem = function(t, n) {
                    try {
                        e.apply(this, arguments)
                    } catch (t) {
                        if (-1 === t.message.indexOf("quota"))
                            throw wb.spa.logError(t),
                            t;
                        let n, r, s = {
                            len: 0
                        }, o = 0;
                        for (r in localStorage)
                            localStorage.hasOwnProperty(r) && (n = 2 * (localStorage[r].length + r.length),
                            o += n,
                            s.len < n && (s = {
                                len: n,
                                key: r
                            }));
                        if (s.key)
                            if (s.len > 307200) {
                                this.removeItem(s.key);
                                const n = `localstorage delkey:${s.key}, len:${s.len / 1024} KB, key:${arguments[0]}, exp:${t.message}`;
                                console.log(n),
                                wb.spa.logError(new Error(n)),
                                e.apply(this, arguments)
                            } else {
                                const e = `localstorage exception key:${arguments[0]}, exp:${t.message}, storageKeys:${localStorage.length}, storageLen:${o / 1024} KB`;
                                console.log(e),
                                wb.spa.logError(new Error(e))
                            }
                    }
                }
                ,
                Storage.prototype.trySetItem = function(e, t) {
                    try {
                        this.setItem(e, t)
                    } catch (e) {}
                }
                ,
                Storage.prototype.clearStartsWith = function(e, t) {
                    if (e)
                        try {
                            Object.entries(this).filter((n => 0 === n[0].indexOf(e) && n[0] !== t)).forEach((e => {
                                this.removeItem(e[0])
                            }
                            ))
                        } catch (e) {}
                }
                ,
                Storage.prototype.putObject = function(e, t, {tryCatch: n}={}) {
                    if (n)
                        try {
                            this.setItem(e, JSON.stringify(t))
                        } catch (e) {}
                    else
                        this.setItem(e, JSON.stringify(t))
                }
                ,
                Storage.prototype.getObject = function(e) {
                    var t = this.getItem(e);
                    try {
                        return t && JSON.parse(t)
                    } catch (t) {
                        this.removeItem(e)
                    }
                    return null
                }
                ,
                Storage.prototype.hasItem = function(e) {
                    return null != this.getItem(e)
                }
            }
        }
        ,
        74233: () => {
            "use strict";
            String.prototype.capitalizeIf = function(e) {
                return e ? this.charAt(0).toUpperCase() + this.slice(1) : this
            }
            ,
            String.prototype.trimRight = function() {
                return this.replace(/\s+$/g, "")
            }
            ,
            String.prototype.trimLeft = function() {
                return this.replace(/^\s+/g, "")
            }
            ,
            String.prototype.trim = function() {
                return this.trimRight().trimLeft()
            }
            ,
            String.prototype.trimMiddle = function() {
                return this.trim().replace(/\s\s+/g, " ")
            }
            ,
            String.prototype.cleanTrashBetweenTd = function() {
                return this.replace(new RegExp(">[ \t\r\n\v\f]*<","g"), "><")
            }
            ,
            String.format = function() {
                for (var e = arguments[0], t = 0; t < arguments.length - 1; t++) {
                    var n = new RegExp("\\{" + t + "\\}","gm");
                    e = e.replace(n, arguments[t + 1])
                }
                return e
            }
            ,
            String.prototype.formatPhone = function(e) {
                let t = this.split("")
                  , n = "";
                for (let r = 0; r < e.length; r++)
                    n += "#" === e[r] ? t.splice(0, 1) : e[r];
                return n
            }
            ,
            String.prototype.capitalize = function() {
                return this.charAt(0).toUpperCase() + this.slice(1)
            }
            ,
            String.prototype.endsWith = function(e) {
                return -1 !== this.indexOf(e, this.length - e.length)
            }
            ,
            String.prototype.toSafeString = function() {
                return encodeURIComponent(this.replace(/<\/?[^>]+>/gi, "").trim())
            }
            ,
            String.prototype.hashCode = function() {
                let e, t, n = 0;
                if (0 === this.length)
                    return n;
                for (e = 0; e < this.length; e++)
                    t = this.charCodeAt(e),
                    n = (n << 5) - n + t,
                    n |= 0;
                return n
            }
        }
        ,
        86867: (e, t, n) => {
            "use strict";
            var r = {};
            n.r(r),
            n.d(r, {
                Deferred: () => V,
                animationFrameWithMinDelay: () => K,
                base64: () => X,
                currentCulture: () => D,
                debounce: () => x,
                debounceLead: () => j,
                debounceTrail: () => L,
                deepMerge: () => E,
                deepMerge_v2: () => B,
                delegator: () => W,
                getClientDt: () => G,
                isElementInViewport: () => z,
                isMobileBrowser: () => J,
                isNumber: () => Q,
                loadCssAsync: () => Z,
                loadJsAsync: () => Y,
                lockPromise: () => R,
                nextTick: () => H,
                objectSerializer: () => A,
                once: () => N,
                repeat: () => F,
                serializeToFormData: () => O,
                sleep: () => q,
                throttle: () => U
            });
            n(74233),
            n(68815),
            n(73704),
            n(8730),
            n(54729),
            n(33345),
            n(35136),
            n(8913),
            n(98479),
            n(35342),
            n(22333);
            NodeList.prototype.toArray = function() {
                return Array.prototype.slice.call(this)
            }
            ,
            HTMLCollection.prototype.forEach = function(e) {
                Array.prototype.slice.call(this).forEach(( (t, n, r) => e(t, n, r)))
            }
            ,
            window.requestIdleCallback || (window.requestIdleCallback = function(e) {
                setTimeout(e, 1)
            }
            );
            var s = n(92901)
              , o = n(30694);
            let i = function() {
                function e() {}
                var t = e.prototype;
                return t.init = function() {
                    const e = {}
                      , t = document.querySelector(".j-lk-menu-top")
                      , n = [{
                        type: "top",
                        selector: document.querySelector(".j-lk-menu-top")
                    }];
                    return this.alternateRoutes = new Map,
                    n.forEach((t => t.selector.querySelectorAll("a").forEach((t => {
                        var n;
                        let r;
                        try {
                            r = new URL(t.href).pathname
                        } catch (e) {
                            return
                        }
                        const s = "true" == t.dataset.main
                          , o = "true" == t.dataset.sub
                          , i = t.parentElement;
                        e.hasOwnProperty(r) || (e[r] = {
                            links: [],
                            elements: []
                        });
                        const a = t.closest(s ? "li" : "ul");
                        e[r].elements.push(a),
                        e[r].links.push({
                            el: i,
                            isMainMenu: s,
                            isSubMenu: o,
                            path: r,
                            switch: i.dataset.switch,
                            altSwitch: i.dataset.altSwitch
                        }),
                        null === (n = t.dataset.altRoutes) || void 0 === n || n.split(",").forEach((e => {
                            e && this.alternateRoutes.set(e.trim(), r)
                        }
                        )),
                        "6" === a.dataset.attr && (this.walletWrapperEl = a,
                        this.walletEl = t,
                        this.walletEl.innerText = wb.settings.balanceTitle,
                        this.walletWrapperEl.classList.add(wb.settings.walletTypeCode > 0 ? "lk-menu-main__item--wallet" : "lk-menu-main__item--balance"))
                    }
                    )))),
                    this.menuDictionary = e,
                    this.menuDictionaryKeys = Object.keys(this.menuDictionary),
                    this.root = t,
                    this.roots = n.map((e => e.selector)),
                    this.nextAnimationFrame = null,
                    this._initDropDownMenu(),
                    this.toggleVisibilityNodes(),
                    wb.global.subscribe(this.toggleVisibilityNodes.bind(this)),
                    $.observe(wb.settings, "balanceTitle", ( () => {
                        this.walletEl.innerText = wb.settings.balanceTitle,
                        this.walletWrapperEl.classList.add(wb.settings.walletTypeCode > 0 ? "lk-menu-main__item--wallet" : "lk-menu-main__item--balance")
                    }
                    )),
                    this
                }
                ,
                t.setStatic = function(e) {
                    this.stylesLink = e.stylesLink
                }
                ,
                t.updateMenu = function(e, t, n) {
                    if (this.toggleVisibility(t, n),
                    "/" != e[0] && (e = "/" + e),
                    null == this.root)
                        return;
                    const r = this.alternateRoutes.get(e);
                    r && (e = r);
                    const s = this.menuDictionary[e];
                    if (null == s)
                        return;
                    const o = s.elements.length > 0 ? s.elements[0].dataset.attr : "";
                    this.menuDictionaryKeys.forEach((t => {
                        const n = this.menuDictionary[t].elements;
                        if (n.length > 0) {
                            const e = n[0].dataset.attr == o;
                            n.forEach((t => t.classList.toggle("active", e)))
                        }
                        this.menuDictionary[t].links.forEach((t => {
                            !t.isMainMenu && t.el.classList.toggle("active", t.path == e)
                        }
                        ))
                    }
                    ))
                }
                ,
                t.toggleVisibility = function(e, t) {
                    if (!e || !e.visible || e.authOnly && void 0 !== t && !t)
                        return this.hide();
                    this.show()
                }
                ,
                t.toggleVisibilityNodes = function() {
                    this.menuDictionaryKeys.forEach((e => {
                        this.menuDictionary[e].links.forEach((e => {
                            if (e.switch || e.altSwitch) {
                                let t = wb.global.settings.switches[e.switch];
                                if (!t && e.altSwitch && (t = wb.global.settings.switches[e.altSwitch],
                                t))
                                    for (const [t,n] of this.alternateRoutes)
                                        if (n == e.path) {
                                            const n = e.el.querySelector("a");
                                            if (n) {
                                                n.href = t;
                                                break
                                            }
                                        }
                                e.el.classList.toggle("hide", !t)
                            }
                        }
                        ))
                    }
                    ))
                }
                ,
                t.show = async function() {
                    await this.$helper.loadCssAsync(this.stylesLink),
                    this.roots.forEach((e => e.classList.remove("hide"))),
                    "ru" == wb.settings.currentLocale || wb.global.userSettings.closed.includes("new_fin_oper_loc") || (wb.global.userSettings.closed.push("new_fin_oper_loc"),
                    wb.global.saveUserSettings(),
                    this._showFinOperationsTooltip())
                }
                ,
                t.hide = function() {
                    this.roots.forEach((e => e.classList.add("hide")))
                }
                ,
                t._initDropDownMenu = function() {
                    const e = ["mouseleave", "click"];
                    this.menuDictionaryKeys.forEach((t => {
                        this.menuDictionary[t].links.forEach((t => {
                            t.isMainMenu && t.el.addEventListener("mouseover", ( () => {
                                t.isMainMenu && t.el.classList.add("open")
                            }
                            )),
                            e.forEach((function(e) {
                                t.isMainMenu && t.el.addEventListener(e, (function() {
                                    t.isMainMenu && t.el.classList.remove("open")
                                }
                                ))
                            }
                            ))
                        }
                        ))
                    }
                    )),
                    this._addClickStat()
                }
                ,
                t._addClickStat = function() {
                    this.roots.forEach((e => {
                        e.addEventListener("click", (e => {
                            var t, n;
                            const r = null === (t = e.target) || void 0 === t ? void 0 : t.closest("a")
                              , s = null === (n = null == r ? void 0 : r.dataset) || void 0 === n ? void 0 : n.lkHeaderWba;
                            if (!s)
                                return;
                            const o = `${s}_T`;
                            this.$analitic.sendEvent(o)
                        }
                        ))
                    }
                    ))
                }
                ,
                t._showFinOperationsTooltip = function() {
                    const e = "lk-menu-main__item--tooltip-active"
                      , t = document.getElementById("menuTooltipTarget");
                    if (!t)
                        return;
                    const n = t.querySelector(".j-tooltip-close")
                      , r = () => t.classList.remove(e);
                    null == n || n.addEventListener("click", r),
                    setTimeout(r, 6e3),
                    t.classList.add(e)
                }
                ,
                e
            }();
            const a = i;
            var l = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            const c = ["ru-basket-api.wildberries.ru", "basket-api.wildberries.by", "basket-api.wildberries.kz", "basket-api.wildberries.kg", "basket-api.wildberries.am", "basket-api.wildberries.uz", "localhost", "wbxoofex.wildberries.ru", "logistics.wb.ru", "user-geo-data.wildberries.ru", "shopper-bt.wb.ru"]
              , u = ["www.wildberries.ru", "www.wildberries.by", "www.wildberries.kz", "www.wildberries.kg", "kz.wildberries.ru", "www.wildberries.am", "www.wildberries.uz", "ru-basket-api.wildberries.ru", "basket-api.wildberries.by", "basket-api.wildberries.kz", "basket-api.wildberries.kg", "basket-api.wildberries.am", "basket-api.wildberries.uz", "localhost"];
            let d = function() {
                function e() {}
                var t = e.prototype;
                return t.fetchJSON = async function(e, t={}, n={}) {
                    var r;
                    let s;
                    try {
                        if (n.timeout) {
                            const e = new AbortController;
                            setTimeout(( () => e.abort()), n.timeout),
                            t.signal = e.signal
                        }
                        let r;
                        switch (s = await this.fetch(e, t),
                        this._wrapTimeout(s, n),
                        s.status) {
                        case 401:
                        case 403:
                            throw new UnauthorizeError({
                                jwtDrop: s.headers.has("X-Jwt-Drop")
                            });
                        case 404:
                            throw new NotFoundError;
                        case 204:
                        case 208:
                            r = null;
                            break;
                        default:
                            if (!s.ok) {
                                const e = new Error(`Fetch failed with status code ${s.status}`);
                                throw e.status = s.status,
                                n.keepRespData && (e.data = await s.json()),
                                e
                            }
                            r = await s.json()
                        }
                        return n.noProcessResponse || null == r ? n.includeResponse ? {
                            response: s,
                            responseData: r,
                            headers: s.headers
                        } : r : new Promise(( (e, t) => {
                            $.processResponse(r, (t => n.includeResponse ? e({
                                response: s,
                                responseData: t,
                                headers: s.headers
                            }) : e(t)), (e => t(new KnownServerError(e))), (t => n.includeResponse ? e({
                                response: s,
                                responseData: t,
                                headers: s.headers
                            }) : e(t)))
                        }
                        ))
                    } catch (o) {
                        let i = o;
                        if ("AbortError" == o.name && n.throwAbortError)
                            throw o;
                        const a = !o.isCustomError && o instanceof TypeError && ("Failed to fetch" === o.message || "NetworkError when attempting to fetch resource." === o.message || "Cancelled" === o.message);
                        if (a && (i = new CancelledRequestError(o.message)),
                        (a || "AbortError" == o.name) && n.tryResend)
                            return WbSpaModel.prototype.$services.retryFetchService.saveRequest(e, t, n),
                            Promise.resolve({});
                        if (n.hasOwnProperty("defaultValue"))
                            return n.includeResponse ? {
                                response: s,
                                responseData: n.defaultValue
                            } : n.defaultValue;
                        throw i.isCustomError || "AbortError" !== o.name && console.error(`Unknown server error, msg=${o.message}, requested_url=${e}`),
                        i.isUnauthorize && (i.jwtDrop && WbSpaModel.prototype.$auth.setToken(null),
                        n.redirectUnauth && wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        }, null !== (r = n.replaceState) && void 0 !== r && r)),
                        i
                    }
                }
                ,
                t.fetchBasicJSON = async function(e, t={}, n={}) {
                    var r, s, o, i;
                    if (n.timeout) {
                        const e = new AbortController;
                        setTimeout(( () => e.abort()), n.timeout),
                        t.signal = e.signal
                    }
                    if (!t.headers && (t.headers = new Headers),
                    n.addUserHeader) {
                        const e = WbSpaModel.prototype.$user.getId();
                        e && t.headers.set("X-Userid", e)
                    }
                    const a = WbSpaModel.prototype.$auth.jwt;
                    n.addAuthHeader && a && t.headers.set("Authorization", `Bearer ${a}`);
                    const l = null !== (r = n.retry) && void 0 !== r ? r : 1;
                    let c;
                    for (let r = 1; r <= l; r++)
                        try {
                            if (n.addCatalogCaptcha && (null === (s = wb.global) || void 0 === s ? void 0 : s.settings.switches.enableCatalogCaptcha) && !a) {
                                const e = null !== (o = WbSpaModel.prototype.$services.parseTokenService) && void 0 !== o ? o : await WbSpaModel.prototype.$getService("parseTokenService")
                                  , n = await e.getTokenCatalog();
                                n && t.headers.set("X-Captcha-ID", `Catalog ${n}`)
                            }
                            return await this.fetch(e, t).then((async t => {
                                var r, s, o;
                                if (204 === t.status)
                                    return Promise.resolve(n.return204 ? t : null);
                                if (208 === t.status)
                                    return Promise.resolve(null);
                                if (t.ok)
                                    return c = await t.json(),
                                    "v2" === n.v && c.error ? Promise.reject(new KnownServerError(c.error)) : c;
                                if (n.addCatalogCaptcha && (null === (r = wb.global) || void 0 === r ? void 0 : r.settings.switches.enableCatalogCaptcha) && 498 === t.status)
                                    throw null === (s = WbSpaModel.prototype.$services.parseTokenService) || void 0 === s || s.resetToken(),
                                    new Error("Need refresh token");
                                if ("v2" === n.v)
                                    return Promise.reject(new NetworkError);
                                n.logOff || null === (o = wb.spa) || void 0 === o || o.logError(new Error(`Failed fetch. status:${t.status}; type:${t.type}`), {
                                    url: e
                                })
                            }
                            ))
                        } catch (t) {
                            if ((t.isCustomError || t.isNetworkError) && "v2" === n.v)
                                return Promise.reject(t);
                            if ("AbortError" === t.name && n.throwAbortError)
                                throw t;
                            if (t instanceof TypeError && "Cancelled" === t.message)
                                return null;
                            if (n.logOff || null === (i = wb.spa) || void 0 === i || i.logError(t, {
                                url: e,
                                attempt: r
                            }),
                            r === l && n.nullOnError)
                                return null;
                            if (r === l && t instanceof TypeError && ("Failed to fetch" === t.message || "NetworkError when attempting to fetch resource." === t.message))
                                throw new NetworkError
                        }
                    return null
                }
                ,
                t.fetchText = async function(e, t, n={}) {
                    var r;
                    let s;
                    if (n.timeout) {
                        const e = new AbortController;
                        setTimeout(( () => e.abort()), n.timeout),
                        t.signal = e.signal
                    }
                    try {
                        let r;
                        if (s = await this.fetch(e, t),
                        401 === s.status)
                            throw new UnauthorizeError;
                        return s.ok && (r = await s.text()),
                        this._wrapTimeout(s, n),
                        r
                    } catch (t) {
                        let s = t;
                        throw !t.isCustomError && t instanceof TypeError && ("Failed to fetch" === t.message || "NetworkError when attempting to fetch resource." === t.message || "Cancelled" === t.message) && (s = new CancelledRequestError),
                        s.isCustomError || (console.log(t.message),
                        s = new KnownServerError("Unknown server error, msg=" + t.message + ", requested_url=" + e)),
                        s.isUnauthorize && (s.jwtDrop && WbSpaModel.prototype.$auth.setToken(null),
                        n.redirectUnauth && wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        }, null !== (r = n.replaceState) && void 0 !== r && r)),
                        s
                    }
                }
                ,
                t.fetchStaticDataV2 = async function(e, t=3e4, n="json") {
                    var r, s;
                    return "text" === n ? null !== (r = await this.fetchText(wb.helpers.url.urlStaticData("data/" + e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== r ? r : await this.fetchText(wb.helpers.url.urlStaticDataObsolete(e), {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    }) : null !== (s = await this.fetchBasicJSON(wb.helpers.url.urlStaticData("data/" + e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== s ? s : await this.fetchBasicJSON(wb.helpers.url.urlStaticDataObsolete(e), {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    })
                }
                ,
                t.fetchStaticV2 = async function(e, t=3e4, n="json") {
                    var r, s;
                    return "text" === n ? null !== (r = await this.fetchText(wb.helpers.url.urlStaticData(e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== r ? r : await this.fetchText(e, {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    }) : null !== (s = await this.fetchBasicJSON(wb.helpers.url.urlStaticData(e), {}, {
                        timeout: t,
                        nullOnError: !0
                    })) && void 0 !== s ? s : await this.fetchBasicJSON(e, {
                        cache: "no-cache"
                    }, {
                        timeout: t,
                        nullOnError: !0
                    })
                }
                ,
                t.fetch = function(e) {
                    function t(t) {
                        return e.apply(this, arguments)
                    }
                    return t.toString = function() {
                        return e.toString()
                    }
                    ,
                    t
                }((async function(e, t={}) {
                    const {headers: n={}} = t
                      , r = l(t, ["headers"])
                      , s = new Headers(n)
                      , o = WbSpaModel.prototype;
                    let i = !1;
                    try {
                        const t = new URL(e.startsWith("//") ? `${document.location.protocol}${e}` : e);
                        (t.hostname === window.location.host && t.port === window.location.port || c.includes(t.hostname)) && (u.includes(t.hostname) && (s.set("X-Spa-Version", WbSpaModel.appVersion),
                        s.set("X-Requested-With", "XMLHttpRequest"),
                        s.set("DeviceId", o.$services.sessionService.getSession()),
                        o.$adult.isConfirmed && s.set("adultConfirmed", "1")),
                        !s.has("Authorization") && o.$auth.jwt && s.set("Authorization", `Bearer ${o.$auth.jwt}`))
                    } catch (e) {
                        i = !0,
                        s.set("X-Requested-With", "XMLHttpRequest"),
                        s.set("X-Spa-Version", WbSpaModel.appVersion),
                        s.set("DeviceId", o.$services.sessionService.getSession()),
                        !s.has("Authorization") && o.$auth.jwt && s.set("Authorization", `Bearer ${o.$auth.jwt}`),
                        o.$adult.isConfirmed && s.set("adultConfirmed", "1")
                    }
                    return t.body instanceof URLSearchParams && (s.set("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8"),
                    r.body = r.body.toString()),
                    fetch(e, Object.assign({
                        credentials: "same-origin",
                        headers: s
                    }, r)).then((e => {
                        var t;
                        if (i && (null === (t = null === wb || void 0 === wb ? void 0 : wb.helpers) || void 0 === t ? void 0 : t.date)) {
                            const t = e.headers.get("Date");
                            wb.helpers.date.serverDate = new Date(t)
                        }
                        return e
                    }
                    ))
                }
                )),
                t._wrapTimeout = function(e, t) {
                    return t && e.headers.has("X-Timeout") && (t.modified = {
                        timeout: !0
                    }),
                    t
                }
                ,
                e
            }();
            const h = new d;
            let p = function() {
                function e() {}
                var t = e.prototype;
                return t.fetch = async function(e, t, n, r) {
                    var s;
                    const o = WbSpaModel.prototype.$auth;
                    let i = o.getToken();
                    const a = null == r ? void 0 : r(null === (s = i.data) || void 0 === s ? void 0 : s.shard_key);
                    if (null == t ? void 0 : t.timeout) {
                        const e = new AbortController;
                        setTimeout(( () => e.abort()), t.timeout),
                        t.signal = e.signal
                    }
                    return this._fetch(`${a || ""}${e}`, t, i.token).then((async t => {
                        if (t.ok) {
                            const e = +t.headers.get("content-length");
                            if (e > 16 && e < 256) {
                                const e = await t.clone().json();
                                -1 === (null == e ? void 0 : e.state) && 41 === e.reason && o._slide(!0)
                            }
                            return t
                        }
                        function r(n, r) {
                            return wb.spa.logError({
                                message: n
                            }, {
                                status: r,
                                msg: "wbx_fetch"
                            }),
                            Promise.reject(new Error(`url:${e}, response:${n}, code:${t.status}`))
                        }
                        return 401 === t.status && o._slide(!0),
                        "function" == typeof n ? n(t, r) : t.text().then((e => r(e, t.status)))
                    }
                    ))
                }
                ,
                t.postJSON = async function(e, t, n) {
                    return this._fetchJSON(e, t, n, "POST")
                }
                ,
                t.getJSON = async function(e, t) {
                    return this._fetchJSON(e, null, t, "GET")
                }
                ,
                t._fetch = function(e, t, n) {
                    return n ? (!t && (t = {}),
                    t.headers = Object.assign({}, t.headers, {
                        Authorization: "Bearer " + n
                    }),
                    WbSpaModel.prototype.$httpClient.fetch(e, t)) : Promise.reject("miss accessToken")
                }
                ,
                t._fetchJSON = async function(e, t, n, r) {
                    const s = {
                        method: r
                    };
                    Object.assign(s, n),
                    s.headers = {
                        "X-Service-Name": "site"
                    },
                    t && (s.headers["Content-Type"] = "application/json",
                    s.body = t);
                    const o = await this.fetch(e, s);
                    if (o.ok)
                        return await o.json()
                }
                ,
                e
            }();
            const m = new p
              , g = "wbx__tokenData"
              , f = "v2"
              , y = `/${f}/auth/slide-v3`
              , v = `/${f}/auth/slide-v3-confirm`
              , b = `/${f}/auth/logoff`;
            let w = function() {
                function e() {
                    this._pull(),
                    window.addEventListener("storage", (e => {
                        e.key === g && this._pull()
                    }
                    ))
                }
                var t = e.prototype;
                return t.getToken = function() {
                    if (this.jwt)
                        if (this.isWbxSite)
                            this._slide(!1, !0);
                        else {
                            this._isJwtExpired(this.jwtData) && this._slide()
                        }
                    return this._data
                }
                ,
                t.setToken = function(e) {
                    try {
                        if (e) {
                            const t = this._tryDecodeJwt(e);
                            if (t) {
                                this._data = {
                                    token: e,
                                    data: t,
                                    um: this._createUm(t)
                                };
                                try {
                                    localStorage.putObject(g, {
                                        token: e
                                    })
                                } catch (e) {}
                                return
                            }
                        }
                        this._data = {
                            token: null,
                            data: {},
                            um: this._createUm()
                        },
                        localStorage.removeItem(g)
                    } catch (e) {} finally {
                        this._jwtUpdateResp = null
                    }
                }
                ,
                t.signOut = async function(e) {
                    if (!this.isAuth)
                        return;
                    const t = new AbortController;
                    setTimeout(( () => t.abort()), 2e3),
                    await this._fetch(b, {
                        method: "POST",
                        credentials: "include",
                        signal: t.signal,
                        headers: {
                            deviceid: WbSpaModel.prototype.$services.sessionService.getSession(),
                            "wb-apptype": "web",
                            "wb-appversion": WbSpaModel.appVersion
                        }
                    }).catch((e => Promise.resolve({
                        isNetworkError: !0
                    }))),
                    this.signOutOld(e),
                    this.setToken(null)
                }
                ,
                t.signOutOld = async function(e) {
                    return WbSpaModel.prototype.$httpClient.fetchJSON(`/webapi/security/exit?returnUrl=${encodeURIComponent(e || "")}`, {
                        method: "POST"
                    })
                }
                ,
                t._pull = function() {
                    var e;
                    const t = null === (e = localStorage.getObject(g)) || void 0 === e ? void 0 : e.token
                      , n = this._tryDecodeJwt(t);
                    this._data = n ? {
                        token: t,
                        data: n,
                        um: this._createUm(n)
                    } : {
                        token: null,
                        data: {},
                        um: this._createUm(n)
                    }
                }
                ,
                t._isJwtExpired = function(e) {
                    return Date.now() >= 1e3 * (e.iat + 172800)
                }
                ,
                t._isJwtShortExpired = function(e) {
                    return Date.now() >= 1e3 * (e.iat + 120)
                }
                ,
                t._slide = function(e, t) {
                    try {
                        return this._slideToken(e, t)
                    } catch (e) {
                        wb.spa.logError(e, {
                            msg: "wbx_auth_slide"
                        })
                    }
                }
                ,
                t._createUm = function(e) {
                    let t = null == e ? void 0 : e.user;
                    if (t) {
                        t = `user:${t}`;
                        const e = [];
                        for (let n = 0; n < t.length; n++)
                            e.push(129 ^ t.charCodeAt(n));
                        return {
                            userUid: btoa(String.fromCodePoint(...(new TextEncoder).encode(String.fromCharCode.apply(null, e)))),
                            userId: t
                        }
                    }
                    return {
                        userUid: "",
                        userId: ""
                    }
                }
                ,
                t._tryDecodeJwt = function(e) {
                    try {
                        if (!e)
                            return null;
                        const [t,n,r] = e.split(".");
                        if (!(t || n || r))
                            return null;
                        const s = atob(n);
                        return s ? JSON.parse(s) || {} : null
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                }
                ,
                t.slideRefreshCookie = function() {
                    return WbSpaModel.prototype.$httpClient.fetchBasicJSON("v2/auth/sliderefresh", {
                        method: "POST",
                        credentials: "include"
                    })
                }
                ,
                t.delRefreshCookie = function() {
                    return WbSpaModel.prototype.$httpClient.fetch("v2/auth/delrefresh", {
                        method: "POST",
                        credentials: "include"
                    }).catch(( () => {}
                    ))
                }
                ,
                t._fetch = function(e, t) {
                    return WbSpaModel.prototype.$httpClient.fetch(this.AUTH_HOST + e, t)
                }
                ,
                t._slideToken = async function(e, t) {
                    navigator.locks.request("lock-auth-slide", (async n => {
                        var r;
                        if (!this.jwt)
                            return;
                        if (t && this.isWbxSite && this._isJwtShortExpired(this.jwtData)) {
                            const t = await this.slideRefreshCookie().catch(( () => {}
                            ));
                            0 === (null == t ? void 0 : t.ResultState) ? e = !0 : -1 === (null == t ? void 0 : t.ResultState) && localStorage.removeItem("wbx__exchangeRates")
                        }
                        if (e && !this._isJwtShortExpired(this.jwtData))
                            return;
                        if (!e && !this._isJwtExpired(this.jwtData))
                            return;
                        const s = new AbortController;
                        setTimeout(( () => s.abort()), 1e4);
                        const o = WbSpaModel.prototype.$services.sessionService.getSession()
                          , i = await this._fetch(y, {
                            method: "POST",
                            credentials: "include",
                            signal: s.signal,
                            headers: {
                                deviceid: o,
                                "wb-apptype": "web",
                                "wb-appversion": WbSpaModel.appVersion
                            }
                        }).then((e => e.ok ? e.json() : {})).then((e => (e.error && wb.spa.logError(new Error(`[wbx_auth_slide]: res: ${e.result}, error: ${e.error}`)),
                        e))).catch(( () => ({})));
                        if (t && (await this.delRefreshCookie(),
                        localStorage.removeItem("wbx__exchangeRates")),
                        12 !== i.result) {
                            if (0 === i.result && (null === (r = i.payload) || void 0 === r ? void 0 : r.sticker) && i.payload.access_token) {
                                const e = JSON.stringify({
                                    sticker: i.payload.sticker
                                })
                                  , t = await this._fetch(v, {
                                    method: "POST",
                                    credentials: "include",
                                    signal: s.signal,
                                    headers: {
                                        deviceid: o,
                                        "wb-apptype": "web",
                                        "wb-appversion": WbSpaModel.appVersion
                                    },
                                    body: e
                                }).then((e => e.ok ? e.json() : {})).then((e => (e.error && wb.spa.logError(new Error(`[wbx_auth_slide_confirm]: res: ${e.result}, error: ${e.error}`)),
                                e))).catch(( () => ({})));
                                12 === t.result ? this.setToken(null) : 0 === t.result && this.setToken(i.payload.access_token)
                            }
                        } else
                            this.setToken(null)
                    }
                    ))
                }
                ,
                t.sendMetrics = function(e, t) {
                    try {
                        WbSpaModel.prototype.$httpClient.fetch(`/webapi/logging/wbxauth/metrics?act=${e}&status=${t}`, {
                            method: "POST"
                        })
                    } catch (e) {}
                }
                ,
                (0,
                s.A)(e, [{
                    key: "AUTH_HOST",
                    get: function() {
                        let e = wb.settings.currentDomain;
                        return "kz" === e && (e = "ru"),
                        `https://wbx-auth.wildberries.${e}`
                    }
                }, {
                    key: "isAuth",
                    get: function() {
                        return !!this._data.token
                    }
                }, {
                    key: "jwt",
                    get: function() {
                        return this._data.token
                    }
                }, {
                    key: "jwtData",
                    get: function() {
                        return this._data.data
                    }
                }, {
                    key: "isUserGuid",
                    get: function() {
                        var e;
                        return isNaN(null === (e = this.jwtData) || void 0 === e ? void 0 : e.user)
                    }
                }, {
                    key: "um",
                    get: function() {
                        return this._data.um
                    }
                }, {
                    key: "shard",
                    get: function() {
                        var e;
                        return Number(null === (e = this.jwtData) || void 0 === e ? void 0 : e.shard_key) || 1
                    }
                }, {
                    key: "sShard",
                    get: function() {
                        return $.views.converters.leadZero(this.shard, 2)
                    }
                }, {
                    key: "isWbxSite",
                    get: function() {
                        return localStorage.hasItem("wbx__exchangeRates")
                    }
                }])
            }();
            const S = new w;
            n(75281),
            n(61506);
            function _(e) {
                return e < 26 ? e + 65 : e < 52 ? e + 71 : e < 62 ? e - 4 : 62 === e ? 43 : 63 === e ? 47 : 65
            }
            function C(e) {
                for (var t = 2, n = "", r = e.length, s = 0, o = 0; o < r; o++)
                    t = o % 3,
                    s |= e[o] << (16 >>> t & 24),
                    2 !== t && e.length - o != 1 || (n += String.fromCodePoint(_(s >>> 18 & 63), _(s >>> 12 & 63), _(s >>> 6 & 63), _(63 & s)),
                    s = 0);
                return n.substr(0, n.length - 2 + t) + (2 === t ? "" : 1 === t ? "=" : "==")
            }
            let I = function() {
                function e() {}
                return e.decode = function(e) {
                    return e ? function(e) {
                        for (var t, n = "", r = e.length, s = 0; s < r; s++)
                            t = e[s],
                            n += String.fromCodePoint(t > 251 && t < 254 && s + 5 < r ? 1073741824 * (t - 252) + (e[++s] - 128 << 24) + (e[++s] - 128 << 18) + (e[++s] - 128 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 247 && t < 252 && s + 4 < r ? (t - 248 << 24) + (e[++s] - 128 << 18) + (e[++s] - 128 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 239 && t < 248 && s + 3 < r ? (t - 240 << 18) + (e[++s] - 128 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 223 && t < 240 && s + 2 < r ? (t - 224 << 12) + (e[++s] - 128 << 6) + e[++s] - 128 : t > 191 && t < 224 && s + 1 < r ? (t - 192 << 6) + e[++s] - 128 : t);
                        return n
                    }(function(e, t) {
                        for (var n, r, s, o = e.replace(/[^A-Za-z0-9\+\/]/g, ""), i = o.length, a = t ? Math.ceil((3 * i + 1 >> 2) / t) * t : 3 * i + 1 >> 2, l = new Uint8Array(a), c = 0, u = 0, d = 0; d < i; d++)
                            if (r = 3 & d,
                            c |= ((s = o.charCodeAt(d)) > 64 && s < 91 ? s - 65 : s > 96 && s < 123 ? s - 71 : s > 47 && s < 58 ? s + 4 : 43 === s ? 62 : 47 === s ? 63 : 0) << 6 * (3 - r),
                            3 === r || i - d == 1) {
                                for (n = 0; n < 3 && u < a; n++,
                                u++)
                                    l[u] = c >>> (16 >>> n & 24) & 255;
                                c = 0
                            }
                        return l
                    }(e)) : null
                }
                ,
                e.encode = function(e) {
                    return e ? C(function(e) {
                        for (var t, n, r = e.length, s = 0, o = 0; o < r; o++)
                            (n = e.codePointAt(o)) > 65536 && o++,
                            s += n < 128 ? 1 : n < 2048 ? 2 : n < 65536 ? 3 : n < 2097152 ? 4 : n < 67108864 ? 5 : 6;
                        t = new Uint8Array(s);
                        for (var i = 0, a = 0; i < s; a++)
                            (n = e.codePointAt(a)) < 128 ? t[i++] = n : n < 2048 ? (t[i++] = 192 + (n >>> 6),
                            t[i++] = 128 + (63 & n)) : n < 65536 ? (t[i++] = 224 + (n >>> 12),
                            t[i++] = 128 + (n >>> 6 & 63),
                            t[i++] = 128 + (63 & n)) : n < 2097152 ? (t[i++] = 240 + (n >>> 18),
                            t[i++] = 128 + (n >>> 12 & 63),
                            t[i++] = 128 + (n >>> 6 & 63),
                            t[i++] = 128 + (63 & n),
                            a++) : n < 67108864 ? (t[i++] = 248 + (n >>> 24),
                            t[i++] = 128 + (n >>> 18 & 63),
                            t[i++] = 128 + (n >>> 12 & 63),
                            t[i++] = 128 + (n >>> 6 & 63),
                            t[i++] = 128 + (63 & n),
                            a++) : (t[i++] = 252 + (n >>> 30),
                            t[i++] = 128 + (n >>> 24 & 63),
                            t[i++] = 128 + (n >>> 18 & 63),
                            t[i++] = 128 + (n >>> 12 & 63),
                            t[i++] = 128 + (n >>> 6 & 63),
                            t[i++] = 128 + (63 & n),
                            a++);
                        return t
                    }(e)) : ""
                }
                ,
                e.encodeBytesArr = function(e) {
                    return C(e)
                }
                ,
                e
            }();
            const M = I
              , k = {
                cache: {},
                onFirstExecution() {
                    0 === Object.keys(this.cache).length && document.querySelectorAll("script[type='text/javascript']").forEach((e => {
                        "" !== e.src && (this.cache[e.src.replace(/https?:/, "")] = Promise.resolve())
                    }
                    ))
                },
                require(e) {
                    let t = this.cache[e];
                    return null == t && (this.onFirstExecution(),
                    t = this.cache[e],
                    null == t && (t = this.cache[e] = T(e, this.loadScriptAsync))),
                    t.catch((t => (this.cache[e] = null,
                    Promise.reject(t))))
                },
                loadScriptAsync: e => new Promise(( (t, n) => {
                    try {
                        const r = document.createElement("script");
                        r.type = "text/javascript",
                        r.src = e,
                        r.readyState ? r.onreadystatechange = function() {
                            "loaded" !== r.readyState && "complete" !== r.readyState || (r.onreadystatechange = null,
                            t())
                        }
                        : r.onload = t,
                        r.onerror = n,
                        document.body.appendChild(r)
                    } catch (e) {
                        n(e)
                    }
                }
                ))
            }
              , P = {
                cashe: {},
                orinalStylesIncluded: !1,
                require(e) {
                    return new Promise(( (t, n) => {
                        this.orinalStylesIncluded || this.addOrinalStyles(),
                        null == this.cashe[e] && (this.cashe[e] = T(e, this.loadCssAsync)),
                        this.cashe[e].then(t).catch((t => {
                            this.cashe[e] = null,
                            n(t)
                        }
                        ))
                    }
                    ))
                },
                addOrinalStyles() {
                    this.orinalStylesIncluded = !0,
                    document.querySelectorAll("link[type='text/css']").forEach((e => this.cashe[e.href.replace(/https?:/, "")] = Promise.resolve()))
                },
                loadCssAsync: e => new Promise(( (t, n) => {
                    let r;
                    if (navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0) {
                        const s = document.createElement("link");
                        s.href = e,
                        s.type = "text/css",
                        s.rel = "stylesheet",
                        s.onload = t,
                        s.onerror = n,
                        r = s
                    } else {
                        const s = document.createElement("style");
                        s.onload = t,
                        s.textContent = `@import "${e}"`,
                        s.onload = t,
                        s.onerror = n,
                        r = s
                    }
                    document.querySelector("head").appendChild(r)
                }
                ))
            };
            async function T(e, t) {
                return new Promise(( (n, r) => {
                    t(e).then((e => n())).catch((r => t(wb.helpers.url.urlStaticDataFallback(e)).then((e => n()))))
                }
                ))
            }
            function A(e, t=new URLSearchParams, n=!1, r=!1) {
                const s = (e, o) => {
                    r && "boolean" == typeof o ? t.append(e, o.toString()) : "object" == typeof o && null != o ? Object.entries(o).forEach(( ([n,r]) => {
                        s(`${e}[${n}]`, r, t)
                    }
                    )) : n && null == o || t.append(e, o)
                }
                ;
                return Object.entries(e).forEach(( ([e,t]) => s(e, t))),
                t
            }
            function O(e, t=new FormData) {
                const n = (e, r="") => {
                    for (let s in e) {
                        const o = e[s];
                        let i = s;
                        r && (i = Array.isArray(e) ? `${r}[${s}]` : `${r}.${s}`),
                        "boolean" == typeof o ? t.append(i, o.toString()) : "string" == typeof o || "number" == typeof o ? t.append(i, o) : "object" == typeof o && n(o, i)
                    }
                }
                ;
                return n(e),
                t
            }
            const D = function() {
                const e = wb.cookieHelper.getCookie(".AspNetCore.Culture");
                if (e) {
                    const t = e.match(/^c=([a-z]{2})(-[A-Z]{2})?\|uic=([a-z]{2})(-[A-Z]{2})?$/);
                    if (t)
                        return t[1]
                }
                return document.documentElement.getAttribute("lang")
            }();
            function E() {
                let e = arguments[0]
                  , t = t => {
                    for (let n in t)
                        t.hasOwnProperty(n) && ("[object Object]" === Object.prototype.toString.call(t[n]) && null != e[n] ? e[n] = E(e[n], t[n]) : e[n] = t[n])
                }
                ;
                for (let e = 1; e < arguments.length; e++)
                    t(arguments[e]);
                return e
            }
            function B() {
                let e = arguments[0]
                  , t = t => {
                    for (let n in t)
                        t.hasOwnProperty(n) && ("[object Object]" === Object.prototype.toString.call(t[n]) && null != e[n] ? e[n] = B(e[n], t[n]) : void 0 !== t[n] && (e[n] = t[n]))
                }
                ;
                for (let e = 1; e < arguments.length; e++)
                    t(arguments[e]);
                return e
            }
            const x = (e, t) => {
                let n = null;
                return (...r) => {
                    n && clearTimeout(n),
                    n = setTimeout(( () => {
                        e.apply(void 0, r),
                        n = null
                    }
                    ), t)
                }
            }
              , j = (e, t=300) => {
                let n;
                return function(...r) {
                    n || e.apply(this, r),
                    clearTimeout(n),
                    n = setTimeout(( () => n = null), t)
                }
            }
              , L = (e, t=300) => {
                let n;
                return function(...r) {
                    clearTimeout(n),
                    n = setTimeout(( () => {
                        e.apply(this, r)
                    }
                    ), t)
                }
            }
              , U = (e, t) => {
                let n, r, s = !1;
                return function o() {
                    if (s)
                        return n = arguments,
                        void (r = this);
                    e.apply(this, arguments),
                    s = !0,
                    setTimeout((function() {
                        s = !1,
                        n && (o.apply(r, n),
                        n = r = null)
                    }
                    ), t)
                }
            }
              , F = (e, t, n, r) => {
                let s = 0
                  , o = setInterval((function() {
                    if (s > t)
                        return clearInterval(o),
                        void (r && r());
                    e(o) && clearInterval(o),
                    s++
                }
                ), n);
                return o
            }
              , N = e => {
                let t;
                return function() {
                    return N.done || (t = e.apply(this, arguments),
                    N.done = !0),
                    t
                }
            }
              , R = e => {
                let t = null;
                return function() {
                    return t || (t = e.apply(this, arguments).then((e => e)).finally(( () => t = null))),
                    t
                }
            }
              , W = (e, t) => function(n) {
                const r = n.target.closest(e);
                null != r && t(n, r)
            }
              , H = () => Promise.resolve().then(( () => Promise.resolve()))
              , q = e => new Promise((t => setTimeout(t, e)));
            function z(e, t, n) {
                var r;
                const s = e.getBoundingClientRect();
                return n && (n.threshold = null !== (r = n.threshold) && void 0 !== r ? r : 10,
                Q(n.top)) ? s.top >= n.top - n.threshold && s.top <= n.top + n.threshold : s.top >= 0 && (t || s.left >= 0) && s.bottom <= (window.innerHeight || document.documentElement.clientHeight) && (t || s.right <= (window.innerWidth || document.documentElement.clientWidth))
            }
            function V() {
                this.promise = new Promise(( (e, t) => {
                    this.reject = t,
                    this.resolve = e
                }
                ))
            }
            function G() {
                const e = new Date
                  , t = new Date(e.getTime() - 6e4 * e.getTimezoneOffset()).toISOString();
                return t.slice(0, t.length - 1)
            }
            function J() {
                if (void 0 !== window._isMobileBrowser)
                    return window._isMobileBrowser;
                let e = !1;
                var t;
                return t = navigator.userAgent || navigator.vendor || window.opera,
                (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0, 4))) && (e = !0),
                window._isMobileBrowser = e,
                window._isMobileBrowser
            }
            function Q(e) {
                return !isNaN(parseFloat(e)) && isFinite(e)
            }
            function K(e, t) {
                const n = performance.now()
                  , r = () => performance.now() - n > e ? t() : window.requestAnimationFrame(r);
                window.requestAnimationFrame(r)
            }
            const X = M
              , Y = k.require.bind(k)
              , Z = P.require.bind(P);
            let ee = function() {
                function e() {
                    this.allModules = {},
                    this.modulesDict = {},
                    this.allServices = {},
                    this.servicesDict = {},
                    this.loadingServices = {}
                }
                var t = e.prototype;
                return t.init = function() {
                    return window.__spaModuleManager__ = {
                        register: (e, t) => {
                            this._enrichProto(t),
                            this.modulesDict[e] = t
                        }
                        ,
                        getModule: (e, t) => {
                            if (null != this.modulesDict[e] || t)
                                return this.modulesDict[e];
                            throw new Error("Module " + e + " has not been loaded yet")
                        }
                    },
                    window.__spaServiceManager__ = {
                        register: (e, t) => {
                            this._enrichProto(t),
                            this.servicesDict[e] = t
                        }
                        ,
                        getService: (e, t) => {
                            if (null != this.servicesDict[e] || t)
                                return this.servicesDict[e];
                            throw new Error("Service " + e + " has not been loaded yet")
                        }
                    },
                    this
                }
                ,
                t.setModules = function(e) {
                    this.allModules = e
                }
                ,
                t.setServices = function(e) {
                    this.allServices = e
                }
                ,
                t.loadServiceAsync = async function(e) {
                    const {physicalPath: t} = this.allServices[e] || {};
                    if (null == t)
                        throw new Error(e + " service doesnt exist");
                    const n = await this._loadServiceAsync(e, t);
                    this.$services[e] = new n
                }
                ,
                t.loadServiceAsSingletonAsync = async function(e) {
                    const {physicalPath: t} = this.allServices[e] || {};
                    if (null == t)
                        throw new Error(e + " service doesnt exist");
                    return this.loadingServices[e] || (this.loadingServices[e] = this._loadServiceAsync(e, t).then((t => (this.$services[e] = new t,
                    this.$services[e])))),
                    this.loadingServices[e]
                }
                ,
                t.loadModuleAsync = async function(e, t=!1) {
                    let {physicalPath: n, dataPath: r, hasTmpl: s, tmpls: o=[], templateId: i, isDynamic: a=!1, httpMethod: l="GET", cssPaths: c, jsPaths: u, apiName: d} = this.allModules[e] || {};
                    if (null == n)
                        throw new Error(e + " module doesnt exist");
                    const h = o.map((e => this._loadTemplateAsync(e)))
                      , p = this._loadTemplateAsync(s ? e : null, i)
                      , m = this._loadDataAsync(e, r, a, l, d)
                      , g = null == c ? [Promise.resolve(null)] : c.map((e => this.$helper.loadCssAsync(e)))
                      , f = null == u ? [Promise.resolve(null)] : u.map((e => this.$helper.loadJsAsync(e)))
                      , [y,v,b] = await Promise.all([this._loadModule(e, n, t), m, p, ...h, ...g, ...f]);
                    return null != y && (y.data = v,
                    y.template = b),
                    y
                }
                ,
                t.execModule = async function(e="", t="", n=[]) {
                    try {
                        (await this.loadModuleAsync(e))[t](...n)
                    } catch (e) {
                        console.error(e)
                    }
                }
                ,
                t._loadModule = async function(e, t, n) {
                    if (null == e || null == t)
                        throw new Error("path and name are required to load module");
                    return await this.$helper.loadJsAsync(t),
                    window.__spaModuleManager__.getModule(e, n)
                }
                ,
                t._loadServiceAsync = async function(e, t) {
                    if (null == e || null == t)
                        throw new Error("path and name are required to load service");
                    return await this.$helper.loadJsAsync(t),
                    window.__spaServiceManager__.getService(e)
                }
                ,
                t._loadDataAsync = async function(e, t, n, r, s) {
                    return null == t ? null : n || null == this.modulesDict[e] ? ("basket" === s && (t = `${this.$services.cartService.publicBasketApiUrl}${t}`),
                    await this.$httpClient.fetchJSON(t, {
                        method: r || "GET",
                        credentials: "include"
                    })) : this.modulesDict[e].data
                }
                ,
                t._loadTemplateAsync = async function(e, t, n) {
                    return null == e && null == t ? Promise.resolve(null) : t ? $.views.loadWebApiTemplateAsync(t, n) : $.views.loadTemplateAsync(e, n)
                }
                ,
                t._enrichProto = function(e) {
                    if (!e.prototype)
                        return;
                    let t = e.prototype
                      , n = null;
                    for (; (n = Object.getPrototypeOf(t)) && n != Object.prototype; )
                        t = n;
                    t != WbSpaModel.prototype && Object.setPrototypeOf(t, WbSpaModel.prototype)
                }
                ,
                e
            }();
            const te = ee;
            const ne = function() {
                function e() {
                    this.proceedIfAdultConfirmed = this.proceedIfAdultConfirmed.bind(this)
                }
                var t = e.prototype;
                return t.proceedIfAdultConfirmed = function(e, t, n, ...r) {
                    this.adultPopup.then((s => {
                        s.closePopup(),
                        !e || this.isConfirmed ? null == t || t.apply(n, r) : s.proceedIfAdultConfirmed(t, n, r).then((e => {
                            $.observable(this).setProperty({
                                isConfirmed: e
                            })
                        }
                        ))
                    }
                    ))
                }
                ,
                t.pushToQueue = function(e) {
                    this.adultPopup.then((t => t.pushToQueue(e)))
                }
                ,
                t.closePopup = function() {
                    this.adultPopup.then((e => e.closePopup()))
                }
                ,
                (0,
                s.A)(e, [{
                    key: "isConfirmed",
                    get: function() {
                        if (null == this._isConfirmed) {
                            const e = localStorage.getObject("__ac");
                            e && e.dtExp > Date.utcNow() ? this._isConfirmed = e.state : this._isConfirmed = !1
                        }
                        return this._isConfirmed
                    },
                    set: function(e) {
                        this._isConfirmed = e;
                        try {
                            localStorage.putObject("__ac", {
                                dtExp: Date.utcNow() + 36e5,
                                state: e
                            })
                        } catch (e) {}
                        return e
                    }
                }, {
                    key: "adultPopup",
                    get: function() {
                        return this._adultPopup ? Promise.resolve(this._adultPopup) : new Promise((e => {
                            WbSpaModel.prototype.$moduleLoader.loadModuleAsync("adultConfirmedPopup").then((t => {
                                this._adultPopup = new t,
                                e(this._adultPopup)
                            }
                            ))
                        }
                        ))
                    }
                }])
            }();
            const re = function() {
                function e() {}
                var t = e.prototype;
                return t.getVerticalObserver = function(e, t, n) {
                    return new se(e,t,n)
                }
                ,
                t.getCarouselBannersObserver = function(e, t, n) {
                    const r = Object.assign({
                        keepObserve: !0,
                        sendOutEvent: !0
                    }, null != n ? n : {});
                    return new se(e,t,r)
                }
                ,
                t.getSimpleObserver = function(e, t, n) {
                    if (WbSpaModel.prototype.$apiSupport.intersectionObserver) {
                        const r = {
                            threshold: .5
                        }
                          , s = Object.assign(r, null != t ? t : {})
                          , o = {
                            keepObserve: !1
                        }
                          , i = Object.assign(o, null != n ? n : {});
                        let a = [];
                        const l = new IntersectionObserver(( (t, n) => {
                            t.forEach((t => {
                                t.isIntersecting && (e(t.target, a.indexOf(t.target) + 1),
                                i.keepObserve || n.unobserve(t.target))
                            }
                            ))
                        }
                        ),s);
                        function c() {
                            null == l || l.disconnect()
                        }
                        function u(e) {
                            a.forEach((e => l.unobserve(e))),
                            a = [],
                            a = e,
                            a.forEach((e => l.observe(e)))
                        }
                        return {
                            observe: u,
                            destroy: c
                        }
                    }
                    return {
                        observe: t => t.forEach((n => e(n, t.indexOf(n) + 1))),
                        destroy: () => {}
                    }
                }
                ,
                e
            }();
            let se = function() {
                function e(e, t, n) {
                    this.intersectionObserverEnable = WbSpaModel.prototype.$apiSupport.intersectionObserver,
                    e = null != e ? e : [],
                    this.items = (Array.isArray(e) ? e : [e]).toHashSet(),
                    this.options = null != t ? t : {};
                    this.settings = Object.assign({
                        keepObserve: !1,
                        sendOutEvent: !1
                    }, null != n ? n : {}),
                    this.observer = null,
                    this.elementInViewportEventName = "elementInViewportEvent",
                    this.elementOutOfViewportEventName = "elementOutOfViewportEvent"
                }
                var t = e.prototype;
                return t._observe = function(e) {
                    var t, n;
                    const r = {
                        bubbles: !0
                    };
                    (null === (t = this.settings) || void 0 === t ? void 0 : t.eventDetails) && (r.detail = this.settings.eventDetails);
                    let s = new CustomEvent(this.elementInViewportEventName,r)
                      , o = new CustomEvent(this.elementOutOfViewportEventName,r);
                    this.intersectionObserverEnable ? (this.observer = null !== (n = this.observer) && void 0 !== n ? n : new IntersectionObserver(( (e, t) => {
                        e.forEach((e => {
                            e.isIntersecting ? (e.target.dispatchEvent(s),
                            this.settings.keepObserve || (this.items.delete(e.target),
                            t.unobserve(e.target))) : !e.isIntersecting && this.settings.sendOutEvent && e.target.dispatchEvent(o)
                        }
                        ))
                    }
                    ),this.options),
                    e.forEach((e => {
                        e && this.observer.observe(e)
                    }
                    ))) : e.forEach((e => {
                        e.dispatchEvent(s),
                        this.items.delete(e)
                    }
                    ))
                }
                ,
                t.observe = function() {
                    return this._observe(this.items),
                    this
                }
                ,
                t.update = function(e) {
                    let t;
                    if (Array.isArray(e))
                        t = e;
                    else if (e instanceof HTMLElement)
                        t = [e];
                    else {
                        if (!("toArray"in e))
                            return;
                        t = e.toArray()
                    }
                    this._observe(t)
                }
                ,
                t.unobserve = function(e) {
                    e && this.intersectionObserverEnable && this.observer.unobserve(e)
                }
                ,
                t.unobserveAll = function() {
                    this.items.forEach((e => this.observer.unobserve(e))),
                    this.items.clear()
                }
                ,
                t.destroy = function() {
                    var e;
                    this.items.clear(),
                    null === (e = this.observer) || void 0 === e || e.disconnect()
                }
                ,
                e
            }()
              , oe = null
              , ie = function() {
                function e() {
                    this.productCardPopup = null,
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null,
                    this.onPopupShow = this.onPopupShow.bind(this)
                }
                var t = e.prototype;
                return t.showSlider = async function(e, t, n) {
                    if (!this.$isDesktop)
                        return void this.$router.moveTo($.views.converters.urlForGood(e.cod1S, !0, e.newTargetUrl, null, !1, e.chrtId));
                    const {observeDisplayMode: r, removeObserver: s} = this._createObservable();
                    wb.displayModeSettings.addObserver(r),
                    e.onHideCallback = s;
                    if (await this._processingPopup(e.cod1S, e.chrtId, e.newTargetUrl, n))
                        try {
                            await oe.showSlider(e, t, n)
                        } catch (e) {
                            this._onShowError(s)
                        } finally {
                            this.onPopupShow()
                        }
                }
                ,
                t.show = async function(e, t, n, r, s) {
                    if (!this.$isDesktop)
                        return r && this.$analitic.updateState(r),
                        void this.$router.moveTo($.views.converters.urlForGood(e, !0, n, null, !1, t));
                    const {observeDisplayMode: o, removeObserver: i} = this._createObservable();
                    wb.displayModeSettings.addObserver(o);
                    if (await this._processingPopup(e, t, n, null))
                        try {
                            await oe.show(e, t, n, r, i, s)
                        } catch (e) {
                            this._onShowError(i)
                        } finally {
                            this.onPopupShow()
                        }
                }
                ,
                t.onPopupShow = async function() {
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null
                }
                ,
                t._processingPopup = async function(e, t, n, r) {
                    var s;
                    return this.processing ? (e != (null === (s = this.currentData) || void 0 === s ? void 0 : s.cod1S) && (this.targetData = {
                        cod1S: e,
                        chrtId: t,
                        newTargetUrl: n,
                        cardIndex: r
                    }),
                    !1) : (this.processing = !0,
                    this.currentData = {
                        cod1S: e,
                        chrtId: t,
                        newTargetUrl: n,
                        cardIndex: r
                    },
                    await this._loadProductCardPopup(),
                    !0)
                }
                ,
                t._loadProductCardPopup = async function() {
                    if (this.productCardPopup)
                        return;
                    const e = await this.$moduleLoader.loadModuleAsync("productCardPopup");
                    oe = e;
                    window.addEventListener("spaTransition", ( () => {
                        this.processing = !1,
                        this.currentData = null,
                        this.targetData = null
                    }
                    ).bind(this))
                }
                ,
                t._createObservable = function() {
                    const e = () => wb.displayModeSettings.removeObserver(t)
                      , t = () => {
                        var t;
                        null === (t = this.productCardPopup) || void 0 === t || t.hidePopup(),
                        e()
                    }
                    ;
                    return {
                        observeDisplayMode: t,
                        removeObserver: e
                    }
                }
                ,
                t._onShowError = function(e) {
                    navigator.onLine || wb.popup.renderModalError("Internet connection is lost"),
                    null == e || e(),
                    this.processing = !1,
                    this.currentData = null,
                    this.targetData = null
                }
                ,
                e
            }();
            const ae = ie;
            let le = function() {
                function e() {
                    this.eventsDictionary = {}
                }
                var t = e.prototype;
                return t.addEventListener = function(e, t, {single: n}={}) {
                    const r = this._validateInput(e, t);
                    if (!r.valid)
                        throw r.error;
                    null == this.eventsDictionary[e] && (this.eventsDictionary[e] = []);
                    const s = this.eventsDictionary[e];
                    n && s.includes(t) || s.push(t)
                }
                ,
                t.removeEventListener = function(e, t) {
                    var n;
                    const r = this._validateInput(e, t);
                    if (!r.valid)
                        throw r.error;
                    const s = this.eventsDictionary[e];
                    this.eventsDictionary[e] = null !== (n = null == s ? void 0 : s.filter((e => e !== t))) && void 0 !== n ? n : []
                }
                ,
                t.dispatchEvent = function(e) {
                    if (!(e instanceof Event))
                        throw new TypeError("DispatchEvent can be called only with Event instance");
                    if ("" == e.type)
                        throw new TypeError("Event doesnt have sufficient type");
                    const t = this.eventsDictionary[e.type];
                    null == t || t.forEach((t => {
                        e.isPropagationStopped || queueMicrotask(( () => {
                            t(e)
                        }
                        ))
                    }
                    ))
                }
                ,
                t._validateInput = function(e, t) {
                    return "string" != typeof e || "" == e ? {
                        valid: !1,
                        error: new TypeError("Event type must be a valid string value")
                    } : t instanceof Function ? {
                        valid: !0
                    } : {
                        valid: !1,
                        error: new TypeError("Callback must be a function")
                    }
                }
                ,
                e
            }();
            const ce = new le;
            let ue = function() {
                function e() {
                    this.items = [],
                    this.requestUrl = ""
                }
                var t = e.prototype;
                return t.init = function(e, t, n) {
                    this.requestUrl = t,
                    this.items = e.map((e => {
                        var t;
                        try {
                            return document.querySelector(`${e.tagName}${Object.keys(null !== (t = e.attributesDictionary) && void 0 !== t ? t : {}).map((t => `[${t}='${e.attributesDictionary[t].replace(/[\n\r]/g, "").replace(/["']/g, "\\$&")}']`)).join("")}`)
                        } catch (e) {
                            return console.error(e.message),
                            null
                        }
                    }
                    )),
                    this.defaultTitle = n
                }
                ,
                t.update = async function(e, t=null) {
                    return this._loadMetaTags(null != t ? t : this.requestUrl, e).then((e => {
                        if (this.delete(),
                        (null != e ? e : []).length > 0)
                            return this._renderMetatags(e),
                            e;
                        this._renderDefaultTitle()
                    }
                    )).catch(( () => {}
                    ))
                }
                ,
                t.render = function(e) {
                    this.delete(),
                    (null != e ? e : []).length > 0 ? this._renderMetatags(e) : this._renderDefaultTitle()
                }
                ,
                t.loadMetaTags = async function(e, t) {
                    if (e.metaTags)
                        return this.render(e.metaTags);
                    const n = await this.update(window.location.pathname, WbSpaModel.prototype.$router.currentRoute.metaTagsUrl);
                    if (!n)
                        return;
                    const r = n.find((e => "H1" === e.tagName));
                    if (r && window.requestAnimationFrame(( () => $.observable(e).setProperty({
                        title: r.hTMLContent
                    }))),
                    t) {
                        const t = n.find((e => "bottomText" === e.tagName));
                        t && window.requestAnimationFrame(( () => $.observable(e).setProperty({
                            bottomText: t.hTMLContent
                        })))
                    }
                }
                ,
                t.delete = function() {
                    this.items.forEach((e => null == e ? void 0 : e.remove())),
                    this.items.length = 0
                }
                ,
                t._loadMetaTags = function(e, t) {
                    if (!e)
                        return Promise.resolve();
                    const n = new URLSearchParams(this.$router.queryParams);
                    let r;
                    return n.append("targetUrl", encodeURIComponent(("/" === t[0] ? "" : "/") + t)),
                    e.indexOf("{*category}") > -1 && (e = e.replace("{*category}", this.$router.routeParameters.category)),
                    e.indexOf("{brandBasePath}") > -1 && "/" === (e = e.replace("{brandBasePath}", this.$router.routeParameters.brandBasePath))[e.length - 1] && (e = e.slice(0, -1)),
                    e.indexOf("{promoBasePath}") > -1 && "/" === (e = e.replace("{promoBasePath}", this.$router.routeParameters.promoBasePath))[e.length - 1] && (e = e.slice(0, -1)),
                    r = e,
                    this.$httpClient.fetchJSON(r + "?" + n).then((e => Promise.resolve(null == e ? void 0 : e.metaTags))).catch((n => (n.isCancelled || "" === n.message || (console.error(n.message),
                    console.error(`Error loading meta tags for path ${t} by requesting ${e}`)),
                    Promise.resolve())))
                }
                ,
                t._renderMetatags = function(e) {
                    const t = document.createDocumentFragment();
                    e.forEach((e => {
                        var n;
                        if ("H1" === e.tagName)
                            return;
                        if ("bottomText" === e.tagName)
                            return;
                        const r = document.createElement(e.tagName);
                        Object.keys(null !== (n = e.attributesDictionary) && void 0 !== n ? n : {}).forEach((t => r.setAttribute(t, e.attributesDictionary[t]))),
                        (e.hTMLContent || e.htmlContent) && (r.innerHTML = e.hTMLContent || e.htmlContent),
                        this.items.push(r),
                        t.appendChild(r)
                    }
                    )),
                    document.head.appendChild(t)
                }
                ,
                t._renderDefaultTitle = function() {
                    const e = document.createElement("title");
                    e.innerHTML = this.defaultTitle,
                    this.items.push(e),
                    document.head.appendChild(e)
                }
                ,
                e
            }();
            const de = new ue
              , he = {
                updateVerificationToken(e) {
                    const t = document.querySelector("input[name=__RequestVerificationToken]");
                    t && (t.value = e)
                }
            }
              , pe = {
                short: 9e5,
                halfHour: 18e5,
                normal: 36e5
            };
            Object.freeze(pe);
            let me = function() {
                function e() {}
                return e.createStorageHelperItem = function(e, t, n) {
                    return new ge(e,t,n)
                }
                ,
                e.supportIndexedDb = function() {
                    return null != window.indexedDB
                }
                ,
                e.metadataTableName = function(e) {
                    return e + "_metadata"
                }
                ,
                e.openDb = function(e, t={}) {
                    return new Promise(( (n, r) => {
                        var s;
                        const o = indexedDB.open(e, null !== (s = null == t ? void 0 : t.version) && void 0 !== s ? s : 1);
                        o.onupgradeneeded = e => {
                            var n;
                            null === (n = t.onupgradeneeded) || void 0 === n || n.call(t, e.target.result)
                        }
                        ,
                        o.onsuccess = e => {
                            n(e.target.result)
                        }
                        ,
                        o.onerror = t => {
                            r(new Error(`[StorageHelper]: Database cannot be opened db_name=${e} error=${o.error}`))
                        }
                    }
                    ))
                }
                ,
                e.setItem = function(e, t, n) {
                    return new Promise(( (r, s) => {
                        const o = e.transaction([t], "readwrite").objectStore(t).put(n);
                        o.onsuccess = r,
                        o.onerror = e => {
                            console.error(e.message),
                            s("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.addItem = function(e, t, n, r) {
                    return new Promise(( (s, o) => {
                        const i = e.transaction([t], "readwrite").objectStore(t).add(n);
                        i.onsuccess = e => s(e.target.result),
                        i.onerror = e => {
                            !r && console.error(e.message),
                            o("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.setItems = function(e, t, n, r) {
                    return new Promise(( (s, o) => {
                        let i = e.transaction([t], "readwrite")
                          , a = i.objectStore(t);
                        a.clear(),
                        r.forEach((e => {
                            e.__expiredAt__ = n,
                            a.add(e)
                        }
                        )),
                        i.oncomplete = s,
                        i.onerror = e => {
                            console.error(e.message),
                            o("Error while setting item from indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.getAll = function(e, t) {
                    return new Promise(( (n, r) => {
                        const s = e.transaction([t]).objectStore(t).getAll();
                        s.onsuccess = e => n(e.target.result),
                        s.onerror = () => r("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.get = function(e, t, n) {
                    return new Promise(( (r, s) => {
                        const o = e.transaction([t]).objectStore(t).get(n);
                        o.onsuccess = e => r(e.target.result),
                        o.onerror = () => s("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.getItem = function(t, n, r) {
                    return new Promise(( (s, o) => {
                        const i = t.transaction([n]).objectStore(n).get(r);
                        i.onsuccess = o => {
                            const i = o.target.result;
                            return i && i.__expiredAt__ <= Date.now() ? (e.removeItem(t, n, r),
                            s(null)) : s(o.target.result)
                        }
                        ,
                        i.onerror = () => o("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.removeItem = function(e, t, n) {
                    return new Promise(( (r, s) => {
                        const o = e.transaction([t], "readwrite").objectStore(t).delete(n);
                        o.onsuccess = r,
                        o.onerror = () => s("Error while removing item from indexedDb")
                    }
                    ))
                }
                ,
                e.updateItem = function(e, t, n, r) {
                    return new Promise(( (s, o) => {
                        const i = e.transaction([t], "readwrite").objectStore(t).put(n, r);
                        i.onsuccess = s,
                        i.onerror = e => {
                            console.error(e.message),
                            o("Error while updating item in indexedDb")
                        }
                    }
                    ))
                }
                ,
                e.clear = function(e, t) {
                    return new Promise(( (n, r) => {
                        const s = e.transaction([t], "readwrite").objectStore(t).clear();
                        s.onsuccess = n,
                        s.onerror = () => r("Error while removing item from indexedDb")
                    }
                    ))
                }
                ,
                e.removeDb = function(e) {
                    return new Promise(( (t, n) => {
                        const r = indexedDB.deleteDatabase(e);
                        r.onsuccess = t,
                        r.onerror = () => n("Error while removing database")
                    }
                    ))
                }
                ,
                e.exec = function(e, t, n) {
                    if ("function" == typeof n)
                        return new Promise(( (r, s) => {
                            const o = e.transaction([t]).objectStore(t)
                              , i = n(o);
                            i.onsuccess = e => r(e.target.result),
                            i.onerror = () => s("Error while getting item from indexedDb")
                        }
                        ))
                }
                ,
                e.withCursor = function(e, t, n, r) {
                    return new Promise(( (s, o) => {
                        let i = e.transaction([t], "readwrite").objectStore(t);
                        n && (i = i.index(n));
                        const a = i.openCursor();
                        a.onsuccess = e => {
                            const t = e.target.result;
                            t ? (r(t.key, t.value, t),
                            t.continue()) : s()
                        }
                        ,
                        a.onerror = () => o("Error while getting item from indexedDb")
                    }
                    ))
                }
                ,
                e.objectStorePromise = function(e, t, n) {
                    return new Promise(( (r, s) => {
                        const o = e.objectStore(t)
                          , i = n(o);
                        i.onsuccess = e => r(e.target.result),
                        i.onerror = () => s("Error while work on objectStore from indexedDb")
                    }
                    ))
                }
                ,
                e.withTransaction = function(e, t, n) {
                    return new Promise(( (r, s) => {
                        const o = e.transaction(t, "readwrite");
                        n(o).then((e => {}
                        )),
                        o.onsuccess = r(o),
                        o.onerror = () => s("Error while open transaction in indexedDb on :" + t.join(","))
                    }
                    ))
                }
                ,
                (0,
                s.A)(e, null, [{
                    key: "cacheActivityType",
                    get: function() {
                        return pe
                    }
                }])
            }()
              , ge = function() {
                function e(e, t, n=1) {
                    if (null == e || "" == e)
                        throw new Error("creating database without name is impossible");
                    this.databaseName = e,
                    this.databaseVersion = n,
                    this.onupgradeneeded = t
                }
                var t = e.prototype;
                return t.updateCacheAsync = function(e, t, n, r, s) {
                    return s = Object.assign(Object.assign({}, {
                        saveAllDb: !1,
                        getResultFunc: e => e
                    }), s),
                    me.supportIndexedDb() ? this._getItemFromDb(e, t, n, r, s) : this._getItemFromLocalStorage(e, t, n, r, s)
                }
                ,
                t._getItemFromDb = function(e, t, n, r, s) {
                    let o;
                    return me.openDb(this.databaseName, {
                        version: this.databaseVersion,
                        onupgradeneeded: this.onupgradeneeded
                    }).then((n => (o = n,
                    me.getItem(o, e, t)))).then((t => null != t ? Promise.resolve(t) : r().then((t => {
                        null != t && (s.saveAllDb ? me.setItems(o, e, Date.now() + n, t) : me.setItem(o, e, Object.assign({
                            __expiredAt__: Date.now() + n
                        }, t)));
                        const r = s.getResultFunc(t);
                        return Promise.resolve(r)
                    }
                    ))))
                }
                ,
                t._getItemFromLocalStorage = function(e, t, n, r, s) {
                    const o = s.saveAllDb ? `${this.databaseName};${this.databaseVersion};${e}` : `${this.databaseName};${this.databaseVersion};${e};${t}`
                      , i = localStorage.getItem(o)
                      , a = i ? JSON.parse(i) : null;
                    if ((null == a ? void 0 : a.__expiredAt__) >= Date.now() && (!s.saveAllDb || !!a.items.length)) {
                        const e = s.getResultFunc(s.saveAllDb ? a.items : a);
                        return Promise.resolve(e)
                    }
                    return r().then((e => {
                        const t = s.saveAllDb ? {
                            items: e
                        } : e;
                        return t.__expiredAt__ = Date.now() + n,
                        localStorage.setItem(o, JSON.stringify(t)),
                        Promise.resolve(s.getResultFunc(e))
                    }
                    ))
                }
                ,
                e
            }();
            const fe = me;
            var ye = n(85340);
            let ve = function() {
                function e() {
                    this.$eventBus.addEventListener("CurrencyChanged", this._onChangeCurrency.bind(this))
                }
                var t = e.prototype;
                return t.initPreferredLocation = async function() {
                    await this.updateLocation();
                    document.querySelectorAll(".j-geocity-link").forEach((e => {
                        e.addEventListener("click", this.doOnGeoBtnClick.bind(this))
                    }
                    ))
                }
                ,
                t.updateLocation = async function() {
                    this.location = await this.$user.getLocationData(),
                    this.setCityName(this.location.address)
                }
                ,
                t.setCityName = function(e) {
                    const t = document.querySelectorAll(".j-geocity-link")
                      , n = decodeURI(e);
                    t.forEach((e => {
                        e.textContent !== n && (e.textContent = n)
                    }
                    ))
                }
                ,
                t.doOnGeoBtnClick = function(e) {
                    const t = e.currentTarget;
                    e.preventDefault(),
                    t.classList.contains("_click") || (t.classList.add("_click"),
                    this.openDeliveryPointsPopup().then((e => t.classList.remove("_click"))))
                }
                ,
                t.findCurrentAddress = function(e, t=!1) {
                    return this.location ? null == e ? void 0 : e.find((e => e.lat == this.location.latitude && e.lon == this.location.longitude && (e.address == this.location.address || !t))) : null
                }
                ,
                t.openDeliveryPointsPopup = async function(e) {
                    const t = await this.$moduleLoader.loadModuleAsync("deliveryPointsChoosePopup");
                    this.dpPopup || (this.dpPopup = new t),
                    await this.dpPopup.init({
                        source: "geo",
                        selectAddress: (e, t, n, r) => {
                            const s = n || this.$services.userAddressService.get(t, e);
                            this._submitGeo(s, r)
                        }
                        ,
                        updateSelectedAddresses: t => {
                            const n = this.findCurrentAddress(t.courier.list, !0)
                              , r = this.findCurrentAddress(t.self.list);
                            t.courier.selected = null == n ? void 0 : n.addressId,
                            t.self.selected = null == r ? void 0 : r.addressId,
                            t.preferred = "courier" === e || "self" === e ? e : n ? "courier" : "self"
                        }
                        ,
                        beforeSelectDw: (e, t) => {
                            if ("self" == $.view(e.target).ctxPrm("selectedDeliveryWay"))
                                return;
                            if (this.dpPopup.deliveryWays.length < 2)
                                return;
                            "self" === $.view(e.target).data.code && this.$moduleLoader.loadModuleAsync("basketProductModel").then((t => {
                                var n;
                                const r = (null === (n = this.$services.cartService.get(!0).basketItems) || void 0 === n ? void 0 : n.map((e => new t(e))).filter((e => e.onlyCourier))) || [];
                                r.length > 0 && (e.preventDefault(),
                                this.$moduleLoader.loadModuleAsync("productCourierOnlyPopup").then((e => {
                                    var t;
                                    e.show(e.template, r, null === (t = this.dpPopup.selectedAddresses) || void 0 === t ? void 0 : t.preferred, this.openDeliveryPointsPopup.bind(this))
                                }
                                )),
                                this.dpPopup.close())
                            }
                            ))
                        }
                    }),
                    this.dpPopup.show()
                }
                ,
                t._onChangeCurrency = function() {
                    var e;
                    "SpaBasketEntrypoint" !== (null === (e = this.$router.currentRoute) || void 0 === e ? void 0 : e.name) && this.$services.cartService.localBasket.enrichProductsIfNeedAsync({
                        force: !0
                    })
                }
                ,
                t._submitGeo = function(e, t) {
                    var n;
                    let r, s = this.map;
                    if (((null == e ? void 0 : e.id) || (null == e ? void 0 : e.addressId)) && (r = e),
                    r || (r = (null == s ? void 0 : s.selectedPointId) ? ("courier" === s.deliveryType ? s.courierList : s.visiblePoints).find((e => e.id === s.selectedPointId)) : s.selectedPoint),
                    !r)
                        return;
                    const o = r.id || r.addressId || (null == s ? void 0 : s.selectedPointId);
                    this.saveLastAddressAsync(o, r.deliveryType, e.address, t, null !== (n = r.officeId) && void 0 !== n ? n : r.addressId),
                    this.$user.setGeo(r).then(( () => {
                        this.$eventBus.dispatchEvent(new CustomEvent("ExternalSelectAddress",{
                            detail: {
                                selectedAddressId: o,
                                dWay: r.deliveryType
                            }
                        }))
                    }
                    )),
                    this.dpPopup.close()
                }
                ,
                t.saveLastAddressAsync = async function(e, t, n, r, s) {
                    this.$services.cartService.localBasket.setAddress(e, t, n, r),
                    this.$router.userIsAuth && this.$httpClient.fetchJSON(this.$services.cartService.publicBasketApiUrl + "/spa/address/select", {
                        credentials: "include",
                        method: "POST",
                        body: this.$helper.objectSerializer({
                            addressId: e,
                            deliveryWay: t
                        })
                    }),
                    this.$analitic.setCurrentAddress(t, s),
                    this.$analitic.sendAddressSelection({
                        source: "Header",
                        deliveryType: t,
                        addressId: e,
                        address: n,
                        isChanged: r
                    })
                }
                ,
                e
            }();
            const be = ve;
            const we = function() {
                function e() {
                    this.nativeLazyImage = "loading"in HTMLImageElement.prototype,
                    this.intersectionObserver = "IntersectionObserver"in window,
                    this.webpImage = !1,
                    this._checkWebpImageSupport()
                }
                return e.prototype._checkWebpImageSupport = async function() {
                    if (0 === document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"))
                        this.webpImage = !0;
                    else
                        try {
                            const e = new Image;
                            e.onload = function() {
                                e.width > 0 && e.height > 0 && (this.webpImage = !0)
                            }
                            .bind(this),
                            e.src = "data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"
                        } catch (e) {}
                }
                ,
                e
            }();
            const Se = function() {
                function e() {}
                return e.get = function() {
                    const t = localStorage.getObject(e.storageKey()) || {
                        url: [],
                        query: [],
                        nm: []
                    };
                    return t.nm = t.nm.map((e => e.nmId)),
                    t
                }
                ,
                e.getRecentWithTimestamp = function() {
                    return localStorage.getObject(e.storageKey()) || {
                        url: [],
                        query: [],
                        nm: []
                    }
                }
                ,
                e.addProduct = function(t) {
                    ("number" == typeof t || "string" == typeof t && !isNaN(Number(t))) && e.putInStorage("nm", t, 100)
                }
                ,
                e.putInStorage = function(t, n, r) {
                    let s = e.getRecentWithTimestamp()
                      , o = {
                        time: parseInt(Date.now() / 1e3),
                        nmId: n
                    }
                      , i = s[t];
                    const a = i.indexOf(o);
                    0 !== a && (a > 0 && i.splice(a, 1),
                    i.unshift(o),
                    i.length > r && (i.length = r),
                    s[t] = i,
                    e.clearPrevStorage(),
                    localStorage.putObject(e.storageKey(), s))
                }
                ,
                e.storageKey = function() {
                    return `recentViewsV2-${WbSpaModel.prototype.$user.getUid()}`
                }
                ,
                e.clearPrevStorage = function() {
                    const e = `recentViews-${WbSpaModel.prototype.$user.getUid()}`;
                    localStorage.removeItem(e)
                }
                ,
                e
            }();
            var _e;
            const Ce = "promotion-creatives";
            let Ie, Me, ke, $e, Pe, Te = function() {
                function e() {}
                return e.getById = function(e) {
                    return Ie && Ie[e]
                }
                ,
                e.isThermometerNeeded = function(e) {
                    return ke && ke.has(e)
                }
                ,
                e.isRedPriceNeeded = function(e) {
                    return Pe && Pe.has(e)
                }
                ,
                e.getFilter = function() {
                    return $e
                }
                ,
                e.getMainActionId = function() {
                    return 188852
                }
                ,
                e.getHomeCarouselData = function() {
                    return {
                        caruselUrl: "/promotions/uhtydazha",
                        carouselName: "За яркими ценами!",
                        carouselBg: "#ED1AD8"
                    }
                }
                ,
                e._startUpdate = async function() {
                    try {
                        await navigator.locks.request(`lock-${Ce}`, (async e => {
                            var t;
                            const n = await _e.prototype.$httpClient.fetchText(wb.helpers.url.urlStaticData(`data/${Ce}.json.hash`), {
                                method: "GET",
                                cache: "no-cache"
                            }, {
                                noProcessResponse: !0
                            });
                            if (n && n !== (null === (t = localStorage.getObject(Ce)) || void 0 === t ? void 0 : t.hash)) {
                                const e = await _e.prototype.$httpClient.fetchBasicJSON(wb.helpers.url.urlStaticData(`data/${Ce}.json`), {
                                    cache: "no-cache"
                                }, {
                                    nullOnError: !0
                                });
                                e.hash = n,
                                this.initPromoCreatives(e),
                                localStorage.putObject(Ce, e),
                                localStorage.removeItem("promotions"),
                                localStorage.removeItem("promotions-hash")
                            }
                        }
                        ))
                    } catch (e) {}
                }
                ,
                e.initPromoCreatives = function(e) {
                    var t, n, r;
                    e && (Ie = {},
                    null === (t = e.panels) || void 0 === t || t.forEach((e => Ie[e.id] = e)),
                    ke = new Set(null !== (n = e.thermometer) && void 0 !== n ? n : []),
                    Pe = new Set(null !== (r = e.redPrices) && void 0 !== r ? r : []),
                    e.filter && (null == $e ? void 0 : $e.id) !== e.filter.id && (document.documentElement.style.setProperty("--custom-promo-filter-color", e.filter.color),
                    document.documentElement.style.setProperty("--custom-promo-filter-background", e.filter.background),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-color", e.filter.switch),
                    document.documentElement.style.setProperty("--custom-promo-filter-switch-background", e.filter.switchBackground)),
                    $e = e.filter)
                }
                ,
                e
            }();
            (_e = Te).initPromoCreatives(localStorage.getObject(Ce)),
            _e._startUpdate(),
            Me = setInterval(_e._startUpdate.bind(_e), 18e4);
            const Ae = Te;
            n(34784);
            var Oe = n(83503)
              , De = n.n(Oe);
            const Ee = navigator.connection || navigator.mozConnection || navigator.webkitConnection
              , Be = Object.freeze({
                c246x328: "c246x328",
                c516x688: "c246x328",
                big: "c516x688"
            })
              , xe = {
                volHostV2: function(e) {
                    let t;
                    switch (!0) {
                    case e >= 0 && e <= 143:
                        t = "01";
                        break;
                    case e <= 287:
                        t = "02";
                        break;
                    case e <= 431:
                        t = "03";
                        break;
                    case e <= 719:
                        t = "04";
                        break;
                    case e <= 1007:
                        t = "05";
                        break;
                    case e <= 1061:
                        t = "06";
                        break;
                    case e <= 1115:
                        t = "07";
                        break;
                    case e <= 1169:
                        t = "08";
                        break;
                    case e <= 1313:
                        t = "09";
                        break;
                    case e <= 1601:
                        t = "10";
                        break;
                    case e <= 1655:
                        t = "11";
                        break;
                    case e <= 1919:
                        t = "12";
                        break;
                    case e <= 2045:
                        t = "13";
                        break;
                    case e <= 2189:
                        t = "14";
                        break;
                    case e <= 2405:
                        t = "15";
                        break;
                    case e <= 2621:
                        t = "16";
                        break;
                    case e <= 2837:
                        t = "17";
                        break;
                    case e <= 3053:
                        t = "18";
                        break;
                    default:
                        t = "19"
                    }
                    return `basket-${t}.wbbasket.ru`
                },
                volFeedbackHost: function(e) {
                    let t;
                    switch (!0) {
                    case e >= 0 && e <= 431:
                        t = "01";
                        break;
                    case e <= 863:
                        t = "02";
                        break;
                    case e <= 1199:
                        t = "03";
                        break;
                    case e <= 1535:
                        t = "04";
                        break;
                    case e <= 1919:
                        t = "05";
                        break;
                    case e <= 2303:
                        t = "06";
                        break;
                    case e <= 2688:
                        t = "07";
                        break;
                    default:
                        t = "08"
                    }
                    return `feedback${t}.wbbasket.ru`
                },
                volVideoHost: function(e) {
                    let t;
                    switch (!0) {
                    case e >= 0 && e <= 11:
                        t = "01";
                        break;
                    case e <= 23:
                        t = "02";
                        break;
                    case e <= 35:
                        t = "03";
                        break;
                    case e <= 47:
                        t = "04";
                        break;
                    case e <= 59:
                        t = "05";
                        break;
                    case e <= 71:
                        t = "06";
                        break;
                    case e <= 83:
                        t = "07";
                        break;
                    case e <= 95:
                        t = "08";
                        break;
                    case e <= 107:
                        t = "09";
                        break;
                    case e <= 119:
                        t = "10";
                        break;
                    case e <= 131:
                        t = "11";
                        break;
                    case e <= 143:
                        t = "12";
                        break;
                    default:
                        t = "13"
                    }
                    return `videonme-basket-${t}.wbbasket.ru`
                },
                constructHostV2: function(e, t="nm") {
                    const n = parseInt(e, 10)
                      , r = "video" === t ? n % 144 : ~~(n / 1e5)
                      , s = "video" === t ? ~~(n / 1e4) : ~~(n / 1e3);
                    let o;
                    return "nm" === t ? o = xe.volHostV2(r) : "feedback" === t ? o = xe.volFeedbackHost(r) : "video" === t && (o = xe.volVideoHost(r)),
                    `https://${o}/vol${r}/part${s}/${n}`
                }
            };
            wb.helpers = {
                deepClone: e => JSON.parse(JSON.stringify(e)),
                getHashCode: e => {
                    let t, n, r = 0;
                    if (0 === e.length)
                        return r;
                    for (t = 0; t < e.length; t++)
                        n = e.charCodeAt(t),
                        r = (r << 5) - r + n,
                        r |= 0;
                    return r
                }
                ,
                generateGuid: e => {
                    const t = URL.createObjectURL(new Blob).split("/").pop();
                    return e ? t : t.replace(/-/g, "")
                }
                ,
                date: {
                    leftBefore: function(e) {
                        const t = wb.helpers.date.serverDate ? new Date(wb.helpers.date.serverDate) : new Date
                          , n = e.getTime() - t.getTime()
                          , r = Math.floor(n / 1e3 % 60)
                          , s = Math.floor(n / 6e4 % 60)
                          , o = Math.floor(n / 36e5);
                        return String.format("{0}:{1}:{2}", $.views.converters.leadZero(o, 2), $.views.converters.leadZero(s, 2), $.views.converters.leadZero(r, 2))
                    },
                    diff: (e, t=new Date) => {
                        const n = {
                            days: 0,
                            months: 0,
                            years: 0
                        };
                        if (e == t)
                            return n;
                        if (e > t)
                            return wb.helpers.date.diff(t, e);
                        if (n.years = t.getFullYear() - e.getFullYear(),
                        n.months = t.getMonth() - e.getMonth(),
                        n.days = t.getDate() - e.getDate(),
                        n.days < 0) {
                            const t = new Date(e.getFullYear(),e.getMonth() + 1,0);
                            n.months--,
                            n.days += t.getDate()
                        }
                        return n.months < 0 && (n.years--,
                        n.months += 12),
                        n
                    }
                    ,
                    formatEstimated: (e, t, n) => {
                        const {timeFrom: r, timeTo: s} = n || {}
                          , o = new Date;
                        o.setHours(0, 0, 0, 0);
                        const i = new Date(e);
                        t || (t = new Date(e)),
                        t.setDate(t.getDate());
                        if (t - o < 0)
                            return "Задерживается";
                        if (r && s) {
                            const e = $.views.converters.formatTimeStr(r);
                            return `${$.views.converters.dayNameFromDate(i, !0)} c ${e} до&nbsp;${s}`
                        }
                        return i.getMonth() !== t.getMonth() ? `${i.format("d MMMM")}-${t.format("d MMMM")}` : i.getDate() !== t.getDate() ? `${i.getDate()}-${t.format("d MMMM")}` : `${i.format("d MMMM")}`
                    }
                },
                getParamsFromUrlQuery: function(e) {
                    if (!e)
                        return {};
                    0 === e.indexOf("?") && (e = e.substring(1));
                    const t = e.split("&")
                      , n = {};
                    for (let e = 0, r = t.length; e < r; e++) {
                        const r = t[e].split("=");
                        n[r[0]] = r[1]
                    }
                    return n
                },
                appendToParamsFromQuery: function(e, t) {
                    if (!t)
                        return;
                    0 === t.indexOf("?") && (t = t.substring(1));
                    const n = t.split("&");
                    for (let t = 0, r = n.length; t < r; t++) {
                        const r = n[t].split("=");
                        e.set(r[0], r[1])
                    }
                },
                getCardImgName: function(e) {
                    if (1 === e.idx) {
                        return function(e, t) {
                            if (!t)
                                return !1;
                            const n = parseInt((2048 & t ? "1" : "0") + (1024 & t ? "1" : "0"), 2);
                            if (0 === n)
                                return !1;
                            const r = wb.cookieHelper.getCookie("_wbauid");
                            if (!r)
                                return !1;
                            const s = e + r + "ABTest=Be$t"
                              , o = De()(s)
                              , i = BigInt("0x" + o.slice(-16)) % BigInt(n + 1);
                            return 0 != i && `ab_${i}`
                        }(e.nmId, e.viewFlags) || e.idx
                    }
                    return e.idx
                },
                url: {
                    imageUrl: function(e, t, n, r, s) {
                        var o, i;
                        r && !WbSpaModel.prototype.$isDesktop && (t = r);
                        const a = parseInt(e, 10);
                        if ((null == Ee ? void 0 : Ee.effectiveType) && "4g" !== (null == Ee ? void 0 : Ee.effectiveType) && "3g" !== (null == Ee ? void 0 : Ee.effectiveType) && Be[t] && (null === (i = null === (o = wb.global.settings) || void 0 === o ? void 0 : o.switches) || void 0 === i ? void 0 : i.enableProductImageDowngrade) && (t = Be[t]),
                        isNaN(a) || 0 === a)
                            return `${wb.settings.staticSiteUrl}/i/product/notfound/${t}.jpg`;
                        return `${xe.constructHostV2(a)}/images/${t}/${wb.helpers.getCardImgName({
                            nmId: e,
                            viewFlags: s,
                            idx: null != n ? n : 1
                        })}.webp`
                    },
                    urlProductStatic: function(e) {
                        return `${xe.constructHostV2(e)}/info/ru/card.json`
                    },
                    urlPriceHistoryStatic: function(e) {
                        return `${xe.constructHostV2(e)}/info/price-history.json`
                    },
                    urlSellerStatic: function(e) {
                        return `${xe.constructHostV2(e)}/info/sellers.json`
                    },
                    urlMulticardStatic: function(e) {
                        return `${xe.constructHostV2(e)}/multicart/${e}.json`
                    },
                    urlCertificateStatic: function(e) {
                        return `${xe.constructHostV2(e)}/info/certificate.json`
                    },
                    urlStaticData: function(e) {
                        return e.startsWith("//") ? e : `https:${wb.settings.staticBasketUrl}/${e}`
                    },
                    urlStaticDataFallback: function(e) {
                        return e = e.replace(wb.settings.staticBasketUrl + "/", ""),
                        `https:${wb.settings.staticFallbackUrl}/${e}`
                    },
                    urlStaticDataObsolete: function(e) {
                        return `https://static.wbstatic.net/data/${e}`
                    },
                    urlFeedbackPhoto: function(e, t="ms") {
                        const n = parseInt(e, 10);
                        return `${xe.constructHostV2(n, "feedback")}/photos/${t}.${$.views.converters.toWebp("jpg")}`
                    },
                    urlVideoProduct: function(e, t="mp4", n="360p") {
                        const r = parseInt(e, 10);
                        return `${xe.constructHostV2(r, "video")}/${t}/${n}/${"mp4" === t ? "1.mp4" : "index.m3u8"}`
                    },
                    urlRichContent: function(e) {
                        return `${xe.constructHostV2(e)}/info/ru/rich_v1.json`
                    },
                    urlImageTags: function(e, t) {
                        const n = xe.constructHostV2(e);
                        return t ? `${n}/info/tags/${t}.json` : `${n}/info/tags/picMap.json`
                    },
                    urlToExternalStatic: function(e) {
                        return `https://static-basket-01.wbbasket.ru${e}`
                    },
                    urlFeedbackVideoPreview: function(e) {
                        const t = e.id
                          , [n,r] = null == t ? void 0 : t.split("/");
                        return `https://videofeedback${("00" + n).slice(-2)}.wbbasket.ru/${r}/preview.jpg`
                    }
                },
                replaceDeliveryFilterVal: function(e) {
                    return e.replace(/&fdlvr=(\d+)/, ( (e, t) => {
                        const n = 23 - new Date(Date.now()).getHours() - 1;
                        let r = null;
                        switch (parseInt(t)) {
                        case 4:
                            r = n > 4 ? 4 : n;
                            break;
                        case 12:
                            r = n;
                            break;
                        case 24:
                            r = 24 + n;
                            break;
                        case 48:
                            r = 48 + n;
                            break;
                        case 72:
                            r = 72 + n;
                            break;
                        case 120:
                            r = 120 + n
                        }
                        return null != r ? `&fdlvr=${r}` : ""
                    }
                    ))
                },
                path: {
                    fileName: e => (null == e ? void 0 : e.substring(e.lastIndexOf("/") + 1)) || "",
                    extension: e => (null == e ? void 0 : e.slice(1 + (Math.max(e.lastIndexOf("."), 0) || e.length))) || ""
                },
                iOS: function() {
                    return ["iPad Simulator", "iPhone Simulator", "iPod Simulator", "iPad", "iPhone", "iPod"].includes(navigator.platform) || navigator.userAgent.includes("Mac") && "ontouchend"in document
                },
                huawei: function() {
                    const e = navigator.userAgent || navigator.vendor || window.opera;
                    return /huawei/i.test(e)
                },
                formatVideoDuration: function(e) {
                    const t = Math.floor(e / 60)
                      , n = e % 60;
                    return `${t < 10 ? `0${t}` : t}:${n < 10 ? `0${n}` : n}`
                },
                setImgFunc: function(e, t) {
                    if ("function" == typeof t)
                        switch (e) {
                        case "basket_route_map":
                            xe.volHostV2 = t;
                            break;
                        case "feedback_route_map":
                            xe.volFeedbackHost = t
                        }
                },
                downloadFile(e) {
                    const t = URL.createObjectURL(e)
                      , n = document.createElement("a");
                    n.setAttribute("target", "_blank"),
                    n.href = t,
                    document.body.appendChild(n),
                    n.click(),
                    document.body.removeChild(n)
                }
            };
            const je = Object.freeze({
                delete: 0,
                add: 1
            });
            let Le = function() {
                return (0,
                s.A)((function(e, t=!1) {
                    this.items = e.sort(( (e, t) => {
                        var n, r;
                        return null !== (n = t.timestamp) && void 0 !== n ? n : 0 - (null !== (r = e.timestamp) && void 0 !== r ? r : 0)
                    }
                    )),
                    this.isEmptyCache = t,
                    this._favoritesGoodsMap = null
                }
                ), [{
                    key: "count",
                    get: function() {
                        return this.items.length
                    }
                }, {
                    key: "favoritesGoodsMap",
                    get: function() {
                        return null != this._favoritesGoodsMap || (this._favoritesGoodsMap = this.items.reduce(( (e, t) => (e.set(t.characteristicId, t),
                        e)), new Map)),
                        this._favoritesGoodsMap
                    }
                }])
            }();
            const Ue = Le
              , Fe = "user_favorite_goods_{0}_v{1}";
            let Ne = function() {
                function e(e) {
                    this.uid = null,
                    this.cacheModel = null,
                    this._storageHelper = e,
                    this._bindEvents()
                }
                var t = e.prototype;
                return t.setKey = function(e) {
                    this.uid = e,
                    this._checkOldCache(),
                    this.cacheModel = null
                }
                ,
                t.getLastSyncDt = async function() {
                    var e;
                    if (null == this.uid)
                        return -1;
                    try {
                        const t = await this._openIDb()
                          , n = await this._storageHelper.getItem(t, this.lastSyncCacheKey, "sync_dt");
                        return null !== (e = null == n ? void 0 : n.lastSyncDt) && void 0 !== e ? e : -1
                    } catch (e) {
                        return this.getLastSyncDtFromLocalStorage()
                    }
                }
                ,
                t.getLastSyncDtFromLocalStorage = function() {
                    var e;
                    if (null == this.uid)
                        return -1;
                    const t = null !== (e = localStorage.getItem(this.lastSyncCacheKey)) && void 0 !== e ? e : -1;
                    return parseInt(localStorage.hasItem(this.cacheKey) ? t : -1)
                }
                ,
                t.setLastSyncDt = async function(e) {
                    if (!(await this.getLastSyncDt() >= e || null == this.uid))
                        try {
                            const t = await this._openIDb();
                            await this._storageHelper.setItem(t, this.lastSyncCacheKey, {
                                name: "sync_dt",
                                lastSyncDt: e
                            })
                        } catch (t) {
                            localStorage.setItem(this.lastSyncCacheKey, e)
                        }
                }
                ,
                t.clearLastSyncDt = async function() {
                    try {
                        const e = await this._openIDb();
                        await this._storageHelper.removeItem(e, this.lastSyncCacheKey, "sync_dt")
                    } catch (e) {
                        localStorage.removeItem(this.lastSyncCacheKey)
                    }
                }
                ,
                t.getFavoriteGoods = async function(e=!1) {
                    if (null == this.uid && (this.cacheModel = new Ue([],!0)),
                    !this.cacheModel) {
                        let e = await this._fetchFromIDb();
                        null == e && (e = localStorage.getObject(this.cacheKey)),
                        this.cacheModel = null == e ? new Ue([],!0) : new Ue(e)
                    }
                    return e ? this.cacheModel : new Ue(this.cacheModel.items.filter((e => !e.needSync || e.needSync && e.syncType !== je.delete)),this.cacheModel.isEmptyCache)
                }
                ,
                t.getFavoriteGoodsFromLocalStorage = async function(e=null) {
                    var t;
                    null == this.uid && (this.cacheModel = new Ue([],!0));
                    const n = null !== (t = null != e ? e : await this._fetchFromIDb()) && void 0 !== t ? t : localStorage.getObject(this.cacheKey)
                      , r = null == n ? new Ue([],!0) : new Ue(n);
                    return new Ue(r.items.filter((e => !e.needSync || e.needSync && e.syncType != je.delete)),r.isEmptyCache)
                }
                ,
                t.setFavoriteGoods = async function(e) {
                    if (null == this.uid)
                        return;
                    this.cacheModel = null == e ? new Ue([],!0) : new Ue(e);
                    !await this._saveToIDb(e) && localStorage.putObject(this.cacheKey, e),
                    localStorage.setItem(this.tabsSyncCacheKey, `${Date.now()}`)
                }
                ,
                t.contains = function(e) {
                    if (null == this.cacheModel)
                        return !1;
                    const t = this.cacheModel.favoritesGoodsMap.get(e);
                    return null != t && !(t.needSync && t.syncType === je.delete)
                }
                ,
                t._checkOldCache = function() {
                    for (let e = 1; e < 1; e++)
                        localStorage.removeItem(String.format(Fe, this.uid, e))
                }
                ,
                t._bindEvents = function() {
                    window.addEventListener("storage", (e => {
                        null != e.key && e.key !== this.tabsSyncCacheKey || (this.cacheModel = null,
                        this.getFavoriteGoods())
                    }
                    ))
                }
                ,
                t._fetchFromIDb = async function() {
                    try {
                        const e = await this._openIDb()
                          , t = await this._storageHelper.getAll(e, this.cacheKey);
                        return null != t ? t : []
                    } catch (e) {
                        return console.log(`[FAVS_STORAGE]: fetching from idb failed, reason=${e.message}`),
                        null
                    }
                }
                ,
                t._saveToIDb = async function(e) {
                    try {
                        const t = await this._openIDb()
                          , n = t.transaction([this.cacheKey], "readwrite").objectStore(this.cacheKey);
                        n.clear();
                        for (let t of e)
                            n.put(t);
                        return !0
                    } catch (e) {
                        return console.log(`[FAVS_STORAGE]: saving to idb failed, reason=${e.message}`),
                        !1
                    }
                }
                ,
                t._openIDb = async function() {
                    try {
                        return await this._storageHelper.openDb("wb_" + this.cacheKey, {
                            onupgradeneeded: e => {
                                if (!e.objectStoreNames.contains(this.cacheKey)) {
                                    e.createObjectStore(this.cacheKey, {
                                        keyPath: "characteristicId"
                                    }).createIndex("timestamp", "timestamp", {
                                        unique: !1
                                    })
                                }
                                e.objectStoreNames.contains(this.lastSyncCacheKey) || e.createObjectStore(this.lastSyncCacheKey, {
                                    keyPath: "name"
                                })
                            }
                            ,
                            version: 1
                        })
                    } catch (e) {
                        return null
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "cacheKey",
                    get: function() {
                        return String.format(Fe, this.uid, 1)
                    }
                }, {
                    key: "lastSyncCacheKey",
                    get: function() {
                        return String.format("favorite_last_sync_dt_{0}_v{1}", this.uid, 1)
                    }
                }, {
                    key: "tabsSyncCacheKey",
                    get: function() {
                        return String.format("favorite_tabs_sync_v{0}", 1)
                    }
                }])
            }();
            const Re = Ne;
            let We = function() {
                function e() {}
                return e.convertToFavoriteGoods = function(e={}, t={}) {
                    var n, r, s, o, i, a, l, c;
                    const u = null === (n = e.sizes) || void 0 === n ? void 0 : n.find((e => e.optionId === t.characteristicId))
                      , d = null !== (r = null == u ? void 0 : u.price) && void 0 !== r ? r : e.price
                      , h = d && null !== (o = null === (s = null == u ? void 0 : u.stocks) || void 0 === s ? void 0 : s.some((e => e.qty > 0))) && void 0 !== o && o
                      , p = 20624 === e.brandId || 30624 === e.siteBrandId
                      , m = h ? d.priceToShow / 100 : 0;
                    return {
                        nmId: e.id,
                        cod1S: e.id,
                        brandName: e.brand,
                        characteristicId: t.characteristicId,
                        meta: t.meta,
                        id: t.characteristicId,
                        goodsName: e.name,
                        colorName: null === (a = null === (i = e.colors) || void 0 === i ? void 0 : i[0]) || void 0 === a ? void 0 : a.name,
                        onStock: h ? 1 : 0,
                        star: e.rating,
                        price: h ? d.basic / 100 : 0,
                        priceWithSale: m,
                        priceWithCouponAndDiscount: m,
                        sale: h ? d.sale : 0,
                        totalSale: h ? d.sale : 0,
                        salePrice: m,
                        targetUrl: null !== (l = t.targetUrl) && void 0 !== l ? l : "",
                        sizeName: null !== (c = null == u ? void 0 : u.origName) && void 0 !== c ? c : "",
                        stocks: null == u ? void 0 : u.stocks,
                        timestamp: t.timestamp,
                        deliveryHours: h && e.time1 + e.time2,
                        source: t.source,
                        subjectId: e.subjectId,
                        subjectParentId: e.subjectParentId,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks || e.commentsCount,
                        supplierId: e.supplierId,
                        supplier: e.supplier,
                        newlyArrived: h && (1 & t.source) > 0,
                        _rawCatalogModel: e,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !p && !!(8 & e.viewFlags),
                        paymentDiscountAmount: wb.priceHelper.calcWalletDiscount(m, e.currency, null == u ? void 0 : u.saleConditions),
                        premiumSale: e.premiumSale,
                        showRedPrice: wb.xnm.isRedPrice(e.panelPromoId),
                        get isDeleted() {
                            return !(this.goodsName || this.brandName || this.colorName || this.sizeName)
                        },
                        get showDiscount() {
                            return (this.price > 0 || this.priceWithCouponAndDiscount > 0) && this.price != this.priceWithCouponAndDiscount
                        }
                    }
                }
                ,
                e.convertFromAddModelToCacheItem = function(e, t) {
                    var n, r, s;
                    const o = wb.analitics.analiticsInfoToListName(e)
                      , i = {
                        characteristicId: e.characteristicId,
                        cod1S: e.cod1S,
                        id: e.characteristicId,
                        source: t,
                        targetUrl: `${null !== (n = e.targetUrl) && void 0 !== n ? n : ""}|${null !== (r = e.iid) && void 0 !== r ? r : 1}|${o}|${e.logs}`,
                        timestamp: Math.ceil(Date.now() / 1e3),
                        meta: e.meta
                    };
                    return (null === (s = i.meta) || void 0 === s ? void 0 : s.shade) && delete i.meta.shade,
                    i
                }
                ,
                e.convertFromCacheItemToUserStorageItem = function(e) {
                    return {
                        product_option_id: e.characteristicId,
                        product_id: e.cod1S,
                        target_url: e.targetUrl,
                        added_timestamp: e.timestamp,
                        meta: e.meta,
                        fav_type: 3 == e.source || 1 == e.source ? 1 : 2
                    }
                }
                ,
                e.convertFromUserStorageItemToCacheItem = function(e) {
                    return {
                        characteristicId: e.product_option_id,
                        cod1S: e.product_id,
                        targetUrl: e.target_url,
                        timestamp: e.added_timestamp,
                        count: 1,
                        source: e.fav_type,
                        meta: e.meta
                    }
                }
                ,
                e
            }();
            const He = We
              , qe = Object.freeze({
                waitlist: 1,
                poned: 2,
                both: 3
            });
            const ze = function() {
                function e(e, t, n, r, s) {
                    this.chrt_id = +t,
                    this.cod_1s = n,
                    this.client_ts = r || Date.now() / 1e3 | 0,
                    this.op_type = e || 1,
                    this.type = s || 2
                }
                return e.fromCache = function(t) {
                    if (0 === t.syncType)
                        return e.toDelete(t.characteristicId);
                    const n = new e(1,t.characteristicId,t.cod1S,t.timestamp,t.source);
                    return n.client_ts > 1e12 && (n.client_ts = n.client_ts / 1e3 | 0),
                    n.target_url = t.targetUrl,
                    t.meta && (n.meta_json = JSON.stringify(t.meta)),
                    n
                }
                ,
                e.toDelete = function(t) {
                    return new e(3,t)
                }
                ,
                e.convertFromSharedModelToCacheItem = function(e) {
                    const t = {
                        characteristicId: e.chrt_id,
                        cod1S: e.cod_1s,
                        targetUrl: e.target_url,
                        timestamp: e.client_ts,
                        source: e.type
                    };
                    try {
                        t.meta = e.meta_json ? JSON.parse(e.meta_json) : null
                    } catch (e) {}
                    return t
                }
                ,
                e
            }();
            let Ve = function() {
                function e(e) {
                    this._cacheHelper = e,
                    this.debounceSync = this.$helper.debounce(this.sync.bind(this), 3e3)
                }
                var t = e.prototype;
                return t._getOperationAsync = async function() {
                    return (await this._cacheHelper.getFavoriteGoods(!0)).items.filter((e => e.needSync)).map((e => ze.fromCache(e)))
                }
                ,
                t._getAllAsync = async function() {
                    return (await this._cacheHelper.getFavoriteGoods()).items.map((e => ze.fromCache(e)))
                }
                ,
                t.sync = async function(e) {
                    var t;
                    if (this.$auth.isAuth) {
                        this._syncProcess = null !== (t = this._syncProcess) && void 0 !== t ? t : this._sync(e);
                        try {
                            return await this._syncProcess
                        } catch (e) {} finally {
                            this._syncProcess = null
                        }
                    }
                }
                ,
                t._sync = async function(e) {
                    return await navigator.locks.request("lock-fav-sync", (async t => {
                        const n = await this._cacheHelper.getLastSyncDt()
                          , r = await this._getOperationAsync()
                          , s = this.$services.sessionService.getSession();
                        try {
                            const t = await this._doSync({
                                ts: n,
                                sessionId: s,
                                operations: r,
                                timeout: e
                            });
                            if (this._sendMetrics(t.state),
                            0 === t.state && t.change_ts > 0)
                                return await this._updateProductsAsync(r, t);
                            if (1 === t.state) {
                                const e = await this._getAllAsync()
                                  , t = await this._doSync({
                                    ts: n,
                                    sessionId: s,
                                    operations: e,
                                    rememberMe: !0
                                });
                                if (0 === t.state && t.change_ts > 0)
                                    return await this._updateProductsAsync(e, t)
                            } else
                                t && wb.spa.logError(new Error(`[WB_FAVS_SYNC]: sync state:${t.state}`), {
                                    result: t,
                                    ts: n,
                                    deviceId: s,
                                    opLen: r.length,
                                    hasJwt: this.$auth.isAuth
                                })
                        } catch (e) {
                            const t = !e.isCustomError && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message || "Cancelled" === e.message);
                            this._sendMetrics(t ? "network" : "error"),
                            wb.spa.logError(new Error(`[WB_FAVS_SYNC]: ${e.message}`), {
                                ts: n,
                                deviceId: s,
                                opLen: r.length,
                                hasJwt: this.$auth.isAuth
                            })
                        }
                        return !1
                    }
                    ))
                }
                ,
                t._updateProductsAsync = async function(e, t) {
                    return await this._cacheHelper.setFavoriteGoods(await this.mergeUpdatedAndCacheItems(e, t.result_set)),
                    await this._cacheHelper.setLastSyncDt(t.change_ts),
                    !0
                }
                ,
                t.mergeUpdatedAndCacheItems = async function(e, t) {
                    var n;
                    const r = (null === (n = (await this._cacheHelper.getFavoriteGoods(!0)).items) || void 0 === n ? void 0 : n.toMap((e => e.characteristicId), (e => e))) || new Map;
                    return null == e || e.forEach((e => {
                        if (3 === e.op_type)
                            r.delete(e.chrt_id);
                        else {
                            const t = r.get(e.chrt_id);
                            t && (delete t.needSync,
                            delete t.syncType)
                        }
                    }
                    )),
                    null == t || t.forEach((e => {
                        const t = r.get(e.chrt_id);
                        if (null == t ? void 0 : t.needSync) {
                            if (!e.is_deleted)
                                return;
                            if (1 === t.op_type)
                                return
                        }
                        e.is_deleted ? r.delete(e.chrt_id) : r.set(e.chrt_id, ze.convertFromSharedModelToCacheItem(e))
                    }
                    )),
                    r.toArray().sort(( (e, t) => t.timestamp - e.timestamp))
                }
                ,
                t._doSync = function({ts: e, sessionId: t, operations: n, rememberMe: r=!1, timeout: s=null}) {
                    return this.$wbxHttpClient.fetch(`https://favs-storage-api.wildberries.ru/api/favs/sync?ts=${e}&device_id=${t}${r ? "&remember_me=true" : ""}`, {
                        method: "POST",
                        body: JSON.stringify(n),
                        headers: {
                            "Content-Type": "application/json",
                            "Wb-AppType": "site"
                        },
                        timeout: s || 1e4
                    }).then((async e => e.ok ? e.json() : {})).then((e => (e.result_set && (e.result_set = e.result_set[0] || []),
                    e)))
                }
                ,
                t._sendMetrics = function(e) {
                    try {
                        fetch(`/webapi/logging/favs/metrics?status=${e}`, {
                            method: "POST"
                        })
                    } catch (e) {}
                }
                ,
                e
            }();
            const Ge = Ve
              , Je = "/webapi/lk/favorites"
              , Qe = "favs/favs_v1_synced"
              , Ke = "favs/favs_v3_synced"
              , Xe = "favs/site_items"
              , Ye = "_favs_synced_v3";
            let Ze = function() {
                function e() {
                    this._cacheHelper = new Re(this.$storageHelper),
                    this._enrichedFavoriteItems = new Map,
                    this._timer = null,
                    this.isSynced = !1,
                    this._hasBeenLoadedOnce = !1,
                    this._bindEvents()
                }
                var t = e.prototype;
                return t.init = function() {
                    Object.setPrototypeOf(Ge.prototype, WbSpaModel.prototype),
                    this.dumpFav = new Ge(this._cacheHelper)
                }
                ,
                t.setKey = function(e, t) {
                    this._stopSyncronizing(),
                    e && (this._cacheHelper.setKey(t),
                    localStorage.clearStartsWith(Ye, this._favV3Key),
                    this._startSyncronizing())
                }
                ,
                t.syncFromServerAsync = async function() {
                    if (this.isSynced || this._initialSyncInProgress)
                        return;
                    this._initialSyncInProgress = !0;
                    const e = await this._loadRawGoodsFromDumpAsync();
                    return this._initialSyncInProgress = !1,
                    e
                }
                ,
                t.getWlArrivedCatalogModelAsync = async function() {
                    window._debug && console.time("buildWlArrivedCatalogModel");
                    try {
                        const [e,t] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")])
                          , n = new t(e);
                        return n.setOnlyWlArrived(!0).setSorting(1).setGoods(Number.MAX_SAFE_INTEGER).complete(),
                        {
                            goods: n.favoriteGoods
                        }
                    } catch (e) {
                        return console.error(e),
                        {
                            goods: [],
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildWlArrivedCatalogModel")
                    }
                }
                ,
                t.getSimplifiedModelAsync = async function() {
                    window._debug && console.time("buildFavSimpleModel");
                    try {
                        const [e,t] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel")]);
                        return new t(e).setSorting(7).setGoods(16).toSimpleModel()
                    } catch (e) {
                        return console.error(e),
                        {
                            goods: [],
                            totalCount: 0,
                            availableCount: 0,
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildFavSimpleModel")
                    }
                }
                ,
                t.getFavsDataAsync = async function(e="") {
                    var t, n, r, s;
                    window._debug && console.time("buildFavModel");
                    const o = new URLSearchParams(e)
                      , i = (parseInt(null !== (t = o.get("page")) && void 0 !== t ? t : 1),
                    null !== (n = o.get("sort")) && void 0 !== n ? n : "newlydown")
                      , a = null !== (r = o.get("search")) && void 0 !== r ? r : ""
                      , l = "true" == (null !== (s = o.get("wlArrived")) && void 0 !== s ? s : o.get("wlarrived"));
                    try {
                        const [e,t,n,{FavorireGoodsSorterModel: r}] = await Promise.all([this._loadFavoriteGoodsAsync(), this.$moduleLoader.loadModuleAsync("favoriteGoodsModel"), this.$moduleLoader.loadModuleAsync("pagerHelper"), this.$moduleLoader.loadModuleAsync("sorterModel")])
                          , s = new t(e,new r(i,window.location.href));
                        return s.setOnlyWlArrived(l).setSearch(a).setSorting().setGoods().complete(),
                        s
                    } catch (e) {
                        return console.error(e),
                        {
                            isEmptyCache: !0
                        }
                    } finally {
                        window._debug && console.timeEnd("buildFavModel")
                    }
                }
                ,
                t.addToFavs = async function(e, t=!1, n) {
                    if (!this.$router.userIsAuth)
                        throw new UnauthorizeError;
                    return this.sendToWishlistStat(e, n),
                    t ? this._addToPoned(e) : this._addToWl(e)
                }
                ,
                t.sendToWishlistStat = async function(e, t) {
                    var n, r, s, o, i, a, l, c, u, d, h;
                    if (window.wba)
                        try {
                            const p = t && t.sizes || e && e.sizes || [];
                            let m = {
                                stores: null === (n = p.find((t => t.ch == e.characteristicId))) || void 0 === n ? void 0 : n.stocks,
                                salePrice: t ? t.salePrice : e.salePrice
                            };
                            if (!m.stores) {
                                m = (await wb.xnm.getInfoForWbaStat([{
                                    nmId: e.cod1S,
                                    size: e.characteristicId
                                }])).get(e.cod1S)
                            }
                            const g = this.$analitic.getAnaliticsInfoFromTargetUrl(e.targetUrl)
                              , f = () => this.$analitic.analiticsInfoToListName(e.l ? e : g)
                              , y = () => this.$analitic.getTailObjectFromAnalyticsInfo(e.l ? e : g);
                            if (["CSD", "CAD", "WLC", "WLA"].includes(e.l)) {
                                const t = WbSpaModel.prototype.$analitic.getTermsFromTailObject(e.l);
                                e.t = t.category,
                                e.t1 = t.id_category,
                                e.t2 = t.discount_name
                            }
                            const v = {
                                id: e.cod1S,
                                chrt: e.characteristicId,
                                quantity: e.quantity,
                                price: null == m ? void 0 : m.salePrice,
                                affiliation: null !== (r = null == t ? void 0 : t.supplierId) && void 0 !== r ? r : e.supplierId,
                                inListIndex: e.iid || 1,
                                listName: f(),
                                name: null !== (s = null == t ? void 0 : t.name) && void 0 !== s ? s : e.goodsName,
                                brand: null !== (o = null == t ? void 0 : t.brand) && void 0 !== o ? o : e.brandName,
                                rating: null !== (i = null == t ? void 0 : t.reviewRating) && void 0 !== i ? i : e.reviewRating,
                                storeId: null !== (a = null == e ? void 0 : e.storeId) && void 0 !== a ? a : (h = null == m ? void 0 : m.stores,
                                (null == h ? void 0 : h.length) > 0 ? null == h ? void 0 : h.sort(( (e, t) => e.time1 + e.time2 - t.time1 - t.time2))[0].wh : null),
                                feedbacksCount: null !== (l = null == t ? void 0 : t.feedbacks) && void 0 !== l ? l : e.feedbacks,
                                subjectId: null !== (c = null == t ? void 0 : t.subjectId) && void 0 !== c ? c : e.subjectId,
                                subjectParentId: null !== (u = null == t ? void 0 : t.subjectParentId) && void 0 !== u ? u : e.subjectParentId,
                                logs: null !== (d = null == t ? void 0 : t.logs) && void 0 !== d ? d : e.logs,
                                tailObject: y()
                            };
                            this.$analitic.sendWbaEcomStat("add_to_wishlist", [v])
                        } catch (e) {
                            console.error(e)
                        }
                }
                ,
                t.deleteFromFavs = function(e, t) {
                    return this._removeFromPoned(t)
                }
                ,
                t.isAddedToFavs = function(e) {
                    return this.syncFromServerAsync(),
                    this._cacheHelper.contains(e)
                }
                ,
                t.deleteManyFromFavsAsync = async function(e) {
                    const t = e.map((e => ({
                        characteristicId: e.characteristicId,
                        targetInfo: e.targetInfo,
                        source: e.source
                    })));
                    this.$httpClient.fetchJSON(`${Je}/remove`, {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify(t)
                    });
                    const n = await this._cacheHelper.getFavoriteGoods(!0);
                    e.forEach((e => {
                        const t = n.favoritesGoodsMap.get(e.characteristicId);
                        t && (t.needSync = !0,
                        t.syncType = je.delete)
                    }
                    )),
                    await this._cacheHelper.setFavoriteGoods(n.favoritesGoodsMap.toArray()),
                    this._canUseV3() && this.dumpFav.debounceSync(),
                    WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Товар удалён из избранного"])
                }
                ,
                t.moveManyToBasketAsync = async function(e) {
                    this.$services.cartService.addManyItems(e).isSuccess && WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Товар добавлен в корзину"])
                }
                ,
                t._bindEvents = function() {
                    this.$eventBus.addEventListener("GeoUpdated", ( () => this._enrichedFavoriteItems.clear()))
                }
                ,
                t._loadFavoriteGoodsAsync = async function() {
                    try {
                        const e = await this._loadRawGoodsFromDumpAsync(4e3);
                        if (!e)
                            return {
                                isEmptyCache: !0,
                                items: []
                            };
                        if (e.isEmptyCache)
                            return {
                                isEmptyCache: !0,
                                items: []
                            };
                        const t = e.items;
                        return t.length < 1 ? {
                            isEmptyCache: !1,
                            items: []
                        } : this._enrichGoodsAsync(t)
                    } catch (e) {
                        return console.error(e),
                        this._loadFromCache()
                    }
                }
                ,
                t._loadRawGoodsAsync = async function() {
                    return this._cacheHelper.getFavoriteGoodsFromLocalStorage()
                }
                ,
                t._enrichGoodsAsync = async function(e) {
                    const t = e.reduce(( (e, t) => (!this._enrichedFavoriteItems.has(t.characteristicId) && e.set(t.characteristicId, t),
                    e)), new Map);
                    let n = {};
                    return t.size > 0 && (n = await wb.xnm.getCatalogCards(t.toArray((e => e.cod1S)), !1, !0, !0)),
                    {
                        isEmptyCache: !1,
                        items: e.reduce(( (e, t) => {
                            var r;
                            const s = n[t.cod1S]
                              , o = this._enrichedFavoriteItems.get(t.characteristicId);
                            if (s || o) {
                                const n = null !== (r = o && Object.assign({}, o)) && void 0 !== r ? r : He.convertToFavoriteGoods(s, t);
                                e.push(n),
                                !o && this._enrichedFavoriteItems.set(n.characteristicId, n)
                            }
                            return e
                        }
                        ), [])
                    }
                }
                ,
                t._addToPoned = function(e) {
                    return this._addThroughCache(e, qe.poned)
                }
                ,
                t._removeFromPoned = async function(e) {
                    const t = (await this._cacheHelper.getFavoriteGoods(!0)).items
                      , n = t.find((t => t.characteristicId === e));
                    n && (n.needSync = !0,
                    n.syncType = je.delete),
                    await this._cacheHelper.setFavoriteGoods(t),
                    this._canUseV3() && this.dumpFav.debounceSync()
                }
                ,
                t._addToWl = function(e) {
                    return this._addThroughCache(e, qe.waitlist)
                }
                ,
                t._addThroughCache = async function(e, t) {
                    if (this.$httpClient.fetchJSON(`${Je}/${t === qe.poned ? "addtoponed" : "addtowl"}`, {
                        method: "POST",
                        body: new URLSearchParams(e)
                    }),
                    !e.isFromCache) {
                        if ((await this._cacheHelper.getFavoriteGoods()).count >= 2e3)
                            throw new KnownServerError(String.format(this.$localziation.ponedMaxStorage, 2e3))
                    }
                    const n = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                    let r = n.find((t => t.characteristicId == e.characteristicId));
                    r ? r.timestamp = Math.ceil(Date.now() / 1e3) : (r = He.convertFromAddModelToCacheItem(e, t),
                    n.push(r)),
                    r.needSync = !0,
                    r.syncType = je.add,
                    await this._cacheHelper.setFavoriteGoods(n),
                    this._canUseV3() && this.dumpFav.debounceSync()
                }
                ,
                t.mergeActualAndCacheItems = async function(e, t, n) {
                    const r = e.reduce(( (e, t) => (e.set(t.characteristicId, t),
                    e)), new Map)
                      , s = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                    t > n && s.forEach((e => {
                        1e3 * e.timestamp > n && e.syncType != je.delete && (e.needSync = !0,
                        e.syncType = je.add)
                    }
                    ));
                    return s.filter((e => e.needSync)).forEach((e => {
                        (e.syncType == je.delete && r.has(e.characteristicId) || e.syncType == je.add && !r.has(e.characteristicId)) && r.set(e.characteristicId, e)
                    }
                    )),
                    r.toArray()
                }
                ,
                t._startSyncronizing = function() {
                    this._canUseV3() || (this._timer = setInterval((async () => {
                        var e;
                        if (this._syncronizigInProcess || !this.isSynced)
                            return;
                        const t = await this._cacheHelper.getLastSyncDt();
                        let n = await this._getDumpFilesInfoAsync();
                        if (null === n || n.needsMigration)
                            return;
                        if (n.migratedV3)
                            return this._stopSyncronizing();
                        const r = (await this._cacheHelper.getFavoriteGoods(!0)).items;
                        let s = 0
                          , o = !1;
                        if (!(0 === r.filter((e => e.needSync)).length && n.dumpTs <= t)) {
                            this._syncronizigInProcess = !0;
                            try {
                                let i = [];
                                if (n.dumpTs <= t)
                                    i = r.filter((e => !e.needSync || e.needSync && e.syncType !== je.delete));
                                else {
                                    const e = await this.$services.apiUserStorage.getData([{
                                        path: n.dumpFiles[0].path
                                    }]);
                                    if (!Array.isArray(e) || 0 === e.length)
                                        throw new Error(`failed to fetch data at path ${n.dumpFiles[0].path}`);
                                    let s = null;
                                    try {
                                        s = JSON.parse(this.$helper.base64.decode(e[0].file))
                                    } catch (e) {
                                        wb.spa.logError(e, `[FAVS_SYNC]: latest file is corrupted, file=${n.dumpFiles[0].path}`, !0)
                                    }
                                    if (Array.isArray(s)) {
                                        let e = s.map((e => He.convertFromUserStorageItemToCacheItem(e)));
                                        i = await this.mergeActualAndCacheItems(e, t, n.dumpTs),
                                        o = this._itemsAreMatched(e, i)
                                    } else
                                        i = r.filter((e => !e.needSync || e.needSync && e.syncType !== je.delete))
                                }
                                if (o)
                                    s = n.dumpTs;
                                else {
                                    const t = this.$helper.base64.encode(JSON.stringify(i.map((e => He.convertFromCacheItemToUserStorageItem(e)))))
                                      , r = [{
                                        path: Xe,
                                        file: t
                                    }]
                                      , o = await this.$services.apiUserStorage.setData(r);
                                    if (!o.success)
                                        throw new Error(`failed to set data reason=${null === (e = o.error) || void 0 === e ? void 0 : e.message}`);
                                    {
                                        s = n.dumpTs;
                                        const e = await this._getDumpFilesInfoAsync();
                                        (null == e ? void 0 : e.dumpTs) > 0 && (s = e.dumpTs)
                                    }
                                }
                                await this._cacheHelper.setFavoriteGoods(i.map((e => (e.needSync = !1,
                                e))))
                            } catch (e) {
                                wb.spa.logError(e, "[FAVS_SYNC]: sync failed", !0)
                            } finally {
                                this._syncronizigInProcess = !1,
                                await this._cacheHelper.setLastSyncDt(s > 0 ? s : t)
                            }
                        }
                    }
                    ), 3e4))
                }
                ,
                t._itemsAreMatched = function(e, t) {
                    return e.map((e => e.characteristicId)).sort(( (e, t) => e - t)).join(",") === t.map((e => e.characteristicId)).sort(( (e, t) => e - t)).join(",")
                }
                ,
                t._stopSyncronizing = function() {
                    clearInterval(this._timer)
                }
                ,
                t._updateSyncStatus = function(e) {
                    $.observable(this).setProperty({
                        isSynced: e
                    })
                }
                ,
                t._getTimeout = function(e) {
                    const t = new AbortController;
                    return setTimeout(( () => t.abort()), e),
                    t.signal
                }
                ,
                t._getDumpFilesInfoAsync = async function() {
                    try {
                        let e = await this.$services.apiUserStorage.getList("favs", {
                            signal: this._getTimeout(5e3)
                        });
                        if (null == e)
                            return null;
                        const t = {};
                        return t.dumpFiles = e.filter((e => [Xe, "favs/ios_items", "favs/android_items"].indexOf(e.path) > -1)),
                        t.dumpFiles.sort(( (e, t) => t.modify_time - e.modify_time)),
                        t.needsMigration = !e.find((e => e.path === Qe || "favs/favs_v2_synced" === e.path)),
                        t.migratedV3 = !!e.find((e => e.path === Ke)),
                        t.migratedV3 && localStorage.setItem(this._favV3Key, "1"),
                        t.dumpFiles.forEach((e => {
                            e.modify_time = 1e3 * e.modify_time
                        }
                        )),
                        t.dumpTs = t.dumpFiles.length > 0 ? t.dumpFiles[0].modify_time : 0,
                        t
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._migrateFromOldStorageAsync = async function() {
                    const e = await this._loadRawGoodsAsync();
                    if (!e.isEmptyCache) {
                        const t = e.items.map((e => He.convertFromCacheItemToUserStorageItem(e)))
                          , n = [{
                            path: Xe,
                            file: this.$helper.base64.encode(JSON.stringify(t))
                        }, {
                            path: Qe,
                            file: "W10="
                        }];
                        wb.spa.logError(new Error(`[FAVS_SYNC]: sync completed items_synced=${t.length}`)),
                        await this.$services.apiUserStorage.setData(n)
                    }
                }
                ,
                t._loadRawGoodsFromDumpAsync = async function(e) {
                    return this._canUseV3() ? await this._loadRawGoodsFromFavsServiceAsync(e) : (await this._loadRawGoodsFromUserStorageAsync(),
                    this._canUseV3() && await this._loadRawGoodsFromFavsServiceAsync(e)),
                    await this._cacheHelper.getFavoriteGoods()
                }
                ,
                t._loadRawGoodsFromFavsServiceAsync = async function(e) {
                    await this.dumpFav.sync(e),
                    this._migrateV3FromUserStorageAsync(),
                    this._updateSyncStatus(!0)
                }
                ,
                t._migrateV3FromUserStorageAsync = async function() {
                    if (localStorage.hasItem(this._favV3Key))
                        return;
                    const e = await this._getDumpFilesInfoAsync();
                    if (null !== e && !e.migratedV3)
                        if (e.dumpTs > 0) {
                            const t = e.dumpFiles.find((e => e.path === Xe));
                            let n = null;
                            const r = await this.$services.apiUserStorage.getData([{
                                path: t.path
                            }]);
                            if (!Array.isArray(r) || 0 === r.length)
                                throw new Error(`failed to fetch data at path ${t.path}`);
                            try {
                                n = JSON.parse(this.$helper.base64.decode(r[0].file))
                            } catch (e) {
                                throw wb.spa.logError(e, `[FAVS_MIGR]: latest file is corrupted, file=${t.path}`, !0),
                                e
                            }
                            if (!n || !Array.isArray(n))
                                throw "[FAVS_MIGR]: all dump files are corrupted";
                            if (!n.length)
                                return void this._setMigratedV3();
                            const s = n.map((e => He.convertFromUserStorageItemToCacheItem(e)))
                              , o = (await this._cacheHelper.getFavoriteGoods(!0)).favoritesGoodsMap;
                            s.forEach((e => {
                                o.get(e.characteristicId) || (e.needSync = !0,
                                e.syncType = je.add,
                                o.set(e.characteristicId, e))
                            }
                            )),
                            await this._cacheHelper.setFavoriteGoods(o.toArray().sort(( (e, t) => t.timestamp - e.timestamp))),
                            await this.dumpFav.sync() && this._setMigratedV3()
                        } else
                            this._setMigratedV3()
                }
                ,
                t._setMigratedV3 = function() {
                    localStorage.setItem(this._favV3Key, "1"),
                    this.$services.apiUserStorage.setData([{
                        path: Ke,
                        file: "W10="
                    }])
                }
                ,
                t._loadRawGoodsFromUserStorageAsync = async function() {
                    var e;
                    const t = await this._cacheHelper.getLastSyncDt();
                    let n, r = !1, s = null;
                    try {
                        const e = await this._getDumpFilesInfoAsync();
                        if ((null == e ? void 0 : e.needsMigration) && this._migrateFromOldStorageAsync(),
                        null == e ? void 0 : e.migratedV3)
                            return;
                        if (null != e) {
                            if (t === e.dumpTs || 0 === e.dumpTs)
                                return;
                            let o = 0
                              , i = null;
                            for (; o < e.dumpFiles.length && !(o > 0 && e.dumpFiles[o].modify_time < t); ) {
                                const t = await this.$services.apiUserStorage.getData([{
                                    path: e.dumpFiles[o].path
                                }]);
                                if (!Array.isArray(t) || 0 === t.length)
                                    throw new Error(`failed to fetch data at path ${e.dumpFiles[o].path}`);
                                try {
                                    i = JSON.parse(this.$helper.base64.decode(t[0].file));
                                    break
                                } catch (t) {
                                    wb.spa.logError(t, `[FAVS_SYNC]: latest file is corrupted, file=${e.dumpFiles[o].path}`, !0),
                                    o++,
                                    s = -1
                                }
                            }
                            if (!Array.isArray(i))
                                throw "[FAVS_SYNC]: all dump files are corrupted";
                            n = {
                                favsList: i.map((e => He.convertFromUserStorageItemToCacheItem(e)))
                            },
                            s = -1 === s ? s : e.dumpTs,
                            r = !0
                        }
                    } catch (e) {
                        if (e.isUnauthorize)
                            return null
                    } finally {
                        !this._cacheHelper.cacheModel && await this._cacheHelper.getFavoriteGoods(),
                        this._updateSyncStatus(!0)
                    }
                    if (!r)
                        return;
                    s = null != s ? s : t;
                    const o = null !== (e = null == n ? void 0 : n.favsList) && void 0 !== e ? e : [];
                    await this._cacheHelper.setFavoriteGoods(await this.mergeActualAndCacheItems(o, t, s)),
                    await this._cacheHelper.setLastSyncDt(s)
                }
                ,
                t._canUseV3 = function() {
                    return !0
                }
                ,
                (0,
                s.A)(e, [{
                    key: "_favV3Key",
                    get: function() {
                        return `${Ye}_${WbSpaModel.prototype.$auth.um.userUid}`
                    }
                }])
            }();
            const et = Ze;
            let tt = function() {
                function e() {
                    this.timer = null,
                    this.lastUpdate = -1 / 0,
                    this.userData = {},
                    this.balanceInfo = {},
                    this.loadRequesterPromise = null
                }
                var t = e.prototype;
                return t.setKey = function(e, t) {
                    e && (this.USER_INFO_CACHE_KEY_FORMATTED = String.format("user-info-{0}", t))
                }
                ,
                t.getMaskedInfo = function() {
                    return this._getLocalUserInfo()
                }
                ,
                t._getLocalUserInfo = function() {
                    var e;
                    return null !== (e = this._masketInfo) && void 0 !== e ? e : localStorage.getObject(this.USER_INFO_CACHE_KEY_FORMATTED)
                }
                ,
                t.clear = function() {
                    this.lastUpdate = -1 / 0
                }
                ,
                t.clearLocalUserInfo = function() {
                    this.USER_INFO_CACHE_KEY_FORMATTED && localStorage.removeItem(this.USER_INFO_CACHE_KEY_FORMATTED)
                }
                ,
                t.getUserDataAsync = async function(e=!1, t=!1) {
                    var n;
                    if (t && this.userData.isAuthenticated && !this.userData.isAuthenticated)
                        return wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        });
                    this.basicDataTask = null !== (n = this.basicDataTask) && void 0 !== n ? n : this._loadBasicDataInternal();
                    const r = this.basicDataTask
                      , [s] = await Promise.all([r]);
                    if (this.basicDataTask = null,
                    t && !this.userData.isAuthenticated)
                        return wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        });
                    if (s.maskedInfo) {
                        s.maskedInfo.isEmp = s.isEmployeeSynced,
                        this._masketInfo = s.maskedInfo;
                        try {
                            localStorage.putObject(this.USER_INFO_CACHE_KEY_FORMATTED, s.maskedInfo)
                        } catch (e) {}
                    }
                    return {
                        userInfo: s,
                        userExtraInfo: {
                            dataLoaded: !0,
                            discountInfo: {
                                purchase: s.purchaseAmount,
                                personalDiscount: s.personalDiscount,
                                purchasePercent: s.purchasePercent
                            }
                        }
                    }
                }
                ,
                t.removeInn = function() {
                    $.observable(this.userData).setProperty({
                        inn: ""
                    })
                }
                ,
                t.updateFioAsync = async function(e, t, n) {
                    return (await this._loadRequetser()).updateFioAsync(e, t, n, this.userData)
                }
                ,
                t.updateSexAsync = async function(e) {
                    return (await this._loadRequetser()).updateSexAsync(e, this.userData)
                }
                ,
                t.updateBirthdayAsync = async function(e) {
                    return (await this._loadRequetser()).updateBirthdayAsync(e, this.userData)
                }
                ,
                t.updateEmailAsync = async function(e) {
                    return (await this._loadRequetser()).updateEmailAsync(e, this.userData)
                }
                ,
                t.updatePhoneMobileAsync = async function(e, t, n) {
                    return (await this._loadRequetser()).updatePhoneMobileAsync(e, t, n, this.userData)
                }
                ,
                t.updateInnAsync = async function(e) {
                    return (await this._loadRequetser()).updateInnAsync(e, this.userData)
                }
                ,
                t.updateImageAsync = async function(e) {
                    return (await this._loadRequetser()).updateImageAsync(e, this.userData)
                }
                ,
                t.removeUserPhotoAsync = async function() {
                    return (await this._loadRequetser()).removeUserPhotoAsync(this.userData)
                }
                ,
                t.updateSettingsAsync = async function(e, t) {
                    return (await this._loadRequetser()).updateUserSettingsAsync(e, t, this.userData)
                }
                ,
                t._loadBasicDataInternal = async function() {
                    if (Date.now() - this.lastUpdate < 6e5)
                        return this.userData;
                    const e = await this._loadRequetser();
                    return this.lastUpdate = Date.now(),
                    e.loadBasicInfo(this.userData, this._getLocalUserInfo())
                }
                ,
                t._loadRequetser = async function() {
                    return this.loadRequesterPromise || (this.loadRequesterPromise = this.$moduleLoader.loadModuleAsync("userInfoRequester")),
                    this.loadRequesterPromise
                }
                ,
                t.migrateProfileFromGlobal = async function() {
                    if (localStorage.hasItem("wbx_to_wb_profile_synced"))
                        return;
                    if (!!(await this.$services.apiUserStorage.getList("profile")).find((e => "profile/info_synced" === e.path)))
                        return;
                    const e = `${this.$services.cartService.publicBasketApiUrl}/lk/account/addresses/migratefromglobal`;
                    try {
                        await this.$httpClient.fetchJSON(e, {
                            method: "POST"
                        }),
                        localStorage.setItem("wbx_to_wb_profile_synced", 1)
                    } catch (e) {
                        wb.spa.logError("[WBX_PROFILE_MIGR]: failed to migrate profile", e)
                    }
                }
                ,
                e
            }();
            const nt = tt;
            var rt = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            const st = "/webapi/newsfeed/events";
            let ot = function() {
                function e() {
                    this.eventsModel = {
                        eventsCount: 0,
                        loading: !0
                    }
                }
                var t = e.prototype;
                return t.canSendToBell = function() {
                    var e, t, n;
                    const r = Number(null === (n = null === (t = null === (e = wb.global) || void 0 === e ? void 0 : e.settings) || void 0 === t ? void 0 : t.variables) || void 0 === n ? void 0 : n.bellPercentage);
                    return r > 0 && this.$auth.jwtData.user % 100 < r
                }
                ,
                t.bellFetch = function(e, t={}) {
                    const {headers: n={}} = t
                      , r = rt(t, ["headers"])
                      , s = new Headers(n);
                    return s.set("X-Request-ID", wb.helpers.generateGuid()),
                    this.$wbxHttpClient.fetch(`https://wbx-bell-v2.wildberries.ru/shard-${this.$auth.sShard}/${e}`, Object.assign({
                        headers: s
                    }, r))
                }
                ,
                t.checkNotificationCountAsync = async function() {
                    if (this._clearTimer(),
                    !this.$auth.isAuth)
                        return this.eventsModel;
                    let e = !1;
                    try {
                        this.canSendToBell() && this.bellFetch("api/v2/notice/unread?app_type=web", {
                            method: "GET"
                        });
                        const t = await this.$httpClient.fetchJSON(`${st}/count`, {
                            method: "POST"
                        });
                        $.observable(this.eventsModel).setProperty({
                            eventsCount: t
                        }),
                        e = !0
                    } catch (e) {
                        console.error(e),
                        $.observable(this.eventsModel).setProperty({
                            isNetworkError: !0
                        })
                    } finally {
                        return $.observable(this.eventsModel).setProperty({
                            loading: !1
                        }),
                        this._startTimer(e),
                        this.eventsModel
                    }
                }
                ,
                t.markNotificationRead = async function(e) {
                    this._clearTimer();
                    let t = !1;
                    try {
                        await this.$httpClient.fetchJSON(`${st}/mark`, {
                            method: "POST",
                            body: new URLSearchParams({
                                readIds: e.join(";")
                            })
                        }),
                        $.observable(this.eventsModel).setProperty({
                            eventsCount: Math.max(this.eventsModel.eventsCount - e.length, 0)
                        }),
                        t = !0
                    } catch (e) {
                        $.observable(this.eventsModel).setProperty({
                            isNetworkError: !0
                        })
                    } finally {
                        return this._startTimer(t),
                        {
                            isSuccess: t,
                            error: undefined
                        }
                    }
                }
                ,
                t._clearTimer = function() {
                    clearTimeout(this.timer)
                }
                ,
                t._startTimer = function(e) {
                    this.timer = setTimeout(( () => this.checkNotificationCountAsync()), e ? 18e4 : 6e3)
                }
                ,
                e
            }();
            const it = ot;
            let at = function() {
                function e() {
                    this.maxQuantity = 10,
                    this.canBeOrdered = !0,
                    this.includeInOrder = !0
                }
                return e.fromWbBasketProduct = function(t) {
                    var n;
                    const r = new e
                      , s = +t.quantity;
                    r.characteristicId = r.id = +t.chrt_id,
                    r.quantity = s > 0 ? s : 1,
                    r.cod1S = t.cod_1s;
                    try {
                        r.meta = t.meta_json ? JSON.parse(t.meta_json) : null
                    } catch (e) {}
                    return r.targetUrl = null === (n = t.target_url) || void 0 === n ? void 0 : n.replace(/\x00/g, ""),
                    r.isDeleted = t.is_deleted,
                    r.timestamp = t.client_ts,
                    r._fromSync = !0,
                    r.viewFlags = t.viewFlags,
                    r
                }
                ,
                e.fromWbxBasketProduct = function(t) {
                    const n = new e
                      , r = +t.count;
                    return n.characteristicId = n.id = +t.product_option_id,
                    n.quantity = r > 0 ? r : 1,
                    n.cod1S = t.product_id,
                    n.targetUrl = t.target_url,
                    n.timestamp = t.added_timestamp,
                    n.meta = t.meta,
                    n.viewFlags = t.viewFlags,
                    n
                }
                ,
                e.fromCardModel = function(t, n, r) {
                    var s, o, i, a, l, c, u, d;
                    const h = new e
                      , p = +t.quantity
                      , m = WbSpaModel.prototype.$analitic.analiticsInfoToListName(Object.assign({
                        l: "AAA",
                        lw: "IT"
                    }, t))
                      , g = null === (s = t.meta) || void 0 === s ? void 0 : s.analitic
                      , f = (null == g ? void 0 : g.logs) || t.logs || (null === (i = null === (o = t.targetInfo) || void 0 === o ? void 0 : o.analiticsInfo) || void 0 === i ? void 0 : i.logs) || "";
                    g && f && (g.logs = f),
                    t.meta || (t.meta = {}),
                    t.meta.analitic = g;
                    const y = WbSpaModel.prototype.$user.getUserGradeFromCache();
                    if (h.characteristicId = h.id = +t.characteristicId,
                    h.quantity = p > 0 ? p : 1,
                    h.maxQuantity = (null == n ? void 0 : n.totalQuantity) || 10,
                    h.cod1S = t.cod1S,
                    h.targetUrl = `EX|${t.iid || "1"}|${m}|${f}`,
                    h.priceWithCoupon = h.priceWithCouponAndDiscount = h.priceWithCouponAndSpp = h.priceWithSale = h.price = t.priceWithCouponAndDiscount,
                    h.subjectId = t.subjectId,
                    h.subjectParentId = t.subjectParentId,
                    h.supplierId = t.supplierId,
                    h.supplierName = t.supplier,
                    h.reviewRating = t.reviewRating,
                    h.feedbacks = t.feedbacks || t.commentsCount,
                    h.meta = t.meta,
                    h.timestamp = Date.now() / 1e3 | 0,
                    h.viewFlags = (null == n ? void 0 : n.viewFlags) || t.viewFlags,
                    n) {
                        if (h.brandName = n.brand,
                        h.goodsName = n.name,
                        h.colorName = n.colorName || n.color,
                        h.promos = n.promotions,
                        h.isUnrefusable = n.isUnrefusable,
                        h.isPrepaid = n.isPrepaid,
                        h.isUnreturnable = n.isUnreturnable,
                        h.isVerificationReturn = n.isVerificationReturn,
                        h.logisticsCost = n.logisticsCost,
                        h.payloadV2 = n.payloadV2,
                        h.whDtype = null !== (a = n.whDtype) && void 0 !== a ? a : n.dtype,
                        h.catalogReturnCost = null !== (l = n.returnCost) && void 0 !== l ? l : null === (c = n.catalogPrice) || void 0 === c ? void 0 : c.return,
                        h.saleConditions = n.saleConditions,
                        n.panelPromoId && (h.panelPromoId = n.panelPromoId),
                        n.feedbacks && (h.feedbacks = n.feedbacks),
                        n.reviewRating && (h.reviewRating = n.reviewRating),
                        n.deliveryHours && (h.deliveryHours = n.deliveryHours),
                        n.catalogPrice ? (h.price = h.priceWithCoupon = n.catalogPrice.basic / 100,
                        h.salePrice = h.priceWithSale = h.priceWithCouponAndDiscount = h.priceWithCouponAndSpp = n.catalogPrice.total / 100,
                        h.sale = n.catalogPrice.sale) : (h.priceWithSale = n.salePrice,
                        h.sale = n.sale),
                        WbSpaModel.prototype.$useCatalogReturnCost() && (h.returnCost = Math.round(h.catalogReturnCost / 100),
                        4 == (null == y ? void 0 : y.version))) {
                            const e = 16 & h.whDtype || 32 & h.whDtype ? 1 : y.return_fee;
                            h.returnCost = Math.min(h.priceWithCouponAndDiscount, h.returnCost * e)
                        }
                        const e = null === (u = n.sizes) || void 0 === u ? void 0 : u.find((e => e.ch === h.id));
                        if (e && (h.sizeName = e.nm,
                        h.stocks = e.stocks,
                        e.deliveryHours && (h.deliveryHours = e.deliveryHours),
                        h.payloadV2 = e.payloadV2,
                        h.whDtype = null !== (d = e.whDtype) && void 0 !== d ? d : e.dtype,
                        e.returnCost && (h.catalogReturnCost = e.returnCost),
                        e.logisticsCost && (h.logisticsCost = e.logisticsCost),
                        e.saleConditions && (h.saleConditions = e.saleConditions),
                        e.catalogPrice ? (h.price = h.priceWithCoupon = e.catalogPrice.basic / 100,
                        h.salePrice = h.priceWithSale = h.priceWithCouponAndDiscount = e.catalogPrice.total / 100,
                        h.sale = e.catalogPrice.sale) : e.salePrice && e.salePrice != h.priceWithCouponAndDiscount && (h.priceWithCoupon = h.priceWithCouponAndDiscount = h.priceWithCouponAndSpp = h.priceWithSale = h.price = e.salePrice),
                        e.saleConditions && wb.xnm.expandSaleConditions(h, e),
                        WbSpaModel.prototype.$useCatalogReturnCost() && e.returnCost && (h.returnCost = Math.round(h.catalogReturnCost / 100),
                        4 == (null == y ? void 0 : y.version)))) {
                            const e = 16 & h.whDtype || 32 & h.whDtype ? 1 : y.return_fee;
                            h.returnCost = Math.min(h.priceWithCouponAndDiscount, h.returnCost * e)
                        }
                    }
                    return r && (h.stocks = r),
                    h.stocks && (h.maxQuantity = h.stocks.sumBy((e => e.qty))),
                    h.canBeOrdered = h.maxQuantity > 0,
                    h
                }
                ,
                e.fromBasketInputExtended = function(t) {
                    const n = e.fromCardModel(t, null, t.stocks);
                    return n.price = t.price,
                    n.colorName = t.colorName,
                    n.goodsName = t.goodsName,
                    n.sizeName = t.sizeName,
                    n.viewFlags = t.viewFlags,
                    n
                }
                ,
                e.enrichCatalogGood = function(e, t={}) {
                    var n, r, s, o, i, a, l;
                    if (!e)
                        return;
                    const c = null === (n = t.sizes) || void 0 === n ? void 0 : n.find((t => t.optionId === e.characteristicId))
                      , u = null !== (s = null === (r = null == c ? void 0 : c.stocks) || void 0 === r ? void 0 : r.some((e => e.qty > 0))) && void 0 !== s && s
                      , d = null !== (o = null == c ? void 0 : c.price) && void 0 !== o ? o : t.price;
                    if (e.brandName = t.brand,
                    e.goodsName = t.name,
                    e.colorName = null === (a = null === (i = t.colors) || void 0 === i ? void 0 : i[0]) || void 0 === a ? void 0 : a.name,
                    e.canBeOrdered = u,
                    e.price = u ? d.basic / 100 : 0,
                    e.priceWithSale = u ? d.total / 100 : 0,
                    e.priceWithCoupon = u ? d.basic / 100 : 0,
                    e.priceWithCouponAndDiscount = d.total / 100,
                    e.sale = u ? d.sale : 0,
                    e.totalSale = u ? d.sale : 0,
                    e.salePrice = u ? d.total / 100 : 0,
                    e.sizeName = null !== (l = null == c ? void 0 : c.origName) && void 0 !== l ? l : "",
                    e.stocks = null == c ? void 0 : c.stocks,
                    e.stocks && (e.maxQuantity = e.stocks.sumBy((e => e.qty))),
                    e.subjectId = t.subjectId,
                    e.subjectParentId = t.subjectParentId,
                    e.supplierId = t.supplierId,
                    e.supplierName = t.supplier,
                    e.volume = t.volume,
                    e.reviewRating = t.reviewRating,
                    e.feedbacks = t.feedbacks || t.commentsCount,
                    e.promos = t.promotions,
                    e.isUnrefusable = t.isUnrefusable,
                    e.isPrepaid = t.isPrepaid,
                    e.isUnreturnable = t.isUnreturnable,
                    e.isVerificationReturn = t.isVerificationReturn,
                    e.priceWithCouponAndSpp = e.priceWithCouponAndDiscount,
                    e.catalogReturnCost = d.return,
                    WbSpaModel.prototype.$useCatalogReturnCost()) {
                        e.returnCost = Math.round(d.return / 100);
                        const t = WbSpaModel.prototype.$user.getUserGradeFromCache();
                        if (4 == (null == t ? void 0 : t.version)) {
                            const n = 16 & e.whDtype || 32 & e.whDtype ? 1 : t.return_fee;
                            e.returnCost = Math.min(e.priceWithCouponAndDiscount, e.returnCost * n)
                        }
                    }
                    return e.logisticsCost = d.logistics || 0,
                    e.priceBasic = d.basic,
                    e.priceTotal = d.total,
                    e.whDtype = null == c ? void 0 : c.dtype,
                    e.payloadV2 = null == c ? void 0 : c.payload,
                    e.saleConditions = null == c ? void 0 : c.saleConditions,
                    e.viewFlags = t.viewFlags,
                    t.panelPromoId && (e.panelPromoId = t.panelPromoId),
                    e
                }
                ,
                e.enrichStaticGood = function(e, t={}) {
                    if (e)
                        return e.goodsName = t.n || e.goodsName || "Название не указано",
                        e.colorName = t.c || e.colorName,
                        e
                }
                ,
                e
            }();
            const lt = at;
            const ct = function() {
                function e(e, t) {
                    this.settings = {},
                    this.paymentTypes = [e ? {
                        userGrade: 0,
                        bankCards: [{
                            id: "_newcardid",
                            name: "Привязать карту",
                            createNew: !0,
                            system: "bindnew"
                        }],
                        isOnline: !0,
                        isCreditCard: !0,
                        codeLower: "crd",
                        name: "Оплата картой",
                        id: "63",
                        available: !0
                    } : {
                        isOnline: !0,
                        isCreditCard: !0,
                        codeLower: "crd",
                        name: "Оплата картой",
                        id: "63",
                        available: !0
                    }],
                    this.deliveryWay = "self",
                    this.basketItems = null != t ? t : []
                }
                return e.calc = function(e) {
                    e.basketItems.forEach((e => {
                        e.stocks && (e.maxQuantity = e.stocks.sumBy((e => e.qty))),
                        e.maxQuantity > 0 && e.maxQuantity < e.quantity ? e.partQuantity = e.maxQuantity : e.partQuantity = null,
                        e._qnt = e.partQuantity || e.quantity,
                        wb.global.settings.switches.dontIncludeSoldItemsInOrder && !e.maxQuantity && (e.includeInOrder = !1)
                    }
                    ));
                    const t = e.basketItems.filter((e => e.maxQuantity > 0));
                    return 1 === t.length && (t[0].includeInOrder = !0),
                    e.totalQuantity = e.basketItems.sumBy((e => e._qnt)),
                    e
                }
                ,
                e
            }()
              , ut = 256;
            let dt = function() {
                function e(e, t, n) {
                    this._isAuth = e,
                    this.sessionService = t,
                    this.$eventBus = n,
                    this.$eventBus.addEventListener("onUserAuth", this.clearMemory.bind(this))
                }
                var t = e.prototype;
                return t.clearMemory = function() {
                    this.innerStorage = new ct(this.isAuth,[])
                }
                ,
                t.migrate = function() {
                    if (localStorage.hasItem("_basket")) {
                        const e = this._getGuestBasket();
                        return e.basketItems && e.basketItems.reverse(),
                        this.addManyItems(e.basketItems, !0),
                        this._detGuestBasket(),
                        e.basketItems
                    }
                    return []
                }
                ,
                t.addManyItems = function(e, t) {
                    if (!(null == e ? void 0 : e.length))
                        return {
                            isSuccess: !1,
                            error: "[basket] Неизвестная ошибка"
                        };
                    const n = this._syncFrom();
                    if (!t && n.basketItems.length + e.length > ut)
                        return {
                            isSuccess: !1,
                            error: String.format("Вы не можете добавить в корзину больше {0}", $.views.converters.pluralize(ut, "{0} товар", "{0} товара", "{0} товаров"))
                        };
                    let r = !0;
                    const s = n.basketItems.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder));
                    for (let t = 0; t < e.length; t++) {
                        const o = n.basketItems.findIndex((n => n.characteristicId === e[t].characteristicId));
                        -1 === o ? (r = !1,
                        e[t].timestamp <= this.lastTs && (e[t].timestamp = this.lastTs + 1),
                        e[t].includeInOrder = s,
                        n.basketItems.unshift(e[t])) : n.basketItems[o].timestamp > 0 && (e[t].timestamp = n.basketItems[o].timestamp,
                        e[t].quantity = n.basketItems[o].quantity)
                    }
                    this._syncTo();
                    return {
                        isExist: r,
                        isSuccess: !0,
                        xnmDictTask: this._enrichProducts(n.basketItems.map((e => e.cod1S)))
                    }
                }
                ,
                t.clearItems = function(e) {
                    if ((null == e ? void 0 : e.length) > 0) {
                        const t = this._syncFrom();
                        t.basketItems = t.basketItems.filter((function(t) {
                            return -1 === e.indexOf(t.characteristicId)
                        }
                        )),
                        this._syncTo()
                    }
                }
                ,
                t.add = function(e) {
                    const t = this._syncFrom();
                    if (t.basketItems.length + 1 > ut)
                        return {
                            isSuccess: !1,
                            error: String.format("Вы не можете добавить в корзину больше {0}", $.views.converters.pluralize(ut, "{0} товар", "{0} товара", "{0} товаров"))
                        };
                    const n = t.basketItems.find((t => t.characteristicId === e.characteristicId));
                    n ? n.timestamp > 0 && (e.timestamp = n.timestamp,
                    e.quantity = n.quantity) : (e.timestamp <= this.lastTs && (e.timestamp = this.lastTs + 1),
                    e.includeInOrder = t.basketItems.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder)),
                    t.basketItems.unshift(e)),
                    this._syncTo();
                    return {
                        isExist: !!n,
                        isSuccess: !0,
                        xnmDictTask: this._enrichProducts(t.basketItems.map((e => e.cod1S)))
                    }
                }
                ,
                t.updateMeta = function(e, t) {
                    if (!e || !t)
                        return !1;
                    const n = this._syncFrom().basketItems.find((t => t.characteristicId === e));
                    return !!n && (n.meta = WbSpaModel.prototype.$helper.deepMerge(n.meta || {}, t),
                    this._syncTo(),
                    !0)
                }
                ,
                t.refresh = function(e, t) {
                    var n, r, s, o, i, a, l;
                    const c = this._syncFrom();
                    if ("remove" === t) {
                        const t = (null === (n = e.chrtIds) || void 0 === n ? void 0 : n.length) > 0 ? e.chrtIds[0] : e.chrtId;
                        c.basketItems = c.basketItems.filter((function(e) {
                            return e.characteristicId !== t
                        }
                        ))
                    } else if ("recalc" === t && e.quantity > 0) {
                        const t = c.basketItems.find((t => t.characteristicId === e.chrtId));
                        t && (t.quantity = e.quantity)
                    }
                    !e.isBuyItNowMode && e.includeInOrderMap && c.basketItems.forEach((t => {
                        e.includeInOrderMap.has(t.id) && (t.includeInOrder = e.includeInOrderMap.get(t.id))
                    }
                    )),
                    c.deliveryWay = e.deliveryWay;
                    let u = WbSpaModel.prototype.$services.userAddressService.get(e.addressId, e.deliveryWay);
                    u && (null === (r = c.deliveryPoint) || void 0 === r ? void 0 : r.addressId) !== u.addressId && (c.deliveryPoint = u,
                    c.deliveryPriceModel = null),
                    e.paymentTypeId && e.paymentTypeId !== (null === (s = c.paymentType) || void 0 === s ? void 0 : s.id) && (c.paymentType = c.paymentTypes.find((t => t.id === e.paymentTypeId && t.available))),
                    (null === (o = c.paymentType) || void 0 === o ? void 0 : o.isCreditCard) && e.bankCardId && e.bankCardId !== (null === (i = c.paymentType) || void 0 === i ? void 0 : i.bankCardId) && (c.paymentType.bankCardId = e.bankCardId,
                    c.paymentType.selectedBankCard = null === (l = null === (a = c.paymentTypes.find((e => e.isCreditCard))) || void 0 === a ? void 0 : a.bankCards) || void 0 === l ? void 0 : l.find((t => t.id === e.bankCardId))),
                    this._syncTo()
                }
                ,
                t.deleteCards = function(e) {
                    var t;
                    if (!e)
                        return;
                    const n = null === (t = this._syncFrom().paymentTypes) || void 0 === t ? void 0 : t.find((e => e.isCreditCard));
                    n && (n.bankCards = (n.bankCards || []).filter((t => -1 === e.indexOf(t.id)))),
                    this._syncTo()
                }
                ,
                t.setCardDefault = function(e) {
                    this.getBankCards().forEach((t => {
                        t.default = t.id === e
                    }
                    )),
                    this._syncTo()
                }
                ,
                t.setAddress = function(e, t) {
                    var n;
                    const r = this._syncFrom();
                    let s = WbSpaModel.prototype.$services.userAddressService.get(e, t);
                    s && (null === (n = r.deliveryPoint) || void 0 === n ? void 0 : n.addressId) !== s.addressId && (r.deliveryWay = t,
                    r.deliveryPoint = s,
                    r.deliveryPriceModel = null,
                    this._syncTo())
                }
                ,
                t.getBankCards = function() {
                    var e, t;
                    return (null === (t = null === (e = this._syncFrom().paymentTypes) || void 0 === e ? void 0 : e.find((e => e.isCreditCard))) || void 0 === t ? void 0 : t.bankCards) || []
                }
                ,
                t.getPaymentsForDeliveries = async function(e) {
                    var t;
                    const {payments: n} = await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`, {
                        method: "POST",
                        credentials: "include",
                        body: new URLSearchParams({
                            currency: e
                        })
                    }) || {};
                    return null === (t = null == n ? void 0 : n.find((e => "crd" == e.codeLower))) || void 0 === t || t.bankCards.forEach((e => {
                        e.isSbp || (e.icon = e.system)
                    }
                    )),
                    n
                }
                ,
                t.getItems = function() {
                    return this._syncFrom().basketItems
                }
                ,
                t.enrichItemsLocalInfo = function(e) {
                    const t = this._syncFrom().basketItems.toMap((e => e.id), (e => e));
                    e.forEach((e => {
                        const n = t.get(e.id);
                        (null == n ? void 0 : n.meta) && (e.meta = null == n ? void 0 : n.meta)
                    }
                    ))
                }
                ,
                t.save = function(e) {
                    const t = this._syncFrom()
                      , n = JSON.parse(JSON.stringify(e, ( (e, t) => "basketItems" === e ? void 0 : t)));
                    n.basketItems = e.basketItems.reduce(( (e, t) => (e.get(t.id) && e.set(t.id, wb.helpers.deepClone(t)),
                    e)), t.basketItems.toMap((e => e.id), (e => e))).toArray(),
                    this._syncTo(n)
                }
                ,
                t.updateIncludeInOrder = function(e) {
                    if (!e)
                        return;
                    this._syncFrom().basketItems.forEach((t => {
                        e.has(t.id) && (t.includeInOrder = e.get(t.id))
                    }
                    )),
                    this._syncTo()
                }
                ,
                t.get = function() {
                    return this._syncFrom()
                }
                ,
                t.getDeliveryPoint = function() {
                    return this._syncFrom().deliveryPoint
                }
                ,
                t.buyItNow = function(e) {
                    const t = this._syncFrom()
                      , n = t.basketItems.find((t => t.characteristicId == e));
                    if (n) {
                        const e = new ct(this.isAuth);
                        return e.isBuyItNowMode = !0,
                        n.includeInOrder = !0,
                        e.basketItems.unshift(n),
                        e.deliveryWay = t.deliveryWay,
                        e.deliveryPoint = t.deliveryPoint,
                        e.paymentTypes = t.paymentTypes,
                        e.paymentType = t.paymentType,
                        e.paymentType && (e.paymentType.bankCardId = t.paymentType.bankCardId,
                        e.paymentType.selectedBankCard = t.paymentType.selectedBankCard),
                        ct.calc(e),
                        e
                    }
                    return t
                }
                ,
                t.enrichProductsIfNeedAsync = function({force: e}={}) {
                    const t = this._syncFrom();
                    return t.basketItems.length > 0 && t.basketItems.every((e => !e.hasOwnProperty("priceWithCouponAndDiscount") && !e.hasOwnProperty("price"))) || e ? this._enrichProducts(t.basketItems.map((e => e.cod1S))) : Promise.resolve([])
                }
                ,
                t._getGuestBasket = function() {
                    const e = localStorage.getObject("_basket");
                    return e || new ct(!1)
                }
                ,
                t._detGuestBasket = function() {
                    localStorage.removeItem("_basket")
                }
                ,
                t._syncFrom = function() {
                    var e, t, n;
                    try {
                        const n = this.basketKey
                          , r = localStorage.getObject(n);
                        return r ? (this.innerStorage = r,
                        this.innerStorage ? this.innerStorage.basketItems || (this.innerStorage.basketItems = []) : this.innerStorage = new ct(this.isAuth,[])) : (null === (t = null === (e = this.innerStorage) || void 0 === e ? void 0 : e.basketItems) || void 0 === t ? void 0 : t.length) || (this.innerStorage = new ct(this.isAuth,[])),
                        this.isAuth && (localStorage.clearStartsWith("wb_basket_", n),
                        localStorage.clearStartsWith("wb___basketStorage_", `wb___basketStorage_${this.sessionService.getUserUid()}`)),
                        this.innerStorage
                    } catch (e) {
                        return console.error(e),
                        wb.spa.logError(e, "cartService syncfrom"),
                        null !== (n = this.innerStorage) && void 0 !== n ? n : new ct(this.isAuth)
                    }
                }
                ,
                t._syncTo = function(e) {
                    var t;
                    e && (this.innerStorage = e),
                    ct.calc(this.innerStorage);
                    try {
                        localStorage.putObject(this.basketKey, this.innerStorage)
                    } catch (e) {}
                    this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                        detail: {
                            count: null === (t = this.innerStorage) || void 0 === t ? void 0 : t.totalQuantity
                        }
                    }))
                }
                ,
                t._enrichProducts = async function(e) {
                    if (0 === e.length)
                        return {};
                    const [t,n] = await Promise.all([wb.xnm.getXnmProducts(e, !1), wb.xnm.getProductColorsByNmIdsAsync(e)])
                      , r = this._syncFrom();
                    let s = !1;
                    return r.basketItems.forEach((e => {
                        t[e.cod1S] && (lt.enrichCatalogGood(e, t[e.cod1S]),
                        s = !0),
                        n[e.cod1S] && (lt.enrichStaticGood(e, n[e.cod1S]),
                        s = !0)
                    }
                    )),
                    r.currency = WbSpaModel.prototype.$user.getCurrency(),
                    s && this._syncTo(r),
                    t
                }
                ,
                t.updateWbProducts = function(e) {
                    const t = this._syncFrom();
                    localStorage.hasItem(this.basketKey) || this._syncTo(),
                    (null == e ? void 0 : e.length) && (t.basketItems = [...t.basketItems, ...e.map((e => lt.fromWbBasketProduct(e)))].reduce(( (e, t) => {
                        const n = e.findIndex((e => e.id === t.id));
                        return -1 !== n || t.isDeleted ? -1 !== n && (e[n].timestamp = Math.max(e[n].timestamp, t.timestamp),
                        e[n].quantity = t.quantity,
                        e[n].targetUrl = t.targetUrl,
                        e[n].isDeleted = t.isDeleted,
                        e[n].meta = t.meta) : (t._fromSync && (t.includeInOrder = e.filter((e => e.maxQuantity > 0)).every((e => e.includeInOrder)),
                        delete t._fromSync),
                        e.push(JSON.parse(JSON.stringify(t)))),
                        e
                    }
                    ), []).filter((e => !e.isDeleted)).sort(( (e, t) => t.timestamp - e.timestamp)),
                    this._syncTo())
                }
                ,
                (0,
                s.A)(e, [{
                    key: "isAuth",
                    get: function() {
                        return this._isAuth()
                    }
                }, {
                    key: "lastTs",
                    get: function() {
                        var e, t;
                        return null === (t = null === (e = this.innerStorage.basketItems) || void 0 === e ? void 0 : e[0]) || void 0 === t ? void 0 : t.timestamp
                    }
                }, {
                    key: "count",
                    get: function() {
                        const e = this._syncFrom();
                        return this.$eventBus.dispatchEvent(new CustomEvent("LocalBasketUpdateCount",{
                            detail: {
                                count: e.totalQuantity
                            }
                        })),
                        e.totalQuantity
                    }
                }, {
                    key: "basketKey",
                    get: function() {
                        return this.isAuth ? `wb_basket_${this.sessionService.getUserUid()}` : "_basket"
                    }
                }])
            }();
            const ht = "wb___basketMgrt";
            const pt = function() {
                function e() {}
                var t = e.prototype;
                return t.check = function(e) {
                    return this._migrated || (this._migrated = localStorage.getItem(ht) === e),
                    this._migrated
                }
                ,
                t.set = function(e) {
                    this._migrated = !!e;
                    try {
                        this._migrated ? localStorage.setItem(ht, e) : localStorage.removeItem(ht)
                    } catch (e) {}
                }
                ,
                e
            }();
            let mt = function(e) {
                this.ts = e.modify_time,
                this.path = e.path;
                const t = e.path.split("/")
                  , n = t.find((e => e.split("|").length > 1));
                if (n) {
                    const e = n.split("|");
                    this.sessionId = e[0],
                    this.ver = parseInt(e[1])
                } else
                    !0 === e.is_dir && (this.isDir = e.is_dir,
                    this.dirId = t[t.length - 1])
            }
              , gt = function() {
                function e(e) {
                    this.storage = e
                }
                var t = e.prototype;
                return t.getList = async function() {
                    const e = await this.storage.getList.apply(this.storage, arguments);
                    if (null === e)
                        throw "userstorage err";
                    return e
                }
                ,
                t.getData = async function() {
                    const e = await this.storage.getData.apply(this.storage, arguments);
                    if (null === e)
                        throw "userstorage err";
                    return e
                }
                ,
                e
            }()
              , ft = function() {
                function e(e) {
                    this.constants = e,
                    this.userStorage = new gt(this.$services.apiUserStorage),
                    this.wbBasketMigrated = new pt
                }
                var t = e.prototype;
                return t.unAuth = function() {
                    this.clear(),
                    this.wbBasketMigrated.set(!1)
                }
                ,
                t.clear = function() {
                    localStorage.removeItem("wbx___basketSyncDate"),
                    localStorage.removeItem("wbx___basketLocal"),
                    localStorage.removeItem("wbx___basketRemote"),
                    localStorage.removeItem("wbx___basketId"),
                    localStorage.removeItem("wbx___basketMgrt"),
                    localStorage.removeItem("wb__basketSyncDate"),
                    localStorage.removeItem("wb__basketId"),
                    localStorage.removeItem("wb__queue_basket-fetch")
                }
                ,
                t.sync = async function(e) {
                    const t = new AbortController;
                    return setTimeout(( () => t.abort()), e || 5e3),
                    this._task || (this._task = this._sync(t.signal)),
                    await this._task
                }
                ,
                t._sync = async function(e) {
                    var t;
                    try {
                        const n = {
                            signal: e
                        }
                          , r = await this._getLastIndBasket(n);
                        if (this.isWbBasketMigrated)
                            return null;
                        const s = (null === (t = await this.userStorage.getList(`cart/${r}`, n)) || void 0 === t ? void 0 : t.map((e => new mt(e)))) || []
                          , o = await this._getData(s, n);
                        return o.selectMany((e => e.data)).reduce(( (e, t) => {
                            const n = e.findIndex((e => e.product_option_id === t.product_option_id));
                            return t.added_timestamp > 1e12 && (t.added_timestamp = t.added_timestamp / 1e3 | 0),
                            -1 === n ? e.push(Object.assign({}, t)) : (e[n].added_timestamp = Math.min(e[n].added_timestamp, t.added_timestamp),
                            e[n].count += t.count,
                            e[n].target_url = e[n].target_url || t.target_url),
                            e
                        }
                        ), []).filter((e => e.product_id && e.product_option_id && e.count > 0)).sort(( (e, t) => e.added_timestamp - t.added_timestamp))
                    } catch (e) {
                        return null
                    } finally {
                        this._task = null
                    }
                }
                ,
                t._getLastIndBasket = async function(e) {
                    const t = await this.userStorage.getList("cart", e)
                      , n = (null == t ? void 0 : t.map((e => new mt(e)))) || [];
                    null != t && n.some((e => e.path === this.constants.WB_BASKET_SYNC_FILEPATH)) && this.wbBasketMigrated.set(this.$auth.um.userUid);
                    const r = n.filter((e => !0 === e.isDir));
                    if (0 !== r.length) {
                        const e = r.filter((e => !isNaN(e.dirId))).reduce(( (e, t) => Number(e.dirId) > Number(t.dirId) ? e : t));
                        return Number(e.dirId)
                    }
                    return 0
                }
                ,
                t._getData = async function(e, t) {
                    if (!e.length)
                        return [];
                    let n = await this.userStorage.getData(e, t);
                    return null == n ? void 0 : n.reduce(( (e, t) => {
                        const n = t.path.split("/")
                          , r = n.find((e => e.split("|").length > 1));
                        if (r) {
                            const s = r.split("|");
                            let o = [];
                            try {
                                o = JSON.parse(this.$helper.base64.decode(t.file))
                            } catch (e) {
                                wb.spa.logError(new Error(`[BASKET_WBX_SYNC]: file is corrupted path:${n}`), t)
                            }
                            e.push({
                                ts: t.modify_time,
                                sessionId: s[0],
                                data: o
                            })
                        }
                        return e
                    }
                    ), [])
                }
                ,
                (0,
                s.A)(e, [{
                    key: "isWbBasketMigrated",
                    get: function() {
                        return this.wbBasketMigrated.check(this.$auth.um.userUid)
                    }
                }])
            }();
            const yt = ft;
            const vt = function() {
                function e(e, t, n, r, s) {
                    this.chrt_id = +t;
                    const o = +n;
                    this.quantity = o > 0 ? o : 1,
                    this.cod_1s = r,
                    this.client_ts = s || Date.now() / 1e3 | 0,
                    this.op_type = e || 1
                }
                return e.fromLocalBasket = function(t, n) {
                    const r = new e(n,t.characteristicId,t.quantity,t.cod1S,t.timestamp);
                    return r.client_ts > 1e12 && (r.client_ts = r.client_ts / 1e3 | 0),
                    r.target_url = t.targetUrl,
                    t.meta && (r.meta_json = JSON.stringify(t.meta)),
                    r
                }
                ,
                e.toUpdate = function(t) {
                    return e.fromLocalBasket(t, 2)
                }
                ,
                e.toDelete = function(t) {
                    return new e(3,t)
                }
                ,
                e
            }()
              , bt = "wb___basketStorage"
              , wt = {
                ts: 0,
                c_ts: 0,
                operations: new Map
            };
            const St = function() {
                function e(e) {
                    window.addEventListener("storage", (e => {
                        e.key === this._basketKey && this._pull()
                    }
                    )),
                    WbSpaModel.prototype.$eventBus.addEventListener("onUserAuth", this._pull.bind(this)),
                    this.getLocalItems = e,
                    this._data = wt
                }
                var t = e.prototype;
                return t.checkBug = function() {
                    this._data.ts > 10 && WbSpaModel.prototype.$auth.um.userUid && !localStorage.hasItem(`wb_basket_${WbSpaModel.prototype.$auth.um.userUid}`) && (wb.spa.logError(new Error(`[WB_BASKET_STORAGE]: key wb_basket_${WbSpaModel.prototype.$auth.um.userUid} notfound`), {
                        ts: this.ts,
                        opLen: this._data.operations.size,
                        hasKey: localStorage.hasItem(this._basketKey)
                    }),
                    this._data.ts = 10)
                }
                ,
                t.hasOperations = function() {
                    return !!this._data.operations.size
                }
                ,
                t.getOperations = function() {
                    return this.ts || (this._data.operations.clear(),
                    this.getLocalItems().forEach((e => {
                        this._data.operations.set(e.chrt_id, e)
                    }
                    ))),
                    this._data.operations.toArray()
                }
                ,
                t.setTs = function(e) {
                    e && (this._data.ts = e,
                    this._push())
                }
                ,
                t.setClientTs = function(e) {
                    this._data.c_ts = e,
                    this._push()
                }
                ,
                t._mergeOp = function(e, t) {
                    return (null == e ? void 0 : e.chrt_id) === t.chrt_id && (1 === e.op_type && 2 === t.op_type && (t.op_type = 1),
                    2 === e.op_type && 2 === t.op_type && (t.meta = t.meta || e.meta,
                    t.quantity = t.quantity || e.quantity)),
                    t
                }
                ,
                t.normalize = function(e, t) {
                    e.forEach((e => {
                        const t = this._data.operations.get(e.chrt_id);
                        t.quantity === e.quantity && t.client_ts === e.client_ts && t.op_type === e.op_type && this._data.operations.delete(e.chrt_id)
                    }
                    ));
                    let n = [];
                    return (null == t ? void 0 : t.length) > 0 && (t.forEach((e => {
                        const t = this._data.operations.get(e.chrt_id);
                        if (t) {
                            if (!e.is_deleted)
                                return;
                            if (1 === t.op_type)
                                return;
                            this._data.operations.delete(e.chrt_id)
                        }
                        n.push(e)
                    }
                    )),
                    this._push()),
                    n
                }
                ,
                t.update = function(e) {
                    if ((null == e ? void 0 : e.length) > 0) {
                        for (let t = 0; t < e.length; t++) {
                            const n = e[t].chrt_id;
                            this._data.operations.set(n, this._mergeOp(this._data.operations.get(n), e[t]))
                        }
                        this._push()
                    }
                }
                ,
                t.clear = function() {
                    localStorage.removeItem(bt)
                }
                ,
                t._pull = function() {
                    const e = localStorage.getObject(this._basketKey) || localStorage.getObject(bt);
                    e && (e.operations = Array.isArray(e.operations) ? new Map(e.operations.map((e => [e.chrt_id, e]))) : wt.operations),
                    this._data = null != e ? e : wt
                }
                ,
                t._push = function() {
                    try {
                        const e = this._data.operations.toArray();
                        localStorage.putObject(this._basketKey, {
                            ts: this._data.ts,
                            c_ts: this._data.c_ts,
                            operations: e
                        }),
                        localStorage.hasItem(bt) && localStorage.putObject(bt, {
                            ts: this._data.ts,
                            c_ts: this._data.c_ts,
                            operations: e
                        })
                    } catch (e) {}
                }
                ,
                (0,
                s.A)(e, [{
                    key: "_basketKey",
                    get: function() {
                        return `${bt}_${WbSpaModel.prototype.$auth.um.userUid}`
                    }
                }, {
                    key: "clientTs",
                    get: function() {
                        return this._data.c_ts
                    }
                }, {
                    key: "ts",
                    get: function() {
                        return this._data.ts
                    }
                }])
            }();
            let _t = function() {
                function e(e) {
                    this.localBasket = e,
                    this.storage = new St(( () => this.localBasket.getItems().map((e => vt.fromLocalBasket(e))))),
                    this.debounceSync = this.$helper.debounce(this._sync.bind(this), 3e3),
                    this.debounceShortSync = this.$helper.debounce(this._sync.bind(this), 1e3),
                    setTimeout(( () => this._backupBasketAsync()), 11e3)
                }
                var t = e.prototype;
                return t.unAuth = function() {
                    this.storage.clear()
                }
                ,
                t.onBeforeSignOut = function() {
                    this.storage.hasOperations() && this._sync()
                }
                ,
                t.addItem = function(e) {
                    e && (this.storage.update([vt.fromLocalBasket(e)]),
                    this.debounceShortSync())
                }
                ,
                t.addManyItems = function(e) {
                    e.length && (this.storage.update(e.map((e => vt.fromLocalBasket(e)))),
                    this.debounceShortSync())
                }
                ,
                t.clearItems = function(e) {
                    e.length && (this.storage.update(e.map((e => vt.toDelete(e)))),
                    this.debounceShortSync())
                }
                ,
                t.updateItem = function(e) {
                    if (!e)
                        return;
                    const t = this.localBasket.getItems().find((t => t.characteristicId === e));
                    t && this.storage.update([vt.toUpdate(t)]),
                    this.debounceSync()
                }
                ,
                t.refresh = function(e, t) {
                    var n, r, s, o;
                    if ("remove" === t) {
                        const t = null !== (o = null !== (r = null === (n = e.chrtIds) || void 0 === n ? void 0 : n[0]) && void 0 !== r ? r : null === (s = e.items) || void 0 === s ? void 0 : s[0].chrtId) && void 0 !== o ? o : e.chrtId;
                        t > 0 && this.storage.update([vt.toDelete(t)])
                    } else
                        "recalc" === t && this.updateItem(e.chrtId);
                    this.debounceSync()
                }
                ,
                t.sync = async function(e, t) {
                    return await this._sync(e, t)
                }
                ,
                t._sync = async function(e, t) {
                    return await navigator.locks.request("lock-basket-sync", (async n => {
                        this.storage.checkBug();
                        const r = this.storage.getOperations();
                        if (t && !r.length && this.storage.clientTs > (Date.now() / 1e3 | 0))
                            return !1;
                        const s = this.$services.sessionService.getSession();
                        try {
                            const t = await this._doSync({
                                sessionId: s,
                                operations: r,
                                signal: e
                            });
                            if (this._sendMetrics(t.state),
                            0 === t.state && t.change_ts > 0)
                                return this._updateProducts(t, r);
                            if (1 === t.state) {
                                const e = this.localBasket.getItems().map((e => vt.fromLocalBasket(e)))
                                  , t = await this._doSync({
                                    sessionId: s,
                                    operations: e,
                                    rememberMe: !0
                                });
                                if (0 === t.state && t.change_ts > 0)
                                    return this._updateProducts(t, r)
                            } else
                                t && wb.spa.logError(new Error(`[WB_BASKET_SYNC]: sync state:${t.state}`), {
                                    result: t,
                                    ts: this.storage.ts,
                                    deviceId: s,
                                    opLen: r.length,
                                    hasJwt: this.$auth.isAuth
                                })
                        } catch (e) {
                            const t = !e.isCustomError && e instanceof TypeError && ("Failed to fetch" === e.message || "NetworkError when attempting to fetch resource." === e.message || "Cancelled" === e.message);
                            this._sendMetrics(t ? "network" : "error"),
                            wb.spa.logError(new Error(`[WB_BASKET_SYNC]: ${e.message}`), {
                                ts: this.storage.ts,
                                deviceId: s,
                                opLen: r.length,
                                hasJwt: this.$auth.isAuth
                            })
                        }
                        return !1
                    }
                    ))
                }
                ,
                t._updateProducts = function(e, t) {
                    const n = this.storage.normalize(t, e.result_set);
                    return this.localBasket.updateWbProducts(n),
                    this.storage.setTs(e.change_ts),
                    this.storage.setClientTs(235 + (Date.now() / 1e3 | 0)),
                    e.change_ts > 0
                }
                ,
                t._doSync = function({sessionId: e, operations: t, rememberMe: n=!1, signal: r=null}) {
                    return this.$wbxHttpClient.fetch(`https://cart-storage-api.wildberries.ru/api/basket/sync?ts=${this.storage.ts}&device_id=${e}${n ? "&remember_me=true" : ""}`, {
                        method: "POST",
                        body: JSON.stringify(t),
                        headers: {
                            "Content-Type": "application/json",
                            "Wb-AppType": "site"
                        },
                        signal: r
                    }).then((async e => e.ok ? e.json() : {})).then((e => (e.result_set && (e.result_set = e.result_set[0] || []),
                    e)))
                }
                ,
                t._sendMetrics = function(e) {
                    try {
                        this.$httpClient.fetch(`/webapi/logging/wbbasket/metrics?status=${e}`, {
                            method: "POST"
                        })
                    } catch (e) {}
                }
                ,
                t._backupBasketAsync = function() {
                    if (this.storage.ts <= 0)
                        return;
                    const e = this.localBasket.getItems().map((e => {
                        let t = vt.fromLocalBasket(e);
                        return delete t.op_type,
                        t
                    }
                    ))
                      , t = [{
                        path: "/cart/wb_backup",
                        file: this.$helper.base64.encode(JSON.stringify(e))
                    }];
                    this.$services.apiUserStorage.setData(t)
                }
                ,
                e
            }();
            const Ct = _t;
            const It = function(e) {
                var t, n, r, s;
                this.characteristicId = +e.characteristicId;
                const o = +e.quantity;
                this.quantity = o > 0 ? o : 1,
                this.cod1S = e.cod1S,
                this.customsFeeAmount = e.customCharges,
                this.targetUrl = null === (t = e.targetUrl) || void 0 === t ? void 0 : t.replace(/\x00/g, ""),
                this.includeInOrder = e.includeInOrder,
                this.dstOffice = e.dstOffice,
                this.storeName = e.storeName,
                this.isLargeItem = e.isLargeItem,
                this.couponSale = e.couponSale,
                this.goodsName = e.goodsName,
                this.colorName = e.colorName,
                this.sizeName = e.sizeName,
                this.brandName = e.brandName,
                this.sale = e.sale,
                this.salePrice = e.salePrice,
                this.totalSale = e.totalSale,
                this.personalDiscount = e.personalDiscount,
                this.returnCost = e.returnCost,
                this.premiumSaleAmount = e.premiumSaleAmount ? e.premiumSaleAmount : 0,
                this.price = e.price,
                this.priceWithSale = e.priceWithSale,
                this.priceWithCoupon = e.priceWithCoupon,
                this.priceWithCouponAndSpp = e.priceWithCouponAndSpp + this.premiumSaleAmount,
                this.priceWithCouponAndDiscount = e.priceWithCouponAndDiscount + this.premiumSaleAmount,
                this.paymentSaleAmount = e.paymentSaleAmount,
                this.subjectId = e.subjectId,
                this.subjectRoot = e.subjectParentId,
                this.reviewRating = e.reviewRating,
                this.commentsCount = e.commentsCount || e.feedbacks,
                this.payloadV2 = e.payloadV2,
                this.logisticsCost = e.logisticsCost,
                this.whDtype = e.whDtype,
                this.supplierId = e.supplierId,
                this.supplierName = e.supplierName,
                this.saleConditions = e.saleConditions,
                this.catalogReturnCost = e.catalogReturnCost,
                this.maxQuantity = e.maxQuantity,
                this.volume = e.volume,
                this.storeIds = (null === (r = null === (n = e.stocks) || void 0 === n ? void 0 : n.filter((e => e.qty > 0))) || void 0 === r ? void 0 : r.map((e => e.wh))) || [],
                this.stocks = null === (s = e.stocks) || void 0 === s ? void 0 : s.reduce(( (e, t) => (e[t.wh] = {
                    storeId: t.wh,
                    quantity: t.qty || 0,
                    time1: t.time1,
                    time2: t.time2,
                    priority: t.priority
                },
                e)), {}),
                this.timestamp = e.timestamp,
                this.shadeModel = e.shadeModel
            }
              , Mt = dt
              , kt = lt
              , $t = {
                WB_BASKET_SYNC_FILE: "migration-us-wb",
                WB_BASKET_SYNC_FILEPATH: "cart/migration-us-wb"
            };
            let Pt = function() {
                function e() {}
                var t = e.prototype;
                return t.init = function() {
                    Object.setPrototypeOf(yt.prototype, WbSpaModel.prototype),
                    Object.setPrototypeOf(Ct.prototype, WbSpaModel.prototype),
                    this.localBasket = new Mt(( () => this.$router.userIsAuth),this.$services.sessionService,this.$eventBus),
                    this.wbxBasket = new yt($t),
                    this.wbxBasket.clear(),
                    this.wbBasket = new Ct(this.localBasket),
                    this.srv = this.wbBasket,
                    this.$eventBus.addEventListener("onUserAuth", this.sync.bind(this)),
                    this.$eventBus.addEventListener("onUserUnAuth", this.wbBasket.unAuth.bind(this.wbBasket)),
                    this.$eventBus.addEventListener("onBeforeSignOut", this.wbBasket.onBeforeSignOut.bind(this.wbBasket)),
                    $.observe(this.$router, "activeContainer", "showPreview", ( (e, t) => {
                        document.body.classList.toggle("body-gray", 2 === e.target.activeContainer && !e.target.showPreview)
                    }
                    )),
                    "hidden"in document && "visibilityState"in document && document.addEventListener("visibilitychange", (e => {
                        "visible" === document.visibilityState && this.sync("interval")
                    }
                    ))
                }
                ,
                t.sync = async function(e) {
                    var t;
                    if (this.$router.userIsAuth) {
                        let n = new AbortController;
                        return n._dt = (new Date).getTime() + 6e4,
                        (null == e ? void 0 : e.timeout) ? (this.backgroundController && this.backgroundController._dt < (new Date).getTime() ? (this.backgroundController.abort(),
                        this.backgroundController = null) : this.backgroundController && (n = this.backgroundController),
                        setTimeout(( () => n.abort()), e.timeout)) : this.backgroundController = n,
                        this._syncProcess = null !== (t = this._syncProcess) && void 0 !== t ? t : this.srv.sync(n.signal, "interval" === e),
                        this._syncProcess.catch((e => {}
                        )).finally(( () => {
                            this.$router.userIsAuth && (this._migrate(),
                            this.localBasket.enrichProductsIfNeedAsync(),
                            this.migrateFromUserStorageAsync(2e3)),
                            this._syncProcess = null,
                            this.backgroundController = null
                        }
                        ))
                    }
                }
                ,
                t.migrateFromUserStorageAsync = async function(e) {
                    if (this.wbxBasket.isWbBasketMigrated || this.$auth.isUserGuid || this.$router.userId > 146e6)
                        return;
                    const t = await this.wbxBasket.sync(e);
                    t && this.addManyItems(t.map((e => kt.fromWbxBasketProduct(e))), !0);
                    const n = await this.srv.sync();
                    t && !this.wbxBasket.isWbBasketMigrated && n && (await this.$services.apiUserStorage.setData([{
                        path: `/cart/${$t.WB_BASKET_SYNC_FILE}`,
                        file: "W10="
                    }]),
                    this.localBasket.enrichProductsIfNeedAsync(),
                    wb.spa.logError(new Error(`[CART_SERVICE]: synced ${t.length} items`)))
                }
                ,
                t.updateMeta = function(e, t) {
                    t && this.localBasket.updateMeta(e, t) && this.srv.updateItem(e)
                }
                ,
                t.addItem = function({model: e, product: t, stores: n}) {
                    const r = kt.fromCardModel(e, t, n)
                      , s = this.localBasket.add(r);
                    return this.$router.userIsAuth && s.isSuccess && !s.isExist && this.srv.addItem(r),
                    s
                }
                ,
                t.addManyItems = function(e, t) {
                    if (!(null == e ? void 0 : e.length))
                        return;
                    const n = e.map((e => kt.prototype.isPrototypeOf(e) ? e : kt.fromBasketInputExtended(e)))
                      , r = this.localBasket.addManyItems(n, t);
                    return this.$router.userIsAuth && r.isSuccess && !r.isExist && this.srv.addManyItems(n),
                    r
                }
                ,
                t.refresh = function({data: e, type: t}) {
                    this.localBasket.refresh(e, t),
                    this.$router.userIsAuth && t && this.srv.refresh(e, t)
                }
                ,
                t.clearItems = function(e) {
                    (null == e ? void 0 : e.length) && (this.localBasket.clearItems(e),
                    this.$router.userIsAuth && this.srv.clearItems(e))
                }
                ,
                t.getItems = function() {
                    return this.localBasket.getItems().map((e => new It(e)))
                }
                ,
                t.getSelectedBankCard = async function() {
                    var e;
                    let t = this.localBasket.getBankCards();
                    const n = null === (e = (await this.$services.userData.getUserDataAsync()).userInfo.phone) || void 0 === e ? void 0 : e.toString().startsWith("79");
                    null == t || t.forEach((e => {
                        e.isSbp || (e.icon = e.system,
                        n || "mir" !== e.icon || (e.icon = "none",
                        e.name = e.nameNotPaySystem))
                    }
                    ));
                    const r = t.find((e => e.default));
                    return r || (t = await this.getBankCards(),
                    null == t || t.forEach((e => {
                        e.isSbp || (e.icon = e.system,
                        n || "mir" !== e.icon || (e.icon = "none",
                        e.name = e.nameNotPaySystem))
                    }
                    )),
                    t.find((e => e.default)))
                }
                ,
                t.getBankCards = async function(e=6e3, t="", n=!1) {
                    var r, s, o;
                    const i = null === (r = (await this.$services.userData.getUserDataAsync()).userInfo.phone) || void 0 === r ? void 0 : r.toString().startsWith("79");
                    try {
                        t || (t = this.$user.getCurrency());
                        const r = await this.$user.getUserGrade(t)
                          , a = await this.$httpClient.fetchJSON(`${this.publicBasketApiUrl}/webapi/lk/bankcards`, {
                            method: "POST",
                            credentials: "include",
                            body: this.$helper.objectSerializer({
                                currency: t,
                                userGradeSigned: r,
                                bypassCache: n
                            }, new URLSearchParams, !0, !0)
                        }, {
                            timeout: e
                        });
                        null === (s = null == a ? void 0 : a.maskedCards) || void 0 === s || s.forEach((e => {
                            e.isSbp || (e.icon = e.system,
                            i || "mir" !== e.icon || (e.icon = "none",
                            e.name = e.nameNotPaySystem))
                        }
                        ));
                        const l = null !== (o = null == a ? void 0 : a.maskedCards) && void 0 !== o ? o : [];
                        return this.$eventBus.dispatchEvent(new CustomEvent("BankCardsUpdated",{
                            detail: l
                        })),
                        l
                    } catch (e) {
                        return []
                    }
                }
                ,
                t.getPaymentsForDeliveries = async function(e) {
                    var t;
                    const {payments: n} = await this.$httpClient.fetchJSON(`${this.$services.cartService.publicBasketApiUrl}/payment/list/fordeliveriesv2`, {
                        method: "POST",
                        credentials: "include",
                        body: new URLSearchParams({
                            currency: e
                        })
                    }) || {};
                    return null === (t = null == n ? void 0 : n.find((e => e.isCreditCard))) || void 0 === t || t.bankCards.forEach((e => {
                        e.isSbp || (e.icon = e.system)
                    }
                    )),
                    n
                }
                ,
                t.save = function(e) {
                    this.localBasket.save(e)
                }
                ,
                t.get = function(e) {
                    return this.localBasket.get()
                }
                ,
                t.buyItNow = function(e) {
                    return e ? this.localBasket.buyItNow(e) : this.localBasket.get()
                }
                ,
                t._migrate = function() {
                    const e = this.localBasket.migrate();
                    0 !== e.length && this.srv.addManyItems(e)
                }
                ,
                (0,
                s.A)(e, [{
                    key: "BasketItemViewModel",
                    get: function() {
                        return kt
                    }
                }, {
                    key: "BasketItemSharedModel",
                    get: function() {
                        return It
                    }
                }, {
                    key: "publicBasketApiUrl",
                    get: function() {
                        return "localhost" === location.host ? "//localhost:5000" : "ru" === wb.settings.currentDomain || "kz" === wb.settings.currentDomain ? "//ru-basket-api.wildberries.ru" : `//basket-api.wildberries.${wb.settings.currentDomain}`
                    }
                }, {
                    key: "deliveryWays",
                    get: function() {
                        var e, t;
                        let n = [{
                            id: 2,
                            code: "self",
                            name: "Пункт выдачи",
                            calendars: []
                        }, {
                            id: 1,
                            code: "courier",
                            name: "Курьером",
                            calendars: []
                        }];
                        return !1 === (null === (t = null === (e = wb.global.settings) || void 0 === e ? void 0 : e.switches) || void 0 === t ? void 0 : t.enableCourierDelivery) && (n = n.filter((e => "courier" !== e.code))),
                        n
                    }
                }, {
                    key: "localCount",
                    get: function() {
                        return this.localBasket.count
                    }
                }, {
                    key: "currentDeliveryType",
                    get: function() {
                        return this.localBasket.getDeliveryPoint()
                    }
                }])
            }();
            const Tt = Pt;
            var At, Ot = n(17252);
            const Dt = "by" === (null === (At = wb.settings) || void 0 === At ? void 0 : At.currentLocale) ? "Склад поставщика" : "Склад продавца"
              , Et = {
                0: Dt,
                507: "Коледино WB",
                686: "Новосибирск WB",
                1193: "Хабаровск WB",
                1733: "Екатеринбург WB",
                2737: "Уткина Заводь WB",
                117442: "Калуга WB",
                117501: "Подольск WB",
                117866: "Тамбов WB",
                117986: "Казань WB",
                120762: "Электросталь WB",
                121709: "Электросталь WB",
                130744: "Краснодар WB",
                159402: "Шушары WB",
                161812: "Санкт-Петербург WB",
                172430: "Барнаул WB",
                204615: "Томск WB",
                204939: "Астана WB",
                205104: "Ульяновск WB",
                205205: "Киров WB",
                205228: "Белая дача WB",
                206236: "Белые Столбы WB",
                206348: "Алексин WB",
                206708: "Новокузнецк WB",
                206844: "Калининград WB",
                206968: "Новосёлки WB",
                208277: "Невинномысск WB",
                208941: "Домодедово WB",
                209513: "Домодедово WB",
                210001: "Новосёлки-2 WB",
                210515: "Вёшки WB",
                208768: Dt + " Абакан",
                209649: Dt + " Алексин",
                208769: Dt + " Алматы",
                212038: Dt + " Алматы-2",
                209902: Dt + " Артём",
                214110: Dt + " Архангельск",
                122495: Dt + " Астана",
                204492: Dt + " Астрахань",
                204493: Dt + " Барнаул",
                206239: Dt + " Белая Дача (Москва)",
                213892: Dt + " Белгород",
                214112: Dt + " Белогорск",
                209112: Dt + " Белые Столбы",
                208814: Dt + " Бишкек",
                204494: Dt + " Брянск",
                204495: Dt + " Владикавказ",
                117392: Dt + " Владимир",
                152588: Dt + " Волгоград",
                204496: Dt + " Вологда",
                211895: Dt + " Воронеж",
                209111: Dt + " Гольяново (Москва)",
                208771: Dt + " Гомель (Беларусь)",
                210967: Dt + " Домодедово",
                208815: Dt + " Екатеринбург",
                211790: Dt + " Екатеринбург-2",
                208816: Dt + " Ереван",
                208772: Dt + " Иваново",
                172073: Dt + " Ижевск",
                131643: Dt + " Иркутск",
                208817: Dt + " Казань",
                208761: Dt + " Калининград",
                144046: Dt + " Калуга",
                208773: Dt + " Киров",
                119261: Dt + " Коледино",
                209109: Dt + " Комсомольский (Москва)",
                208818: Dt + " Краснодар",
                118365: Dt + " Красноярск",
                208774: Dt + " Крыловская (Краснодар)",
                172075: Dt + " Курск",
                209108: Dt + " Курьяновская (Москва)",
                208776: Dt + " Липецк",
                168826: Dt + " Лобня (Москва)",
                121700: Dt + " Минск",
                211672: Dt + " Минск-2",
                212032: Dt + " Вешки",
                211730: Dt + " Внуково",
                117673: Dt + " Москва",
                122259: Dt + " Москва",
                208777: Dt + " Мурманск",
                208778: Dt + " Набережные Челны",
                209107: Dt + " Нахабино (Москва)",
                209601: Dt + " Невинномысск",
                118535: Dt + " Нижний Новгород",
                213651: Dt + " Нижний Тагил",
                208789: Dt + " Новокузнецк",
                117419: Dt + " Новосибирск",
                209591: Dt + " Омск",
                208780: Dt + " Оренбург",
                157848: Dt + " Пенза",
                209592: Dt + " Пермь",
                208781: Dt + " Печатники",
                214111: Dt + " Псков",
                208782: Dt + " Пушкино (Москва)",
                204497: Dt + " Пятигорск",
                118019: Dt + " Ростов-на-Дону",
                152594: Dt + " Рязань",
                146666: Dt + " Самара",
                132043: Dt + " Санкт-Петербург",
                117414: Dt + " Санкт-Петербург (Уткина Заводь)",
                208819: Dt + " Санкт-Петербург (Шушары)",
                158929: Dt + " Саратов",
                204498: Dt + " Серов",
                144154: Dt + " Симферополь",
                208783: Dt + " Смоленск",
                204212: Dt + " Солнцево",
                158448: Dt + " Ставрополь",
                208784: Dt + " Сургут",
                115651: Dt + " Тамбов",
                152610: Dt + " Тверь",
                208785: Dt + " Темрюк (Краснодарский край)",
                208786: Dt + " Томск",
                146725: Dt + " Тюмень",
                209950: Dt + " Ульяновск",
                152700: Dt + " Уфа",
                208820: Dt + " Хабаровск",
                210815: Dt + " Хоргос",
                204499: Dt + " Чебоксары",
                152611: Dt + " Челябинск",
                209113: Dt + " Черная грязь (Москва)",
                209106: Dt + " Чертановский (Москва)",
                208787: Dt + " Чита",
                209510: Dt + " Электросталь",
                209110: Dt + " Южные ворота (Москва)",
                152612: Dt + " Ярославль"
            }
              , Bt = ["ru", "by", "kg", "kz", "am", "uz"];
            let xt = function() {
                function e() {}
                var t = e.prototype;
                return t.isMp = function(e) {
                    return this._checkStoreFlag(e, 2)
                }
                ,
                t.isCargoStore = function(e) {
                    return this._checkStoreFlag(e, 4)
                }
                ,
                t.isDbs = function(e) {
                    return this._checkStoreFlag(e, 8)
                }
                ,
                t.isForeign = function(e) {
                    return this._checkStoreFlag(e, 16)
                }
                ,
                t.isWbGo = function(e) {
                    return this._checkStoreFlag(e, 32)
                }
                ,
                t.isExpress = function(e) {
                    return this._checkStoreFlag(e, 64)
                }
                ,
                t.needVerification = function(e, t) {
                    return this._checkStoreFlag(e, 1 << this._localeBit(t), "import")
                }
                ,
                t._checkStoreFlag = function(e, t, n="type") {
                    var r;
                    return ((null === (r = this[e]) || void 0 === r ? void 0 : r[n]) & t) === t
                }
                ,
                t._localeBit = function(e) {
                    const t = Bt.indexOf(null == e ? void 0 : e.toLowerCase());
                    return Math.max(t, 0)
                }
                ,
                e
            }();
            const jt = xt
              , Lt = "wb__cargo_data_dt"
              , Ut = 9e5
              , Ft = "cargo-stores"
              , Nt = "stores-data";
            const Rt = function() {
                function e() {
                    this._storeNames = Et,
                    this._stores = new jt,
                    this._getCargoStoresAsync().then(( ({storesData: e}) => {
                        if (this._cargoStores = [],
                        e) {
                            for (let {id: t, name: n, type: r, intervals: s, workingHours: o} of e)
                                this._storeNames[t] = n,
                                !0 & r && this._cargoStores.push(t),
                                this._stores[t] = {
                                    name: n,
                                    type: r,
                                    intervals: s,
                                    workingHours: o
                                };
                            this._storesLoaded = !0
                        }
                        this._startJobSync()
                    }
                    ))
                }
                var t = e.prototype;
                return t._openDb = function() {
                    return this.$storageHelper.openDb("all-stores", {
                        onupgradeneeded: e => {
                            e.objectStoreNames.contains(Ft) || e.createObjectStore(Ft, {
                                keyPath: "id"
                            }),
                            e.objectStoreNames.contains(Nt) || e.createObjectStore(Nt, {
                                keyPath: "id"
                            })
                        }
                        ,
                        version: 2
                    })
                }
                ,
                t._setStoresAsync = function(e, t) {
                    this._openDb().then((n => {
                        if (e instanceof Array) {
                            let t = n.transaction([Ft], "readwrite").objectStore(Ft);
                            t.clear();
                            for (let n = 0; n < e.length; n++)
                                t.add(e[n])
                        }
                        if (t instanceof Array) {
                            const e = n.transaction([Nt], "readwrite").objectStore(Nt);
                            for (const n of t)
                                e.put(n)
                        }
                    }
                    ))
                }
                ,
                t._getCargoStoresAsync = async function() {
                    const e = await this._openDb()
                      , [t,n] = await Promise.all([this.$storageHelper.getAll(e, Ft), this.$storageHelper.getAll(e, Nt)]);
                    return {
                        cargoStores: t,
                        storesData: n
                    }
                }
                ,
                t._startJobSync = function() {
                    (!this._cargoStores || !this._storesLoaded || +localStorage.getItem("wb__cargo_stores_dt") < Date.now() || +localStorage.getItem(Lt) < Date.now()) && this._syncStores(),
                    setInterval(this._syncStores.bind(this), Ut)
                }
                ,
                t._syncStores = async function() {
                    const [e,t] = await Promise.all([this.$httpClient.fetchStaticDataV2("cargo-delivery-stores-v2.json"), this.$httpClient.fetchStaticDataV2("stores-data.json")]);
                    if (t instanceof Array) {
                        if (t instanceof Array) {
                            this._storesLoaded = !0,
                            this._cargoStores = [];
                            for (let {id: e, name: n, type: r, intervals: s=null, workingHours: o=null, import: i} of t)
                                this._storeNames[e] = n,
                                !0 & r && this._cargoStores.push(e),
                                this._stores[e] = {
                                    name: n,
                                    type: r,
                                    intervals: s,
                                    workingHours: o,
                                    import: i
                                };
                            localStorage.setItem(Lt, Date.now() + Ut)
                        }
                        this._setStoresAsync(e, t)
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "cargoStores",
                    get: function() {
                        return this._cargoStores || []
                    }
                }, {
                    key: "names",
                    get: function() {
                        return this._storeNames
                    }
                }, {
                    key: "storesMap",
                    get: function() {
                        return this._stores
                    }
                }])
            }()
              , Wt = [5352, 2255]
              , Ht = [1, 2, 3, 4, 6, 200, 204, 1327, 1465, 1513, 1616, 2273, 3497, 4607, 4735]
              , qt = [213, 1542, 2605, 2693, 4733, 4737, 212, 380, 733, 1675, 2687, 4738, 4827, 4932, 214, 2616, 218, 757, 53, 61, 63, 305, 946, 1161, 1422, 1439, 1475, 1487, 2318, 2379, 2747, 2920, 3489, 3490, 3579, 3766, 4200, 4256, 4537, 5154, 5220, 5222, 5273, 5094, 5096, 1339, 836, 5131, 1542, 5095, 4021, 4022, 1338, 2564]
              , zt = [786, 1107]
              , Vt = [1524, 1525]
              , Gt = [1, 2, 4, 200, 204, 239, 1513, 5038];
            let Jt = []
              , Qt = function() {
                function e() {}
                var t = e.prototype;
                return t.loadProductCardAsync = async function(e, t, n=!1) {
                    var r;
                    try {
                        return (null === (r = this._stashedCatalogProduct) || void 0 === r ? void 0 : r.nmId) !== e || n || this._stashedCatalogProduct.currency !== WbSpaModel.prototype.$user.getCurrency() ? this.loadDynamicProductAsync(e, t, await this.loadStaticProductAsync(e)) : this.fromCatalogProduct(this._stashedCatalogProduct, t)
                    } catch (e) {
                        return null
                    }
                }
                ,
                t.loadStaticProductAsync = async function(e) {
                    try {
                        const [t] = await Promise.all([this.$httpClient.fetchBasicJSON(wb.helpers.url.urlProductStatic(e), {}, {
                            timeout: 2e3
                        }), wb.xnm.waitNoReturnSubjectsInitialized()]);
                        return t
                    } catch (e) {
                        return null
                    }
                }
                ,
                t.loadDynamicProductAsync = async function(e, t, n, r) {
                    var s, o;
                    if (!e || isNaN(parseInt(e)))
                        throw new TypeError("[ProductCardService] nmId must be an integer at loadDynamicProductAsync");
                    t && isNaN(parseInt(t)) && (console.warn("[ProductCardService] chrtId is not an integer at loadDynamicProductAsync"),
                    t = null),
                    n = null != n ? n : await this.loadStaticProductAsync(e);
                    const i = new Map;
                    let a = null !== (s = null == n ? void 0 : n.colors) && void 0 !== s ? s : [e];
                    n && (n.colors = this._colorLimiter(e, a),
                    a = n.colors,
                    i.set(n.nm_id, n));
                    const l = this.$router.queryParams.get("helpKursk") ? -2307160 : null
                      , c = 1 === a.length && r ? {
                        [e]: r
                    } : await wb.xnm.getXnmProducts(a, !1, l).catch((e => null));
                    let u = null == c ? void 0 : c[e];
                    if (!u)
                        return null;
                    const d = await this._getMultiInfo(u, n)
                      , h = !!d
                      , p = !h && this._canCheckForMulti(n)
                      , m = {}
                      , g = this._fillBaseProductCardFromX(n, u, h || p);
                    g.metacard = d,
                    h && (a = [e]),
                    a.forEach((t => {
                        const n = i.get(t)
                          , r = null == c ? void 0 : c[t];
                        if (r && r.pics > 0) {
                            const s = this._fillNomenclature(t, n, r);
                            s.groupedAddedOptions = g.groupedAddedOptions,
                            s.miniAddedOptions = g.miniAddedOptions,
                            s.verifiedCertificate = this._setVerifiedCertificate(n),
                            e === t && (s.isHelpKursk = new URL(window.location.href).searchParams.get("helpKursk") || window.location.pathname.includes("pomozhem-kursku-vmeste")),
                            g.nomenclatures.push(s)
                        }
                    }
                    )),
                    g.nomenclatures = g.nomenclatures.sort(( (t, n) => t.nmId === e ? -1 : n.nmId === e ? 1 : n.sort - t.sort));
                    const f = g.nomenclatures.find((t => t.nmId === e));
                    if (null == f || null == f.sizes)
                        return null;
                    const y = Object.assign({}, f);
                    return this.fillSelectedNomenclature(y, t),
                    this._addDigitalLinks(y, n),
                    Object.assign(m, {
                        product: g,
                        selectedNomenclature: y
                    }),
                    m.metaTags = this._fillProductCardMetaTags(g),
                    m.promoUrl = this._fillPromoUrl(e, g, n, y.brandId),
                    m.openGraphDescription = this._fillOpenGraphDescription(e, f, m.metaTags),
                    m.targetInfo = null !== (o = m.targetInfo) && void 0 !== o ? o : {},
                    m.selectedNomenclature.goodsName || (m.product.goodsName = "Название не указано"),
                    this._checkGroupedAddedOptionsExist(m.selectedNomenclature.groupedAddedOptions) || (m.selectedNomenclature.groupedAddedOptions = []),
                    m.product.canCheckForMulti = p,
                    m
                }
                ,
                t.getMultiInfo = async function(e, t) {
                    return this._getMultiInfo(e, t)
                }
                ,
                t._getMultiInfo = async function(e, t) {
                    var n;
                    if (!(null === (n = wb.global.settings.switches) || void 0 === n ? void 0 : n.multicardV2Enable))
                        return null;
                    const r = e.rcId;
                    if (!r)
                        return null;
                    const s = e.id || e.nmId
                      , [o] = await Promise.all([(async () => null != t ? t : this.loadStaticProductAsync(s))(), this.$moduleLoader.loadServiceAsync("metacardService")])
                      , i = this.$services.metacardService;
                    if (!(null == o ? void 0 : o.rc) || 2 !== o.rc.type || o.rc.id !== r)
                        return null;
                    if (e.metacard && e.metacard.id == r)
                        return e.metacard = i.getMetacardFromExisting(e.metacard, s, o),
                        Promise.resolve(e.metacard);
                    e.metacard = null;
                    return await i.getMetacardData(r, s, o)
                }
                ,
                t.loadSizeTable = async function(e) {
                    const t = await this.loadStaticProductAsync(e);
                    return this._fillSizeTable(t)
                }
                ,
                t.fromCatalogProduct = function(e, t) {
                    var n, r, s, o;
                    const i = {}
                      , a = {
                        imtId: e.imtId,
                        nomenclatures: [],
                        supplierDeliveryInfo: {
                            time1: e.time1 || null,
                            time2: e.time2 || null,
                            storeId: e.fastestStore || null
                        },
                        rcId: e.rcId
                    }
                      , l = e.pics
                      , c = 20624 === e.brandId || 30624 === e.siteBrandId
                      , u = {
                        adult: e.adult,
                        brandId: e.brandCod,
                        brandName: e.brand,
                        canFit: this._setCanFit(e.subjectId, e.subjectParentId),
                        colorName: -1 !== zt.indexOf(e.subjectId) ? null : e.color,
                        consist: "",
                        deliveryHours: e.deliveryHours,
                        description: null,
                        markdownDescription: null,
                        dest: e.dest,
                        fastestStore: e.wh || e.fastestStore,
                        feedbacks: e.feedbacks,
                        gluedOptions: e.gluedOptions,
                        goodsName: e.name,
                        isActivationKey: -1 !== Wt.indexOf(e.subjectId),
                        isDataLoaded: !1,
                        isDetailsLoaded: !1,
                        isDigital: e.isDigitalGood,
                        isWbInstCompliant: e.isWbInstCompliant,
                        isPreorder: 5772 === e.brandCod && wb.settings.preOrderList.includes(e.nmId),
                        isPrepaid: e.isPrepaid,
                        isVideo: 5105 === e.subjectId,
                        hasVideo: !!(16 & e.viewFlags),
                        isBestQualityVideo: !1,
                        hasRich: !1,
                        hasImageTags: !1,
                        kindId: null !== (n = e.kindId) && void 0 !== n ? n : 0,
                        nmId: e.nmId,
                        nonRefundable: e.isUnrefusable || wb.xnm.setNoRefund(e.subjectId),
                        panelPromoId: e.panelPromoId,
                        picsCount: l,
                        bestQualityPics: [],
                        promoText: e.promoTextCard,
                        promotions: null,
                        saleConditions: e.saleConditions,
                        subjectId: e.subjectId,
                        subjectName: "",
                        subjectParent: "",
                        subjectParentId: e.subjectParentId,
                        sizes: e.sizes.map((t => {
                            var n, r, s;
                            const o = null !== (n = t.catalogPrice) && void 0 !== n ? n : e.catalogPrice;
                            return {
                                characteristicId: t.ch,
                                sizeName: t.nm,
                                sizeNameRus: t.rusNm,
                                quantity: t.unavailable || e.soldOut ? 0 : 1,
                                stocks: t.stocks,
                                storeIds: null === (r = t.stocks) || void 0 === r ? void 0 : r.map((e => e.wh)),
                                isSoldOut: !!t.unavailable || e.soldOut,
                                deliveryHours: e.deliveryHours,
                                payloadV2: t.payloadV2,
                                saleConditions: t.saleConditions,
                                whDtype: null !== (s = t.dtype) && void 0 !== s ? s : t.whDtype,
                                price: o ? {
                                    price: o.basic ? o.basic / 100 : 0,
                                    salePrice: o.priceToShow ? o.priceToShow / 100 : 0,
                                    sale: o.sale,
                                    logisticsCost: o.logistics,
                                    returnCost: o.return
                                } : null
                            }
                        }
                        )),
                        sizeTable: null,
                        showMinDetails: !Gt.includes(e.subjectParentId),
                        reviewRating: e.reviewRating,
                        star: e.star,
                        urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e.nmId}&excludeNms=true`,
                        supplier: $.views.helpers.supplierFineName("Wildberries" === e.supplier ? "WILDBERRIES" : $.views.converters.trimWord(e.supplier, $.views.helpers.suppliersOrgForms), e.brandId),
                        supplierId: e.supplierId,
                        supplierRating: e.supplierRating,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !c && !!(8 & e.viewFlags),
                        miniAddedOptions: [],
                        groupedAddedOptions: [],
                        showThermometer: e.showThermometer,
                        quantity: e.totalQuantity,
                        whDtype: e.whDtype,
                        isHelpKursk: new URL(window.location.href).searchParams.get("helpKursk") || window.location.pathname.includes("pomozhem-kursku-vmeste")
                    };
                    u.allSizesSoldOut = null === (r = u.sizes) || void 0 === r ? void 0 : r.every((e => e.isSoldOut));
                    const d = !u.allSizesSoldOut && (null === (s = e.catalogPrice) || void 0 === s ? void 0 : s.total) > 0;
                    return u.price = {
                        price: d ? e.catalogPrice.basic / 100 : 0,
                        salePrice: d ? e.catalogPrice.priceToShow / 100 : 0,
                        sale: d ? e.catalogPrice.sale : 0,
                        priceDiff: !!d && e.priceDiff,
                        logisticsCost: e.catalogPrice.logistics,
                        returnCost: e.catalogPrice.return,
                        soldOut: e.allSizesSoldOut
                    },
                    u.sort = 0,
                    u.sizes.length > 0 && (1 === u.sizes.length ? u.sort = u.sizes[0].quantity > 0 ? 1 : 0 : u.sizes.reduce(( (e, t) => u.sort += t.quantity > 0), {})),
                    a.nomenclatures.push(u),
                    this.fillSelectedNomenclature(u, t),
                    Object.assign(i, {
                        product: a,
                        selectedNomenclature: u
                    }),
                    i.product.canCheckForMulti = !0,
                    i.targetInfo = null !== (o = i.targetInfo) && void 0 !== o ? o : {},
                    i.metaTags = this._fillProductCardMetaTags(a),
                    i.openGraphDescription = this._fillOpenGraphDescription(u.nmId, a, i.metaTags),
                    i
                }
                ,
                t.stashCatalogProduct = function(e={}) {
                    this._stashedCatalogProduct = e
                }
                ,
                t._checkGroupedAddedOptionsExist = function(e) {
                    return (null == e ? void 0 : e.length) > 0 && e.some((e => {
                        var t;
                        return (null === (t = e.addedOptions) || void 0 === t ? void 0 : t.length) > 0
                    }
                    ))
                }
                ,
                t.fillSelectedNomenclature = function(e, t) {
                    var n, r, s;
                    wb.xnm.fillFeedbacksPayment([e]),
                    wb.xnm.isRedPrice(e.panelPromoId) && (e.showRedPrice = !0);
                    const o = e.sizes.length <= 2 && e.sizes.every((e => "0" === e.sizeName));
                    o || 1 === e.sizes.length ? e.selectedSize = e.sizes.find((e => !e.isSoldOut)) || e.sizes[0] : null != t && (e.selectedSize = e.sizes.find((e => e.characteristicId === t))),
                    this._setSelectedPrice(e),
                    this._setButtons(e),
                    e.showSize = !o,
                    e.deliveryInfoEnable = !e.isDigital && !((null === (n = e.selectedSize) || void 0 === n ? void 0 : n.isSoldOut) || e.allSizesSoldOut),
                    e.isVehicle = 8242 == e.subjectParentId,
                    e.saleConditions = null === (s = null === (r = e.sizes) || void 0 === r ? void 0 : r.find((e => {
                        var t;
                        return null === (t = e.stocks) || void 0 === t ? void 0 : t.length
                    }
                    ))) || void 0 === s ? void 0 : s.saleConditions,
                    e.colorGroupBaseType && e.selectedSize && (e.isShowChooseColorBtn = !0)
                }
                ,
                t.loadNomenclature = async function(e) {
                    var t, n, r, s, o, i, a, l, c, u, d, h, p, m, g, f, y;
                    let v = null;
                    if (!e.isDataLoaded)
                        try {
                            v = await this.loadStaticProductAsync(e.nmId)
                        } catch (e) {
                            v = null
                        }
                    if (v) {
                        if (e.goodsName = null !== (t = null == v ? void 0 : v.imt_name) && void 0 !== t ? t : e.goodsName,
                        e.brandName = null !== (r = null === (n = null == v ? void 0 : v.selling) || void 0 === n ? void 0 : n.brand_name) && void 0 !== r ? r : e.brandName,
                        e.colorName = v.nm_colors_names,
                        e.hasVideo = null === (s = v.media) || void 0 === s ? void 0 : s.has_video,
                        e.isBestQualityVideo = null !== (i = null === (o = null == v ? void 0 : v.media) || void 0 === o ? void 0 : o.is_best_quality_video) && void 0 !== i && i,
                        e.bestQualityPics = null !== (l = null === (a = v.media) || void 0 === a ? void 0 : a.best_qualities_photos) && void 0 !== l ? l : [],
                        e.hasRich = null !== (c = null == v ? void 0 : v.has_rich) && void 0 !== c && c,
                        e.hasImageTags = null !== (u = (null == v ? void 0 : v.enable_tags) && (null == v ? void 0 : v.has_photo_tags)) && void 0 !== u && u,
                        e.consist = null !== (g = null !== (h = null === (d = null == v ? void 0 : v.compositions) || void 0 === d ? void 0 : d.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join(", ")) && void 0 !== h ? h : null === (m = null === (p = null == v ? void 0 : v.options) || void 0 === p ? void 0 : p.find((e => "Состав" === e.name))) || void 0 === m ? void 0 : m.value) && void 0 !== g ? g : "",
                        v.sizes_table && v.sizes_table.details_props) {
                            e.sizeTable = [];
                            const t = v.sizes_table.details_props.indexOf("RU")
                              , n = {
                                row: []
                            };
                            t >= 0 && (n.row[0] = this.$localziation.russianSize),
                            n.row[1] = this.$localziation.manufactureSize;
                            let r = 2;
                            for (let e = 2; e < v.sizes_table.details_props.length; e++) {
                                const t = v.sizes_table.details_props[e];
                                n.row[r++] = "" !== t ? t : "-"
                            }
                            e.sizeTable.push(n),
                            v.sizes_table.values.forEach((n => {
                                var r;
                                const s = {
                                    chrtId: null !== (r = n.chrt_id) && void 0 !== r ? r : 0,
                                    row: []
                                };
                                if (t >= 0 && (s.row[0] = n.details[t]),
                                s.row[1] = n.tech_size,
                                n.details.length > 2)
                                    for (let e = 2; e < n.details.length; e++)
                                        s.row[e] = "" !== n.details[e] ? n.details[e] : "-";
                                e.sizeTable.push(s)
                            }
                            ));
                            for (const t of e.sizes) {
                                const e = v.sizes_table.values.find((e => e.chrt_id === t.characteristicId));
                                if (e && v.sizes_table.details_props.length === e.details.length)
                                    for (let n = 2; n < v.sizes_table.details_props.length; n++) {
                                        const r = {
                                            name: v.sizes_table.details_props[n],
                                            value: "" !== e.details[n] ? e.details[n] : "-"
                                        };
                                        t.dimensions.push(r)
                                    }
                            }
                        }
                        const b = this._fillGroupedAddedOptions(v);
                        e.groupedAddedOptions = b,
                        e.miniAddedOptions = this._fillMiniGroupedAddedOptions(b),
                        e.gluedOptions = wb.xnm.convertOptionsToGluedOptions(null == v ? void 0 : v.options),
                        e.subjectName = null !== (f = null == v ? void 0 : v.subj_name) && void 0 !== f ? f : "",
                        e.subjectParent = null !== (y = null == v ? void 0 : v.subj_root_name) && void 0 !== y ? y : "",
                        e.verifiedCertificate = this._setVerifiedCertificate(v),
                        this._addDigitalLinks(e, v),
                        e.description = v.description,
                        e.markdownDescription = v.markdown_description,
                        e.isDataLoaded = !0,
                        this._fillIsChooseColor(v, e)
                    }
                    const b = Object.assign({}, e);
                    return this.fillSelectedNomenclature(b),
                    b
                }
                ,
                t.loadPriceHistory = async function(e) {
                    return await this.$httpClient.fetchBasicJSON(wb.helpers.url.urlPriceHistoryStatic(e), {}, {
                        nullOnError: !0,
                        logOff: !0
                    })
                }
                ,
                t.loadProductVideosAsync = async function(e) {
                    const t = Jt.find((t => t.nmId == e));
                    if (null != t)
                        return await t.payloadTask;
                    try {
                        const t = this.$httpClient.fetchBasicJSON(`https://video-reviews.wildberries.ru/api/v1/video-by-nm?nm=${e}`);
                        Jt.push({
                            nmId: e,
                            payloadTask: t
                        }),
                        Jt = Jt.slice(-25);
                        return await t
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                }
                ,
                t.setChooseColorInBasket = function(e, t) {
                    var n, r, s;
                    for (let o = 0; o < e.length; o++)
                        if ((null === (r = null === (n = e[o].meta) || void 0 === n ? void 0 : n.shade) || void 0 === r ? void 0 : r.colorHex) && t.sizes) {
                            if (e[o].characteristicId === (null === (s = t.sizes[0]) || void 0 === s ? void 0 : s.characteristicId)) {
                                $.observable(t).setProperty({
                                    chooseColorInBasket: !0
                                });
                                break
                            }
                        } else
                            $.observable(t).setProperty({
                                chooseColorInBasket: !1
                            })
                }
                ,
                t._addDigitalLinks = function(e, t) {
                    var n, r;
                    e.digitalLinks = {
                        audio: null === (n = null == t ? void 0 : t.media) || void 0 === n ? void 0 : n.audiobook,
                        electronic: null === (r = null == t ? void 0 : t.media) || void 0 === r ? void 0 : r.electronic_book
                    }
                }
                ,
                t._colorLimiter = function(e, t) {
                    if (null === t || t.length < 60)
                        return t;
                    if (t.indexOf(e) < 60)
                        return t.slice(0, 60);
                    const n = [e];
                    return n.push(...t.slice(0, 59)),
                    n
                }
                ,
                t._fillBaseProductCardFromX = function(e, t, n) {
                    var r, s, o, i;
                    const a = this._fillGroupedAddedOptions(e);
                    return {
                        imtId: null !== (s = null !== (r = null == e ? void 0 : e.imt_id) && void 0 !== r ? r : null == t ? void 0 : t.root) && void 0 !== s ? s : 0,
                        groupedAddedOptions: a,
                        miniAddedOptions: this._fillMiniGroupedAddedOptions(a, n),
                        nomenclatures: [],
                        promoTemplateUfu: null === (i = null === (o = null == e ? void 0 : e.media) || void 0 === o ? void 0 : o.promo_url) || void 0 === i ? void 0 : i.replace(/^\/+|\/+$/g, ""),
                        supplierDeliveryInfo: {
                            time1: null == t ? void 0 : t.time1,
                            time2: null == t ? void 0 : t.time2,
                            storeId: null == t ? void 0 : t.wh
                        }
                    }
                }
                ,
                t._fillGroupedAddedOptions = function(e) {
                    var t, n, r, s, o, i, a;
                    const l = null !== (n = null === (t = null == e ? void 0 : e.grouped_options) || void 0 === t ? void 0 : t.map((e => {
                        var t;
                        return {
                            categoryName: e.group_name,
                            addedOptions: null === (t = e.options) || void 0 === t ? void 0 : t.map((e => ({
                                property: e.name,
                                subProperty: e.value
                            })))
                        }
                    }
                    ))) && void 0 !== n ? n : [];
                    let c = null == l ? void 0 : l.find((e => "Дополнительная информация" === (null == e ? void 0 : e.categoryName)));
                    return null != c && null != c.addedOptions || (c = {
                        categoryName: "Дополнительная информация",
                        addedOptions: []
                    },
                    l.push(c)),
                    (null === (r = null == e ? void 0 : e.options) || void 0 === r ? void 0 : r.find((e => "Состав" === e.name))) || null == (null == e ? void 0 : e.compositions) || c.addedOptions.unshift({
                        property: "Состав",
                        subProperty: null === (s = null == e ? void 0 : e.compositions) || void 0 === s ? void 0 : s.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join("; ")
                    }),
                    (null === (o = null == e ? void 0 : e.options) || void 0 === o ? void 0 : o.find((e => "Комплектация" === e.name))) || null == (null == e ? void 0 : e.contents) || c.addedOptions.push({
                        property: "Комплектация",
                        subProperty: e.contents
                    }),
                    (null === (i = null == e ? void 0 : e.options) || void 0 === i ? void 0 : i.find((e => "Пол" === e.name))) || null == (null == e ? void 0 : e.kinds) || c.addedOptions.push({
                        property: "Пол",
                        subProperty: e.kinds.join(", ")
                    }),
                    !(null === (a = null == e ? void 0 : e.options) || void 0 === a ? void 0 : a.find((e => "Сезон" === e.name))) && (null == e ? void 0 : e.season) && c.addedOptions.push({
                        property: "Сезон",
                        subProperty: e.season
                    }),
                    l.filter((e => e.addedOptions.length > 0))
                }
                ,
                t._fillNomenclature = function(e, t, n) {
                    var r, s, o, i, a, l, c, u, d, h, p, m, g, f, y, v, b, w, S, _, C, I, M, k, P, T, A, O, D, E, B, x, j, L, U, F, N, R, W;
                    const H = null !== (o = null !== (s = null === (r = null == t ? void 0 : t.data) || void 0 === r ? void 0 : r.subject_id) && void 0 !== s ? s : null == n ? void 0 : n.subjectId) && void 0 !== o ? o : 0
                      , q = null !== (l = null !== (a = null === (i = null == t ? void 0 : t.data) || void 0 === i ? void 0 : i.subject_root_id) && void 0 !== a ? a : null == n ? void 0 : n.subjectParentId) && void 0 !== l ? l : 0
                      , z = null !== (c = null == t ? void 0 : t.subj_name) && void 0 !== c ? c : ""
                      , V = null !== (u = null == t ? void 0 : t.subj_root_name) && void 0 !== u ? u : ""
                      , G = null !== (p = null !== (d = null == n ? void 0 : n.pics) && void 0 !== d ? d : null === (h = null == t ? void 0 : t.media) || void 0 === h ? void 0 : h.photo_count) && void 0 !== p ? p : 0
                      , J = null !== (g = null === (m = null == t ? void 0 : t.media) || void 0 === m ? void 0 : m.best_qualities_photos) && void 0 !== g ? g : []
                      , Q = 20624 === (null == n ? void 0 : n.brandId) || 30624 === (null == n ? void 0 : n.siteBrandId)
                      , K = this.$services.storeService.storesMap[null == n ? void 0 : n.wh] || null;
                    JSON.parse(localStorage.getItem("isWentAuthPage"));
                    setTimeout(( () => {
                        localStorage.putObject("isWentAuthPage", {
                            isWentAuthPage: !1
                        })
                    }
                    ), 2e3);
                    const X = {
                        adult: null !== (f = null == n ? void 0 : n.isAdult) && void 0 !== f && f,
                        brandId: null !== (y = null == n ? void 0 : n.brandId) && void 0 !== y ? y : 0,
                        brandName: null !== (b = null === (v = null == t ? void 0 : t.selling) || void 0 === v ? void 0 : v.brand_name) && void 0 !== b ? b : null == n ? void 0 : n.brand,
                        canFit: this._setCanFit(H, q),
                        colorName: -1 !== zt.indexOf(null == n ? void 0 : n.subjectId) ? null : null !== (w = null == t ? void 0 : t.nm_colors_names) && void 0 !== w ? w : null === (S = null == n ? void 0 : n.colors) || void 0 === S ? void 0 : S.map((e => e.name)).join(", "),
                        consist: null !== (k = null !== (C = null === (_ = null == t ? void 0 : t.compositions) || void 0 === _ ? void 0 : _.map((e => e.value ? `${e.name} ${e.value}%` : e.name)).join(", ")) && void 0 !== C ? C : null === (M = null === (I = null == t ? void 0 : t.options) || void 0 === I ? void 0 : I.find((e => "Состав" === e.name))) || void 0 === M ? void 0 : M.value) && void 0 !== k ? k : "",
                        deliveryHours: ((null == n ? void 0 : n.time1) || 0) + ((null == n ? void 0 : n.time2) || 0),
                        intervals: null == K ? void 0 : K.intervals,
                        workingHours: null == K ? void 0 : K.workingHours,
                        description: null == t ? void 0 : t.description,
                        markdownDescription: null == t ? void 0 : t.markdown_description,
                        dest: null == n ? void 0 : n.dest,
                        fastestStore: null == n ? void 0 : n.wh,
                        feedbacks: null !== (P = null == n ? void 0 : n.feedbacks) && void 0 !== P ? P : 0,
                        gluedOptions: wb.xnm.convertOptionsToGluedOptions(null == t ? void 0 : t.options),
                        goodsName: null !== (T = null == t ? void 0 : t.imt_name) && void 0 !== T ? T : null == n ? void 0 : n.name,
                        isActivationKey: -1 !== Wt.indexOf(H),
                        isDataLoaded: null != t,
                        isDetailsLoaded: !0,
                        isDigital: null !== (A = null == n ? void 0 : n.isDigital) && void 0 !== A && A,
                        isWbInstCompliant: null !== (O = null == n ? void 0 : n.isWbInstCompliant) && void 0 !== O && O,
                        isPreorder: 5772 === (null == n ? void 0 : n.brandId) && wb.settings.preOrderList.includes(e),
                        isPrepaid: null == n ? void 0 : n.isPrepaid,
                        isVideo: 5105 === H,
                        hasVideo: null !== (E = null === (D = null == t ? void 0 : t.media) || void 0 === D ? void 0 : D.has_video) && void 0 !== E && E,
                        isBestQualityVideo: null !== (x = null === (B = null == t ? void 0 : t.media) || void 0 === B ? void 0 : B.is_best_quality_video) && void 0 !== x && x,
                        hasRich: null !== (j = null == t ? void 0 : t.has_rich) && void 0 !== j && j,
                        hasImageTags: null !== (L = (null == t ? void 0 : t.enable_tags) && (null == t ? void 0 : t.has_photo_tags)) && void 0 !== L && L,
                        kindId: null !== (U = null == n ? void 0 : n.kindId) && void 0 !== U ? U : 0,
                        nmId: e,
                        nonRefundable: (null == n ? void 0 : n.isUnrefusable) || wb.xnm.setNoRefund(H),
                        panelPromoId: null == n ? void 0 : n.panelPromoId,
                        picsCount: G,
                        bestQualityPics: J,
                        promoText: null == n ? void 0 : n.promoTextCard,
                        promotions: null == n ? void 0 : n.promotions,
                        saleConditions: null == n ? void 0 : n.saleConditions,
                        subjectId: H,
                        subjectName: z,
                        subjectParent: V,
                        subjectParentId: q,
                        sizes: this._fillSizes(n, t),
                        sizeTable: t ? this._fillSizeTable(t) : null,
                        showMinDetails: !Gt.includes(q),
                        reviewRating: null == n ? void 0 : n.reviewRating,
                        star: null !== (F = null == n ? void 0 : n.rating) && void 0 !== F ? F : 0,
                        urlForReccomendations: `/recommendation/catalog?type=visuallysimilar&forproduct=${e}&excludeNms=true`,
                        supplier: $.views.helpers.supplierFineName(null == n ? void 0 : n.supplier, null == n ? void 0 : n.brandId),
                        supplierId: null == n ? void 0 : n.supplierId,
                        supplierRating: null == n ? void 0 : n.supplierRating,
                        premiumSale: null == n ? void 0 : n.premiumSale,
                        showRedPrice: wb.xnm.isRedPrice(n.panelPromoId),
                        whDtype: null == n ? void 0 : n.dtype
                    };
                    X.allSizesSoldOut = null === (N = X.sizes) || void 0 === N ? void 0 : N.every((e => e.isSoldOut));
                    const Y = !X.allSizesSoldOut && (null === (R = null == n ? void 0 : n.price) || void 0 === R ? void 0 : R.total) > 0;
                    return this._fillIsChooseColor(t || n, X),
                    X.price = {
                        price: Y && n.price.basic ? n.price.basic / 100 : 0,
                        salePrice: Y && n.price.total ? n.price.priceToShow / 100 : 0,
                        priceForBasket: Y && n.price.priceForBasket ? n.price.priceForBasket / 100 : 0,
                        sale: Y ? n.price.sale : 0,
                        priceDiff: !!Y && n.diffPrice,
                        logisticsCost: n.price.logistics,
                        returnCost: n.price.return,
                        soldOut: X.allSizesSoldOut
                    },
                    X.sort = 0,
                    X.quantity = 0,
                    (null === (W = X.sizes) || void 0 === W ? void 0 : W.length) > 0 && (1 === X.sizes.length ? (X.quantity = X.sizes[0].quantity,
                    X.sort = X.quantity > 0 ? 1 : 0) : X.sizes.reduce(( (e, t) => {
                        X.quantity += t.quantity,
                        X.sort += t.quantity > 0
                    }
                    ), {})),
                    this._setCanShowThermometer(null == n ? void 0 : n.panelPromoId, X),
                    X.supplierDeliveryInfo = {
                        time1: null == n ? void 0 : n.time1,
                        time2: null == n ? void 0 : n.time2,
                        storeId: null == n ? void 0 : n.wh
                    },
                    n && (X.viewFlags = n.viewFlags,
                    X.shouldShowOriginalMark = !Q && !!(8 & n.viewFlags)),
                    X
                }
                ,
                t._fillSizeTable = function(e) {
                    const t = [];
                    if (e.sizes_table && e.sizes_table.details_props) {
                        const n = e.sizes_table.details_props.indexOf("RU")
                          , r = e.sizes_table.details_props.indexOf("EU")
                          , s = {
                            row: []
                        };
                        let o = 0;
                        n >= 0 && (s.row[o++] = this.$localziation.russianSize),
                        s.row[o++] = this.$localziation.manufactureSize;
                        for (let t = 0; t < e.sizes_table.details_props.length; t++) {
                            if (t === n || t === r)
                                continue;
                            const i = e.sizes_table.details_props[t];
                            s.row[o++] = "" !== i ? i : "-"
                        }
                        t.push(s),
                        e.sizes_table.values.forEach((e => {
                            var s;
                            let o = 0;
                            const i = {
                                chrtId: null !== (s = e.chrt_id) && void 0 !== s ? s : 0,
                                row: []
                            };
                            n >= 0 && (i.row[o++] = e.details[n]),
                            i.row[o++] = e.tech_size;
                            const a = (-1 !== n ? 1 : 0) + (-1 !== r ? 1 : 0);
                            if (e.details.length > a)
                                for (let t = 0; t < e.details.length; t++)
                                    t !== n && t !== r && (i.row[o++] = "" !== e.details[t] ? e.details[t] : "-");
                            t.push(i)
                        }
                        ))
                    }
                    return t
                }
                ,
                t._fillIsChooseColor = function(e, t) {
                    var n, r, s, o, i, a;
                    const l = null === (n = null == e ? void 0 : e.options) || void 0 === n ? void 0 : n.findIndex((e => "база для колеровки" === e.name.toLowerCase() && e.value))
                      , c = null === (r = null == e ? void 0 : e.options) || void 0 === r ? void 0 : r.find((e => "продавец может заколеровать" === e.name.toLowerCase() && "да" === e.value.toLowerCase()))
                      , u = null === (s = null == e ? void 0 : e.options) || void 0 === s ? void 0 : s.find((e => "каталог цветов" === e.name.toLowerCase() && e.value.toLowerCase().split(/[; ]+/).includes("ncs")))
                      , d = null === (i = null === (o = t.sizes[0]) || void 0 === o ? void 0 : o.stocks) || void 0 === i ? void 0 : i.every((e => [1, 2, 3].includes(e.dtype)));
                    if (l > 0 && c && u && d) {
                        if (!t.sizes.map((e => wb.xnm.expandSaleConditions({}, e))).some((e => e.isUnrefusable && e.isPrepaid && (e.isUnreturnable || e.isVerificationReturn))))
                            return;
                        const n = null === (a = null == e ? void 0 : e.options[l]) || void 0 === a ? void 0 : a.value.toLowerCase()
                          , r = ["a", "1", "bw"]
                          , s = ["c", "3", "bc", "d"];
                        n && (t.colorBaseType = n.toUpperCase(),
                        r.includes(n) ? t.colorGroupBaseType = "A" : s.includes(n) && (t.colorGroupBaseType = "C"));
                        const o = this.$services.cartService.get().basketItems;
                        this.setChooseColorInBasket(o, t)
                    }
                }
                ,
                t._fillProductCardMetaTags = function(e) {
                    const t = {};
                    return e.nomenclatures.map((e => {
                        const n = `${e.goodsName} ${e.brandName} ${e.nmId}`;
                        t[e.nmId] = {
                            title: `${n} купить %FORPRICE% в интернет-магазине Wildberries`,
                            description: `${n} купить %FORPRICE% в интернет-магазине Wildberries. Бесплатная доставка и постоянные скидки!`
                        }
                    }
                    )),
                    t
                }
                ,
                t._fillPromoUrl = function(e, t, n, r) {
                    var s, o;
                    if (t.promoTemplateUfu)
                        return `promo/${t.promoTemplateUfu}`;
                    if (6012 === r || 3363 === r) {
                        if (null === (o = null === (s = null == n ? void 0 : n.options) || void 0 === s ? void 0 : s.find((e => "Подробный обзор" === e.name))) || void 0 === o ? void 0 : o.value)
                            return `https://www.wildberries.ru/productinfo/philips/${e}`
                    }
                }
                ,
                t._canCheckForMulti = function(e) {
                    var t;
                    return !!(null === (t = null == e ? void 0 : e.options) || void 0 === t ? void 0 : t.find((e => "Модель" === e.name)))
                }
                ,
                t._fillOpenGraphDescription = function(e, t, n) {
                    if (null == t ? void 0 : t.description)
                        return t.description;
                    const r = n[e];
                    return (null == r ? void 0 : r.description) ? r.description : "Узнать подробнее, перейдите по ссылке"
                }
                ,
                t._fillSizes = function(e, t) {
                    var n;
                    return e && e.sizes ? e.sizes.sort(( (e, t) => e.rank - t.rank)).map((n => {
                        var r, s, o, i, a, l, c, u;
                        const d = []
                          , h = null === (s = null === (r = null == t ? void 0 : t.sizes_table) || void 0 === r ? void 0 : r.values) || void 0 === s ? void 0 : s.find((e => e.chrt_id === n.optionId));
                        if ((null == h ? void 0 : h.details) && (null === (o = t.sizes_table.details_props) || void 0 === o ? void 0 : o.length) === h.details.length)
                            for (let e = 0; e < t.sizes_table.details_props.length; e++) {
                                if ("RU" === t.sizes_table.details_props[e] || "EU" === t.sizes_table.details_props[e])
                                    continue;
                                const n = {
                                    name: t.sizes_table.details_props[e],
                                    value: "" !== h.details[e] ? h.details[e] : "-"
                                };
                                d.push(n)
                            }
                        const p = null !== (a = null === (i = n.price) || void 0 === i ? void 0 : i.total) && void 0 !== a ? a : null === (l = e.price) || void 0 === l ? void 0 : l.total;
                        let m = 0;
                        p > 0 && (null === (c = n.stocks) || void 0 === c ? void 0 : c.length) > 0 && (1 === n.stocks.length ? m = n.stocks[0].qty : n.stocks.reduce(( (e, t) => m += t.qty), 0));
                        const g = m > 0 ? null === (u = n.stocks) || void 0 === u ? void 0 : u.map((e => e.wh)) : null
                          , f = {
                            characteristicId: n.optionId,
                            sizeName: n.origName,
                            sizeNameRus: n.name,
                            dimensions: d,
                            quantity: m,
                            stocks: n.stocks,
                            storeIds: g,
                            isSoldOut: 0 === m,
                            lowQuantity: m < 3 && m > 0,
                            deliveryHours: (n.time1 || 0) + (n.time2 || 0),
                            fastestStore: n.wh,
                            payloadV2: n.payload,
                            saleConditions: n.saleConditions,
                            whDtype: n.dtype,
                            isForeign: !!(32 & n.dtype)
                        };
                        return m > 0 && n.price && (f.price = {
                            price: n.price.basic ? n.price.basic / 100 : 0,
                            salePrice: n.price.total ? n.price.priceToShow / 100 : 0,
                            priceForBasket: n.price.priceForBasket ? n.price.priceForBasket / 100 : 0,
                            sale: n.price.sale,
                            logisticsCost: n.price.logistics,
                            returnCost: n.price.return
                        },
                        this._setCanShowThermometer(e.panelPromoId, f)),
                        f
                    }
                    )) : (null === (n = null == t ? void 0 : t.data) || void 0 === n ? void 0 : n.chrt_ids) ? t.data.chrt_ids.map((e => {
                        var n, r, s;
                        const o = null === (n = null == t ? void 0 : t.sizes_table) || void 0 === n ? void 0 : n.values.find((t => t.chrt_id === e))
                          , i = [];
                        if (o) {
                            const e = null === (r = null == t ? void 0 : t.sizes_table) || void 0 === r ? void 0 : r.values.find((e => e.chrt_id === o.optionId));
                            if ((null == e ? void 0 : e.details) && (null === (s = t.sizes_table.details_props) || void 0 === s ? void 0 : s.length) === e.details.length)
                                for (let n = 0; n < t.sizes_table.details_props.length; n++) {
                                    if ("RU" === t.sizes_table.details_props[n] || "EU" === t.sizes_table.details_props[n])
                                        continue;
                                    const r = {
                                        name: t.sizes_table.details_props[n],
                                        value: "" !== e.details[n] ? e.details[n] : "-"
                                    };
                                    i.push(r)
                                }
                        }
                        return {
                            characteristicId: e,
                            sizeName: "0",
                            sizeNameRus: "",
                            dimensions: i,
                            quantity: 0,
                            isSoldOut: !0
                        }
                    }
                    )) : null
                }
                ,
                t._setCanFit = function(e, t) {
                    return -1 !== Ht.indexOf(t) && -1 === qt.indexOf(e)
                }
                ,
                t._fillMiniGroupedAddedOptions = function(e, t) {
                    const n = [];
                    if (!e)
                        return n;
                    let r = t ? 4 : 6;
                    for (let t = 0; t < e.length; t++) {
                        const s = e[t].addedOptions.slice(0, r).filter((e => "Цвет" !== e.property));
                        if (n.push(...s),
                        r -= s.length,
                        r < 1)
                            break
                    }
                    return n
                }
                ,
                t._setVerifiedCertificate = function(e) {
                    var t, n;
                    return (null === (t = null == e ? void 0 : e.certificate) || void 0 === t ? void 0 : t.verified) ? (null === (n = e.data) || void 0 === n ? void 0 : n.subject_id) && Vt.indexOf(e.data.subject_id) >= 0 ? 2 : 1 : 0
                }
                ,
                t._setSelectedPrice = function(e) {
                    var t;
                    e.selectedPrice = (null === (t = e.selectedSize) || void 0 === t ? void 0 : t.price) ? e.selectedSize.price : e.price
                }
                ,
                t._setButtons = function(e) {
                    var t, n, r;
                    e.addToBasketEnable = !((null === (t = e.selectedSize) || void 0 === t ? void 0 : t.isSoldOut) || e.allSizesSoldOut),
                    e.addToPonedEnable = !((null === (n = e.selectedSize) || void 0 === n ? void 0 : n.isSoldOut) || e.allSizesSoldOut),
                    e.addToWaitingListEnable = (null === (r = e.selectedSize) || void 0 === r ? void 0 : r.isSoldOut) || e.allSizesSoldOut,
                    e.addedToBasket = !1,
                    e.addedToWl = !1
                }
                ,
                t._setCanShowThermometer = function(e, t) {
                    !WbSpaModel.prototype.$auth.isAuth || !t.quantity || t.quantity > 1e3 || WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e) && (t.showThermometer = !0)
                }
                ,
                e
            }();
            const Kt = Qt;
            let Xt = function() {
                function e(e, t) {
                    this.publicUrl = "https://banners-website.wildberries.ru/public/v1/banners",
                    this.enums = e,
                    this.helper = t
                }
                var t = e.prototype;
                return t.getBannersFromApi = async function(e) {
                    var t;
                    const n = null !== (t = e.appType) && void 0 !== t ? t : this._getAppType();
                    let r = await this._getBannersFromApi(e.urlType, n, e.menuId, e.brandId);
                    return r = r.filter((e => null != e)).map((e => this.helper.convertToBannerItem(e))),
                    r.sort(( (e, t) => {
                        var n, r;
                        return (null !== (n = e.placementOptions.sort) && void 0 !== n ? n : 0) - (null !== (r = t.placementOptions.sort) && void 0 !== r ? r : 0)
                    }
                    )),
                    r
                }
                ,
                t._getBannersFromApi = async function(e, t, n, r) {
                    var s, o;
                    let i = await WbSpaModel.prototype.$user.getLocationData();
                    const a = WbSpaModel.prototype.$user.getUserInfo()
                      , l = WbSpaModel.prototype.$user.getBannersClusters()
                      , c = this._getDisplayType(a)
                      , u = this._getCountry()
                      , d = WbSpaModel.prototype.$helper.currentCulture
                      , h = new URLSearchParams({
                        urltype: e,
                        apptype: t,
                        displaytype: c,
                        longitude: i.longitude,
                        latitude: i.latitude,
                        country: u,
                        culture: d
                    });
                    WbSpaModel.prototype.$analitic.appendSplitInfoV2(h, "banner"),
                    (null == l ? void 0 : l.length) && h.append("clusterids", l),
                    n && h.append("menuid", n),
                    r && h.append("brandId", r);
                    const p = `${this.publicUrl}?${new URLSearchParams(h)}`;
                    let m = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(p, {}, {
                        timeout: 1e4,
                        nullOnError: !0,
                        addAuthHeader: !0
                    });
                    if (m && (null == m ? void 0 : m.length) || (m = await this._getDefaultBannersFromStatic(e, t, n)),
                    m && WbSpaModel.prototype.$apiSupport.webpImage && (null === (o = null === (s = wb.global.settings) || void 0 === s ? void 0 : s.switches) || void 0 === o ? void 0 : o.bannerWebp))
                        for (const e of m)
                            e.Src && (e.Src = e.Src.replace(".jpg", ".webp")),
                            e.src && (e.src = e.src.replace(".jpg", ".webp"));
                    return (null == m ? void 0 : m.length) > 0 ? m : []
                }
                ,
                t._getDefaultBannersFromStatic = async function(e, t, n) {
                    const r = this._getBannersTypeForStatic(e);
                    if (!r)
                        return null;
                    const s = n ? `banners-${r}-${wb.settings.currentLocale}-${n}-v1.json` : `banners-${r}-${wb.settings.currentLocale}-v1.json`;
                    try {
                        let n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(s, 3e3);
                        return t == this.enums.appType.desktop ? n = null == n ? void 0 : n.filter((e => e.applicationType == this.enums.appType.desktop || 225 == e.applicationType || 227 == e.applicationType)) : t == this.enums.appType.mobile && (n = null == n ? void 0 : n.filter((e => e.applicationType == this.enums.appType.mobile || 227 == e.applicationType))),
                        e == this.enums.urlType.promotion && t == this.enums.appType.desktop && (null == n || n.forEach((e => {
                            e.src = this.helper.createBannerPathByResolution(e.src, "c660x210")
                        }
                        ))),
                        n
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._getBannersTypeForStatic = function(e) {
                    switch (e) {
                    case this.enums.urlType.main:
                        return "main";
                    case this.enums.urlType.promotion:
                        return "promo";
                    case this.enums.urlType.cataloger:
                        return "catalog"
                    }
                }
                ,
                t._getAppType = function() {
                    return "d" == wb.settings.displayMode ? this.enums.appType.desktop : this.enums.appType.mobile
                }
                ,
                t._getDisplayType = function(e) {
                    return e.isAuth ? this.enums.bannerDisplayType.forAuth : this.enums.bannerDisplayType.forNotAuth
                }
                ,
                t._getCountry = function() {
                    var e;
                    return 1 << (null !== (e = this.enums.country[WbSpaModel.prototype.$user.getLocale()]) && void 0 !== e ? e : 0) - 1
                }
                ,
                e
            }();
            const Yt = Xt;
            let Zt = function(e, t, n, r) {
                this.urlType = e,
                this.menuId = n,
                this.brandId = r,
                this.appType = t
            }
              , en = function() {
                function e(e, t) {
                    this.enums = e,
                    this.helper = t,
                    this.api = new Yt(this.enums,this.helper)
                }
                var t = e.prototype;
                return t.getBannersForHomePageAsync = async function() {
                    const e = await this.api.getBannersFromApi(new Zt(this.enums.urlType.main,this.enums.appType.desktopAndMobile))
                      , t = [this.enums.locationType._215x168, this.enums.locationType._705x394, this.enums.locationType._460x394, this.enums.locationType._364x668]
                      , n = []
                      , r = []
                      , s = []
                      , o = [];
                    let i = [];
                    return null == e || e.forEach((e => {
                        e.locationType == this.enums.locationType._1440x168 ? e.applicationType == this.enums.appType.desktop ? n.push(e) : e.applicationType == this.enums.appType.mobile && i.push(e) : e.locationType == this.enums.locationType.mainInfo ? e.applicationType == this.enums.appType.desktop ? s.push(e) : e.applicationType == this.enums.appType.mobile && o.push(e) : -1 != t.indexOf(e.locationType) && r.push(e)
                    }
                    )),
                    i.length || (i = n),
                    {
                        mainBanners: n,
                        mainMobileBanners: i,
                        contentBanners: r,
                        mainInfoBanners: s,
                        mainInfoMobileBanners: o
                    }
                }
                ,
                t.getBannersForFooterAsync = async function() {
                    const e = await this.api.getBannersFromApi(new Zt(this.enums.urlType.main,this.enums.appType.desktopAndMobile))
                      , t = []
                      , n = [];
                    return null == e || e.forEach((e => {
                        e.locationType === this.enums.locationType.footerSocial && (e.applicationType == this.enums.appType.desktop ? t.push(e) : e.applicationType == this.enums.appType.mobile && n.push(e))
                    }
                    )),
                    {
                        desktopBanners: t,
                        mobileBanners: n.length ? n : t
                    }
                }
                ,
                t.getPromoBanners = function() {
                    return this._getPromotionBanners()
                }
                ,
                t._getPromotionBanners = async function() {
                    const e = (await this.api.getBannersFromApi(new Zt(this.enums.urlType.promotion,this.enums.appType.desktop))).filter((e => e.locationType == this.enums.locationType._770x245));
                    return this.helper.dividePromotionBanners(e)
                }
                ,
                t.getPromoCatalogBanners = async function(e, t=!1) {
                    return (await this.api.getBannersFromApi(new Zt(this.enums.urlType.promotionCatalog,t ? this.enums.appType.mobile : this.enums.appType.desktop,e))).filter((e => e.locationType === this.enums.locationType.promo_strip))
                }
                ,
                t.getPromotionSpecialBanners = async function(e=!1) {
                    const t = await this.api.getBannersFromApi(new Zt(this.enums.urlType.promotionCatalog,e ? this.enums.appType.mobile : this.enums.appType.desktop))
                      , n = []
                      , r = [];
                    return t.forEach((e => {
                        e.locationType === this.enums.locationType.special_promo && n.push(e),
                        e.locationType === this.enums.locationType.promo_strip && r.push(e)
                    }
                    )),
                    [n, r]
                }
                ,
                t.getTopMenuBanners = async function() {
                    const e = await this.api.getBannersFromApi(new Zt(this.enums.urlType.default,this.enums.appType.desktop))
                      , t = this._menuSingleBanners(e)
                      , n = await this._getMenuPromotionBanners()
                      , r = t;
                    return (null == n ? void 0 : n.length) > 0 && (r[2192] = n),
                    r
                }
                ,
                t._menuSingleBanners = function(e) {
                    return e.reduce(( (e, t) => {
                        var n;
                        if (t.locationType != this.enums.locationType.menu_banners)
                            return e;
                        const r = null !== (n = t.placementOptions.menuID) && void 0 !== n ? n : 0;
                        return e.hasOwnProperty(r) || (e[r] = []),
                        e[r].push(t),
                        e
                    }
                    ), {})
                }
                ,
                t._getMenuPromotionBanners = async function() {
                    const e = await this._getPromotionBanners()
                      , t = e.leftBanners.slice(0, 5).concat(e.rightBanners.slice(0, 5));
                    return null == t || t.forEach((e => {
                        e.src = this.helper.createBannerPathByResolution(e.src, "t305x245q"),
                        e.absoluteUrl = e.getAbsoluteUrl()
                    }
                    )),
                    t
                }
                ,
                t.getCatalogBanners = async function(e, t, n=!1) {
                    var r, s;
                    this.menuIdEnum || (this.menuIdEnum = t);
                    const o = await this.api.getBannersFromApi(new Zt(this.enums.urlType.cataloger,this.enums.appType.desktop,e))
                      , i = this._getBannersForCatalog(o, e);
                    let a = i.firstCarousel
                      , l = i.secondCarousel;
                    if (n) {
                        const t = await this.api.getBannersFromApi(new Zt(this.enums.urlType.cataloger,this.enums.appType.mobile,e))
                          , n = this._getCatalogBigBanners(t);
                        a = (null === (r = n.firstCarousel) || void 0 === r ? void 0 : r.length) > 0 ? n.firstCarousel : i.firstCarousel,
                        l = (null === (s = n.secondCarousel) || void 0 === s ? void 0 : s.length) > 0 ? n.secondCarousel : i.secondCarousel
                    }
                    return {
                        mainBannersFirst: a,
                        mainBannersSecond: l,
                        verticalBanners: i.verticalBanners,
                        smallBanners: i.commonBanners,
                        seasonBanners: i.seasonBanners
                    }
                }
                ,
                t._getBannersForCatalog = function(e, t) {
                    if (!e)
                        return [];
                    const {firstCarousel: n, secondCarousel: r} = this._getCatalogBigBanners(e)
                      , s = this._getCatalogVerticalBanners(e)
                      , o = e.filter((e => e.locationType == this.enums.locationType.small));
                    return {
                        firstCarousel: n,
                        secondCarousel: r,
                        verticalBanners: s,
                        commonBanners: this._getCommonBanners(o, t),
                        seasonBanners: this._getSeasonBanners(o, t)
                    }
                }
                ,
                t._getCommonBanners = function(e, t) {
                    const n = this._getCatalogBannersSortParams(t, !0);
                    return this.helper.getBannersBySort(e, n).reduce(( (e, t) => {
                        const n = t.placementOptions.sort;
                        return e[n] = [...e[n] || [], t],
                        e
                    }
                    ), {})
                }
                ,
                t._getSeasonBanners = function(e, t) {
                    const n = this._getCatalogBannersSortParams(t);
                    return this.helper.getBannersBySort(e, n)
                }
                ,
                t._getCatalogVerticalBanners = function(e) {
                    return e.filter((e => e.locationType == this.enums.locationType.vertical)).reduce(( (e, t) => {
                        const n = t.placementOptions.sort;
                        return e[n] = [...e[n] || [], t],
                        e
                    }
                    ), {})
                }
                ,
                t._getCatalogBigBanners = function(e) {
                    const t = e.filter((e => e.locationType == this.enums.locationType.big))
                      , n = []
                      , r = [];
                    return t.forEach((e => {
                        e.placementOptions.sort < 100 && n.push(e),
                        e.placementOptions.sort > 100 && e.placementOptions.sort < 110 && r.push(e)
                    }
                    )),
                    {
                        firstCarousel: n,
                        secondCarousel: r
                    }
                }
                ,
                t._getCatalogBannersSortParams = function(e, t) {
                    const n = {
                        onlyMarketingSortStart: null,
                        onlyMarketingSortEnd: null,
                        suppliersSortStart: null,
                        suppliersSortCount: null
                    }
                      , r = [this.menuIdEnum.sport, this.menuIdEnum.monocity];
                    return t ? -1 != r.indexOf(e) ? (n.suppliersSortStart = 0,
                    n.suppliersSortCount = 3) : (n.onlyMarketingSortStart = 0,
                    n.onlyMarketingSortEnd = 100,
                    n.suppliersSortStart = 100,
                    n.suppliersSortCount = 3) : (n.onlyMarketingSortStart = 50,
                    n.onlyMarketingSortEnd = 99),
                    n
                }
                ,
                e
            }();
            const tn = en;
            const nn = function() {
                function e() {
                    this.appType = this._getAppType(),
                    this.locationType = this._getLocationType(),
                    this.urlType = this._getUrlType(),
                    this.bannerDisplayType = this._getBannerDisplayType(),
                    this.country = this._getCountry(),
                    this.ownerType = this._getOwnerType()
                }
                var t = e.prototype;
                return t._getAppType = function() {
                    return {
                        desktop: 1,
                        mobile: 2,
                        desktopAndMobile: 3
                    }
                }
                ,
                t._getLocationType = function() {
                    return {
                        main: 42,
                        small: 38,
                        strip: 39,
                        _352x428: 60,
                        _305x245: 57,
                        _770x245: 59,
                        big: 41,
                        vertical: 36,
                        promo_strip: 61,
                        _1440x168: 62,
                        _215x168: 63,
                        _705x394: 64,
                        _460x394: 65,
                        _364x668: 66,
                        menu_banners: 73,
                        footerSocial: 80,
                        mainInfo: 81,
                        special_promo: 88
                    }
                }
                ,
                t._getUrlType = function() {
                    return {
                        main: 1024,
                        default: 0,
                        promotion: 16384,
                        cataloger: 1 << 22,
                        promotionCatalog: 62
                    }
                }
                ,
                t._getBannerDisplayType = function() {
                    return {
                        forAuth: 2,
                        forNotAuth: 3
                    }
                }
                ,
                t._getCountry = function() {
                    return {
                        ru: 1,
                        by: 2,
                        kz: 3,
                        am: 4,
                        kg: 5,
                        uz: 13
                    }
                }
                ,
                t._getOwnerType = function() {
                    return {
                        marketing: 0,
                        supplier: 1
                    }
                }
                ,
                e
            }();
            let rn = function() {
                function e(e) {
                    var t, n, r, s, o, i, a, l, c, u, d, h, p, m, g, f, y, v, b, w, S;
                    this.id = null !== (t = e.UID) && void 0 !== t ? t : e.uID,
                    this.href = null !== (n = e.Href) && void 0 !== n ? n : e.href,
                    this.applicationType = null !== (r = e.ApplicationType) && void 0 !== r ? r : e.applicationType,
                    this.locationType = null !== (s = e.LocationType) && void 0 !== s ? s : e.locationType,
                    this.placementOptions = {
                        sort: null !== (i = null === (o = e.PlacementOptions) || void 0 === o ? void 0 : o.Sort) && void 0 !== i ? i : null === (a = e.placementOptions) || void 0 === a ? void 0 : a.sort,
                        menuID: null !== (c = null === (l = e.PlacementOptions) || void 0 === l ? void 0 : l.MenuID) && void 0 !== c ? c : null === (u = e.placementOptions) || void 0 === u ? void 0 : u.menuID
                    },
                    this.src = null !== (d = e.Src) && void 0 !== d ? d : e.src,
                    this.alt = null !== (h = e.Alt) && void 0 !== h ? h : e.alt,
                    this.noFollow = null !== (p = e.NoFollow) && void 0 !== p ? p : e.noFollow,
                    this.noIndex = null !== (m = e.NoIndex) && void 0 !== m ? m : e.noIndex,
                    this.target = null !== (g = e.Target) && void 0 !== g ? g : e.target,
                    this.ordBannerMark = null !== (f = e.OrdBannerMark) && void 0 !== f ? f : e.ordBannerMark;
                    const _ = null !== (y = e.AdditionalSections) && void 0 !== y ? y : e.additionalSections;
                    this.bannerSelections = null !== (v = null == _ ? void 0 : _.map((e => new sn(e)))) && void 0 !== v ? v : [],
                    this.promoText = null !== (b = e.PromoText) && void 0 !== b ? b : e.promoText,
                    this.promoTextLines = null !== (w = e.PromoTextLines) && void 0 !== w ? w : e.promoTextLines,
                    this.owner = null !== (S = e.Provider) && void 0 !== S ? S : e.provider,
                    this.statisticFields = new on(e),
                    this.absoluteUrl = this.getAbsoluteUrl(),
                    this.link = this.getLink(),
                    this.pixelSrc = e.PixelSrc
                }
                var t = e.prototype;
                return t.getLink = function() {
                    const e = 0 == this.href.indexOf("https:")
                      , t = e ? new URL(this.href) : new URL(this.href,window.location);
                    return t.searchParams.append("bid", this.id),
                    e ? t.href : `${t.pathname}${t.search}`
                }
                ,
                t.getAbsoluteUrl = function() {
                    return -1 !== this.src.toLowerCase().indexOf("wildberries") ? this.src : wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs${this.src}`)
                }
                ,
                e
            }()
              , sn = function(e) {
                var t, n, r, s, o;
                this.href = null !== (t = e.Href) && void 0 !== t ? t : e.href,
                this.relativeXPos = null !== (n = e.RelativeXPos) && void 0 !== n ? n : e.relativeXPos,
                this.relativeYPos = null !== (r = e.RelativeYPos) && void 0 !== r ? r : e.relativeYPos,
                this.relativeHeight = null !== (s = e.RelativeHeight) && void 0 !== s ? s : e.relativeHeight,
                this.relativeWidth = null !== (o = e.RelativeWidth) && void 0 !== o ? o : e.relativeWidth
            }
              , on = function(e) {
                var t, n, r, s, o, i;
                this.urlType = null !== (t = e.URLType) && void 0 !== t ? t : e.uRLType,
                this.displayType = null !== (n = e.DisplayType) && void 0 !== n ? n : e.displayType,
                this.locationType = null !== (r = e.LocationType) && void 0 !== r ? r : e.locationType,
                this.sort = null !== (o = null === (s = e.PlacementOptions) || void 0 === s ? void 0 : s.Sort) && void 0 !== o ? o : null === (i = e.placementOptions) || void 0 === i ? void 0 : i.sort
            };
            const an = function() {
                function e(e) {
                    this.enums = e,
                    this.fillingGapsSortStart = 300
                }
                var t = e.prototype;
                return t.convertToBannerItem = function(e) {
                    return new rn(e)
                }
                ,
                t.createBannerPathByResolution = function(e, t) {
                    const n = t
                      , r = e.split("/").slice(-1);
                    return `/poster/${WbSpaModel.prototype.$helper.currentCulture}/action2/${n}/${r}`
                }
                ,
                t.dividePromotionBanners = function(e) {
                    const t = this._getBannersSoldToSuppliers(e, 100, 20)
                      , n = null == e ? void 0 : e.filter((e => e.owner == this.enums.ownerType.marketing))
                      , r = n.filter((e => e.placementOptions.sort < 100));
                    let {leftBanners: s, rightBanners: o} = this._createTwoSidesWithTheSameSize(n, r, t);
                    return s = s.map((e => e)),
                    o = o.map((e => e)),
                    {
                        leftBanners: s,
                        rightBanners: o
                    }
                }
                ,
                t.getBannersBySort = function(e, t) {
                    const n = e.filter((e => e.owner == this.enums.ownerType.marketing && e.placementOptions.sort > t.onlyMarketingSortStart && e.placementOptions.sort < t.onlyMarketingSortEnd))
                      , r = this._getBannersSoldToSuppliers(e, t.suppliersSortStart, t.suppliersSortCount);
                    return n.concat(r)
                }
                ,
                t._getBannersSoldToSuppliers = function(e, t, n) {
                    if (!WbSpaModel.prototype.$helper.isNumber(t) || !n)
                        return [];
                    const r = e.filter((e => e.owner == this.enums.ownerType.supplier))
                      , s = e.filter((e => e.owner == this.enums.ownerType.marketing && e.placementOptions.sort > 200 && e.placementOptions.sort < this.fillingGapsSortStart)).reduce(( (e, t) => {
                        const n = t.placementOptions.sort;
                        return e.set(n, [...e.get(n) || [], t])
                    }
                    ), new Map)
                      , o = r.reduce(( (e, t) => e.add(t.placementOptions.sort)), new Set);
                    for (let e = 1; e <= n; e++) {
                        const n = t + e;
                        if (!o.has(n)) {
                            const t = s.get(200 + e);
                            if ((null == t ? void 0 : t.length) > 0) {
                                const e = t[0];
                                e.placementOptions.sort = n,
                                r.push(e)
                            }
                        }
                    }
                    return r
                }
                ,
                t._createTwoSidesWithTheSameSize = function(e, t, n) {
                    const r = e.filter((e => e.placementOptions.sort >= this.fillingGapsSortStart));
                    if (0 == r.length)
                        return n;
                    var s = Math.max(t.length, n.length);
                    return this._fillGapsIfNeeded(t, s, r),
                    this._fillGapsIfNeeded(n, s, r),
                    {
                        leftBanners: t,
                        rightBanners: n
                    }
                }
                ,
                t._fillGapsIfNeeded = function(e, t, n) {
                    let r = t - e.length;
                    for (; r > 0 && n.length > 0; ) {
                        {
                            const t = n[0];
                            n.splice(0, 1),
                            e.push(t)
                        }
                        r--
                    }
                    e.sort(( (e, t) => e.placementOptions.sort - t.placementOptions.sort))
                }
                ,
                e
            }()
              , ln = "home-banners-cache-new"
              , cn = "menu-banners-cache-v2"
              , un = "main-catalog-banners-cache"
              , dn = "promotions-banners-cache"
              , hn = "footer-banners-cache"
              , pn = "promotion-special-banners-cache"
              , mn = 3e5;
            let gn = function() {
                function e() {
                    WbSpaModel.prototype.$eventBus.addEventListener("GeoUpdated", ( () => this._refreshCache())),
                    this.cacheVers = 5
                }
                var t = e.prototype;
                return t.getCachedResults = async function(e, t, n, r) {
                    const s = WbSpaModel.prototype.$user.getUserInfo().uid
                      , o = this._getCacheKey(e);
                    return o ? (r || (r = 1),
                    await this._getCachedResults(o, t, s, n, r)) : Promise.resolve(null)
                }
                ,
                t._getCachedResults = async function(e, t, n, r, s) {
                    const o = this._tryGetCachedData(e, n)
                      , i = this._getResultsFromCachedData(o, r, s);
                    if (i)
                        return Promise.resolve(i);
                    const a = await t();
                    if (!a)
                        return Promise.resolve(null);
                    if (this._checkBannersExist(a)) {
                        const t = this._toCacheResult(n, r, s, o, a);
                        localStorage.putObject(e, t)
                    }
                    return Promise.resolve(a)
                }
                ,
                t._tryGetCachedData = function(e, t) {
                    const n = localStorage.getObject(e);
                    return n && this.cacheVers == n.version && n.userId == t ? n : null
                }
                ,
                t._getResultsFromCachedData = function(e, t, n) {
                    var r;
                    const s = this._getDisplayName(t)
                      , o = null === (r = null == e ? void 0 : e[s]) || void 0 === r ? void 0 : r[n];
                    return !o || Date.now() - o.updateTs > mn ? null : o.data
                }
                ,
                t._toCacheResult = function(e, t, n, r, s) {
                    r || (r = {}),
                    r.version = this.cacheVers,
                    r.userId = e,
                    r.desktop = this._getCleanedCachedData(r.desktop),
                    r.mobile = this._getCleanedCachedData(r.mobile);
                    return r[this._getDisplayName(t)][n] = {
                        updateTs: Date.now(),
                        data: s
                    },
                    r
                }
                ,
                t._checkBannersExist = function(e) {
                    let t = !1;
                    if (Array.isArray(e))
                        return !0;
                    for (let n in e) {
                        const r = e[n];
                        if (r && (Array.isArray(r) ? t = r.length > 0 : "object" == typeof r && (t = this._checkBannersExist(r)),
                        t))
                            break
                    }
                    return t
                }
                ,
                t._getCleanedCachedData = function(e) {
                    const t = {};
                    for (let n in null != e ? e : {})
                        !n || Date.now() - e[n].updateTs > mn || (t[n] = e[n]);
                    return t
                }
                ,
                t._getDisplayName = function(e) {
                    return e ? "mobile" : "desktop"
                }
                ,
                t._getCacheKey = function(e) {
                    switch (e) {
                    case this.bannersCacheType.main:
                        return ln;
                    case this.bannersCacheType.menu:
                        return cn;
                    case this.bannersCacheType.catalog:
                        return un;
                    case this.bannersCacheType.promotion:
                        return dn;
                    case this.bannersCacheType.promotionCatalog:
                        return "promotions-catalog-banners-cache";
                    case this.bannersCacheType.footer:
                        return hn;
                    case this.bannersCacheType.promotionSpecial:
                        return pn;
                    default:
                        return null
                    }
                }
                ,
                t._refreshCache = function() {
                    [ln, cn, un, dn, hn, pn].forEach((e => {
                        localStorage.removeItem(e)
                    }
                    ))
                }
                ,
                (0,
                s.A)(e, [{
                    key: "bannersCacheType",
                    get: function() {
                        return {
                            main: 1,
                            menu: 2,
                            catalog: 3,
                            promotion: 4,
                            promotionCatalog: 5,
                            footer: 6,
                            promotionSpecial: 7
                        }
                    }
                }])
            }();
            const fn = gn
              , yn = new nn
              , vn = new an(yn);
            const bn = function() {
                function e() {
                    this.service = new tn(yn,vn),
                    this.cache = new fn
                }
                var t = e.prototype;
                return t.getBannersForHomePageAsync = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.main, ( () => this.service.getBannersForHomePageAsync()))
                }
                ,
                t.getBannersForFooterAsync = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.footer, ( () => this.service.getBannersForFooterAsync()))
                }
                ,
                t.getMenuBanners = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.menu, ( () => this.service.getTopMenuBanners()))
                }
                ,
                t.getCatalogBanners = async function(e, t) {
                    this.menuIdEnum || (this.menuIdEnum = t);
                    const n = "m" == wb.settings.displayMode;
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.catalog, ( () => this.service.getCatalogBanners(e, this.menuIdEnum, n)), n, e)
                }
                ,
                t.getPromoBanners = async function() {
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotion, ( () => this.service.getPromoBanners()))
                }
                ,
                t.getPromoCatalogBanners = async function(e) {
                    const t = "m" == wb.settings.displayMode;
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionCatalog, ( () => this.service.getPromoCatalogBanners(e, t)), t, e)
                }
                ,
                t.getPromotionSpecialBanners = async function() {
                    const e = "m" == wb.settings.displayMode;
                    return await this.cache.getCachedResults(this.cache.bannersCacheType.promotionSpecial, ( () => this.service.getPromotionSpecialBanners(e)), e)
                }
                ,
                e
            }()
              , wn = 24
              , Sn = 50
              , _n = 37
              , Cn = 0
              , In = -1
              , Mn = "_userstorage_h";
            let kn = function() {
                function e() {
                    this.savedHost = null,
                    window.addEventListener("storage", (e => {
                        e.key === Mn && this.getSavedHost()
                    }
                    )),
                    this.$eventBus.addEventListener("onUserAuth", ( () => {
                        this.getSavedHost()
                    }
                    )),
                    this.$eventBus.addEventListener("onUserUnAuth", ( () => {
                        this.saveHost(null)
                    }
                    ))
                }
                var t = e.prototype;
                return t.getSavedHost = function() {
                    return this.savedHost = localStorage.getItem(Mn),
                    this.savedHost
                }
                ,
                t.saveHost = function(e) {
                    this.savedHost = e,
                    this.savedHost ? localStorage.setItem(Mn, this.savedHost) : localStorage.removeItem(Mn)
                }
                ,
                t.fetch = function(e, t, n) {
                    return this.$wbxHttpClient.fetch(e, t, null, (e => n || this._userStorageHost(e))).then((e => e.json()))
                }
                ,
                t._get = async function(e, t, n, r) {
                    var s, o;
                    try {
                        const o = await this.fetch(e, t, r);
                        if (o.state === Cn)
                            return o.body;
                        if (o.state === In && o.reason === wn)
                            return [];
                        if (o.state === In && o.reason === Sn)
                            return (null == n ? void 0 : n.replaceBroken) && (null === (s = t.paths) || void 0 === s ? void 0 : s.length) ? t.paths.map((e => ({
                                path: e.path,
                                file: "W10="
                            }))) : [];
                        if (o.state === In && o.reason === _n) {
                            this.saveHost(o.location);
                            const n = await this.fetch(e, t);
                            if (n.state === Cn)
                                return n.body;
                            if (n.state === In && n.reason === wn)
                                return []
                        }
                        return null
                    } catch (s) {
                        if (!r) {
                            const r = `https://${$n[Math.floor(Math.random() * Object.keys($n).length) + 1]}`;
                            if (!(null === (o = null == t ? void 0 : t.signal) || void 0 === o ? void 0 : o.aborted))
                                return await this._get(e, t, n, r);
                            t.signal = null,
                            this._fixLocation(e, {
                                method: t.method,
                                body: t.body
                            }, r)
                        }
                        return null
                    }
                }
                ,
                t._fixLocation = async function(e, t, n) {
                    const r = await this.fetch(e, t, n);
                    (null == r ? void 0 : r.state) === In && (null == r ? void 0 : r.reason) === _n && this.saveHost(r.location)
                }
                ,
                t.getList = function(e, t) {
                    const n = {
                        method: "POST",
                        body: JSON.stringify({
                            path: e
                        }),
                        signal: null == t ? void 0 : t.signal,
                        timeout: null == t ? void 0 : t.timeout
                    };
                    return this._get("/api/v2/list", n, t)
                }
                ,
                t.getData = function(e, t) {
                    if (!e || 0 === e.length)
                        return null;
                    const n = {
                        method: "POST",
                        body: JSON.stringify(e),
                        signal: null == t ? void 0 : t.signal,
                        paths: e
                    };
                    return this._get("/api/v2/data/get", n, t)
                }
                ,
                t.setData = async function(e) {
                    try {
                        const t = {
                            method: "POST",
                            body: JSON.stringify(e)
                        }
                          , n = await this.fetch("/api/v2/data/set", t);
                        if (n.state === Cn)
                            return {
                                success: !0
                            };
                        if (n.state === In && n.reason === _n) {
                            this.saveHost(n.location);
                            const e = await this.fetch("/api/v2/data/set", t);
                            return e.state === Cn ? {
                                success: !0
                            } : {
                                success: !1,
                                error: new Error(`error - ${e}`)
                            }
                        }
                        return {
                            success: !1,
                            error: new Error(`error - ${n}`)
                        }
                    } catch (e) {
                        return {
                            success: !1,
                            error: e
                        }
                    }
                }
                ,
                t._userStorageHost = function(e) {
                    return `https://${this.savedHost || $n[e || 1] || $n[1]}`
                }
                ,
                e
            }();
            const $n = {
                1: "user-storage-01dl.wb.ru",
                2: "user-storage-01iel.wb.ru",
                3: "user-storage-01hel.wb.ru",
                4: "user-storage-01fel.wb.ru",
                5: "user-storage-01eel.wb.ru",
                6: "user-storage-01gel.wb.ru",
                7: "user-storage-01del.wb.ru",
                8: "user-storage-01dp.wb.ru",
                9: "user-storage-01cxc.wb.ru",
                10: "user-storage-01bxc.wb.ru",
                11: "user-storage-01kel.wb.ru",
                12: "user-storage-01bdl.wb.ru",
                13: "user-storage-01adl.wb.ru",
                14: "user-storage-01hel.wb.ru",
                15: "user-storage-01fel.wb.ru",
                16: "user-storage-01eel.wb.ru",
                17: "user-storage-01gel.wb.ru",
                18: "user-storage-01del.wb.ru",
                19: "user-storage-01dp.wb.ru",
                20: "user-storage-01cxc.wb.ru",
                21: "user-storage-01bxc.wb.ru",
                22: "user-storage-01kel.wb.ru",
                23: "user-storage-01bdl.wb.ru",
                24: "user-storage-01adl.wb.ru",
                25: "user-storage-02dl.wb.ru",
                26: "user-storage-02el.wb.ru",
                27: "user-storage-02dl.wb.ru",
                28: "user-storage-02el.wb.ru",
                29: "user-storage-02dl.wb.ru",
                30: "user-storage-02el.wb.ru",
                31: "user-storage-02dl.wb.ru",
                32: "user-storage-02el.wb.ru",
                33: "user-storage-02dl.wb.ru",
                34: "user-storage-02el.wb.ru",
                35: "user-storage-02dl.wb.ru",
                36: "user-storage-02el.wb.ru",
                37: "user-storage-02dl.wb.ru",
                38: "user-storage-02el.wb.ru",
                39: "user-storage-02dl.wb.ru",
                40: "user-storage-02el.wb.ru",
                41: "user-storage-02dl.wb.ru",
                42: "user-storage-02el.wb.ru"
            }
              , Pn = kn
              , Tn = "wbx__sessionID";
            const An = function() {
                function e() {
                    this.session = localStorage.getItem(Tn),
                    window.addEventListener("storage", (e => {
                        e.key === Tn && (this.session = localStorage.getItem(Tn))
                    }
                    ))
                }
                var t = e.prototype;
                return t.getSession = function() {
                    return this.session || (this.session = localStorage.getItem(Tn),
                    this.session || (this.session = `site_${wb.helpers.generateGuid()}`,
                    localStorage.setItem(Tn, this.session))),
                    this.session
                }
                ,
                t.getUserUid = function() {
                    return this.$router.userIsAuth ? this.$router.userUid : this.getBasketUid()
                }
                ,
                t.getBasketUid = function() {
                    let e = wb.cookieHelper.getCookie("BasketUID");
                    return e || (e = this.getSession()),
                    e
                }
                ,
                e
            }();
            const On = function() {
                function e() {}
                return e.createPagerModel = function(t, n, r=100, s=window.location.href, o=!1) {
                    let i = Math.ceil(t / r);
                    o && (i = i <= n ? n : n + 1);
                    let a = [];
                    if (i <= 8)
                        a.push(...e.createRange(i, 1));
                    else {
                        let t = 5;
                        if (n < 7)
                            a.push(...e.createRange(7, 1)),
                            a.push("");
                        else if (n >= i - t - 1)
                            a.push(1),
                            a.push(""),
                            a.push(...e.createRange(7, i - 7 + 1));
                        else {
                            a.push(1),
                            a.push("");
                            let t = n
                              , r = n
                              , s = !1
                              , o = 1;
                            for (; o < 7; )
                                r < i && s && (r++,
                                o++),
                                t > 1 && !1 === s && (t--,
                                o++),
                                s = !s;
                            t = 1 === t ? 2 : t,
                            a.push(...e.createRange(r - t + 1, t)),
                            r < i - 1 && a.push("")
                        }
                    }
                    const l = new URL(s,window.location.origin)
                      , c = a.map((e => (l.searchParams.set("page", e),
                    {
                        value: e,
                        href: "" !== e ? l.toString() : null
                    })));
                    return {
                        pageUrls: c,
                        pagingInfo: {
                            currentPage: n,
                            totalPages: i,
                            totalItems: t,
                            hideTotal: o
                        }
                    }
                }
                ,
                e.createRange = function(e, t) {
                    return Array.from({
                        length: e
                    }).map(( (e, n) => n + t))
                }
                ,
                e
            }()
              , Dn = "[RETRY FETCH SERVICE]";
            let En = function() {
                function e() {
                    this.sendQueue = "queue",
                    this.storage = this.$storageHelper,
                    this.storage.supportIndexedDb() ? setInterval(( () => this._sendJobChecker.call(this, this.sendQueue)), 1e4) : this.dbPromise = Promise.reject()
                }
                var t = e.prototype;
                return t.saveRequest = function(e, t, {tryTill: n, timeout: r}={}) {
                    try {
                        delete t.signal;
                        const s = {
                            url: e,
                            options: t,
                            retryCount: 1,
                            retryTime: Date.now()
                        };
                        n > 0 && (s.tryTill = n),
                        r > 0 && (s.timeout = r),
                        this._openDb().then((e => e.transaction(this.sendQueue, "readwrite").objectStore(this.sendQueue).add(s)))
                    } catch (e) {
                        wb.spa.logError(e, `${Dn}: failed to save table=${this.sendQueue}`, !0)
                    }
                }
                ,
                t._openDb = function() {
                    return this.dbPromise || (this.dbPromise = this.storage.openDb("send-queue", {
                        onupgradeneeded: e => {
                            if (!e.objectStoreNames.contains(this.sendQueue)) {
                                e.createObjectStore(this.sendQueue, {
                                    autoIncrement: !0
                                }).createIndex("retryTime", "retryTime", {
                                    unique: !1
                                })
                            }
                            e.objectStoreNames.contains(this.storage.metadataTableName(this.sendQueue)) || e.createObjectStore(this.storage.metadataTableName(this.sendQueue), {
                                keyPath: "name"
                            })
                        }
                        ,
                        version: 2
                    })),
                    this.dbPromise
                }
                ,
                t._log = function(e) {
                    window._debug && console.debug(`%c${Dn}: ${e}`, "color:#4B6F44")
                }
                ,
                t._sendJobChecker = function() {
                    const e = "job_in_progress"
                      , t = this.storage.metadataTableName(this.sendQueue);
                    wb.settings.isOffline || this._openDb().then((async n => {
                        let r = !1;
                        try {
                            const s = await this.storage.get(n, t, e);
                            s && Date.now() > s.value && await this.storage.removeItem(n, t, e).then(( () => this._log("lock cleared"))),
                            r = await this.storage.addItem(n, t, {
                                name: e,
                                value: Date.now() + 3e5
                            }, !0);
                            try {
                                await this.storage.withCursor(n, this.sendQueue, "retryTime", (async (e, t, r) => {
                                    var s;
                                    const o = Date.now();
                                    if (this._log(`checking ${r.primaryKey} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`),
                                    t.retryCount > 10 && 0 < t.tryTill && t.tryTill > o && (t.retryCount = Math.max(2, 8),
                                    t.retryTime = o - 1e3),
                                    t.retryCount > 10)
                                        this.storage.removeItem(n, this.sendQueue, r.primaryKey).then(( () => this._log(`cleared url: ${t.url}`)));
                                    else if (t.retryTime < o) {
                                        const e = r.primaryKey;
                                        try {
                                            this._log(`executing ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`);
                                            const r = {
                                                timeout: t.timeout
                                            };
                                            if (await this.$httpClient.fetchText(t.url, t.options, r),
                                            null === (s = r.modified) || void 0 === s ? void 0 : s.timeout)
                                                throw this._log(`timeout for ${e} url: ${t.url}`),
                                                new Error("service timeout");
                                            this.storage.removeItem(n, this.sendQueue, e).then(( () => this._log(`cleared ${e} url: ${t.url}`)))
                                        } catch (r) {
                                            t.retryTime = Date.now() + 2 ** t.retryCount * 1e3,
                                            t.retryCount++,
                                            delete t.options.signal,
                                            this.storage.updateItem(n, this.sendQueue, t, e).then(( () => this._log(`extended ${e} url: ${t.url}, retryCount: ${t.retryCount}, retryTime: ${t.retryTime}`)))
                                        }
                                    }
                                }
                                ))
                            } catch (e) {
                                console.log(e)
                            }
                        } catch (e) {} finally {
                            r && this.storage.removeItem(n, t, e)
                        }
                    }
                    ))
                }
                ,
                e
            }();
            const Bn = En
              , xn = 36e5
              , jn = "splitInfoV2"
              , Ln = {
                splitId: "no_test",
                title: "no_test"
            }
              , Un = {
                default: [{
                    key: "ab_testing",
                    value: !1
                }]
            };
            let Fn = function() {
                function e() {
                    this._setSplitInfo = this._setSplitInfo.bind(this),
                    this.splitInfo = Un.default,
                    this._setSplitInfo()
                }
                var t = e.prototype;
                return t.removeCountInFilters = function() {
                    return "no_filters_count" === this.splitInfo.title
                }
                ,
                t.getSplitInfo = function() {
                    return Ln
                }
                ,
                t.getSplitInfoV2 = function(e) {
                    return this.splitInfo[e] || Un.default
                }
                ,
                t.appendSplitInfoV2 = function(e, t) {
                    const n = this.getSplitInfoV2(t);
                    n && n.forEach((t => e.append(t.key, t.value)))
                }
                ,
                t._updSplitInfo = function() {
                    this.timerId && clearTimeout(this.timerId),
                    this.timerId = setTimeout(this._setSplitInfo, xn)
                }
                ,
                t._setSplitInfo = async function() {
                    var e;
                    const t = this._getSplitInfoFromCache();
                    if (this.splitInfo = null !== (e = null == t ? void 0 : t.splitInfo) && void 0 !== e ? e : Un,
                    !(null == t ? void 0 : t.skipSplitRequest)) {
                        const e = await this._getSplitInfoFromService() || Un;
                        this._setSplitInfoToCache(e),
                        this.splitInfo = e
                    }
                    wb.analitics.sendEvent("AB_Test_Splitter_Request", this.splitInfo),
                    this._updSplitInfo()
                }
                ,
                t._getSplitInfoFromService = async function() {
                    const e = wb.cookieHelper.getCookie("_wbauid");
                    if (!e)
                        return null;
                    try {
                        const t = "https://splitter.wb.ru/v2/result"
                          , n = {
                            "X-API-KEY": "c8ab0248-284e-4fad-a8a2-d4dd258cbd6c",
                            "X-USER-ID": e
                        };
                        let r = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(t, {
                            credentials: "omit",
                            headers: n
                        }, {
                            saveToBlob: "splitter_response",
                            timeout: 3e3,
                            nullOnError: !0,
                            return204: !0
                        });
                        return r && 204 !== r.status ? this._convertToAssociativeArray(r) : Un
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._convertToAssociativeArray = function(e) {
                    let t = {};
                    return Array.isArray(e) && (t = e.reduce(( (e, t) => (e[t.type] = t.properties,
                    e)), {})),
                    t
                }
                ,
                t._getSplitInfoFromCache = function() {
                    var e;
                    let t = localStorage.getObject(jn);
                    return t ? (t.t = null !== (e = t.t) && void 0 !== e ? e : 0,
                    Date.now() > t.t + 72e5 ? null : {
                        splitInfo: t.splitInfo,
                        skipSplitRequest: Date.now() <= t.t + xn
                    }) : null
                }
                ,
                t._setSplitInfoToCache = function(e) {
                    e && localStorage.putObject(jn, {
                        splitInfo: e,
                        t: Date.now()
                    })
                }
                ,
                e
            }();
            const Nn = Fn;
            const Rn = function() {
                function e() {}
                return e.prototype.onActionExecuting = async function() {
                    let e = WbSpaModel.prototype.$user.getUid();
                    WbSpaModel.prototype.$services.userData.setKey("0" !== e, e),
                    await WbSpaModel.prototype.$services.userData.getUserDataAsync()
                }
                ,
                e
            }();
            const Wn = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = async function(e) {
                    if ("ru" === wb.settings.currentLocale)
                        e.searchParams.set("country", "ru");
                    else {
                        const t = await WbSpaModel.prototype.$user.getLocationData();
                        e.searchParams.set("country", t.locale)
                    }
                }
                ,
                e
            }();
            const Hn = function() {
                function e(e) {
                    this.checkFunction = null != e ? e : () => !0
                }
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    n.cancelRequest = this.checkFunction()
                }
                ,
                e
            }();
            const qn = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    t.body || (t.body = new URLSearchParams),
                    t.body.set("changeEmail", "SpaChangeEmailEntrypoint" == WbSpaModel.prototype.$router.targetRoute)
                }
                ,
                e
            }();
            let zn = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n, r, s) {
                    var o, i;
                    WbSpaModel.prototype.$services.favsService.syncFromServerAsync();
                    const a = WbSpaModel.prototype.$services.cartService
                      , l = WbSpaModel.prototype.$auth.isAuth
                      , c = await WbSpaModel.prototype.$user.getCurrencyAsync();
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("installmentAggregatorService"),
                    this.getBalanceTask = l ? WbSpaModel.prototype.$user.getBalance({
                        timeout: 1e3
                    }).catch((e => Promise.resolve())) : Promise.resolve();
                    try {
                        await a.sync({
                            timeout: 3e3
                        })
                    } catch (e) {
                        wb.spa.logError(e, {
                            customMsg: "BasketDataPipeline sync"
                        }, !0)
                    }
                    const u = a.publicBasketApiUrl;
                    t.credentials = "include",
                    e.host = u.replace("//", ""),
                    t.body || (t.body = new URLSearchParams);
                    const d = a.getItems();
                    0 === d.length && (n.cancelRequest = () => !0);
                    const [h,p,m,g,f,y,v] = await Promise.all([WbSpaModel.prototype.$user.getXinfoSignedV1(), this.getBalanceTask, WbSpaModel.prototype.$user.getUserGrade(c), WbSpaModel.prototype.$services.installmentAggregatorService.getAvailableInstallment(), WbSpaModel.prototype.$user.getBrokerInstallmentStatus(), WbSpaModel.prototype.$user.getBrokerInstallmentConfig(), WbSpaModel.prototype.$user.getCustomsDuty(c)]);
                    this.userBalanceSigned = p,
                    this.userGradeSigned = m,
                    this.pdlInstOptions = null;
                    let b = null;
                    if ("pdl" === (null == g ? void 0 : g.type))
                        this.pdlInstOptions = await WbSpaModel.prototype.$services.installmentAggregatorService.getLimit("pdl");
                    else if ("cwb" === (null == g ? void 0 : g.type)) {
                        const [e,t] = await Promise.all([WbSpaModel.prototype.$user.getBrokerInstallmentStatus(), WbSpaModel.prototype.$user.getBrokerInstallmentConfig()]);
                        this.userBrokerInstStatus = e,
                        this.userBrokerInstConfig = t
                    } else
                        "iwb" === (null == g ? void 0 : g.type) && (b = await WbSpaModel.prototype.$services.installmentAggregatorService.getLimit("iwb"));
                    this.customsDutySigned = v,
                    WbSpaModel.prototype.$services.userAddressService.getByCoordinates(h.latitude, h.longitude, h.address);
                    let w;
                    if (!!e.searchParams.get("bc") && (await a.getBankCards(2e3, WbSpaModel.prototype.$user.getCurrency(), !0),
                    WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Карта успешно привязана"]),
                    window.history.replaceState({}, "", location.pathname)),
                    l) {
                        const e = await WbSpaModel.prototype.$getService("groupedDeliveriesService").then((e => e.getPurchaseInfo()));
                        w = null == e ? void 0 : e.unpaid
                    }
                    const S = this.userBrokerInstStatus ? "completed" === this.userBrokerInstStatus.status ? Math.ceil(this.userBrokerInstStatus.availableSum / 100) : Math.ceil(this.userBrokerInstConfig.maxSum / 100) : null
                      , _ = e.searchParams.get("includeInOrderStr")
                      , C = d.find((e => e.characteristicId == _));
                    this.isBuyItNowMode = !!C,
                    C ? C.includeInOrder = !0 : 1 === d.length && (d[0].includeInOrder = !0),
                    t.body = WbSpaModel.prototype.$helper.objectSerializer({
                        isBuyItNowMode: this.isBuyItNowMode,
                        items: C ? [C] : d,
                        includeInOrderStr: this.isBuyItNowMode ? null : d.filter((e => e.includeInOrder)).map((e => e.characteristicId)).join(";") || "1",
                        currency: c,
                        xInfo: h.xinfo,
                        cityLatitude: h.latitude,
                        cityLongitude: h.longitude,
                        address: h.address,
                        userBalanceSigned: this.userBalanceSigned,
                        unpaidAmount: w,
                        userDataSigned: h.userDataSign,
                        addressDataSign: h.addressDataSign,
                        userGradeSigned: m,
                        customsDutySigned: v,
                        iwcNetLimit: (null === (i = null === (o = this.pdlInstOptions) || void 0 === o ? void 0 : o.productTypes) || void 0 === i ? void 0 : i.length) ? this.pdlInstOptions.limit : -1,
                        cwbLimit: S,
                        iwbLimit: null == b ? void 0 : b.limit,
                        instType: null == g ? void 0 : g.type
                    }, t.body, !0, !0)
                }
                ,
                t.onActionExecuted = async function(e) {
                    var t, n;
                    e.responseData || (e.responseData = {}),
                    e.responseData.isNetworkError ? await WbSpaModel.prototype.$services.cartService.localBasket.enrichProductsIfNeedAsync() : ((null === (t = e.responseData.data) || void 0 === t ? void 0 : t.basket) && WbSpaModel.prototype.$services.cartService.localBasket.enrichItemsLocalInfo(e.responseData.data.basket.basketItems),
                    (null === (n = e.responseData.data) || void 0 === n ? void 0 : n.basket) && !this.isBuyItNowMode && WbSpaModel.prototype.$services.cartService.save(e.responseData.data.basket)),
                    e.responseData.userBalanceSigned = this.userBalanceSigned,
                    e.responseData.pdlInstOptions = this.pdlInstOptions,
                    e.responseData.userGradeSigned = this.userGradeSigned,
                    e.responseData.customsDutySigned = this.customsDutySigned,
                    e.responseData.isBuyItNowMode = this.isBuyItNowMode
                }
                ,
                e
            }();
            const Vn = zn;
            const Gn = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e) {
                    this.isCardBinding = !!e.searchParams.get("bc")
                }
                ,
                t.onActionExecuted = async function(e) {
                    if (!e.responseData)
                        return;
                    let t;
                    try {
                        t = await WbSpaModel.prototype.$services.cartService.getBankCards(6e3, WbSpaModel.prototype.$user.getCurrency(), this.isCardBinding),
                        this.isCardBinding && window.history.replaceState({}, "", location.pathname),
                        this.isCardBinding && WbSpaModel.prototype.$moduleLoader.execModule("bottomNotificationPanel", "showNotification", [0, "Карта успешно привязана"])
                    } catch (e) {
                        t = []
                    } finally {
                        e.responseData.maskedCards = t
                    }
                }
                ,
                e
            }();
            const Jn = function() {
                function e() {}
                var t = e.prototype;
                return t.onActionExecuting = async function(e, t, n) {
                    const r = WbSpaModel.prototype.$router
                      , s = parseInt(r.routeParameters.cod1S)
                      , o = r.queryParams.has("size") && parseInt(r.queryParams.get("size")) || null
                      , i = await WbSpaModel.prototype.$services.productCard.loadProductCardAsync(s, o);
                    if (null === i)
                        return n.redirected = !0,
                        r.moveTo404Async();
                    this.data = i
                }
                ,
                t.onActionExecuted = async function(e) {
                    e.responseData ? Object.assign(e.responseData, this.data) : e.responseData = this.data
                }
                ,
                e
            }();
            let Qn = function() {
                function e() {
                    this.data = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = function() {
                    this.data = null
                }
                ,
                t.onActionExecuting = async function(e, t, n) {
                    var r;
                    const s = await this.$services.favsService.getWlArrivedCatalogModelAsync();
                    if (0 == (null !== (r = null == s ? void 0 : s.goods) && void 0 !== r ? r : []).length)
                        return n.redirected = !0,
                        this.$router.moveTo404Async();
                    this.data = s
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    if (null == this.data)
                        return;
                    const n = this._adaptGoods(null !== (t = this.data.goods) && void 0 !== t ? t : []);
                    e.responseData = {
                        goods: n,
                        goodsCount: n.length
                    }
                }
                ,
                t._adaptGoods = function(e) {
                    return e.map((e => {
                        var t;
                        return Object.assign(Object.assign({}, e), {
                            pics: 1,
                            brand: e.brandName,
                            name: e.goodsName,
                            canQuickOrder: !e.digitalGood,
                            sale: Math.max(e.sale, null !== (t = null == e ? void 0 : e.personalSale) && void 0 !== t ? t : 0)
                        })
                    }
                    ))
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }])
            }();
            const Kn = Qn;
            const Xn = function() {
                function e() {
                    this.data = null
                }
                var t = e.prototype;
                return t.onActionExecuting = async function(e) {
                    this.data = await WbSpaModel.prototype.$services.favsService.getFavsDataAsync(e.searchParams)
                }
                ,
                t.onActionExecuted = function(e) {
                    null != this.data && (e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, this.data))
                }
                ,
                e
            }()
              , Yn = Object.freeze({
                main: 1,
                goods: 2,
                search: 3,
                brand: 4,
                brandConstructor: 5,
                brandConstructorCatalog: 6,
                seller: 7,
                sellerCustomMain: 9,
                promoEntry: 11,
                categoryDenyLink: 12,
                recommendationsSearch: 13
            })
              , Zn = "__catalogOptions";
            const er = function() {
                function e() {}
                return e.updateCookie = function(e, t) {
                    const n = wb.cookieHelper.getCookie(Zn);
                    if (null != n) {
                        const r = n.split("&").map((n => n.indexOf(e) > -1 ? `${e}:${t[0].toUpperCase()}${t.slice(1)}` : n)).join("&");
                        wb.cookieHelper.setCookie(Zn, r, {
                            "max-age": 86400,
                            domain: "localhost" === window.location.host ? "" : ".wildberries.ru"
                        })
                    } else {
                        const e = "c516x688"
                          , t = "popular"
                          , n = `CardSize:${e[0].toUpperCase()}${e.slice(1)}&Sort:${t[0].toUpperCase()}${t.slice(1)}`;
                        wb.cookieHelper.setCookie(Zn, n, {
                            "max-age": 86400,
                            domain: "localhost" === window.location.host ? "" : ".wildberries.ru"
                        })
                    }
                }
                ,
                e.getCookie = function(e) {
                    let t;
                    const n = wb.cookieHelper.getCookie(Zn);
                    return null != n && n.split("&").forEach((n => {
                        n.indexOf(e) > -1 && (t = n.split(":")[1].toLowerCase())
                    }
                    )),
                    t
                }
                ,
                e
            }();
            const tr = function() {
                function e() {}
                return e.prototype.getSeoTags = async function(e) {
                    e = e.replace("/catalogdata/", "/catalog/");
                    const t = `seo-catalog-tags-by-url-${wb.settings.currentLocale}-${e}.json`
                      , n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t, 3e3);
                    return (null == n ? void 0 : n.link) && (n.link = n.link.replace("/catalog/", "/catalogdata/")),
                    n
                }
                ,
                e
            }();
            var nr = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            let rr = function() {
                function e() {
                    this.initialized = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null,
                    this.modules = {}
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    var r, s;
                    this.xData = this.xInfo = this.products = this.sort = null,
                    this.cancelled = !1,
                    this.searchSeoTag = !1,
                    this.initialized || await this._initAsync();
                    const o = new URL(e);
                    if (o.pathname = o.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(o),
                    (null === (r = this.currentMenuItem) || void 0 === r ? void 0 : r.landing) || (null === (s = this.currentMenuItem) || void 0 === s ? void 0 : s.isDenyLink))
                        return void (this.cancelled = !0);
                    this.currentMenuItem ? this.currentMenuItem.seoTagInfo = null : this.currentMenuItem = await this._tryGetMenuItemFromTags(o);
                    const [i,a] = await Promise.all([this._getXDataAsync(), WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()]);
                    this.xData = i,
                    this.xInfo = a,
                    n.cancelRequest = null != this.xData,
                    n.cancelRequest || (t.body = this.xInfo)
                }
                ,
                t._tryGetMenuItemFromTags = async function(e) {
                    const t = e.pathname
                      , n = await this.seoTagsService.getSeoTags(t);
                    if (!n)
                        return null;
                    this.searchSeoTag = !!n.searchQuery,
                    e.pathname = n.link;
                    const r = this.searchSeoTag ? this.catalogMenu.getCurrentMenuItem(e) : this._selectedMenuItemFinder(e);
                    return r ? (this.searchSeoTag || (n.xQuery = 0 === r.query.indexOf("preset") ? `${r.query}&${n.parameters}` : n.parameters),
                    r.seoTagInfo = n,
                    r) : null
                }
                ,
                t._selectedMenuItemFinder = function(e) {
                    let t, n = null;
                    for (; 0 !== (t = e.pathname.lastIndexOf("/")) && null == n; )
                        n = this.catalogMenu.getCurrentMenuItem(e),
                        e.pathname = e.pathname.substring(0, t);
                    return n
                }
                ,
                t.onActionExecuting = async function() {
                    if (this.xData && this.xInfo && !this.cancelled) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n} = e
                          , r = nr(e, ["sort", "page"]);
                        t !== this.modules.SorterModel.getSortFromCookie && er.updateCookie("Sort", t);
                        const s = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(r)
                        });
                        t = s.checkAndchangeSort(t);
                        const o = s.getQueryStringForCatalog()
                          , i = this.modules.CatalogProvider.createGoodsProvider(this.xData)
                          , {goods: a=[], resp: l} = await this._loadGoodsAsync(i, o);
                        this.products = a,
                        this.sort = t,
                        this.searchSeoTag && (this.xData = this._updateXDataIfSearchTag(this.xData, l))
                    }
                }
                ,
                t._updateXDataIfSearchTag = function(e, t) {
                    var n;
                    const r = (null == t ? void 0 : t.metadata) ? null == t ? void 0 : t.metadata : t;
                    return (null == r ? void 0 : r.name) || (e.gender = null),
                    (null == r ? void 0 : r.name) && e.search !== (null == r ? void 0 : r.name) && (e.search = r.name),
                    (null == r ? void 0 : r.catalog_value) && (e.xcatalogQuery = r.catalog_value),
                    (null == r ? void 0 : r.catalog_type) && (e.xcatalogShard = r.catalog_type),
                    (null == r ? void 0 : r.context) && (e.xcatalogContext = r.context),
                    e.originalSearch = null !== (n = null == r ? void 0 : r.original) && void 0 !== n ? n : null,
                    e
                }
                ,
                t._loadGoodsAsync = async function(e, t) {
                    try {
                        const {goods: n=[], resp: r} = await e.loadGoodsAsync(t);
                        return {
                            goods: n,
                            resp: r
                        }
                    } catch (e) {
                        return {
                            goods: [],
                            resp: null
                        }
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    if (null == this.xData || this.cancelled)
                        return;
                    e.responseData || (e.responseData = {});
                    const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , r = {
                        xData: this.xData,
                        menuId: this.currentMenuItem.id,
                        currentMenuItem: this.currentMenuItem,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        selectedHasChild: !!this.currentMenuItem.childs,
                        sitePathItems: n,
                        emptyCatalogLink: this.currentMenuItem.url,
                        tagsUrl: this.currentMenuItem.url,
                        products: this.products,
                        targetUrl: "GP",
                        title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                        containerClass: "catalog-page",
                        needAdultProtection: !wb.adult.isConfirmed,
                        sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                    };
                    this.currentMenuItem.seoTagInfo && this._updateModelIfSeoTagUrl(r, this.currentMenuItem.seoTagInfo);
                    const s = {
                        mainVersion: 0,
                        type: Yn.goods,
                        model: r
                    };
                    Object.assign(e.responseData, {
                        data: s
                    })
                }
                ,
                t._updateModelIfSeoTagUrl = async function(e, t) {
                    t.seo && (e.title = t.seo),
                    e.tagsUrl = t.url
                }
                ,
                t._initAsync = async function() {
                    const [e,t,n,r,s] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel"), wb.spa.getCatalogMenu()]);
                    this.modules = {
                        XCatalogData: e.XCatalogData,
                        XSearchCatalogData: e.XSeachData,
                        QueryHelper: t,
                        CatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.catalogMenu = s,
                    this.seoTagsService = new tr
                }
                ,
                t._getXDataAsync = async function() {
                    var e;
                    const t = null === (e = this.currentMenuItem) || void 0 === e ? void 0 : e.seoTagInfo;
                    if (this.searchSeoTag && t) {
                        const e = await WbSpaModel.prototype.$getUserGender();
                        return new this.modules.XSearchCatalogData(t.searchQuery,t.searchQuery,null,null,e,1)
                    }
                    const n = this.currentMenuItem && ((null == t ? void 0 : t.xQuery) || this.currentMenuItem.query);
                    return this.currentMenuItem && this.currentMenuItem.shard ? new this.modules.XCatalogData(n,this.currentMenuItem.shard) : null
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }])
            }();
            const sr = rr;
            let or = function() {
                function e() {
                    this.initialized = !1,
                    this.requestCancelled = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    var r;
                    this.requestCancelled = this.cancelled = !1,
                    this.initialized || await this._initAsync();
                    const s = new URL(e);
                    s.pathname = s.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(s),
                    (null === (r = this.currentMenuItem) || void 0 === r ? void 0 : r.landing) ? n.cancelRequest = this.requestCancelled = null != this.currentMenuItem : this.cancelled = !0
                }
                ,
                t.onActionExecuted = async function(e) {
                    if (this.cancelled)
                        return;
                    if (!this.requestCancelled)
                        return this._modifyServerResult(e.responseData);
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.currentMenuItem.id
                      , [r,s] = await Promise.all([this.$moduleLoader.loadModuleAsync("mainCatalogConfig"), this._getCarouselsFromSearchService(n)])
                      , o = new r(r.template,this.menuIdEnum).getConfig(this.currentMenuItem)
                      , i = this.bannersTask(o, n)
                      , a = this.catalogMenu.menuById.get(n).childs
                      , l = JSON.parse(JSON.stringify(a))
                      , c = {
                        menuId: n,
                        bannersTask: i,
                        brandCatalogCode: o.brandCatalogCode,
                        pageTitle: this.currentMenuItem.name,
                        sitePathItems: t,
                        catalogMenu: this._transformMenu(l),
                        needAdultProtection: n == this.menuIdEnum.forAdults && !wb.adult.isConfirmed,
                        promoMenuV2: !1,
                        reqiredCss: o.reqiredCss,
                        requiredJs: [],
                        topMenu: o.useTopMenu ? this._buildTopMenu(l) : null,
                        topBrandsUrl: this._getUrlForTopBrands(n, o),
                        carouselsData: s
                    }
                      , u = {
                        mainVersion: n === this.menuIdEnum.sport ? 2 : 3,
                        type: Yn.main,
                        model: c
                    };
                    Object.assign(e.responseData, {
                        data: u
                    })
                }
                ,
                t._modifyServerResult = function(e) {
                    const {data: t} = e;
                    if (!t)
                        return;
                    const {model: n} = t;
                    n && (n.bannersTask = Promise.resolve({
                        mainBannersFirst: this.$isDesktop ? n.firstBannersDesk : n.firstBannersMob,
                        mainBannersSecond: this.$isDesktop ? n.secondBannersDesk : n.secondBannersMob,
                        seasonBanners: n.seasonBanners,
                        verticalBanners: n.verticalBanners,
                        smallBanners: n.smallBanners
                    }))
                }
                ,
                t.bannersTask = async function(e, t) {
                    const n = await this.$services.bannersService.getCatalogBanners(t, this.menuIdEnum)
                      , r = this._buildBannersRows(n.smallBanners, e.bannersSort)
                      , s = this._buildBannersRows(n.verticalBanners, e.verticaBannerSort);
                    return {
                        mainBannersFirst: n.mainBannersFirst,
                        mainBannersSecond: n.mainBannersSecond,
                        seasonBanners: n.seasonBanners,
                        verticalBanners: s,
                        smallBanners: r
                    }
                }
                ,
                t._getUrlForTopBrands = function(e, t) {
                    const n = new URLSearchParams({
                        menuId: e,
                        brandCode: t.brandCatalogCode
                    });
                    return t.topBrandsCount && n.append("count", t.topBrandsCount),
                    `/webapi/maincatalog/topBrands?${n}`
                }
                ,
                t._buildTopMenu = function(e) {
                    if (!e || 0 == e.length)
                        return;
                    const t = e.slice(0, 7)
                      , n = this._toChunks(e, 10)
                      , r = [];
                    t.forEach((e => {
                        const t = this._toChunks(e.childs, 10)
                          , n = {
                            node: this._toTopMenuItem(e),
                            childNodes: t
                        };
                        r.push(n)
                    }
                    ));
                    return [{
                        node: this._allCategoriesMenuItem(e[0]),
                        childNodes: n
                    }].concat(r)
                }
                ,
                t._toTopMenuItem = function(e) {
                    return {
                        name: e.name,
                        link: e.url
                    }
                }
                ,
                t._allCategoriesMenuItem = function(e) {
                    return e.name = "Все категории",
                    this._toTopMenuItem(e)
                }
                ,
                t._toChunks = function(e, t) {
                    const n = [];
                    for (let r = 0; r < e.length; r += t) {
                        const s = e.slice(r, r + t).map((e => this._toTopMenuItem(e)));
                        s.length > 0 && n.push(s)
                    }
                    return n
                }
                ,
                t._buildBannersRows = function(e, t) {
                    if (!e || 0 == e.length || !t)
                        return null;
                    var n = {}
                      , r = 0;
                    return t.forEach(( (t, s) => {
                        let o = [];
                        s < 9 && this._isAllBannersExist(t, e) && t.forEach((t => {
                            var n;
                            (null === (n = e[t]) || void 0 === n ? void 0 : n.length) > 0 && o.push(e[t][0])
                        }
                        )),
                        n[r] = o,
                        r++
                    }
                    )),
                    n
                }
                ,
                t._isAllBannersExist = function(e, t) {
                    return e.forEach((e => {
                        var n;
                        if (!((null === (n = t[e]) || void 0 === n ? void 0 : n.length) > 0))
                            return !1
                    }
                    )),
                    !0
                }
                ,
                t._initAsync = async function() {
                    this.catalogMenu = await wb.spa.getCatalogMenu(),
                    this.initialized = this.catalogMenu.isInited
                }
                ,
                t._transformMenu = function(e) {
                    return null == e ? void 0 : e.map((e => {
                        var t, n;
                        return {
                            childNodes: this._transformMenu(null !== (t = e.childs) && void 0 !== t ? t : []),
                            entity: {
                                pageUrl: e.url,
                                name: e.name,
                                isDenyLink: null !== (n = e.isDenyLink) && void 0 !== n && n
                            },
                            parent: {}
                        }
                    }
                    ))
                }
                ,
                t._getCarouselsFromSearchService = async function(e) {
                    const t = async () => {
                        const [e,t,{XSeachData: n}] = await Promise.all([WbSpaModel.prototype.$getUserGender(), WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(), this.$moduleLoader.loadModuleAsync("xCatalogData")])
                          , r = new n(null,null,null,null,e)
                          , s = new URL(r.dataUrl);
                        return wb.helpers.appendToParamsFromQuery(s.searchParams, t),
                        s.searchParams.set("resultset", "catalog"),
                        WbSpaModel.prototype.$analitic.appendSplitInfoV2(s.searchParams, "search"),
                        s
                    }
                    ;
                    try {
                        const [n,r] = await Promise.all([WbSpaModel.prototype.$httpClient.fetchStaticDataV2(`main-catalog-carousels-${e}.json`, 3e3), t()])
                          , s = null == n ? void 0 : n.filter((e => {
                            var t;
                            return (null === (t = null == e ? void 0 : e.query) || void 0 === t ? void 0 : t.length) > 0
                        }
                        )).map((e => ( (e, t) => (wb.helpers.appendToParamsFromQuery(t.searchParams, e.query),
                        t.searchParams.sort(),
                        {
                            fetchUrl: t.toString(),
                            firstTitle: e.name,
                            showAllURL: t.toString(),
                            sort: e.sort,
                            targetURL: "TG"
                        }))(e, r)));
                        return null == s || s.sort(( (e, t) => e.sort - t.sort)),
                        s
                    } catch (e) {
                        return console.error(e),
                        null
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$isDesktop",
                    get: function() {
                        return WbSpaModel.prototype.$isDesktop
                    }
                }, {
                    key: "menuIdEnum",
                    get: function() {
                        return this.catalogMenu.menuIdEnum
                    }
                }])
            }();
            const ir = or;
            let ar = function() {
                function e() {
                    this.initialized = !1,
                    this.requestCancelled = !1,
                    this.cancelled = !1,
                    this.catalogMenu = null,
                    this.currentMenuItem = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    var r;
                    this.requestCancelled = this.cancelled = !1,
                    this.initialized || await this._initAsync();
                    const s = new URL(e);
                    s.pathname = s.pathname.replace("/webapi", ""),
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(s),
                    (null === (r = this.currentMenuItem) || void 0 === r ? void 0 : r.isDenyLink) ? n.cancelRequest = this.requestCancelled = null != this.currentMenuItem : this.cancelled = !0
                }
                ,
                t.onActionExecuted = async function(e) {
                    var t;
                    if (this.cancelled)
                        return;
                    e.responseData || (e.responseData = {});
                    const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , r = {
                        mainVersion: 0,
                        type: Yn.categoryDenyLink,
                        model: {
                            menuId: this.currentMenuItem.id,
                            currentMenuItem: this.currentMenuItem,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            children: this.currentMenuItem.childs,
                            sitePathItems: n,
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            needAdultProtection: !wb.adult.isConfirmed,
                            catalogMenu: this.catalogMenu,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogDenyMenu(this.currentMenuItem, n)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: r
                    })
                }
                ,
                t._initAsync = async function() {
                    this.catalogMenu = await wb.spa.getCatalogMenu(),
                    this.initialized = this.catalogMenu.isInited
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$isDesktop",
                    get: function() {
                        return WbSpaModel.prototype.$isDesktop
                    }
                }])
            }();
            const lr = ar;
            var cr = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            let ur = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    n.cancelRequest = !0,
                    this.initialized || await this._initAsync()
                }
                ,
                t.onActionExecuting = async function(e, t, n) {
                    var r, s;
                    const o = this.modules.QueryHelper.getInitialParams();
                    this.catalogMenu = this.xData = this.products = this.targetUrl = this.isEmpty = null,
                    this.isNetworkError = !1;
                    let {brand: i, page: a, sort: l="popular", cardsize: c, search: u, targeturl: d, nocorrection: h, ssubject: p} = o
                      , m = cr(o, ["brand", "page", "sort", "cardsize", "search", "targeturl", "nocorrection", "ssubject"]);
                    const g = new this.modules.QueryHelper({
                        sort: l,
                        page: a,
                        ssubject: p,
                        filters: this.modules.QueryHelper.checkOnlyFilterParams(m)
                    });
                    l = g.checkAndchangeSort(l);
                    const f = g.getQueryStringForCatalog()
                      , y = await this._getXDataAsync(o);
                    if (null == y.search || "" === y.search)
                        return n.redirected = !0,
                        this.$router.moveTo404Async();
                    const {redirect: v, isProductRedirect: b} = await this._checkPossibleRedirects(o, y);
                    if (v && !b)
                        return n.redirected = !0,
                        this.$router.moveTo(v, !0);
                    const w = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()
                      , S = this.modules.CatalogProvider.createGoodsProvider(y)
                      , {goods: _=[], resp: C, isNetworkError: I=!1} = await this._loadGoodsAsync(S, f)
                      , M = (null == C ? void 0 : C.metadata) ? null == C ? void 0 : C.metadata : C;
                    if (this.isEmpty = void 0 !== (null == M ? void 0 : M.is_empty) ? M.is_empty : null,
                    (null == M ? void 0 : M.name) || (y.gender = null),
                    "redirect" === (null == M ? void 0 : M.catalog_type) && (null == M ? void 0 : M.catalog_value)) {
                        const e = await this._checkRedirectUrl(M.catalog_value);
                        if (e)
                            return n.redirected = !0,
                            this.$router.moveTo(e, !0)
                    }
                    if ((null == M ? void 0 : M.title) && (y.title = M.title),
                    (null == M ? void 0 : M.name) && (null == M ? void 0 : M.change_input) && (y.search = M.name),
                    (null == M ? void 0 : M.catalog_value) && (y.xcatalogQuery = M.catalog_value),
                    (null == M ? void 0 : M.catalog_type) && (y.xcatalogShard = M.catalog_type),
                    (null == M ? void 0 : M.context) && (y.xcatalogContext = M.context),
                    (null == M ? void 0 : M.normquery) && (y.normQuery = M.normquery),
                    (null == M ? void 0 : M.rmi) && (y.rmi = M.rmi),
                    y.originalSearch = null !== (r = null == M ? void 0 : M.original) && void 0 !== r ? r : null,
                    y.change_input = null !== (s = null == M ? void 0 : M.change_input) && void 0 !== s && s,
                    this.products = I ? [] : _,
                    this.emptySearch = 0 === this.products.length && 0 === g.getFiltersQuery().toString().length,
                    this.isNetworkError = I,
                    b && this.emptySearch)
                        return n.redirected = !0,
                        this.$router.moveTo(v, !0);
                    this.emptySearchRecom = [],
                    this.emptySearch && (this.emptySearchRecom = await this._getEmptySearchRecommendations(y)),
                    this._needChangeEmptyUserSearch(this, y) && (y.userSearch = y.search),
                    this.xData = y,
                    this.targetUrl = d,
                    this.xInfo = w,
                    this.sort = l
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {});
                    this.$router.queryParams.get("ssubject");
                    const n = String.format(null !== (t = this.xData.title) && void 0 !== t ? t : this.xData.search)
                      , r = {
                        type: Yn.search,
                        model: {
                            title: n,
                            xData: this.xData,
                            tagsUrl: `${this.xData.search.toSafeString()}&lang=ru&${this.xInfo}&locale=${WbSpaModel.prototype.$user.getLocale()}`,
                            emptySearch: this.emptySearch,
                            products: this.products,
                            emptySearchRecom: this.emptySearchRecom,
                            targetUrl: this.targetUrl,
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,window.location.href),
                            currentMenuItem: null,
                            rootMenuItem: null,
                            isNetworkError: this.isNetworkError,
                            isEmpty: this.isEmpty,
                            selectedHasChild: !1
                        }
                    };
                    Object.assign(e.responseData, {
                        data: r
                    })
                }
                ,
                t._loadGoodsAsync = async function(e, t) {
                    try {
                        const {goods: n=[], resp: r} = await e.loadGoodsAsync(t);
                        return {
                            goods: n,
                            resp: r
                        }
                    } catch (e) {
                        return {
                            goods: [],
                            resp: null,
                            isNetworkError: !0
                        }
                    }
                }
                ,
                t._initAsync = async function() {
                    const [e,t,n,r] = await Promise.all([this.$moduleLoader.loadModuleAsync("xCatalogData"), this.$moduleLoader.loadModuleAsync("queryHelper"), this.$moduleLoader.loadModuleAsync("xCatalogProvider"), this.$moduleLoader.loadModuleAsync("sorterModel")]);
                    this.modules = {
                        XCatalogData: e.XSeachData,
                        QueryHelper: t,
                        CatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.initialized = !0
                }
                ,
                t._getXDataAsync = async function(e) {
                    const t = await WbSpaModel.prototype.$getUserGender();
                    return new this.modules.XCatalogData(e.search,e.search,null,null,t,e.nocorrection,e.ssubject)
                }
                ,
                t._checkPossibleRedirects = async function(e, t) {
                    try {
                        const [n,r] = await Promise.all([this._getBrandsRedirect(e), this._tryGetUrlToProductCard(e, t)]);
                        return {
                            redirect: null != n ? n : r,
                            isProductRedirect: null != r
                        }
                    } catch (e) {
                        return console.error(`Error checking redirect ${e.message}`),
                        {
                            redirect: null
                        }
                    }
                }
                ,
                t._getBrandsRedirect = async function(e) {
                    var t;
                    try {
                        const n = await this.$httpClient.fetchBasicJSON(`https://brand-suggestions.wildberries.ru/api/v1/redirect?query=${encodeURIComponent(e.search)}`, {}, {
                            timeout: 2e3
                        });
                        return "" === (null !== (t = null == n ? void 0 : n.url) && void 0 !== t ? t : "") ? null : n.url
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._checkRedirectUrl = async function(e) {
                    var t;
                    try {
                        const n = new URL(e.startsWith("http") ? e : "https://" + e);
                        if (n.host.endsWith(".wildberries.ru")) {
                            const e = !n.pathname.startsWith("/recent") && n.pathname.startsWith("/catalog");
                            if (e && (null === (t = await wb.spa.getCatalogMenu()) || void 0 === t ? void 0 : t.menuByUrl.get(n.pathname)) || !e)
                                return n.toString()
                        }
                        return n.toString()
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._tryGetUrlToProductCard = async function(e, t) {
                    var n;
                    if (!t.isValid || "merger" === t.shardKey)
                        return null;
                    const r = e.search;
                    if (!this.$helper.isNumber(r))
                        return null;
                    if (r <= 1e3 || r >= 1e9)
                        return null;
                    try {
                        const e = await wb.xnm.getXnmProducts([r]);
                        if (!((null === (n = null == e ? void 0 : e[r]) || void 0 === n ? void 0 : n.pics) > 0))
                            return null;
                        const t = new URL(`/catalog/${r}/detail.aspx`,window.location.origin);
                        return t.searchParams.set("targetUrl", "SP"),
                        t
                    } catch (e) {
                        return null
                    }
                }
                ,
                t._getEmptySearchRecommendations = async function(e) {
                    const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e.search)}`;
                    try {
                        const e = await this.$httpClient.fetchBasicJSON(t, {}, {
                            timeout: 2e3
                        });
                        if (!(Array.isArray(e) && e.length > 0))
                            return [];
                        const n = await wb.xnm.getCatalogCards(e);
                        return Object.values(n).reduce(( (e, t) => (t.id && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t)),
                        e)), [])
                    } catch (e) {
                        return console.error(e.message),
                        []
                    }
                }
                ,
                t._notShowTecDoc = function(e) {
                    var t, n;
                    return !(null === (t = null == e ? void 0 : e.xcatalogContext) || void 0 === t ? void 0 : t.includes("autoproduct")) || wb.settings.isIE || !(null === (n = wb.global.settings.switches) || void 0 === n ? void 0 : n.tecDocEnable)
                }
                ,
                t._needChangeEmptyUserSearch = function(e, t) {
                    var n;
                    if (!e.emptySearch)
                        return !1;
                    if (this._notShowTecDoc(t))
                        return !1;
                    return -1 !== (null === (n = t.userSearch) || void 0 === n ? void 0 : n.indexOf("automodel:"))
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$httpClient",
                    get: function() {
                        return WbSpaModel.prototype.$httpClient
                    }
                }, {
                    key: "$helper",
                    get: function() {
                        return WbSpaModel.prototype.$helper
                    }
                }])
            }();
            const dr = ur
              , hr = ["wide", "medium", "mini"];
            let pr = function() {
                function e() {
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map,
                    this.brandsMenuList = null,
                    this.promoId = null,
                    this.isSpecial = null,
                    this.isPremium = !1
                }
                var t = e.prototype;
                return t.initMenu = async function(e) {
                    var t;
                    e && (this.promoId = null !== (t = e.promo.id) && void 0 !== t ? t : 0,
                    this.isSpecial = e.promo.isSpecial,
                    this.isPremium = e.isPremium,
                    this.shelves = e.promo.shelves,
                    this._createMenuMap(e),
                    this._generateImg(e))
                }
                ,
                t.getCurrentMenuItem = function(e) {
                    if (!e)
                        return null;
                    const t = e.pathname.replace("promotionscatalogdata", "promotions");
                    return this.menuByUrl.get(t)
                }
                ,
                t.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url
                        }),
                        n = e.parentId
                    }
                    return t.push({
                        id: 2192,
                        name: "Акции",
                        pageUrl: "/promotions"
                    }),
                    t.reverse()
                }
                ,
                t.getCatalogMenu = function(e, t) {
                    var n, r, s, o, i, a;
                    if (!e)
                        return;
                    if (e.landing || 2 === t.length)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [],
                            parent: {},
                            parents: [],
                            tagsMenu: null !== (r = null === (n = e.childNodes) || void 0 === n ? void 0 : n.map((e => ({
                                name: e.name,
                                link: e.url
                            })))) && void 0 !== r ? r : []
                        };
                    const l = t[t.length - 2]
                      , c = t.slice(1).map((e => ({
                        name: e.name,
                        link: e.pageUrl
                    })));
                    c[c.length - 1].lastSelected = !0;
                    const u = null === (s = e.childNodes) || void 0 === s ? void 0 : s.map((e => ({
                        name: e.name,
                        link: e.url,
                        anc: !0
                    })));
                    if ((null === (o = e.childNodes) || void 0 === o ? void 0 : o.length) > 0)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [...c, ...u],
                            parent: {
                                name: l.name,
                                link: l.pageUrl
                            },
                            parents: this.getParents(e.id),
                            tagsMenu: null != u ? u : []
                        };
                    const d = this.menuByUrl.get(l.pageUrl);
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !0
                        },
                        sideMenu: c,
                        parent: {
                            name: l.name,
                            link: l.pageUrl
                        },
                        parents: this.getParents(e.id),
                        tagsMenu: null !== (a = null === (i = d.childNodes) || void 0 === i ? void 0 : i.map((e => ({
                            name: e.name,
                            link: e.url
                        })))) && void 0 !== a ? a : []
                    }
                }
                ,
                t.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                t.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                t.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            name: e.name,
                            link: e.url,
                            isLanding: e.landing
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.getRootNode = function(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                ,
                t._createMenuMap = function(e) {
                    this.brandsMenuList = e.promo,
                    this.fullMenu = e.menu,
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                t._setNode = function(e, t) {
                    var n;
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        id: e.id,
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        landing: e.landing,
                        childs: e.childNodes,
                        promoId: this.promoId
                    }),
                    null === (n = e.childNodes) || void 0 === n || n.forEach((t => this._setNode(t, e.id)))
                }
                ,
                t._adaptMenu = function(e) {
                    var t;
                    const n = this.menuById.get(e.id);
                    return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map((e => this._adaptMenu(e))),
                    n
                }
                ,
                t._generateImg = function(e) {
                    const t = e.promo.poster;
                    t && (e.isPremium ? this._generatePoster(t) : this.isSpecial && (this._generatePoster(t),
                    this._generateCategoryImgBackground(t.category)))
                }
                ,
                t._generatePoster = function(e) {
                    e && hr.forEach((t => {
                        const n = e.gradient ? `no-repeat url('${e[t]}'), ${e.gradient}, ${e.background}` : `no-repeat url('${e[t]}'), ${e.background}`;
                        document.documentElement.style.setProperty(`--custom-promo-poster-${t}`, n)
                    }
                    ))
                }
                ,
                t._generateCategoryImgBackground = function(e) {
                    document.documentElement.style.setProperty("--custom-promo-image-background", e)
                }
                ,
                e
            }();
            const mr = pr;
            var gr = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            let fr = function() {
                function e() {
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {}
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    var r;
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = this.isKursk = null,
                    n.cancelRequest)
                        return;
                    this.initialized || await this._initAsync();
                    const s = new URL(e);
                    s.pathname = s.pathname.replace("/webapi", "");
                    const o = s.pathname.split("/")[2];
                    if (this.promo !== o) {
                        this.promotionsService = WbSpaModel.prototype.$services.promotionsService;
                        const e = await this.promotionsService.getPromoDataByUrl(o);
                        await this._loadPromoMenu(e, o)
                    }
                    if (!(this.catalogMenu.promoId > 0 && (this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(s))))
                        return n.redirected = !0,
                        WbSpaModel.prototype.$router.moveTo404Async();
                    if (this.isKursk = 189881 === this.catalogMenu.promoId,
                    this.isKursk) {
                        if ("ru" !== wb.settings.currentLocale)
                            return n.redirected = !0,
                            this.$router.moveTo404Async();
                        this.rewriteDestTo = -2307160
                    }
                    this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(s),
                    this.showCategories = null === (r = this.currentMenuItem) || void 0 === r ? void 0 : r.isTop,
                    this.xData = this.currentMenuItem ? new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shardKey,null,null,this.rewriteDestTo) : null,
                    this.xData.isPromo = !0,
                    this.enableEntryPromoPage = this.showCategories,
                    this.bannersTask = this.showCategories ? this._bannersTask(this.catalogMenu.promoId) : Promise.resolve(null),
                    this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                    n.cancelRequest = null != this.xData
                }
                ,
                t.onActionExecuting = async function() {
                    if (this.xData && this.xInfo && !this.enableEntryPromoPage) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n} = e
                          , r = gr(e, ["sort", "page"]);
                        const s = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(r)
                        });
                        t = s.checkAndchangeSort(t);
                        const o = s.getQueryStringForCatalog()
                          , i = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: a=[]} = await i.loadGoodsAsync(o);
                        this.products = a,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.enableEntryPromoPage ? this._getEntryModel(t) : this._getCatalogModel(t);
                    Object.assign(e.responseData, {
                        data: n
                    })
                }
                ,
                t._initAsync = async function() {
                    const [e,t,n,r,s] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel"), WbSpaModel.prototype.$moduleLoader.loadServiceAsync("promotionsService")]);
                    this.modules = {
                        XCatalogData: e.XCatalogData,
                        QueryHelper: t,
                        xCatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.catalogMenu = new mr,
                    this.initialized = !0
                }
                ,
                t._loadPromoMenu = async function(e, t) {
                    await this.catalogMenu.initMenu(e),
                    this.promo = this.catalogMenu ? t : null
                }
                ,
                t._getEntryModel = function(e) {
                    var t;
                    if (this.catalogMenu.isPremium) {
                        const e = new URL(window.location.href);
                        e.pathname = this.catalogMenu.getRootNode(this.catalogMenu.getCurrentMenuItem(e)).url,
                        this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(e),
                        WbSpaModel.prototype.$router.replaceState(window.history.state, document.title, e)
                    }
                    return {
                        mainVersion: 0,
                        type: Yn.promoEntry,
                        model: {
                            xData: this.xData,
                            menuId: this.currentMenuItem.id,
                            currentMenuItem: this.catalogMenu.menuById.get(this.currentMenuItem.id),
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            children: this.currentMenuItem.childNodes,
                            sitePathItems: e,
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            needAdultProtection: !wb.adult.isConfirmed,
                            catalogMenu: this.catalogMenu,
                            promoId: this.catalogMenu.promoId,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, e),
                            bannersTask: this.bannersTask,
                            isSpecial: this.catalogMenu.isSpecial,
                            catalogType: Yn.promoEntry,
                            isKursk: this.isKursk,
                            shelves: this.catalogMenu.shelves
                        }
                    }
                }
                ,
                t._getCatalogModel = function(e) {
                    var t;
                    return {
                        mainVersion: 0,
                        type: Yn.goods,
                        model: {
                            xData: this.xData,
                            menuId: this.currentMenuItem.id,
                            currentMenuItem: this.catalogMenu.menuById.get(this.currentMenuItem.id),
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            selectedHasChild: !!this.currentMenuItem.childs,
                            sitePathItems: e,
                            promoMenuV2: !0,
                            catalogPromoLeftMenu: this.catalogMenu.getCatalogMenu(this.currentMenuItem, e),
                            emptyCatalogLink: this.currentMenuItem.url,
                            tagsUrl: this.currentMenuItem.url,
                            products: this.products,
                            targetUrl: "GP",
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            containerClass: "catalog-page",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url),
                            promoId: this.catalogMenu.promoId,
                            isSpecial: this.catalogMenu.isSpecial,
                            isKursk: this.isKursk,
                            shelves: this.catalogMenu.shelves
                        }
                    }
                }
                ,
                t._bannersTask = async function(e) {
                    return 189272 === e ? WbSpaModel.prototype.$services.bannersService.getPromotionSpecialBanners() : WbSpaModel.prototype.$services.bannersService.getPromoCatalogBanners(e)
                }
                ,
                e
            }();
            const yr = fr;
            var vr = n(77387);
            let br = function() {
                function e() {}
                e.init = async function() {
                    var t;
                    if (e.prototype.menuBaseData)
                        return;
                    e.prototype.menuBaseData = null !== (t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("subject-base.json", 1e4)) && void 0 !== t ? t : [],
                    e.prototype.menuByIdData = new Map,
                    e.prototype._createMenuMap()
                }
                ;
                var t = e.prototype;
                return t._createMenuMap = function() {
                    e.prototype.menuBase.forEach((t => e.prototype._setNode(t, null)))
                }
                ,
                t._setNode = function(t, n) {
                    var r;
                    n && (t.parentId = n),
                    e.prototype.menuByIdData.set(t.id, t),
                    null === (r = t.childs) || void 0 === r || r.forEach((n => e.prototype._setNode(n, t.id)))
                }
                ,
                (0,
                s.A)(e, [{
                    key: "menuBase",
                    get: function() {
                        return e.prototype.menuBaseData
                    },
                    set: function(t) {
                        e.prototype.menuBaseData = t
                    }
                }], [{
                    key: "menuById",
                    get: function() {
                        return e.prototype.menuByIdData
                    }
                }])
            }();
            const wr = br;
            let Sr = function(e) {
                function t(t, n) {
                    var r;
                    return (r = e.call(this) || this).modules = t,
                    r.brandConstructorService = n,
                    r.brandData = null,
                    r.fullMenu = null,
                    r.menuByUrl = new Map,
                    r.menuById = new Map,
                    r
                }
                (0,
                vr.A)(t, e);
                var n = t.prototype;
                return n.initMenu = async function(t, n, r, s) {
                    var o;
                    let i = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands/${t}.json`, {}, {
                        nullOnError: !0
                    });
                    if (!i) {
                        const e = null === (o = t.split("-")) || void 0 === o ? void 0 : o[0];
                        e && (i = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${e}.json`, {}, {
                            nullOnError: !0
                        })),
                        i && (location.href = $.views.helpers.brandUrl(i.url))
                    }
                    if (!i)
                        return null;
                    e.prototype.menuBase || await wr.init(),
                    this.isConstructor = n.indexOf(i.id) >= 0,
                    this.brandData = i;
                    const a = $.views.helpers.brandUrl(i.url)
                      , l = await this._getMenuItems(i, r, a, s);
                    this.fullMenu = this._getFullMenu(i, a, l, this.infoMenu),
                    this._createMenuMap(),
                    this.isInited = !0
                }
                ,
                n._getFullMenu = function(e, t, n, r=[]) {
                    return [{
                        id: e.id + "b",
                        name: e.name,
                        url: t,
                        shard: this.isConstructor ? "" : this._brandToShard(e.name),
                        query: this.isConstructor ? "" : this._brandToQuery(e.id),
                        childs: n.concat(r)
                    }]
                }
                ,
                n._getMenuItems = async function(e, t, n, r) {
                    var s, o, i;
                    if (!this.isConstructor)
                        return await this._getChildsFromSubjects(e, t, n);
                    const a = this.brandConstructorService.getPageInfo(r)
                      , l = await this.brandConstructorService.getMenus(e, a.pageType, a.infoUrl, a.previewMode);
                    if (this.previewMode = a.previewMode,
                    this.hasCustomMenu = (null === (s = null == l ? void 0 : l.menu) || void 0 === s ? void 0 : s.length) > 0,
                    (null === (i = null === (o = null == l ? void 0 : l.infoMenu) || void 0 === o ? void 0 : o.menuInfoItems) || void 0 === i ? void 0 : i.length) > 0 && (this.infoMenu = l.infoMenu.menuInfoItems.map((t => (t.id = `${t.id}info`,
                    t.url = `${n}/info/${t.href}`,
                    t.isInfo = !0,
                    this._convertBrandScemeItemToMenuItemDTO(t, e))))),
                    this.hasCustomMenu)
                        return await this._getChildsFromCustomMenu(e, l.menu);
                    const c = await this._getChildsFromSubjects(e, t, n)
                      , u = {
                        id: e.id + "b-all",
                        name: "Весь ассортимент",
                        url: `${n}/all`,
                        seo: `${e.name} Весь ассортимент`,
                        shard: this._brandToShard(e.name),
                        query: this._brandToQuery(e.id),
                        childs: []
                    };
                    return c.push(u),
                    c
                }
                ,
                n._getChildsFromCustomMenu = async function(e, t) {
                    const n = t.map((t => this._convertBrandScemeItemToMenuItemDTO(t, e, !0)));
                    return n.sort(( (e, t) => e - t)),
                    n
                }
                ,
                n._getChildsFromSubjects = async function(e, t, n) {
                    var r, s, o, i;
                    const a = this._brandToShard(e.name)
                      , l = this._brandToQuery(e.id)
                      , c = new this.modules.XCatalogData(l,a,"Brand")
                      , u = this.modules.xCatalogProvider.createGoodsProvider(c)
                      , d = await u.loadSubjectsAsync(t, c)
                      , h = null !== (o = null === (s = null === (r = null == d ? void 0 : d.data) || void 0 === r ? void 0 : r.filters.find((e => "xsubject" === e.key))) || void 0 === s ? void 0 : s.items.map((e => e.id))) && void 0 !== o ? o : []
                      , p = [];
                    for (const t of this.menuBase) {
                        let r = !1;
                        const s = [];
                        for (const o of null !== (i = null == t ? void 0 : t.childs) && void 0 !== i ? i : [])
                            if (h.indexOf(o.id) >= 0) {
                                r = !0;
                                const t = Object.assign({}, o);
                                t.seo = `${e.name} ${o.name}`,
                                t.url = `${n}/${t.url}`,
                                t.shard = this._brandToShard(e.name),
                                t.query = this._brandToQuery(e.id, t.id),
                                s.push(t)
                            }
                        if (r) {
                            const r = Object.assign({}, t);
                            r.seo = `${e.name} ${t.name}`,
                            r.url = `${n}/${t.url}`,
                            r.shard = this._brandToShard(e.name),
                            r.query = this._brandToQuery(e.id, r.id),
                            r.childs = s,
                            r.parent = e.id + "b",
                            p.push(r)
                        }
                    }
                    return p
                }
                ,
                n._convertBrandScemeItemToMenuItemDTO = function(e, t, n) {
                    const r = this._getXQueryForMenuItem(t, e.query)
                      , s = {
                        id: e.id,
                        name: e.title,
                        url: e.url.toLowerCase(),
                        seo: `${t.name} ${e.title}`,
                        sort: e.sort,
                        shard: this._brandToShard(t.name),
                        query: r
                    };
                    return n && (s.isCustom = n,
                    s.parentId = t.id + "b"),
                    e.isInfo && (s.isInfo = !0),
                    s
                }
                ,
                n._getXQueryForMenuItem = function(e, t) {
                    const n = new URLSearchParams(t);
                    return n.has("type") && n.delete("type"),
                    n.set("brand", e.id),
                    decodeURIComponent(n)
                }
                ,
                n.getBrandInfo = function() {
                    var e;
                    return {
                        id: this.brandData.siteId,
                        brandCod: this.brandData.id,
                        name: this.brandData.name,
                        brandLink: $.views.helpers.brandUrl(this.brandData.url),
                        logoUrl: $.views.helpers.forBrandLogoFromId(null !== (e = this.brandData.hash) && void 0 !== e ? e : this.brandData.id)
                    }
                }
                ,
                n.getCurrentMenuItem = function(e) {
                    var t;
                    if (!(e = null !== (t = null == e ? void 0 : e.pathname) && void 0 !== t ? t : e))
                        return null;
                    const n = e.replace("/data", "").replace("/preview", "");
                    let r = this.menuByUrl.get(n);
                    return !r && this.hasCustomMenu && this.menuByUrl.forEach((e => {
                        e.url.split("?")[0] == n && (r = e)
                    }
                    )),
                    null != r ? r : this.menuByUrl.get(n.slice(0, n.lastIndexOf("/")))
                }
                ,
                n.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url,
                        isInfo: e.isInfo,
                        analytic: ["BCA", null, null, e.id]
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url,
                            analytic: ["BCA", null, null, n]
                        }),
                        n = e.parentId
                    }
                    const r = this._brandLetterToSitePathParam(this.brandData.letter);
                    return t.push({
                        id: 0,
                        name: `Бренды на «${r.toUpperCase()}»`,
                        pageUrl: `/wildberries/brandlist.aspx?letter=${r}`
                    }),
                    t.reverse()
                }
                ,
                n.getCatalogMenu = function(e) {
                    var t, n, r, s;
                    const o = [];
                    if ((e = null == e ? void 0 : e.filter((e => !e.isInfo))) && 0 !== e.length)
                        if (1 === e.length) {
                            const r = {
                                name: "",
                                link: ""
                            }
                              , s = null !== (n = null === (t = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === t ? void 0 : t.filter((e => !e.isInfo)).map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== n ? n : [];
                            o.push({
                                node: r,
                                children: s
                            })
                        } else {
                            const t = this.menuByUrl.get(e[1].pageUrl)
                              , n = {
                                id: t.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === t.id,
                                link: t.isDenyLink ? null : t.url,
                                name: t.name
                            }
                              , i = n.lastSelected ? null !== (s = null === (r = t.childs) || void 0 === r ? void 0 : r.filter((e => !e.isInfo)).map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== s ? s : [] : this.getCatalogMenu(e.slice(1));
                            o.push({
                                node: n,
                                children: i
                            })
                        }
                    else
                        o.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return o
                }
                ,
                n.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                n.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                n.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                n.getRootNode = function(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                ,
                n._createMenuMap = function() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                n._setNode = function(e, t, n) {
                    var r;
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        childs: e.childs,
                        id: e.id
                    }),
                    null === (r = e.childs) || void 0 === r || r.forEach((t => this._setNode(t, e.id, n)))
                }
                ,
                n._brandToShard = function(e) {
                    const t = e ? e.toLowerCase() : " "
                      , n = t.charCodeAt(0);
                    return 48 <= n && n <= 57 || 97 <= n && n <= 122 || 1072 <= n && n <= 1105 ? `brands/${t[0]}` : "brands/special"
                }
                ,
                n._brandToQuery = function(e, t) {
                    return t ? `brand=${e}&subject=${t}` : `brand=${e}`
                }
                ,
                n._brandLetterToSitePathParam = function(e) {
                    const t = e.charCodeAt(0);
                    return 1072 <= t && t <= 1105 ? "а-я" : 97 <= t && t <= 122 ? e : "123"
                }
                ,
                n._adaptMenu = function(e) {
                    var t;
                    const n = this.menuById.get(e.id);
                    return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map((e => this._adaptMenu(e))),
                    n
                }
                ,
                t
            }(wr);
            const _r = Sr;
            var Cr = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            let Ir = function() {
                function e(e) {
                    Object.assign(this, e)
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),
                    n.cancelRequest = null != this.xData
                }
                ,
                t.onActionExecuting = async function(e, t, n) {
                    if (this.xData && this.xInfo) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: r, sle: s} = e
                          , o = Cr(e, ["sort", "page", "sle"]);
                        if ("adidas" === this.brand && s)
                            return n.redirected = !0,
                            void this.$router.moveTo404Async();
                        const i = new this.modules.QueryHelper({
                            sort: t,
                            page: r,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(o)
                        });
                        t = i.checkAndchangeSort(t);
                        const a = i.getQueryStringForCatalog()
                          , l = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: c=[]} = await l.loadGoodsAsync(a);
                        this.products = c,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const n = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , r = {
                        mainVersion: 0,
                        type: Yn.brand,
                        model: {
                            brandInfo: this.catalogMenu.getBrandInfo(),
                            xData: this.xData,
                            currentMenuItem: this.currentMenuItem,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            selectedHasChild: !1,
                            sitePathItems: n,
                            catalogMenu: this.catalogMenu.getCatalogMenu(null == n ? void 0 : n.slice(1)),
                            emptyCatalogLink: this.currentMenuItem.url,
                            tagsUrl: this.currentMenuItem.url,
                            products: this.products,
                            promoMenuV2: !1,
                            targetUrl: "BP",
                            title: null !== (t = this.currentMenuItem.seo) && void 0 !== t ? t : this.currentMenuItem.name,
                            containerClass: "catalog-page",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: r
                    })
                }
                ,
                e
            }();
            const Mr = Ir;
            var kr = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            let $r = function() {
                function e(e) {
                    Object.assign(this, e)
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Brand"),
                    n.cancelRequest = null != this.xData
                }
                ,
                t.onActionExecuting = async function() {
                    if (this.xData && this.xData.xcatalogShard && this.xInfo) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n, sle: r} = e
                          , s = kr(e, ["sort", "page", "sle"]);
                        if ("adidas" === this.brand && r)
                            return options.redirected = !0,
                            void this.$router.moveTo404Async();
                        const o = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(s)
                        });
                        t = o.checkAndchangeSort(t);
                        const i = o.getQueryStringForCatalog()
                          , a = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: l=[]} = await a.loadGoodsAsync(i);
                        this.products = l,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = async function(e) {
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.catalogMenu.getCatalogMenu(null == t ? void 0 : t.slice(1))
                      , r = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem);
                    await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");
                    const s = await this._getMetaTags(this.currentMenuItem)
                      , o = {
                        brandInfo: this.catalogMenu.getBrandInfo(),
                        currentMenuItem: this.currentMenuItem,
                        rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                        containerClass: "brand-constructor-catalog",
                        isCatalog: !0,
                        needAdultProtection: !wb.adult.isConfirmed,
                        sitePathItems: t,
                        catalogMenu: n,
                        brandScheme: r,
                        title: this.currentMenuItem.seo,
                        metaTags: s,
                        tagsUrl: this.currentMenuItem.url,
                        sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url),
                        products: this.products,
                        xData: this.xData,
                        targetUrl: "BP",
                        emptyCatalogLink: this.currentMenuItem.url
                    }
                      , i = {
                        mainVersion: 0,
                        type: Yn.brandConstructorCatalog,
                        model: o
                    };
                    Object.assign(e.responseData, {
                        data: i
                    })
                }
                ,
                t._getMetaTags = async function(e) {
                    var t;
                    try {
                        const n = e.url.split("?")[0].replace("brands/", "brands/metatags/")
                          , r = await WbSpaModel.prototype.$httpClient.fetchJSON(`https://www.wildberries.ru/webapi/spa${n}?${new URLSearchParams({
                            name: e.name
                        })}`, {}, {
                            timeout: 3e3,
                            nullOnError: !0
                        });
                        return null !== (t = null == r ? void 0 : r.metaTags) && void 0 !== t ? t : []
                    } catch (e) {
                        return []
                    }
                }
                ,
                e
            }();
            const Pr = $r;
            let Tr = function() {
                function e(e) {
                    Object.assign(this, e)
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    n.cancelRequest = null != this.currentMenuItem
                }
                ,
                t.onActionExecuting = async function() {}
                ,
                t.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = this.catalogMenu.getCatalogMenu(null == t ? void 0 : t.slice(1))
                      , r = this.brandConstructorService.convertSchemeToViewModel(this.brandScheme, this.catalogMenu, this.currentMenuItem)
                      , s = await this.brandConstructorService.getMainBanners(this.catalogMenu);
                    await WbSpaModel.prototype.$moduleLoader.loadModuleAsync("brandConstructorConfig");
                    const o = {
                        brandInfo: this.catalogMenu.getBrandInfo(),
                        brandDirections: {},
                        containerClass: "brand-constructor-ordinary",
                        isCatalog: !1,
                        needAdultProtection: !wb.adult.isConfirmed,
                        sitePathItems: t,
                        catalogMenu: n,
                        brandScheme: r,
                        mainBanners: s
                    }
                      , i = {
                        mainVersion: 0,
                        type: Yn.brandConstructor,
                        model: o
                    };
                    Object.assign(e.responseData, {
                        data: i
                    })
                }
                ,
                e
            }();
            const Ar = Tr;
            let Or = function() {
                function e(e) {
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {},
                    this.preview = e,
                    this.pipeline = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    var r, s;
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.sort = this.pipeline = this.brandScheme = null,
                    n.cancelRequest)
                        return;
                    let o = new URL(e);
                    o.pathname = o.pathname.replace("/webapi", "").toLowerCase();
                    const i = o.pathname.split("/")[this.preview ? 4 : 3];
                    if (this.brand !== i && (this.initialized = !1,
                    this.brand = this.catalogMenu = null),
                    this.brand === i && this.initialized || await this._initAsync(this.preview),
                    this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                    this.brand !== i && await this._loadBrandMenu(i, o.pathname),
                    this.brand) {
                        if (this.preview && !this.catalogMenu.isConstructor && (o = new URL(e.href.replace("/preview", "")),
                        o.pathname = o.pathname.replace("/webapi", "").toLowerCase()),
                        this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(o),
                        !this.currentMenuItem)
                            return n.cancelRequest = !1,
                            void (n.cancelRequest || (t.body = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync()));
                        if (this.catalogMenu.isConstructor) {
                            const e = this.brandConstructorService.getPageInfo(o.pathname)
                              , t = null == e ? void 0 : e.pageType
                              , n = null == e ? void 0 : e.infoUrl;
                            this.brandScheme = await this.brandConstructorService.getBrandSchemeAsync(this.catalogMenu.brandData, t, n, e.previewMode),
                            this.brandScheme || (this.ids = [],
                            await this._loadBrandMenu(i, o.pathname, !0))
                        }
                        return this.catalogMenu.isConstructor ? this.brandScheme.pageType == this.brandConstructorService.enums.pageType.catalog ? this.pipeline = new Pr(this) : this.pipeline = new Ar(this) : this.pipeline = new Mr(this),
                        null === (s = (r = this.pipeline).onBeforeActionExecuting) || void 0 === s ? void 0 : s.call(r, e, t, n)
                    }
                    n.cancelRequest = !1
                }
                ,
                t.onActionExecuting = async function(e, t, n) {
                    var r, s;
                    return null === (s = null === (r = this.pipeline) || void 0 === r ? void 0 : r.onActionExecuting) || void 0 === s ? void 0 : s.call(r, e, t, n)
                }
                ,
                t.onActionExecuted = function(e) {
                    var t, n;
                    return null === (n = null === (t = this.pipeline) || void 0 === t ? void 0 : t.onActionExecuted) || void 0 === n ? void 0 : n.call(t, e)
                }
                ,
                t._initAsync = async function(e) {
                    const t = this._initConstructorServiceAndGetBrands(e)
                      , [n,r,s,o] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel")]);
                    this.modules = {
                        XCatalogData: n.XCatalogData,
                        QueryHelper: r,
                        xCatalogProvider: s,
                        SorterModel: o.CatalogSorterModel
                    },
                    this.ids = await t,
                    this.catalogMenu = new _r(this.modules,this.brandConstructorService),
                    this.initialized = !0
                }
                ,
                t._initConstructorServiceAndGetBrands = async function(e) {
                    var t;
                    return await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("brandConstructorService"),
                    this.brandConstructorService = WbSpaModel.prototype.$services.brandConstructorService,
                    null !== (t = await this.brandConstructorService.getConstructorBrands(e)) && void 0 !== t ? t : []
                }
                ,
                t._loadBrandMenu = async function(e, t) {
                    await this.catalogMenu.initMenu(e, this.ids, this.xInfo, t),
                    this.brand = this.catalogMenu.brandData ? e : null
                }
                ,
                e
            }();
            const Dr = Or;
            let Er = function(e) {
                function t(t) {
                    var n;
                    return (n = e.call(this) || this).modules = t,
                    n.sellerData = null,
                    n.fullMenu = null,
                    n.menuByUrl = new Map,
                    n.menuById = new Map,
                    n.shard = "sellers",
                    n
                }
                (0,
                vr.A)(t, e);
                var n = t.prototype;
                return n.initMenu = async function(t, n) {
                    var r, s, o, i, a, l, c;
                    e.prototype.menuBase || await wr.init();
                    const u = this.shard
                      , d = this._sellerToQuery(t, null)
                      , h = new this.modules.XCatalogData(d,u,"Seller")
                      , p = this.modules.xCatalogProvider.createGoodsProvider(h)
                      , m = await p.loadSubjectsAsync(n, h)
                      , g = await this._getSellerData(t);
                    this.sellerData = g,
                    this.fullMenu = [{
                        id: g.id + "s",
                        name: this._trimSellerOrgForms(null !== (s = null !== (r = g.trademark) && void 0 !== r ? r : g.fineName) && void 0 !== s ? s : g.name, g.orgForms),
                        url: "/seller/" + g.id,
                        shard: this.shard,
                        query: this._sellerToQuery(g.id, null),
                        childs: [],
                        title: "Все товары"
                    }];
                    const f = null !== (a = null === (i = null === (o = null == m ? void 0 : m.data) || void 0 === o ? void 0 : o.filters.find((e => "xsubject" === e.key))) || void 0 === i ? void 0 : i.items.toHashSet((e => e.id))) && void 0 !== a ? a : new Set;
                    for (const e of this.menuBase) {
                        let t = !1;
                        const n = [];
                        for (const r of null !== (l = null == e ? void 0 : e.childs) && void 0 !== l ? l : [])
                            if (f.has(r.id)) {
                                t = !0;
                                const e = Object.assign({}, r);
                                e.url = `/seller/${g.id}/${e.url}`,
                                e.shard = this.shard,
                                e.query = this._sellerToQuery(g.id, e.id),
                                e.parentId = null !== (c = e.parentId) && void 0 !== c ? c : g.id + "s",
                                e.title = e.name,
                                n.push(e)
                            }
                        if (t) {
                            const t = Object.assign({}, e);
                            t.url = `/seller/${g.id}/${e.url}`,
                            t.shard = this.shard,
                            t.query = this._sellerToQuery(g.id, t.id),
                            t.childs = n,
                            t.parentId = g.id + "s",
                            t.title = t.name,
                            this.fullMenu[0].childs.push(t)
                        }
                    }
                    this._createMenuMap(),
                    this.isInited = !0
                }
                ,
                n.getSellerInfo = function() {
                    return this.sellerData
                }
                ,
                n.getCurrentMenuItem = function(e) {
                    var t;
                    if (!e)
                        return null;
                    const n = e.pathname.replace("/data", "");
                    return null !== (t = this.menuByUrl.get(n)) && void 0 !== t ? t : this.menuByUrl.get(n.slice(0, n.lastIndexOf("/")))
                }
                ,
                n.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                n.getCatalogMenu = function(e) {
                    var t, n, r, s;
                    const o = [];
                    if (e && 0 !== e.length)
                        if (1 === e.length) {
                            const r = {
                                name: "",
                                link: ""
                            }
                              , s = null !== (n = null === (t = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === t ? void 0 : t.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== n ? n : [];
                            o.push({
                                node: r,
                                children: s
                            })
                        } else {
                            const t = this.menuByUrl.get(e[1].pageUrl)
                              , n = {
                                id: t.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === t.id,
                                link: t.url,
                                name: t.name
                            }
                              , i = n.lastSelected ? null !== (s = null === (r = t.childs) || void 0 === r ? void 0 : r.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url
                                },
                                children: []
                            })))) && void 0 !== s ? s : [] : this.getCatalogMenu(e.slice(1));
                            o.push({
                                node: n,
                                children: i
                            })
                        }
                    else
                        o.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return o
                }
                ,
                n.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                n.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                n.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                n.getRootNode = function(e) {
                    let t = this.menuById.get(e.id);
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return this._adaptMenu(t)
                }
                ,
                n._getSellerData = async function(e) {
                    var t;
                    const n = {
                        id: e,
                        isUnknown: !0,
                        name: $.localize("Продавец")
                    }
                      , r = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/supplier-by-id/${e}.json`, {}, {
                        nullOnError: !0
                    });
                    if (!r)
                        return n;
                    const s = WbSpaModel.prototype.$services.suppliersService.setSupplierInfo(r);
                    return {
                        id: s.supplierId,
                        name: null !== (t = s.supplierFullName) && void 0 !== t ? t : s.supplierName,
                        fineName: this._trimSellerOrgForms(s.supplierName, s.orgForms),
                        ogrn: s.ogrn,
                        ogrnip: s.ogrnip,
                        taxpayerCode: s.taxpayerCode,
                        inn: s.inn,
                        kpp: s.kpp,
                        unp: s.unp,
                        bin: s.bin,
                        unn: s.unn,
                        trademark: s.trademark,
                        legalAddress: s.legalAddress,
                        isUnknown: !1,
                        orgForms: s.orgForms
                    }
                }
                ,
                n._trimSellerOrgForms = function(e, t=[]) {
                    return $.views.converters.trimWord(e, t)
                }
                ,
                n._createMenuMap = function() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                n._setNode = function(e, t) {
                    var n;
                    this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, {
                        parentId: t,
                        url: e.url,
                        name: e.name,
                        id: e.id,
                        childs: e.childs
                    }),
                    null === (n = e.childs) || void 0 === n || n.forEach((t => this._setNode(t, e.id)))
                }
                ,
                n._sellerToQuery = function(e, t) {
                    return t ? `supplier=${e}&subject=${t}` : `supplier=${e}`
                }
                ,
                n._adaptMenu = function(e) {
                    var t;
                    const n = this.menuById.get(e.id);
                    return n.childs = null === (t = n.childs) || void 0 === t ? void 0 : t.map((e => this._adaptMenu(e))),
                    n
                }
                ,
                t
            }(wr);
            const Br = Er;
            var xr = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            const jr = function() {
                function e() {
                    this.initialized = !1,
                    this.catalogMenu = null,
                    this.modules = {}
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    if (this.xData = this.xInfo = this.currentMenuItem = this.products = this.type = this.sort = null,
                    n.cancelRequest)
                        return;
                    this.initialized || await this._initAsync();
                    let r = new URL(e);
                    r.pathname = r.pathname.replace("/webapi", "");
                    const s = r.pathname.split("/")[3];
                    this.xInfo = await WbSpaModel.prototype.$getCurrentXInfoWithClustersAndVectorsAsync(),
                    this.seller !== s && await this._loadBrandMenu(s),
                    this.catalogMenu.isConstructor ? t.body = this.xInfo : (this.seller && (this.currentMenuItem = this.catalogMenu.getCurrentMenuItem(r),
                    this.xData = new this.modules.XCatalogData(this.currentMenuItem.query,this.currentMenuItem.shard,"Seller")),
                    n.cancelRequest = null != this.xData)
                }
                ,
                t.onActionExecuting = async function() {
                    if (this.xData && this.xInfo) {
                        const e = this.modules.QueryHelper.getInitialParams();
                        let {sort: t=this.modules.SorterModel.getSortFromCookie, page: n} = e
                          , r = xr(e, ["sort", "page"]);
                        const s = new this.modules.QueryHelper({
                            sort: t,
                            page: n,
                            filters: this.modules.QueryHelper.checkOnlyFilterParams(r)
                        });
                        t = s.checkAndchangeSort(t);
                        const o = s.getQueryStringForCatalog()
                          , i = this.modules.xCatalogProvider.createGoodsProvider(this.xData)
                          , {goods: a} = await i.loadGoodsAsync(o);
                        this.products = a,
                        this.sort = t
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    if (null == this.xData)
                        return;
                    e.responseData || (e.responseData = {});
                    const t = this.catalogMenu.getSitePathItems(this.currentMenuItem)
                      , n = {
                        mainVersion: 0,
                        type: Yn.seller,
                        model: {
                            sellerId: this.catalogMenu.sellerData.id,
                            sellerInfo: this.catalogMenu.getSellerInfo(),
                            xData: this.xData,
                            rootMenuItem: this.catalogMenu.getRootNode(this.currentMenuItem),
                            currentMenuItem: this.currentMenuItem,
                            selectedHasChild: !1,
                            sitePathItems: t,
                            catalogMenu: this.catalogMenu.getCatalogMenu(t),
                            emptyCatalogLink: this.currentMenuItem.url,
                            tagsUrl: this.currentMenuItem.url,
                            products: this.products,
                            promoMenuV2: !1,
                            title: this.currentMenuItem.title,
                            containerClass: "catalog-page catalog-page--brand",
                            needAdultProtection: !wb.adult.isConfirmed,
                            sorterModel: new this.modules.SorterModel(this.sort,this.currentMenuItem.url)
                        }
                    };
                    Object.assign(e.responseData, {
                        data: n
                    })
                }
                ,
                t._initAsync = async function() {
                    const [e,t,n,r,s] = await Promise.all([WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogData"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("queryHelper"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("xCatalogProvider"), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("sorterModel"), WbSpaModel.prototype.$moduleLoader.loadServiceAsync("suppliersService")]);
                    this.modules = {
                        XCatalogData: e.XCatalogData,
                        QueryHelper: t,
                        xCatalogProvider: n,
                        SorterModel: r.CatalogSorterModel
                    },
                    this.catalogMenu = new Br(this.modules),
                    this.initialized = !0
                }
                ,
                t._loadBrandMenu = async function(e) {
                    await this.catalogMenu.initMenu(e, this.xInfo),
                    this.seller = this.catalogMenu.sellerData ? e : null
                }
                ,
                e
            }();
            const Lr = function() {
                function e() {
                    this.bannersTask = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.bannersTask = null,
                    n.cancelRequest = !0
                }
                ,
                t.onActionExecuting = async function(e) {
                    this.bannersTask = WbSpaModel.prototype.$services.bannersService.getBannersForHomePageAsync(),
                    this.splitInfoTask = WbSpaModel.prototype.$analitic.getSplitInfo()
                }
                ,
                t.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = await this._getBanners();
                    Object.assign(e.responseData, {
                        bannersTask: this.bannersTask,
                        banners: t,
                        splitInfoTask: this.splitInfoTask
                    })
                }
                ,
                t._getBanners = async function() {
                    let e = 2e3
                      , t = null;
                    return this.bannersTask.then((e => {
                        t = e
                    }
                    )),
                    new Promise((n => {
                        let r = setTimeout((function s() {
                            if (!(e >= 0 && null == t))
                                return clearTimeout(r),
                                n(t);
                            e -= 200,
                            r = setTimeout(s, 200)
                        }
                        ), 200)
                    }
                    ))
                }
                ,
                e
            }();
            const Ur = function() {
                function e(e) {
                    this.timeout = e
                }
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    n.timeout = this.timeout
                }
                ,
                e
            }();
            let Fr = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function() {
                    this.data = null,
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("multipleSellersService")
                }
                ,
                t.onActionExecuting = async function() {
                    const e = WbSpaModel.prototype
                      , t = parseInt(e.$router.routeParameters.cod1S)
                      , {nmIds: n} = await this._getNmsForOtherSellers(t);
                    if (null == n ? void 0 : n.length)
                        try {
                            const t = await e.$services.multipleSellersService.loadSellersInfoAsync(n);
                            this.data = t.filter((e => e.salePrice > 0 && e.deliveryModel))
                        } catch (e) {
                            console.error(e)
                        }
                }
                ,
                t._getNmsForOtherSellers = async function(e) {
                    const [t,n] = await Promise.all([wb.xnm.getGoodsForRecommendAndCatalog([e], !0), WbSpaModel.prototype.$httpClient.fetchBasicJSON(wb.helpers.url.urlProductStatic(e), {}, {
                        timeout: 2e3
                    })])
                      , r = null == t ? void 0 : t[0]
                      , [s,o] = await Promise.all([WbSpaModel.prototype.$services.productCard.getMultiInfo(r, n), WbSpaModel.prototype.$moduleLoader.loadModuleAsync("productSelectionManager")]);
                    r.metacard = s,
                    r.canCheckForMulti = WbSpaModel.prototype.$services.productCard._canCheckForMulti(n),
                    this.productSelectionManager = new o(null,{
                        nmId: e
                    },r);
                    const i = await this.productSelectionManager.getNmsForOtherSellers(e);
                    return i.isMulticard ? {
                        nmIds: i.nms
                    } : await WbSpaModel.prototype.$services.multipleSellersService.loadOtherSellersNmIds(e)
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {});
                    const n = {
                        otherSellers: null !== (t = this.data) && void 0 !== t ? t : []
                    };
                    Object.assign(e.responseData, n)
                }
                ,
                e
            }();
            const Nr = Fr;
            let Rr = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function() {
                    this.data = null,
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productFeedbacksService")
                }
                ,
                t.onActionExecuting = async function() {
                    var e;
                    const t = WbSpaModel.prototype
                      , n = parseInt(t.$router.routeParameters.cod1S);
                    let r = parseInt(t.$router.queryParams.get("imtId"));
                    isNaN(r) && (r = await this._loadImtIdAsync(n));
                    try {
                        const s = await t.$services.productCard.loadStaticProductAsync(n)
                          , o = !(null === (e = s.colors) || void 0 === e ? void 0 : e.length) || 1 == s.colors.length
                          , i = await this._setDefaultSort()
                          , {summary: a, votes: l} = await t.$services.productFeedbacksService.loadSummaryAndVotes(r, n, 10, i, null);
                        this.data = {
                            imtId: r,
                            summary: a,
                            votes: l,
                            sortValue: i,
                            nmId: n,
                            isOneColor: o,
                            staticProduct: s
                        }
                    } catch (e) {
                        return {
                            imtId: r
                        }
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, null !== (t = this.data) && void 0 !== t ? t : {})
                }
                ,
                t._loadImtIdAsync = async function(e) {
                    if (isNaN(e))
                        return null;
                    try {
                        const t = await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(e), {}, {
                            noProcessResponse: !0
                        });
                        return null == t ? void 0 : t.imt_id
                    } catch (e) {
                        return console.error(e),
                        0
                    }
                }
                ,
                t._setDefaultSort = async function() {
                    return await WbSpaModel.prototype.$analitic.isAbTest133Approved() ? "rankDesc" : null
                }
                ,
                e
            }();
            const Wr = Rr;
            let Hr = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function() {
                    this.data = null,
                    await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("productQuestionsService")
                }
                ,
                t.onActionExecuting = async function() {
                    const e = WbSpaModel.prototype
                      , t = parseInt(e.$router.routeParameters.cod1S);
                    let n = parseInt(e.$router.queryParams.get("imtId"));
                    isNaN(n) && (n = await this._loadImtIdAsync(t));
                    try {
                        const [r,s] = await Promise.all([e.$services.productQuestionsService.loadQuestionsFromCache(n, 10), WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(t), {}, {
                            noProcessResponse: !0
                        })]);
                        this.data = {
                            staticProduct: s,
                            imtId: n,
                            questionsModel: r
                        }
                    } catch (e) {
                        return {
                            imtId: n
                        }
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t;
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, null !== (t = this.data) && void 0 !== t ? t : {})
                }
                ,
                t._loadImtIdAsync = async function(e) {
                    if (isNaN(e))
                        return 0;
                    try {
                        const t = await WbSpaModel.prototype.$httpClient.fetchJSON(wb.helpers.url.urlProductStatic(e), {}, {
                            noProcessResponse: !0
                        });
                        return null == t ? void 0 : t.imt_id
                    } catch (e) {
                        return console.error(e),
                        0
                    }
                }
                ,
                e
            }();
            const qr = Hr;
            let zr = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = function() {
                    this.data = null
                }
                ,
                t.onActionExecuting = async function(e, t, n) {
                    const r = WbSpaModel.prototype
                      , s = parseInt(r.$router.routeParameters.cod1S);
                    try {
                        if (this.data = await wb.xnm.getMiniProductCard(s),
                        null == this.data)
                            return n.redirected = !0,
                            void this.$router.moveTo404Async()
                    } catch (e) {
                        console.error(e)
                    }
                }
                ,
                t.onActionExecuted = function(e) {
                    var t, n, r;
                    e.responseData || (e.responseData = {});
                    let s = parseInt(WbSpaModel.prototype.$router.queryParams.get("size"));
                    const o = this.data;
                    if (!isNaN(s) && (null === (t = o.sizes) || void 0 === t ? void 0 : t.some((e => e.ch == s))))
                        o.characteristicId = s,
                        o.sizeName = null === (n = o.sizes.find((e => e.ch == s))) || void 0 === n ? void 0 : n.nm;
                    else if (1 == (null === (r = o.sizes) || void 0 === r ? void 0 : r.length)) {
                        const e = o.sizes[0];
                        o.characteristicId = e.ch,
                        o.sizeName = null == e ? void 0 : e.nm
                    }
                    e.responseData.miniCard = o
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }])
            }();
            const Vr = zr;
            let Gr = function() {
                function e() {}
                var t = e.prototype;
                return t.onBeforeActionExecuting = function() {
                    this.model = this.imageId = null
                }
                ,
                t.onActionExecuting = async function() {
                    var e;
                    await this.$moduleLoader.loadServiceAsync("searchByImageService");
                    const t = this.$router.routeParameters.imageId
                      , n = this.$services.searchByImageService.getSearchResult(t);
                    !n.invalidPhoto && !n.error && (null === (e = n.recommendationsNms) || void 0 === e ? void 0 : e.length) > 0 && (n.products = await this._loadGoods(n.recommendationsNms),
                    n.statistic && (n.statistic.foundByImageOnStock = n.products.length)),
                    n.imageId = t,
                    this.model = n,
                    this.imageId = t
                }
                ,
                t.onActionExecuted = function(e) {
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, this.model)
                }
                ,
                t._loadGoods = async function(e) {
                    try {
                        const t = await wb.xnm.getCatalogCards(e, !1, !1)
                          , n = e.reduce(( (e, n) => {
                            var r;
                            return (null === (r = t[n]) || void 0 === r ? void 0 : r.id) && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),
                            e
                        }
                        ), []);
                        return n
                    } catch (e) {
                        return []
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }])
            }();
            const Jr = Gr;
            let Qr = function() {
                function e() {}
                var t = e.prototype;
                return t.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = WbSpaModel.prototype.$router.queryParams.get("searchQuery")
                      , n = WbSpaModel.prototype.$router.queryParams.get("targetUrl")
                      , r = this._getSearchCatalogLink(t)
                      , s = `/recommendationssearch?searchQuery?searchQuery=${new URLSearchParams({
                        searchQuery: t,
                        targetUrl: n
                    })}`
                      , o = await this._loadGoods(t);
                    if (!Array.isArray(o) || 0 == o.length)
                        return this.$router.moveTo404Async();
                    const i = {
                        type: Yn.recommendationsSearch,
                        searchQuery: t,
                        targetUrl: n,
                        linkToSearchCatalog: r,
                        originalUrl: s,
                        products: o
                    };
                    Object.assign(e.responseData, i)
                }
                ,
                t._getSearchCatalogLink = function(e) {
                    let t = encodeURIComponent(e.replace(/<\/?[^>]+>/gi, "").trim());
                    return `${wb.urlHelper.xSearchBase}?search=${t}`
                }
                ,
                t._loadGoods = async function(e) {
                    try {
                        const t = `https://search-goods.wildberries.ru/search?query=${encodeURIComponent(e)}`
                          , n = await WbSpaModel.prototype.$analitic.getRecomendationsSplitterHeaders()
                          , r = await this.$httpClient.fetchBasicJSON(t, {
                            credentials: "omit",
                            headers: n
                        }, {
                            timeout: 5e3
                        });
                        if (!((null == r ? void 0 : r.length) > 0))
                            return null;
                        const s = await wb.xnm.getCatalogCards(r, !1, !1)
                          , o = r.reduce(( (e, t) => {
                            var n;
                            return (null === (n = s[t]) || void 0 === n ? void 0 : n.id) && e.push(wb.xnm.convertXProductToSpaCatalogProduct(s[t])),
                            e
                        }
                        ), []);
                        return o
                    } catch (e) {
                        return null
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$httpClient",
                    get: function() {
                        return WbSpaModel.prototype.$httpClient
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$user",
                    get: function() {
                        return WbSpaModel.prototype.$user
                    }
                }])
            }();
            const Kr = Qr;
            let Xr = function() {
                function e() {}
                var t = e.prototype;
                return t.onActionExecuting = async function(e, t, n) {
                    var r, s;
                    this.goods = this.type = this.forproduct = this.result = null,
                    await this.$moduleLoader.loadServiceAsync("recommendationsCatalogService");
                    const o = this.$router.queryParams.get("type")
                      , i = this.$router.queryParams.get("forproduct")
                      , a = this.$services.recommendationsCatalogService
                      , l = a.getType(o)
                      , c = await a.getRecommendations(l.id, i);
                    let u;
                    if ((null === (r = null == c ? void 0 : c.goods) || void 0 === r ? void 0 : r.length) ? u = c.goods : (null === (s = null == c ? void 0 : c.nms) || void 0 === s ? void 0 : s.length) && (u = await this._loadGoods(c.nms)),
                    !(Array.isArray(u) && u.length > 0))
                        return n.redirected = !0,
                        void this.$router.moveTo404Async();
                    this.type = l,
                    this.goods = u,
                    this.result = c,
                    this.forproduct = i
                }
                ,
                t.onActionExecuted = async function(e) {
                    var t, n, r, s;
                    e.responseData || (e.responseData = {});
                    const {type: o, goods: i, result: a, forproduct: l} = this
                      , c = {
                        type: o.id,
                        targetInfo: {
                            targetUrl: o.targetUrl
                        },
                        products: i,
                        statistic: {
                            type: o.id,
                            source: null == a ? void 0 : a.source,
                            recommendationsCount: null !== (s = null !== (n = null === (t = null == a ? void 0 : a.goods) || void 0 === t ? void 0 : t.length) && void 0 !== n ? n : null === (r = null == a ? void 0 : a.nms) || void 0 === r ? void 0 : r.length) && void 0 !== s ? s : 0,
                            productsCount: i.length,
                            parentProduct: l
                        },
                        nmId: l,
                        title: o.title
                    };
                    Object.assign(e.responseData, c)
                }
                ,
                t._loadGoods = async function(e) {
                    try {
                        const t = await wb.xnm.getCatalogCards(e, !1, !1)
                          , n = e.reduce(( (e, n) => {
                            var r;
                            return (null === (r = t[n]) || void 0 === r ? void 0 : r.id) && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),
                            e
                        }
                        ), []);
                        return n
                    } catch (e) {
                        return []
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$moduleLoader",
                    get: function() {
                        return WbSpaModel.prototype.$moduleLoader
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }])
            }();
            const Yr = Xr;
            let Zr = function() {
                function e() {}
                var t = e.prototype;
                return t.onActionExecuted = async function(e) {
                    e.responseData || (e.responseData = {});
                    const t = await this._loadNms();
                    if (0 == t.length)
                        return this.$router.moveTo404Async();
                    const n = await this._loadGoods(t);
                    if (0 == n.length)
                        return this.$router.moveTo404Async();
                    const r = {
                        title: "Вы смотрели",
                        products: n,
                        type: "recent",
                        targetInfo: {
                            targetUrl: "RG"
                        },
                        statistic: {
                            recommendationsCount: t.length,
                            productsCount: n.length
                        }
                    };
                    Object.assign(e.responseData, r)
                }
                ,
                t._loadNms = async function() {
                    var e, t, n, r;
                    let s = null !== (t = null === (e = this.$recentViews.get()) || void 0 === e ? void 0 : e.nm) && void 0 !== t ? t : [];
                    try {
                        const e = await this.$httpClient.fetchBasicJSON("/webapi/goods/visited-nm", {
                            method: "POST",
                            body: null
                        }, {
                            timeout: 2e3
                        });
                        (null === (r = null === (n = null == e ? void 0 : e.value) || void 0 === n ? void 0 : n.nmsArr) || void 0 === r ? void 0 : r.length) > 0 && (s = e.value.nmsArr)
                    } catch (e) {
                        console.error(e)
                    }
                    return s
                }
                ,
                t._loadGoods = async function(e) {
                    try {
                        const t = await wb.xnm.getCatalogCards(e, !0, !0)
                          , n = e.reduce(( (e, n) => {
                            var r;
                            return (null === (r = t[n]) || void 0 === r ? void 0 : r.id) && e.push(wb.xnm.convertXProductToSpaCatalogProduct(t[n])),
                            e
                        }
                        ), []);
                        return n
                    } catch (e) {
                        return []
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$recentViews",
                    get: function() {
                        return WbSpaModel.prototype.$recentViews
                    }
                }, {
                    key: "$httpClient",
                    get: function() {
                        return WbSpaModel.prototype.$httpClient
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }])
            }();
            const es = Zr;
            const ts = function() {
                function e(e) {
                    this.defaultValue = e
                }
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    n.defaultValue = this.defaultValue
                }
                ,
                e
            }();
            const ns = function() {
                function e() {}
                return e.prototype.onActionExecuting = async function(e, t, n) {
                    const {userInfo: r} = await this.$services.userData.getUserDataAsync();
                    r.isAuthenticated || (n.redirected = !0,
                    this.$router.moveToSignIn({
                        query: {
                            returnUrl: window.location.href
                        }
                    }, !0))
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }])
            }();
            const rs = function() {
                function e() {
                    this.bannersTask = null
                }
                var t = e.prototype;
                return t.onBeforeActionExecuting = async function(e, t, n) {
                    this.bannersTask = null,
                    n.cancelRequest = !0
                }
                ,
                t.onActionExecuting = async function(e) {
                    this.bannersTask = WbSpaModel.prototype.$services.bannersService.getPromoBanners()
                }
                ,
                t.onActionExecuted = function(e) {
                    e.responseData || (e.responseData = {}),
                    Object.assign(e.responseData, {
                        bannersTask: this.bannersTask
                    })
                }
                ,
                e
            }();
            const ss = function() {
                function e() {}
                return e.prototype.onActionExecuting = async function() {
                    WbSpaModel.prototype.$moduleLoader.loadModuleAsync("spaWbxAuthController")
                }
                ,
                e
            }();
            const os = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = async function(e, t) {
                    const n = WbSpaModel.prototype.$services.cartService.publicBasketApiUrl;
                    t.credentials = "include",
                    e.host = n.replace("//", "")
                }
                ,
                e
            }();
            const is = function() {
                function e() {}
                return e.prototype.onBeforeActionExecuting = function(e, t, n) {
                    t.body || (t.body = new URLSearchParams),
                    t.body.append("currency", WbSpaModel.prototype.$user.getCurrency())
                }
                ,
                e
            }();
            let as = function() {
                function e() {}
                return e.prototype.onActionExecuting = async function(e, t, n) {
                    var r;
                    if (this.$router.userIsAuth && WbSpaModel.prototype.$auth.jwt) {
                        const e = null !== (r = this.$router.queryParams.get("ReturnUrl") || this.$router.queryParams.get("returnUrl")) && void 0 !== r ? r : "/lk";
                        n.redirected = !0,
                        this.$router.moveTo(e)
                    }
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$router",
                    get: function() {
                        return WbSpaModel.prototype.$router
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return WbSpaModel.prototype.$services
                    }
                }])
            }();
            const ls = as;
            const cs = function() {
                function e() {}
                var t = e.prototype;
                return t.onActionExecuting = async function(e, t) {
                    if (!(e.searchParams.get("redirect_uri") && e.searchParams.get("client_id") && e.searchParams.get("scope") && e.searchParams.get("code_challenge") && (e => {
                        const t = e.searchParams.get("redirect_uri");
                        return /^((http|https):\/\/)/.test(t)
                    }
                    )(e)))
                        throw new NotFoundError;
                    WbSpaModel.prototype.$auth.isAuth ? this.getSavedOptionsTask = WbSpaModel.prototype.$services.apiUserStorage.getData([{
                        path: "wb_oauth_saved_options"
                    }], {
                        timeout: 1200
                    }) : window.location.replace($.views.helpers.urlSignIn(window.location.pathname + window.location.search))
                }
                ,
                t.onActionExecuted = async function(e) {
                    if (!WbSpaModel.prototype.$auth.isAuth)
                        return;
                    const t = await this.getSavedOptionsTask;
                    if (t) {
                        if (null == t ? void 0 : t.length)
                            try {
                                return void (e.responseData = JSON.parse(WbSpaModel.prototype.$helper.base64.decode(t[0].file)))
                            } catch (e) {}
                        e.responseData = []
                    }
                }
                ,
                e
            }()
              , us = new Rn
              , ds = new Hn
              , hs = new Vr
              , ps = new ts({
                isNetworkError: !0
            })
              , ms = new ns;
            const gs = function() {
                function e() {
                    const e = new Map;
                    e.set("SpaHomeData", {
                        pipelines: [new Lr]
                    }),
                    e.set("SpaPromotionsData", {
                        pipelines: [new rs]
                    }),
                    e.set("SpaSignInData", {
                        pipelines: [new ls, ps, new ss, new Ur(1e3)]
                    }),
                    e.set("SpaRefundData", {
                        pipelines: [ps]
                    }),
                    e.set("SpaProductCardData", {
                        pipelines: [ds, new Jn]
                    }),
                    e.set("SpaGetGroupedDeliveries", {
                        pipelines: [ms, ds, new Ur(1e3)],
                        fallback: () => ({
                            options: {}
                        })
                    }),
                    e.set("SpaHeadArchivePositions", {
                        pipelines: [ms, ps],
                        fallback: () => ({
                            limit: 150,
                            filters: {
                                type: "all",
                                status: 0
                            }
                        })
                    }),
                    e.set("SpaBasketData", {
                        maxTriesCount: 0,
                        pipelines: [ps, us, new Vn, new Ur(4e3)]
                    }),
                    e.set("SpaEmailedConfirmData", {
                        pipelines: [new qn, new Hn(( () => {
                            const {targetRoute: e} = WbSpaModel.prototype.$router;
                            return "SpaConfirmEmailedEntrypoint" != e && "SpaChangeEmailEntrypoint" != e
                        }
                        ))]
                    }),
                    e.set("SpaAccountData", {
                        pipelines: [ms, us, new Gn, ps],
                        fallback: () => ({
                            broken: !0,
                            data: {
                                subscriptions: {
                                    subscribtionsByType: {}
                                },
                                discountTable: {},
                                mySafety: {},
                                deleteAccountSettings: {},
                                settings: {},
                                calendarSettings: {}
                            }
                        })
                    }),
                    e.set("SpaWalletPurchaseData", {
                        pipelines: [ms, us, ps, new is]
                    }),
                    e.set("SpaCustomerReceiptData", {
                        pipelines: [us, ps]
                    }),
                    e.set("SpaPersonalCabinetData", {
                        pipelines: [ds, us, ms]
                    }),
                    e.set("SpaTravelLkData", {
                        pipelines: [ds]
                    }),
                    e.set("SpaProfileData", {
                        pipelines: [us]
                    }),
                    e.set("SpaBasketBuyItNowData", {
                        maxTriesCount: 0,
                        pipelines: [us, new Vn, ps, new Ur(3e3)]
                    }),
                    e.set("SpaSearchData", {
                        pipelines: [new dr]
                    }),
                    e.set("SpaRecommendationsSearchCatalogData", {
                        pipelines: [ds, new Kr]
                    }),
                    e.set("SpaRecommendationsCatalogData", {
                        pipelines: [ds, new Yr]
                    }),
                    e.set("SpaRecentCatalogData", {
                        pipelines: [ds, new es]
                    }),
                    e.set("SpaWlArrivedData", {
                        pipelines: [ds, new Kn, ms]
                    }),
                    e.set("SpaCatalogData", {
                        pipelines: [new sr, new ir, new lr]
                    }),
                    e.set("SpaPromotionsCatalogData", {
                        pipelines: [new yr]
                    }),
                    e.set("SpaSellerCatalogData", {
                        pipelines: [new jr]
                    }),
                    e.set("SpaBrandsData", {
                        pipelines: [new Dr]
                    }),
                    e.set("SpaBrandsPreviewData", {
                        pipelines: [new Dr(!0)]
                    }),
                    e.set("SpaFavoritesData", {
                        pipelines: [ds, new Xn, ms]
                    }),
                    e.set("SpaProductCardOtherSellersData", {
                        pipelines: [ds, us, hs, new Nr]
                    }),
                    e.set("SpaProductCardFeedbacksData", {
                        pipelines: [ds, us, hs, new Wr]
                    }),
                    e.set("SpaProductCardQuestionsData", {
                        pipelines: [ds, us, hs, new qr]
                    }),
                    e.set("SpaSearchByImageData", {
                        pipelines: [ds, new Jr]
                    }),
                    e.set("SpaOrderConfirmedData", {
                        fallback: e => {
                            if (e) {
                                const t = e.url.searchParams.get("orderId");
                                if (t) {
                                    const e = sessionStorage.getItem(`confirmed_order_${t}`);
                                    if (e)
                                        return {
                                            data: JSON.parse(e)
                                        }
                                }
                            }
                            return {
                                data: {
                                    broken: !0,
                                    order: {}
                                }
                            }
                        }
                        ,
                        pipelines: [us, new os]
                    }),
                    e.set("SpaOrderThankYouEntrypoint", {
                        fallback: () => ({})
                    }),
                    e.set("SpaPaymentFailData", {
                        fallback: () => ({})
                    }),
                    e.set("SpaFavoriteBrandsData", {
                        pipelines: [ms, ps]
                    }),
                    e.set("SpaHistoryRefundsData", {
                        pipelines: [ms, ps]
                    }),
                    e.set("SpaMyCommunicationsData", {
                        pipelines: [ms, ps]
                    }),
                    e.set("SpaMyClaimsData", {
                        pipelines: [ms, ps]
                    }),
                    e.set("SpaMyFeedbacksData", {
                        pipelines: [ms, ps]
                    }),
                    e.set("SpaNotificationsData", {
                        pipelines: [ms, ps]
                    }),
                    e.set("SpaOAuthSignInData", {
                        pipelines: [ds, new cs, us]
                    }),
                    e.set("SubscriptionPageData", {
                        pipelines: [ds, ms, us]
                    }),
                    e.set("ServicePagesData", {
                        pipelines: [new Wn]
                    }),
                    this.map = e
                }
                return e.prototype.extend = function(e) {
                    return this.map.get(e)
                }
                ,
                e
            }();
            let fs = new o.A;
            const ys = new gs
              , vs = new we;
            let bs, ws, Ss, _s, Cs, Is, Ms, ks, $s = null, Ps = null;
            const Ts = Object.freeze({
                mobile: "m",
                desktop: "d"
            });
            let As = function() {
                function e() {}
                var t = e.prototype;
                return t.asObservable = function(e) {
                    return $.observable(e)
                }
                ,
                t.toggleProperty = function(e) {
                    this.asObservable(this).setProperty(e, !this[e])
                }
                ,
                t.$localize = function(e) {
                    var t;
                    return (null === (t = ws[fs.current]) || void 0 === t ? void 0 : t[e]) || e
                }
                ,
                t.$moveToAnchor = function(...e) {
                    const t = arguments[0]
                      , n = e.find((e => e instanceof Event || e instanceof jQuery.Event))
                      , r = arguments[1]instanceof Event || arguments[1]instanceof jQuery.Event || arguments[1]
                      , s = !(arguments[2]instanceof Event || arguments[2]instanceof jQuery.Event) && arguments[2]
                      , o = arguments[3]instanceof Event || arguments[3]instanceof jQuery.Event || !arguments[3] ? 0 : arguments[3];
                    null == n || n.preventDefault(),
                    null == n || n.stopPropagation(),
                    null == n || n.stopImmediatePropagation();
                    const i = document.getElementById(t);
                    if (null == i)
                        return void console.warn("anchor element doesnt exist");
                    const a = {
                        top: 0 + o
                    };
                    let l = this.$helper.isElementInViewport(i, !0, a);
                    function c() {
                        "scrollBehavior"in document.documentElement.style ? window.scrollTo({
                            top: window.pageYOffset + i.getBoundingClientRect().top - o,
                            left: 0,
                            behavior: r ? "smooth" : "auto"
                        }) : window.scrollTo(0, window.pageYOffset + i.getBoundingClientRect().top - o)
                    }
                    if (c(),
                    s) {
                        const e = setInterval(( () => {
                            l = this.$helper.isElementInViewport(i, !0, a),
                            l ? clearInterval(e) : c()
                        }
                        ), 500)
                    }
                }
                ,
                t.$void = function() {}
                ,
                t.$getCurrentXInfoAsync = function() {
                    return Cs.getXinfo()
                }
                ,
                t.$getCurrentXInfoWithClustersAndVectorsAsync = function(e) {
                    return Cs.getXinfoWithClustersAndVectors(e)
                }
                ,
                t.$getUserGender = async function() {
                    const {userInfo: e} = await this.$services.userData.getUserDataAsync();
                    return e.genderE
                }
                ,
                t.$generateGuid = function() {
                    const e = () => Math.floor(65536 * (1 + Math.random())).toString(16).substring(1);
                    return e() + e() + "-" + e() + "-" + e() + "-" + e() + "-" + e() + e() + e()
                }
                ,
                t.$getLoadingError = async function() {
                    if (ks)
                        return ks;
                    try {
                        const e = await bs.loadModuleAsync("loadingError");
                        return ks = new e,
                        ks
                    } catch (e) {
                        return null
                    }
                }
                ,
                t.$getService = function(e) {
                    return bs.loadServiceAsSingletonAsync(e)
                }
                ,
                t.$checkLotteryAvailabilityAsync = async function() {
                    var e, t, n, r, s;
                    if ("ru" != wb.settings.currentLocale)
                        return !1;
                    const o = null !== (s = null === (r = null === (n = null === (t = null === (e = wb.global) || void 0 === e ? void 0 : e.settings) || void 0 === t ? void 0 : t.variables.lotteryAccessSettings) || void 0 === n ? void 0 : n.permitted) || void 0 === r ? void 0 : r.split(";")) && void 0 !== s ? s : [];
                    if (o.length) {
                        const [e,{userInfo: t}] = await Promise.all([this.$user.getShardAsync(), this.$services.userData.getUserDataAsync()]);
                        return t.isAuthenticated && o.some((t => {
                            const [n,r] = t.split("&").map((e => parseInt(e)));
                            return e >= n && e <= r
                        }
                        ))
                    }
                    return !0
                }
                ,
                t.$isWbxOrderEnabled = function(e) {
                    var t, n, r;
                    return !!(null === (t = this.$auth.jwtData) || void 0 === t ? void 0 : t.user) && (!!e.isWbxOrderEnabled || !!(null === (r = null === (n = wb.global.settings) || void 0 === n ? void 0 : n.variables) || void 0 === r ? void 0 : r.wbxOrderUsersRange) && this._checkByRange(wb.global.settings.variables.wbxOrderUsersRange))
                }
                ,
                t.$isWbxOrderCancelEnabled = function(e) {
                    var t, n, r;
                    return !!(null === (t = this.$auth.jwtData) || void 0 === t ? void 0 : t.user) && (!!e.wbxCanCancel || !!(null === (r = null === (n = wb.global.settings) || void 0 === n ? void 0 : n.variables) || void 0 === r ? void 0 : r.wbxOrderCancelUsersRange) && this._checkByRange(wb.global.settings.variables.wbxOrderCancelUsersRange))
                }
                ,
                t.$isUserGradeEnabled = function() {
                    var e, t, n;
                    return !(!(null === (e = this.$auth.jwtData) || void 0 === e ? void 0 : e.user) || !(null === (n = null === (t = wb.global.settings) || void 0 === t ? void 0 : t.variables) || void 0 === n ? void 0 : n.userGradeUsersRange)) && this._checkByRange(wb.global.settings.variables.userGradeUsersRange)
                }
                ,
                t.$isUserPremiumEnabled = function() {
                    var e, t, n, r, s;
                    if (!(null === (e = this.$auth.jwtData) || void 0 === e ? void 0 : e.user) || "ru" !== wb.settings.currentLocale)
                        return !1;
                    const o = this.$services.userData.getMaskedInfo();
                    return ((null === (n = null === (t = wb.global.settings) || void 0 === t ? void 0 : t.variables) || void 0 === n ? void 0 : n.usersRangeForPremiumSubs) && this._checkByRange(wb.global.settings.variables.usersRangeForPremiumSubs) || (null == o ? void 0 : o.isEmp)) && (null === (r = this.$user.getUserGradeFromCache()) || void 0 === r ? void 0 : r.premiumIsAvailable) && ((null == o ? void 0 : o.phone.startsWith("79")) || (null === (s = this.$user.getUserGradeFromCache().subscription_features) || void 0 === s ? void 0 : s.length) > 0)
                }
                ,
                t._checkByRange = function(e) {
                    var t;
                    const n = (null !== (t = null == e ? void 0 : e.split(";")) && void 0 !== t ? t : []).map((e => parseInt(e)));
                    if (n.length < 2)
                        return !1;
                    const r = isNaN(this.$auth.jwtData.user) ? Math.abs(this.$auth.jwtData.user.hashCode()) : parseInt(this.$auth.jwtData.user);
                    return r > n[0] && r <= n[1]
                }
                ,
                t.$isRangeEnabledFor = function(e) {
                    var t;
                    return !(!(null === (t = this.$auth.jwtData) || void 0 === t ? void 0 : t.user) || !e) && this._checkByRange(e)
                }
                ,
                t.$useCatalogReturnCost = function() {
                    var e, t, n, r;
                    return !!(null === (t = null === (e = wb.global.settings) || void 0 === e ? void 0 : e.variables) || void 0 === t ? void 0 : t.catalogReturnCostLocales) && (null === (r = null === (n = wb.global.settings) || void 0 === n ? void 0 : n.variables) || void 0 === r ? void 0 : r.catalogReturnCostLocales.includes(this.$user.getLocale()))
                }
                ,
                t.$getService = function(e) {
                    return bs.loadServiceAsSingletonAsync(e).then(( () => Ms[e]))
                }
                ,
                (0,
                s.A)(e, [{
                    key: "$userEnv",
                    get: function() {
                        return Ds
                    }
                }, {
                    key: "$router",
                    get: function() {
                        return fs
                    }
                }, {
                    key: "$helper",
                    get: function() {
                        return r
                    }
                }, {
                    key: "$moduleLoader",
                    get: function() {
                        return bs
                    }
                }, {
                    key: "$verificationTokenHelper",
                    get: function() {
                        return he
                    }
                }, {
                    key: "$menuLk",
                    get: function() {
                        return null == Ps && (Ps = (new a).init()),
                        Ps
                    }
                }, {
                    key: "$localziation",
                    get: function() {
                        return ws
                    },
                    set: function(e) {
                        return ws = e,
                        !0
                    }
                }, {
                    key: "$httpClient",
                    get: function() {
                        return h
                    }
                }, {
                    key: "$auth",
                    get: function() {
                        return S
                    }
                }, {
                    key: "$wbxHttpClient",
                    get: function() {
                        return m
                    }
                }, {
                    key: "$observable",
                    get: function() {
                        return $.observable(this)
                    }
                }, {
                    key: "$storageHelper",
                    get: function() {
                        return fe
                    }
                }, {
                    key: "$seoHelper",
                    get: function() {
                        return de
                    }
                }, {
                    key: "$stat",
                    get: function() {
                        return wb.stat
                    }
                }, {
                    key: "$user",
                    get: function() {
                        return Cs
                    }
                }, {
                    key: "$geoLocation",
                    get: function() {
                        return Is
                    }
                }, {
                    key: "$adult",
                    get: function() {
                        return Ss
                    }
                }, {
                    key: "$observerHelper",
                    get: function() {
                        return _s
                    }
                }, {
                    key: "$analitic",
                    get: function() {
                        return wb.analitics
                    }
                }, {
                    key: "$productCardPopup",
                    get: function() {
                        return $s = null != $s ? $s : new ae,
                        $s
                    }
                }, {
                    key: "$isDesktop",
                    get: function() {
                        return Ts.desktop == wb.settings.displayMode
                    }
                }, {
                    key: "$eventBus",
                    get: function() {
                        return ce
                    }
                }, {
                    key: "$services",
                    get: function() {
                        return Ms
                    }
                }, {
                    key: "$routeExtensions",
                    get: function() {
                        return ys
                    }
                }, {
                    key: "$apiSupport",
                    get: function() {
                        return vs
                    }
                }, {
                    key: "$recentViews",
                    get: function() {
                        return Se
                    }
                }, {
                    key: "$promotionsHelper",
                    get: function() {
                        return Ae
                    }
                }])
            }();
            Object.defineProperties(window, {
                WbSpaModel: {
                    value: As
                }
            }),
            Object.setPrototypeOf(o.A.prototype, As.prototype),
            Object.setPrototypeOf(ye.A.prototype, As.prototype),
            Object.setPrototypeOf(be.prototype, As.prototype),
            Object.setPrototypeOf(te.prototype, As.prototype),
            Object.setPrototypeOf(ne.prototype, As.prototype),
            Object.setPrototypeOf(re.prototype, As.prototype),
            Object.setPrototypeOf(ae.prototype, As.prototype),
            Object.setPrototypeOf(Object.getPrototypeOf(de), As.prototype),
            Object.setPrototypeOf(a.prototype, As.prototype),
            Object.setPrototypeOf(gs.prototype, As.prototype),
            Object.setPrototypeOf(Ae.prototype, As.prototype),
            Object.setPrototypeOf(Tt.prototype, As.prototype),
            Object.setPrototypeOf(Ot.A.prototype, As.prototype),
            Object.setPrototypeOf(Rt.prototype, As.prototype),
            Object.setPrototypeOf(et.prototype, As.prototype),
            Object.setPrototypeOf(nt.prototype, As.prototype),
            Object.setPrototypeOf(it.prototype, As.prototype),
            Object.setPrototypeOf(bn.prototype, As.prototype),
            Object.setPrototypeOf(Pn.prototype, As.prototype),
            Object.setPrototypeOf(An.prototype, As.prototype),
            Object.setPrototypeOf(Kt.prototype, As.prototype),
            Object.setPrototypeOf(Bn.prototype, As.prototype),
            Object.setPrototypeOf(Nn.prototype, As.prototype),
            bs = new te(As.prototype).init(),
            Ss = new ne,
            Cs = new ye.A,
            Is = new be,
            _s = new re;
            const Os = As;
            wb.utils = Object.assign(wb.utils, r),
            wb.user = Cs,
            wb.adult = Ss;
            const Ds = {
                currency: wb.user.getCurrency()
            };
            Ms = {
                storeService: new Rt,
                userAddressService: new Ot.A,
                cartService: new Tt,
                favsService: new et,
                userData: new nt,
                notifications: new it,
                productCard: new Kt,
                bannersService: new bn,
                apiUserStorage: new Pn,
                sessionService: new An,
                pager: On,
                retryFetchService: new Bn,
                splitterService: new Nn
            },
            Object.keys(Ms).forEach((e => Ms[e].init && Ms[e].init())),
            localStorage.removeItem("suppliersInfo"),
            Object.keys(Ms).forEach((e => Ms[e].init && Ms[e].init()));
            var Es = n(25148);
            let Bs = function() {
                function e() {
                    this.fullMenu = null,
                    this.menuByUrl = new Map,
                    this.menuById = new Map,
                    this.isInited = !1,
                    this.menuIdEnum = this._menuIdEnum()
                }
                var t = e.prototype;
                return t._menuIdEnum = function() {
                    return {
                        sport: 784,
                        monocity: 61042,
                        forAdults: 62057,
                        promotion: 2192
                    }
                }
                ,
                t.initMenu = async function() {
                    var e;
                    const t = `main-menu-${WbSpaModel.prototype.$user.getLocale()}-ru-v3.json`;
                    if (this.fullMenu = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t, 1e4),
                    this.fullMenu) {
                        const t = null === (e = WbSpaModel.prototype.$user.getUserGradeFromCache()) || void 0 === e ? void 0 : e.wbClub
                          , n = this.fullMenu.findIndex((e => 1234 === e.id));
                        WbSpaModel.prototype.$isUserPremiumEnabled() && this.fullMenu.splice(n >= 0 ? n : 0, 0, {
                            id: 1122,
                            name: "Скидки WB Клуба",
                            url: t && "subscribed" === t ? "/promotions/klubnye-skidki" : "",
                            locked: !t || "subscribed" !== t
                        }),
                        this.fullMenu.splice(this.fullMenu.findIndex((e => 306 === e.id)), 0, {
                            id: 131387,
                            name: "Доброшрифт",
                            url: "/promotions/dobroshrift"
                        }),
                        "ru" !== wb.settings.currentLocale && n >= 0 && this.fullMenu.splice(n, 1),
                        this._createMenuMap();
                        const r = this.fullMenu.filter((e => e.dynamic)).map((e => this.loadDynamicBranch(e)));
                        await Promise.all(r),
                        this.isInited = !0
                    }
                    return this
                }
                ,
                t.loadDynamicBranch = async function(e) {
                    const t = `menu${e.url}.json`
                      , n = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(t, 1e4);
                    n && (n.forEach((t => this._setNode(t, e.id))),
                    delete e.dynamic,
                    e.childs = n,
                    e.isDenyLink = !0)
                }
                ,
                t.getCurrentMenuItem = function(e) {
                    if (!e)
                        return null;
                    let t = e.pathname.replace("catalogdata", "catalog");
                    return this.menuByUrl.get(t)
                }
                ,
                t.getSitePathItems = function(e) {
                    if (!e)
                        return null;
                    const t = [];
                    t.push({
                        id: e.id,
                        name: e.name,
                        pageUrl: e.url,
                        analytic: ["CCC", null, null, e.id]
                    });
                    let n = this.menuById.get(e.id).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            id: n,
                            name: e.name,
                            pageUrl: e.url,
                            analytic: ["CCC", null, null, n]
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.getCatalogMenu = function(e) {
                    var t, n, r, s;
                    const o = [];
                    if (e && 0 !== e.length)
                        if (1 === e.length) {
                            const r = {
                                name: "",
                                link: ""
                            }
                              , s = null !== (n = null === (t = this.menuByUrl.get(e[0].pageUrl).childs) || void 0 === t ? void 0 : t.map((e => ({
                                node: {
                                    id: e.id,
                                    name: e.name,
                                    link: e.url,
                                    isDenyLink: e.isDenyLink
                                },
                                children: []
                            })))) && void 0 !== n ? n : [];
                            o.push({
                                node: r,
                                children: s
                            })
                        } else {
                            const t = this.menuByUrl.get(e[1].pageUrl)
                              , n = {
                                id: t.id,
                                isOpen: !0,
                                lastSelected: e[e.length - 1].id === t.id,
                                link: t.url,
                                name: t.name
                            }
                              , i = n.lastSelected ? null !== (s = null === (r = t.childs) || void 0 === r ? void 0 : r.map((e => {
                                var t;
                                return {
                                    node: {
                                        id: e.id,
                                        name: e.name,
                                        link: e.url,
                                        isDenyLink: e.isDenyLink
                                    },
                                    children: null === (t = e.childs) || void 0 === t ? void 0 : t.map((e => ({
                                        node: {
                                            id: e.id,
                                            name: e.name,
                                            link: e.url
                                        },
                                        children: []
                                    })))
                                }
                            }
                            ))) && void 0 !== s ? s : [] : this.getCatalogMenu(e.slice(1));
                            o.push({
                                node: n,
                                children: i
                            })
                        }
                    else
                        o.push({
                            node: {
                                name: "",
                                link: ""
                            },
                            children: []
                        });
                    return o
                }
                ,
                t.getCatalogDenyMenu = function(e, t) {
                    var n, r, s, o, i, a;
                    if (!e)
                        return;
                    if (e.landing || 1 === t.length)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [],
                            parent: {},
                            parents: [],
                            tagsMenu: null !== (r = null === (n = e.childs) || void 0 === n ? void 0 : n.map((e => ({
                                name: e.name,
                                link: e.url
                            })))) && void 0 !== r ? r : []
                        };
                    const l = t[t.length - 2]
                      , c = t.slice(1).map((e => ({
                        name: e.name,
                        link: e.pageUrl
                    })));
                    c[c.length - 1].lastSelected = !0;
                    const u = null === (s = e.childs) || void 0 === s ? void 0 : s.map((e => ({
                        name: e.name,
                        link: e.url,
                        anc: !0
                    })));
                    if ((null === (o = e.childs) || void 0 === o ? void 0 : o.length) > 0)
                        return {
                            current: {
                                name: e.name,
                                link: e.url,
                                isTop: e.isTop,
                                lastSelected: !1
                            },
                            sideMenu: [...c, ...u],
                            parent: {
                                name: l.name,
                                link: l.pageUrl
                            },
                            parents: this.getParentsForDeny(e.id),
                            tagsMenu: null != u ? u : []
                        };
                    const d = this.menuByUrl.get(l.pageUrl);
                    return {
                        current: {
                            name: e.name,
                            link: e.url,
                            isTop: e.isTop,
                            lastSelected: !0
                        },
                        sideMenu: c,
                        parent: {
                            name: l.name,
                            link: l.pageUrl
                        },
                        parents: this.getParentsForDeny(e.id),
                        tagsMenu: null !== (a = null === (i = d.childs) || void 0 === i ? void 0 : i.map((e => ({
                            name: e.name,
                            link: e.url
                        })))) && void 0 !== a ? a : []
                    }
                }
                ,
                t.getRootNode = function(e) {
                    let t = e;
                    for (; null != t.parentId; )
                        t = this.menuById.get(t.parentId);
                    return t
                }
                ,
                t.hasItem = function(e) {
                    return !!e && this.menuById.has(e)
                }
                ,
                t.getCatalogLink = function(e) {
                    return this.menuById.get(e).url
                }
                ,
                t.getParents = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.getParentsForDeny = function(e) {
                    const t = [];
                    let n = this.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menuById.get(n);
                        t.push({
                            name: e.name,
                            link: e.url
                        }),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                t.tryGetMenuItemFromDynamic = async function(e, t) {
                    if (!e) {
                        const e = t.pathname.split("/").length - 2;
                        let n = new URL(t);
                        for (let r = 0; r < e; r++) {
                            n.pathname = n.pathname.substring(0, n.pathname.lastIndexOf("/"));
                            const e = this.getCurrentMenuItem(n);
                            if (null == e ? void 0 : e.dynamic)
                                return await this.loadDynamicBranch(e),
                                this.getCurrentMenuItem(t);
                            if (e)
                                return null
                        }
                        return null
                    }
                    if (null == e ? void 0 : e.dynamic)
                        return await this.loadDynamicBranch(e),
                        e
                }
                ,
                t._createMenuMap = function() {
                    this.fullMenu.forEach((e => this._setNode(e, null)))
                }
                ,
                t._setNode = function(e, t) {
                    var n;
                    t && (e.parentId = t),
                    this.menuByUrl.has(e.url) && !e.shard || (this.menuByUrl.set(e.url, e),
                    this.menuById.set(e.id, e)),
                    null === (n = e.childs) || void 0 === n || n.forEach((t => this._setNode(t, e.id)))
                }
                ,
                t._prepareDropdownMenu = function(e, t=null) {
                    const n = {
                        parentItem: t
                    };
                    for (let t in e)
                        e.hasOwnProperty(t) && (Array.isArray(e[t]) ? n[t] = e[t].map((e => this._prepareDropdownMenu(e, n))) : n[t] = e[t]);
                    return n
                }
                ,
                e
            }();
            const xs = Bs;
            n(88798),
            n(32767),
            n(40397);
            function js(e) {
                return js = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                    return e.__proto__ || Object.getPrototypeOf(e)
                }
                ,
                js(e)
            }
            var Ls = n(63662);
            function Us() {
                try {
                    var e = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], (function() {}
                    )))
                } catch (e) {}
                return (Us = function() {
                    return !!e
                }
                )()
            }
            function Fs(e) {
                var t = "function" == typeof Map ? new Map : void 0;
                return Fs = function(e) {
                    if (null === e || !function(e) {
                        try {
                            return -1 !== Function.toString.call(e).indexOf("[native code]")
                        } catch (t) {
                            return "function" == typeof e
                        }
                    }(e))
                        return e;
                    if ("function" != typeof e)
                        throw new TypeError("Super expression must either be null or a function");
                    if (void 0 !== t) {
                        if (t.has(e))
                            return t.get(e);
                        t.set(e, n)
                    }
                    function n() {
                        return function(e, t, n) {
                            if (Us())
                                return Reflect.construct.apply(null, arguments);
                            var r = [null];
                            r.push.apply(r, t);
                            var s = new (e.bind.apply(e, r));
                            return n && (0,
                            Ls.A)(s, n.prototype),
                            s
                        }(e, arguments, js(this).constructor)
                    }
                    return n.prototype = Object.create(e.prototype, {
                        constructor: {
                            value: n,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    (0,
                    Ls.A)(n, e)
                }
                ,
                Fs(e)
            }
            let Ns = function(e) {
                function t(n) {
                    var r;
                    const {message: s, payload: o} = t.parsePayload(n);
                    return (r = e.call(this, s) || this).isCustomError = !0,
                    r.payload = o,
                    r
                }
                return (0,
                vr.A)(t, e),
                t.parsePayload = function(e) {
                    var t;
                    return "string" == typeof e ? {
                        message: e,
                        payload: null
                    } : {
                        message: null !== (t = null == e ? void 0 : e.message) && void 0 !== t ? t : "Unknow error",
                        payload: null == e ? void 0 : e.payload
                    }
                }
                ,
                t
            }(Fs(Error))
              , Rs = function(e) {
                function t({msg: t, jwtDrop: n}={}) {
                    var r;
                    return (r = e.call(this, t) || this).isUnauthorize = !0,
                    r.jwtDrop = n,
                    r
                }
                return (0,
                vr.A)(t, e),
                t
            }(Ns)
              , Ws = function(e) {
                function t(t="") {
                    var n;
                    return (n = e.call(this, t) || this).isCancelled = !0,
                    n
                }
                return (0,
                vr.A)(t, e),
                t
            }(Ns)
              , Hs = function(e) {
                function t(t="") {
                    var n;
                    return (n = e.call(this, t) || this).isNotFound = !0,
                    n
                }
                return (0,
                vr.A)(t, e),
                t
            }(Ns);
            Object.defineProperties(window, {
                KnownServerError: {
                    value: Ns
                },
                UnauthorizeError: {
                    value: Rs
                },
                CancelledRequestError: {
                    value: Ws
                },
                NotFoundError: {
                    value: Hs
                },
                NetworkError: {
                    value: function() {
                        this.isNetworkError = !0
                    }
                }
            });
            n(41325);
            let qs = null;
            function zs(e) {
                return () => {
                    e.style.top = Math.max(document.documentElement.clientHeight / 2 + window.scrollY - e.clientHeight / 2, window.scrollY) + "px",
                    e.style.left = Math.max(document.documentElement.clientWidth / 2 - e.clientWidth / 2, 0) + "px"
                }
            }
            function Vs(e) {
                const t = document.createElement("div");
                return t.classList.addMany(e),
                t
            }
            function Gs(e, t) {
                const n = document.createElement("a");
                n.href = "#",
                t.push("close"),
                n.classList.addMany(t),
                e.appendChild(n)
            }
            function Js(e, t, n, r, s, o) {
                const i = document.createElement("div");
                if (null != r && Array.isArray(r) && i.classList.addMany(r),
                n)
                    i.innerHTML = t;
                else if (o) {
                    let t = document.querySelector(o)
                      , n = document.createElement("span");
                    n.id = "popup_pc",
                    t.parentElement.insertBefore(n, t),
                    e.placeholder = document.getElementById(n.id),
                    i.appendChild(t)
                } else
                    i.textContent = t;
                null != s && Object.entries(s).forEach(( ([e,t]) => i.setAttribute(e, t))),
                e.appendChild(i)
            }
            function Qs(e, t, n) {
                const r = document.createElement("button");
                r.classList.addMany(n || []),
                r.textContent = t,
                e.appendChild(r)
            }
            function Ks(e, t, n, r) {
                var s, o, i;
                let a;
                const l = e => {
                    var n;
                    null == e || e.preventDefault(),
                    (null === (n = r.onBeforeHide) || void 0 === n ? void 0 : n.call(r)) || (t.classList.remove("shown"),
                    !r.keepOpenOnTransition && window.removeEventListener("spaTransition", a),
                    Promise.resolve().then(( () => {
                        var t;
                        null === (t = r.onHide) || void 0 === t || t.call(r, e)
                    }
                    )))
                }
                ;
                a = () => {
                    l()
                }
                ,
                !r.keepOpenOnTransition && window.addEventListener("spaTransition", a);
                const c = e => {
                    27 == e.keyCode && (l(e),
                    window.removeEventListener("keydown", c, !0))
                }
                ;
                (r.modal || null == r.modal) && (window.addEventListener("keydown", c, !0),
                null == n || n.addEventListener("click", l)),
                (null === (s = r.closeSelector) || void 0 === s ? void 0 : s.length) > 0 && t.addEventListener("click", this.$helper.delegator(r.closeSelector, l)),
                null != qs && (qs.close(),
                qs = null);
                const u = function(e) {
                    if (!e)
                        return 0;
                    const t = document.querySelectorAll(".j-custom-overlay");
                    let n = 0;
                    return t.forEach((e => {
                        n = Math.max(n, e.style.zIndex)
                    }
                    )),
                    n
                }(n);
                n && (n.style.zIndex = u + 300),
                t.style.zIndex = u + 300 + 1,
                e.appendChild(t),
                n && e.appendChild(n),
                null === (o = r.onBeforeShow) || void 0 === o || o.call(r, t),
                document.body.insertBefore(e, document.body.firstChild),
                null === (i = r.onShow) || void 0 === i || i.call(r, t);
                const d = {
                    popup: t,
                    overlay: n,
                    close: e => {
                        var n;
                        return null === (n = r.onHide) || void 0 === n ? void 0 : n.call(r, t, e)
                    }
                    ,
                    centered: r.centeredFunction
                };
                return r.onlyOne && (qs = d),
                d
            }
            function Xs(e, t, n, r=!0, s=!1) {
                e instanceof Error ? e = e.isCustomError && !e.isCancelled && e.message ? e.message : this.$localziation.serverError : e || (e = this.$localziation.serverError);
                const o = document.createDocumentFragment();
                let i = ["popup", "popup-alert", "shown"];
                t && (Array.isArray(t) ? i = i.concat(t) : i.push(t));
                const a = Vs(i);
                o.appendChild(a),
                s && Gs(a, ["popup__close"]),
                Js(a, e, !0),
                null !== n && Qs(a, n || this.$localziation.close, ["popup__btn-main", "popup-alert__close"]);
                const l = document.createElement("div");
                l.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]);
                const c = zs(a);
                window.addEventListener("resize", c),
                Ks.call(this, o, a, l, {
                    onlyOne: !0,
                    closeSelector: ".popup-alert__close, .popup__close",
                    modal: r,
                    onShow: function() {
                        a.style.display = "block",
                        c()
                    },
                    onHide: function() {
                        window.removeEventListener("resize", c),
                        a.remove(),
                        l.remove()
                    }
                })
            }
            function Ys(e, t={}) {
                const n = {
                    msg: e,
                    lockScroll: !0,
                    modal: !1,
                    showCloseBtn: !0,
                    useHtml: !0,
                    contentClasses: ["content"],
                    popupClassesList: ["shown", "tooltip", "tooltip--mobile", ...(null == t ? void 0 : t.classes) || []],
                    useCenteredFunction: !0,
                    onShow: e => e.classList.remove("popup")
                };
                return wb.popup.showCustomPopup(n)
            }
            function Zs(e, t, n, r) {
                const s = document.createDocumentFragment()
                  , o = Vs(t);
                Gs(o, ["j-close"]),
                Js(o, e, !0, ["content", "quick-order-popup-content", "j-sizepicker-content"], null);
                const i = document.createElement("div");
                i.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]),
                o.id = "size-picker-popup",
                o.style.opacity = "0";
                const a = zs(o);
                window.addEventListener("resize", a),
                Ks.call(this, s, o, i, {
                    closeSelector: ".j-close",
                    onHide: function() {
                        window.removeEventListener("resize", a),
                        o.remove(),
                        i.remove(),
                        null == r || r()
                    },
                    onShow: function() {
                        o.style.display = "block",
                        a(),
                        o.style.opacity = "1",
                        null == n || n(o)
                    }
                })
            }
            function eo(e) {
                const t = this.$helper.deepMerge({}, {
                    overlay: !0,
                    showCross: !0,
                    useHtml: !1,
                    popupClassesList: [],
                    contentClasses: [],
                    overlayClasses: [],
                    contentAttributeDictionary: {},
                    msg: "",
                    closeClass: ["j-close", "popup__close"],
                    modal: !0,
                    closeSelector: ".j-close",
                    useCenteredFunction: !1,
                    lockScroll: !1,
                    lockScrollMobile: !1,
                    onlyOne: !1
                }, e)
                  , n = document.createDocumentFragment()
                  , r = Vs(["popup"].concat(t.popupClassesList));
                t.showCross && Gs(r, t.closeClass),
                Js(r, t.msg, t.useHtml, t.contentClasses, t.contentAttributeDictionary, t.srcElem),
                t.showCloseBtn && function(e, t) {
                    const n = document.createElement("button");
                    n.innerText = "Закрыть",
                    !t.length && t.push("close"),
                    n.classList.addMany(t),
                    e.appendChild(n)
                }(r, t.closeClass);
                const s = t.overlay ? document.createElement("div") : null;
                if (s) {
                    const e = ["overlay", "initially-hidden", "j-custom-overlay"].concat(t.overlayClasses);
                    s.classList.addMany(e)
                }
                let o;
                return t.useCenteredFunction && (o = zs(r),
                window.addEventListener("resize", o)),
                Ks.call(this, n, r, s, {
                    onBeforeHide: () => {
                        var e;
                        return null === (e = t.onBeforeHide) || void 0 === e ? void 0 : e.call(t)
                    }
                    ,
                    onHide: function(e, n) {
                        var i, a, l, c, u;
                        (null === (i = t.onBeforeHide) || void 0 === i ? void 0 : i.call(t)) || (!t.lockScroll || (null == n ? void 0 : n.keepLockScroll) || t.keepLockScroll || (document.body.classList.remove("body--overflow"),
                        document.body.style.paddingRight = ""),
                        !t.lockScrollMobile || (null == n ? void 0 : n.keepLockScroll) || t.keepLockScroll || document.body.classList.remove("body--overflow-mobile"),
                        t.useCenteredFunction && window.removeEventListener("resize", o),
                        t.srcElem && (null === (l = null === (a = r.placeholder) || void 0 === a ? void 0 : a.parentElement) || void 0 === l || l.insertBefore(document.querySelector(t.srcElem), r.placeholder),
                        null === (c = r.placeholder) || void 0 === c || c.remove()),
                        null === (u = t.onHide) || void 0 === u || u.call(t, r, e),
                        r.remove(),
                        null == s || s.remove())
                    },
                    onShow: () => {
                        var e;
                        if (document.activeElement.blur(),
                        t.lockScroll && !document.body.classList.contains("body--overflow")) {
                            const e = Math.abs(window.innerWidth - document.documentElement.clientWidth);
                            document.body.classList.add("body--overflow"),
                            document.body.style.paddingRight = `${e}px`
                        }
                        t.lockScrollMobile && !document.body.classList.contains("body--overflow-mobile") && document.body.classList.add("body--overflow-mobile");
                        const n = () => {
                            r.style.opacity = 1,
                            t.useCenteredFunction && o()
                        }
                          , s = this.$helper.nextTick().then(( () => (n(),
                        Promise.resolve())));
                        Object.defineProperty(r, "contentEl", {
                            get: () => r.querySelector(".popup__content")
                        }),
                        t.onShowAsync ? t.onShowAsync(r).then(n) : null === (e = t.onShow) || void 0 === e || e.call(t, r, s)
                    }
                    ,
                    onBeforeShow: function() {
                        var e;
                        r.style.opacity = 0,
                        r.style.display = "block",
                        null === (e = t.onBeforeShow) || void 0 === e || e.call(t, r)
                    },
                    modal: t.modal,
                    closeSelector: t.closeSelector,
                    centeredFunction: o,
                    onlyOne: t.onlyOne,
                    keepOpenOnTransition: t.keepOpenOnTransition
                })
            }
            function to(e, t) {
                let n;
                const r = this.$helper
                  , s = wb.popup.showCustomPopup({
                    useHtml: !0,
                    popupClassesList: ["popup-video", "shown"],
                    contentClasses: ["content"],
                    useCenteredFunction: !0,
                    msg: $.templates('<h2 class="popup__header">{{>title}}</h2><div class="video"><video id="videoPlayer" class="video-js vjs-default-skin vjs-big-play-centered vjs-waiting" width="855" controls autoplay preload></video></div>')({
                        title: t
                    }),
                    onBeforeShow: e => {
                        e.style.opacity = 0,
                        e.style.display = "block"
                    }
                    ,
                    onShow: t => {
                        n = videojs("videoPlayer", {
                            html5: {
                                nativeAudioTracks: !1,
                                nativeVideoTracks: !1,
                                hls: {
                                    overrideNative: !0
                                }
                            }
                        }),
                        n.ready((function() {
                            this.src({
                                src: e,
                                type: "application/x-mpegURL",
                                withCredentials: !0
                            })
                        }
                        )),
                        r.nextTick().then(( () => {
                            t.style.opacity = 1,
                            s.centered()
                        }
                        ))
                    }
                    ,
                    onHide: () => {
                        n.isDisposed() || (n.isInPictureInPicture() && n.exitPictureInPicture(),
                        n.dispose())
                    }
                })
            }
            function no(e, t, n, r) {
                let s;
                const o = this.$helper
                  , i = wb.popup.showCustomPopup({
                    useHtml: !0,
                    popupClassesList: ["i-popup-video-review", "j-popup-video-review", "shown"],
                    contentClasses: ["content"],
                    useCenteredFunction: !0,
                    msg: t,
                    onBeforeShow: e => {
                        e.style.opacity = 0,
                        e.style.display = "block"
                    }
                    ,
                    onShow: t => {
                        s = videojs("videoPlayer", {
                            html5: {
                                nativeAudioTracks: !1,
                                nativeVideoTracks: !1,
                                hls: {
                                    overrideNative: !0
                                }
                            }
                        }),
                        s.ready((function() {
                            this.src({
                                src: e,
                                type: "application/x-mpegURL",
                                withCredentials: !0
                            })
                        }
                        )),
                        o.nextTick().then(( () => {
                            t.style.opacity = 1,
                            i.centered()
                        }
                        )),
                        null == n || n(t)
                    }
                    ,
                    onHide: () => {
                        s.isDisposed() || (s.isInPictureInPicture() && s.exitPictureInPicture(),
                        s.dispose(),
                        null == r || r())
                    }
                })
            }
            function ro(e, t={}) {
                return new Promise((n => {
                    var r, s, o;
                    document.activeElement.blur();
                    const i = document.createDocumentFragment();
                    let a = ["popup", "popup-confirm", "shown"];
                    t.classList && (a = a.concat(t.classList));
                    let l = ["popup__btn-main", "j-yes"]
                      , c = ["popup__btn-base", "j-no"];
                    t.yesBtnClassList && (l = t.yesBtnClassList),
                    t.noBtnClassList && (c = t.noBtnClassList);
                    const u = Vs(a);
                    u.style.display = "block",
                    t.contentClasses = t.contentClasses || [],
                    t.contentClasses.push("popup__msg"),
                    Js(u, e, !0, t.contentClasses);
                    let d = document.createElement("div");
                    d.classList.add("popup__btn", "btn-block"),
                    u.appendChild(d);
                    const h = [];
                    if ((null === (r = t.showYesBtn) || void 0 === r || r) && h.push(( () => Qs(d, t.yes || $.localize("Да"), l))),
                    (null === (s = t.showNoBtn) || void 0 === s || s) && h.push(( () => Qs(d, t.no || $.localize("Нет"), c))),
                    t.inverseBtns && h.reverse(),
                    h.forEach((e => e())),
                    t.showCross && Gs(u, ["popup__close"]),
                    t.lockScroll && !document.body.classList.contains("body--overflow")) {
                        const e = Math.abs(window.innerWidth - document.documentElement.clientWidth);
                        document.body.classList.add("body--overflow"),
                        document.body.style.paddingRight = `${e}px`
                    }
                    const p = document.createElement("div");
                    p.classList.addMany(["overlay", "initially-hidden", "j-custom-overlay"]);
                    const m = Ks.call(this, i, u, p, {
                        onHide: function() {
                            u.remove(),
                            p.remove(),
                            n(!1),
                            t.lockScroll && (document.body.classList.remove("body--overflow"),
                            document.body.style.paddingRight = "")
                        },
                        onShow: function() {
                            var e;
                            zs(u)(),
                            u.querySelector(l.map((e => "." + e)).join("")).addEventListener("click", (e => {
                                n(!0),
                                m.close()
                            }
                            )),
                            null === (e = u.querySelector(c.map((e => "." + e)).join(""))) || void 0 === e || e.addEventListener("click", (e => {
                                n(!1),
                                m.close()
                            }
                            ))
                        },
                        modal: null !== (o = t.modal) && void 0 !== o && o,
                        closeSelector: t.showCross ? ".popup__close" : null
                    })
                }
                ))
            }
            function so(e, {width: t=600, height: n=500}={}) {
                const r = [`top=${Math.floor((window.screenY || window.screenTop || 0) + (window.outerHeight - n) / 2) || 0}`, `left=${Math.floor((window.screenX || window.screenLeft || 0) + (window.outerWidth - t) / 2) || 0}`, `width=${t}`, `height=${n}`, "status=0", "toolbar=0"];
                return null != window.open(e, "", r.join(","))
            }
            let oo = function(e) {
                function t() {
                    return e.apply(this, arguments) || this
                }
                (0,
                vr.A)(t, e);
                var n = t.prototype;
                return n.renderModalError = function() {
                    return Xs.apply(this, arguments)
                }
                ,
                n.renderModalAdaptive = function() {
                    return Ys.apply(this, arguments)
                }
                ,
                n.showCustomPopup = function() {
                    return eo.apply(this, arguments)
                }
                ,
                n.confirm = function() {
                    return ro.apply(this, arguments)
                }
                ,
                n.videoPlayer = function() {
                    return to.apply(this, arguments)
                }
                ,
                n.videoReviewPlayer = function() {
                    return no.apply(this, arguments)
                }
                ,
                n.showSizePickerPopup = function() {
                    return Zs.apply(this, arguments)
                }
                ,
                n.browserPopup = function() {
                    return so.apply(this, arguments)
                }
                ,
                n.showFeedbackError = function(e) {
                    return $.views.loadTemplateAsync("popuperrorunbuy").then((t => {
                        wb.popup.showCustomPopup({
                            useHtml: !0,
                            msg: t.render({
                                errorMessage: e.isCancelled ? null : e.message
                            }),
                            popupClassesList: ["popup-error-unbuy", "shown"],
                            contentClasses: ["popup__content"],
                            useCenteredFunction: !0,
                            modal: !0
                        })
                    }
                    ))
                }
                ,
                t
            }(WbSpaModel);
            wb.popup = new oo,
            wb.namespace("spa", function() {
                let e = {}
                  , t = new Es.A;
                const n = new Os
                  , r = {};
                async function s() {
                    var e, t, n;
                    if (!((null === (t = null === (e = wb.global.settings) || void 0 === e ? void 0 : e.variables) || void 0 === t ? void 0 : t.resourseStatSettings) && "PerformanceObserver"in window && (null === (n = null === PerformanceObserver || void 0 === PerformanceObserver ? void 0 : PerformanceObserver.supportedEntryTypes) || void 0 === n ? void 0 : n.includes("resource"))))
                        return;
                    const r = await wb.user.getShardAsync();
                    for (const e in wb.global.settings.variables.resourseStatSettings) {
                        const [t,n] = wb.global.settings.variables.resourseStatSettings[e].split(";")
                          , s = parseInt(n)
                          , [i,a] = t.split("-")
                          , l = parseInt(i)
                          , c = parseInt(a);
                        if (r >= l && r <= c && s > 0) {
                            let t = 0;
                            const n = new PerformanceObserver((async n => {
                                var r, i, a, l, c;
                                if (n.getEntries) {
                                    const u = n.getEntries();
                                    for (const n of u.filter((t => t.initiatorType === e))) {
                                        if (t % s == 0 && !o(n)) {
                                            const e = {
                                                url: n.name,
                                                ok: n.responseStatus > 300 ? 1 : 0,
                                                error: n.responseStatus >= 300 ? n.responseStatus : 0,
                                                dns: parseInt(n.domainLookupEnd - n.domainLookupStart),
                                                connect: parseInt(n.connectEnd - n.connectStart),
                                                ttfb: parseInt(n.responseStart - n.requestStart),
                                                load: n.responseStart > 0 ? parseInt(n.responseEnd - n.fetchStart) : 0,
                                                full: parseInt(n.duration),
                                                cache: "HIT" === (null === (i = null === (r = n.serverTiming) || void 0 === r ? void 0 : r.find((e => "cache" === e.name))) || void 0 === i ? void 0 : i.description) ? 1 : 0,
                                                srv: null !== (c = null === (l = null === (a = n.serverTiming) || void 0 === a ? void 0 : a.find((e => "srv" === e.name))) || void 0 === l ? void 0 : l.description) && void 0 !== c ? c : "",
                                                size: n.transferSize
                                            };
                                            wb.analitics.sendEvent("performance_static_download", e)
                                        }
                                        t++
                                    }
                                }
                            }
                            ));
                            n.observe({
                                type: "resource",
                                buffered: !0
                            });
                            let r = 0;
                            new PerformanceObserver((e => {
                                if (e.getEntries) {
                                    const t = e.getEntries();
                                    for (const e of t.filter((e => "img-load-error" === e.name)))
                                        r % s == 0 && wb.analitics.sendEvent("performance_static_download", {
                                            url: e.detail.url,
                                            ok: 0
                                        }),
                                        r++
                                }
                            }
                            )).observe({
                                type: "mark",
                                buffered: !0
                            })
                        }
                    }
                }
                function o(e) {
                    return !(e.transferSize > 0) && (e.decodedBodySize > 0 || e.duration < 3)
                }
                return $.views.loadTemplateAsync = async function(e, t="") {
                    var s;
                    if ($.templates[e])
                        return $.templates[e];
                    if (!r[e]) {
                        let o;
                        if (window._debug)
                            o = `${e}.json`;
                        else {
                            const r = n.$helper.currentCulture || "ru"
                              , i = `${e}-${wb.settings.currentLocale}-${r}.json`.toLowerCase()
                              , a = null === (s = n.$router.tmplHashes) || void 0 === s ? void 0 : s[i];
                            o = t ? `${e}-ru-${r}.${a}.json`.toLowerCase() : i.replace(".json", `.${a}.json`)
                        }
                        const i = t ? `${t}${o}` : $.views.converters.urlForJsTmpl(o);
                        r[e] = window._debug ? n.$httpClient.fetchBasicJSON(i) : n.$httpClient.fetchStaticV2(i)
                    }
                    try {
                        const t = await r[e]
                          , n = Object.keys(t);
                        return 1 === n.length ? ($.templates(e, t[n[0]]),
                        r[e] = null,
                        $.templates[e]) : ($.templates(t),
                        r[e])
                    } catch (t) {
                        throw r[e] = null,
                        t
                    }
                }
                ,
                $.views.loadWebApiTemplateAsync = async function(e) {
                    const t = `webapi_tmpl_${e}`;
                    if ($.templates[t])
                        return $.templates[t];
                    r[t] || (r[t] = n.$httpClient.fetchText(`webapi/htmltemplate/${e}`));
                    try {
                        const e = await r[t];
                        try {
                            const t = JSON.parse(e);
                            $.templates(t)
                        } catch (n) {
                            $.templates(t, e)
                        }
                        return r[t] = null,
                        $.templates[t]
                    } catch (e) {
                        throw r[t] = null,
                        e
                    }
                }
                ,
                $.views.loadTemplateDictionaryAsync = function(e) {
                    return $.views.loadTemplateAsync(e)
                }
                ,
                $.views.converters({
                    formatString: function() {
                        let[e,t,n,r] = arguments;
                        if ("string" != typeof e)
                            throw new Error("Template must be a string");
                        return n && (e = e.replace(/\[(\d+)\]/gm, "{$1}")),
                        r && (t = $.views.converters.encode(t)),
                        String.format.apply(null, [e, t])
                    },
                    dateFormat: function(e, t) {
                        return e.format(t)
                    }
                }),
                {
                    init: async function(e) {
                        const {router: r, seoHelper: o, menuLkHelper: i} = e;
                        Object.defineProperty(Os, "appVersion", {
                            value: r.appVersion,
                            writable: !1
                        }),
                        n.$router.setData(r.routesDictionary, r.tmplHashes),
                        n.$moduleLoader.setModules(r.modules),
                        n.$moduleLoader.setServices(r.services);
                        const a = [];
                        if ("AbortController"in window || a.push(n.$moduleLoader.loadModuleAsync("abortControllerPolyfill", !0)),
                        "FormData"in window && "get"in (null === FormData || void 0 === FormData ? void 0 : FormData.prototype) || a.push(n.$moduleLoader.loadModuleAsync("formDataPolyfill", !0)),
                        "undefined" == typeof navigator || navigator.locks || a.push(n.$moduleLoader.loadModuleAsync("navigatorLocksPolyfill", !0)),
                        a.length > 0 && await Promise.all(a),
                        wb.displayModeSettings.init(),
                        t.preInit(),
                        n.$user.initUser(),
                        await wb.global.loadSettingAsync(),
                        wb.global.periodicBasketConfigUpdate(),
                        n.$seoHelper.init(o.items, o.updateUrl, o.defaultTitle),
                        n.$menuLk.setStatic(i),
                        t.init(),
                        wb.network.init(),
                        wb.analitics.getSplitInfo(),
                        WbSpaModel.prototype.$user.getBannersClusters(),
                        await n.$router.init(r.ssrModel),
                        -1 === document.location.hostname.indexOf("wildberries.ru") && -1 === document.location.hostname.indexOf("wildberries.kg") && -1 === document.location.hostname.indexOf("wildberries.am") && -1 === document.location.hostname.indexOf("wildberries.by") && "localhost" !== document.location.hostname)
                            return wb.spa.logError({
                                message: `fishing from ${document.location}`
                            }, {
                                referrer: wb.spa.getReferrer(),
                                cookie: document.cookie
                            }),
                            wb.popup.renderModalError("Вы находитесь на фишинговом сайте!"),
                            void (wb.spa = null);
                        document.body.addEventListener("load", (e => {
                            var t;
                            "IMG" === e.target.tagName && e.target.complete && (null === (t = e.target.closest(".img-plug")) || void 0 === t || t.classList.remove("img-plug--error"))
                        }
                        ), !0),
                        navigator.userAgent.indexOf("MSIE ") > 0 || navigator.userAgent.indexOf("Trident/") > 0 || document.body.addEventListener("error", (e => {
                            var t, n;
                            if ((null === (n = null === (t = wb.global.settings) || void 0 === t ? void 0 : t.switches) || void 0 === n ? void 0 : n.enableErrorImagePlug) && "IMG" === e.target.tagName && -1 === e.target.src.indexOf("/i/blank.gif")) {
                                const t = e.target.closest(".img-plug");
                                null == t || t.classList.add("img-plug--error"),
                                null == t || t.classList.remove("load"),
                                null === performance || void 0 === performance || performance.mark("img-load-error", {
                                    detail: {
                                        url: e.target.src
                                    }
                                })
                            }
                        }
                        ), !0),
                        setTimeout(s, 2e3),
                        setTimeout((function() {
                            WbSpaModel.prototype.$helper.loadJsAsync(wb.settings.scripts.performance)
                        }
                        ), 5e3)
                    },
                    registerViewModel: function(t) {
                        const r = Object.getPrototypeOf(t.prototype);
                        r === Object.prototype ? Object.setPrototypeOf(t.prototype, Os.prototype) : Object.setPrototypeOf(r, Os.prototype),
                        n.$router.getAppliedEntries().forEach((n => {
                            e[n] = t
                        }
                        ))
                    },
                    getViewModelByName: function(t) {
                        return e[t]
                    },
                    redirect: function(e, t, r=!1) {
                        n.$router.moveTo(e, t, !1, r)
                    },
                    setUserStatus: function({userIsAuth: e, userUid: t, userId: r}) {
                        $.observable(n.$router).setProperty({
                            userIsAuth: e,
                            userUid: t,
                            userId: r
                        }),
                        n.$eventBus.dispatchEvent(new CustomEvent(e ? "onUserAuth" : "onUserUnAuth")),
                        n.$services.favsService.setKey(e, t),
                        n.$services.userData.setKey(e, t),
                        n.$getService("orderService").then((e => e.startSync(n.$services.cartService.publicBasketApiUrl))),
                        n.$getService("wbxOrderService").then((e => e.startSync(n.$services.cartService.publicBasketApiUrl))),
                        e && (n.$getService("groupedDeliveriesService").then((e => e.init())),
                        "ru" !== wb.settings.currentLocale && n.$services.userData.migrateProfileFromGlobal())
                    },
                    refresh: function() {
                        n.$router.refresh()
                    },
                    getMainLayout: function() {
                        return t
                    },
                    getCatalogMenu: async function() {
                        return this._catalogMenuTask || (this._catalogMenuTask = new Promise((async (e, t) => {
                            const n = new xs;
                            await n.initMenu(),
                            n.isInited ? e(n) : (t(),
                            this._catalogMenuTask = null)
                        }
                        ))),
                        this._catalogMenuTask
                    },
                    clearCatalogMenu: function() {
                        this._catalogMenuTask = null
                    },
                    getReferrer: function() {
                        return n.$router.referrer
                    },
                    logError: function(e, t=null, n=!1) {
                        try {
                            const r = {
                                msg: e.message
                            };
                            n && (r.stk = e.stack),
                            t && (r.data = t);
                            const s = "/webapi/logging/jserror"
                              , o = {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json"
                                },
                                body: JSON.stringify(r)
                            };
                            WbSpaModel.prototype.$httpClient.fetch(s, o).catch(( () => {
                                WbSpaModel.prototype.$services.retryFetchService.saveRequest(s, o)
                            }
                            ))
                        } catch (e) {}
                    },
                    orderMetrics: function(e) {
                        try {
                            WbSpaModel.prototype.$httpClient.fetch(`/webapi/logging/orders/metrics?status=${e}`, {
                                method: "POST"
                            })
                        } catch (e) {}
                    },
                    signIn: function(e, t) {
                        n.$router.moveToSignIn(e, t)
                    },
                    afterSignOut: function() {
                        wb.spa.signIn({
                            query: {
                                returnUrl: window.location.href
                            }
                        }),
                        t.updateAfterLogin()
                    }
                }
            }()),
            wb.namespace("global", function() {
                const e = "user-settings"
                  , t = "global-settings-v2"
                  , n = "cdn-config"
                  , r = 18e4
                  , s = {
                    switches: {},
                    variables: {}
                };
                let o, i, a, l, c = [], u = !0, d = 200, h = 0;
                function p(e) {
                    if (!e || !WbSpaModel.appVersion)
                        return;
                    const t = e.split(".")
                      , n = WbSpaModel.appVersion.split(".");
                    if (t.length < 3 || n.length < 3)
                        return;
                    +((parseInt(n[0]) || 0) + ("000" + (parseInt(n[1]) || 0)).slice(-3) + ("000" + (parseInt(n[2]) || 0)).slice(-3)) < +(t[0] + ("000" + t[1]).slice(-3) + ("000" + t[2]).slice(-3)) && window.location.reload()
                }
                function m() {
                    return i || (i = localStorage.getObject(e),
                    i || (i = {}),
                    i.closed || (i.closed = []),
                    i.colorsHitory || (i.colorsHitory = []),
                    i.confirmed || (i.confirmed = []),
                    i)
                }
                function g(e) {
                    for (const t of ["basket_route_map", "feedback_route_map"]) {
                        if (!e[t])
                            continue;
                        let n = "switch (true) {";
                        for (const r of e[t])
                            n += `case volId >= ${r.vol_range_from} && volId <= ${r.vol_range_to}: return "${r.http_host}";`;
                        n += "}";
                        const r = new Function("volId",n);
                        r(0),
                        wb.helpers.setImgFunc(t, r)
                    }
                }
                return window.addEventListener("storage", (e => {
                    if (e.key === t)
                        try {
                            const {data: t} = JSON.parse(e.newValue);
                            o = t,
                            p(o.variables.siteMinVersion),
                            c.forEach((e => e(o))),
                            window._debug && console.log("[globalsettings] changed external")
                        } catch (e) {
                            console.error("[globalsettings] changed external failed")
                        }
                    else if (e.key === n) {
                        const t = JSON.parse(e.newValue);
                        t && g(t)
                    }
                }
                )),
                {
                    get settings() {
                        const e = function() {
                            var e, n;
                            return o || (o = null !== (n = null === (e = localStorage.getObject(t)) || void 0 === e ? void 0 : e.data) && void 0 !== n ? n : s,
                            o)
                        }();
                        return e.switches.enableWbxOrder = !0,
                        e
                    },
                    get userSettings() {
                        return m()
                    },
                    saveUserSettings: function() {
                        localStorage.putObject(e, m()),
                        Os.prototype.$eventBus.dispatchEvent(new CustomEvent("UserSettingsSaved"))
                    },
                    subscribe(e) {
                        c.push(e)
                    },
                    loadSettingAsync: function e() {
                        a || (a = setInterval(e, 12e4)),
                        u ? u = !1 : d = 2e3;
                        const n = h >= 2 ? "/webapi/settings/global/hash" : wb.helpers.url.urlStaticData("data/settings-front-ru.json.hash");
                        return Os.prototype.$httpClient.fetchText(n, {
                            method: "GET",
                            cache: "no-cache"
                        }, {
                            noProcessResponse: !0,
                            timeout: d
                        }).then((e => {
                            var n;
                            if (void 0 === e)
                                throw new Error;
                            if (e !== (null === (n = localStorage.getObject(t)) || void 0 === n ? void 0 : n.hash)) {
                                const n = h >= 2 ? "/webapi/settings/global/get" : wb.helpers.url.urlStaticData("data/settings-front-ru.json");
                                return Os.prototype.$httpClient.fetchJSON(n, {
                                    method: "GET",
                                    cache: "no-cache",
                                    headers: {
                                        "Content-Type": "application/json"
                                    }
                                }, {
                                    noProcessResponse: !0,
                                    timeout: d
                                }).then((n => (o = n,
                                localStorage.putObject(t, {
                                    hash: e,
                                    data: o
                                }),
                                h = 0,
                                window._debug && console.log("[globalsettings] changed"),
                                c.forEach((e => e(o))),
                                p(o.variables.siteMinVersion),
                                Promise.resolve()))).catch(( () => Promise.resolve()))
                            }
                            return Promise.resolve()
                        }
                        )).catch(( () => (h++,
                        Promise.resolve())))
                    },
                    periodicBasketConfigUpdate: async function e() {
                        if (WbSpaModel.prototype.$isRangeEnabledFor(wb.global.settings.variables.usersRangeCdnConfig))
                            if (l)
                                try {
                                    await navigator.locks.request(`lock-${n}`, (async e => {
                                        var t;
                                        const s = localStorage.getObject(n);
                                        if (s && s.timestamp + r > Date.now())
                                            return;
                                        const o = await Os.prototype.$httpClient.fetchBasicJSON(`https://cdn.wbbasket.ru/api/v2/upstreams?hash=${null !== (t = null == s ? void 0 : s.hash) && void 0 !== t ? t : ""}`, {
                                            cache: "no-cache"
                                        }, {
                                            nullOnError: !0
                                        });
                                        if (!(null == o ? void 0 : o.upstreams) || o.hash === (null == s ? void 0 : s.hash))
                                            return;
                                        let i = o.upstreams.filter((e => e.is_default || e.is_available));
                                        if (0 === i.length)
                                            return;
                                        if (1 === i.length)
                                            return g(i[0]),
                                            Object.assign(i[0], {
                                                timestamp: Date.now(),
                                                hash: o.hash
                                            }),
                                            void localStorage.putObject(n, i[0]);
                                        const a = "performance-check"
                                          , l = {}
                                          , c = new PerformanceObserver((e => {
                                            const t = e.getEntries();
                                            for (const e of t.filter((e => e.name.indexOf(a) > 0))) {
                                                const t = new URL(e.name).searchParams;
                                                if (parseInt(t.get(a)) < u)
                                                    continue;
                                                const n = t.get("name");
                                                l[n] || (l[n] = []),
                                                l[n].push(200 === e.responseStatus || e.encodedBodySize > 0 ? e.duration : 1e5)
                                            }
                                        }
                                        ));
                                        c.observe({
                                            type: "resource",
                                            buffered: !0
                                        });
                                        const u = Date.now();
                                        for (const e of i)
                                            for (let t = 0; t < 3; t++)
                                                await WbSpaModel.prototype.$httpClient.fetch(`${e.check_url}?name=${e.name}&${a}=${Date.now()}`, {
                                                    mode: "no-cors",
                                                    cache: "no-cache"
                                                }).catch((e => {}
                                                ));
                                        await Os.prototype.$helper.sleep(1e3),
                                        c.disconnect();
                                        for (const e in l)
                                            i.find((t => t.name === e)).latency = ~~(l[e].reduce(( (e, t) => e + t), 0) / l[e].length);
                                        const d = i.sort(( (e, t) => e.latency - t.latency || !e.is_default - !t.is_default))[0];
                                        g(d),
                                        Object.assign(d, {
                                            timestamp: Date.now(),
                                            hash: o.hash
                                        }),
                                        localStorage.putObject(n, d)
                                    }
                                    ))
                                } catch (e) {
                                    wb.spa.logError(e)
                                }
                            else {
                                l = setInterval(e, r);
                                const t = localStorage.getObject(n);
                                t && t.timestamp + r > Date.now() ? g(t) : setTimeout(e, 5e3)
                            }
                    }
                }
            }())
        }
        ,
        25148: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => F
            });
            var r = {};
            n.r(r),
            n.d(r, {
                dataProceeder: () => d,
                urlCreator: () => u
            });
            var s = n(77387);
            const o = function() {
                function e(e) {
                    var t;
                    this.layoutModel = e.layoutModel,
                    this.tmpl = "shortBasketInfoTmpl",
                    this.control = document.querySelector("#basketContent"),
                    this.addressesInfo = null,
                    this.eventsModels = this.layoutModel.$services.notifications.eventsModel,
                    this.profileMenu = null,
                    this.lkMenuMouseEnterHandler = this.lkMenuMouseEnterHandler.bind(this),
                    this.deliveriesPreviewEnterHandler = this.deliveriesPreviewEnterHandler.bind(this),
                    this.toggleControl = this.toggleControl.bind(this),
                    this.controlState = {
                        hide: !1
                    },
                    this.basketInfo = {
                        IsAuthenticated: this.layoutModel.$auth.isAuth,
                        BasketQuantity: this.layoutModel.$services.cartService.localCount,
                        UserIsPremium: !!this.layoutModel.$auth.isAuth && (null === (t = this.layoutModel.$user.getUserGradeFromCache()) || void 0 === t ? void 0 : t.isPremium)
                    },
                    $.templates[this.tmpl].link(this.control, this, {
                        controlState: this.controlState
                    })
                }
                var t = e.prototype;
                return t.init = function() {
                    var e, t, n;
                    this.layoutModel.$eventBus.addEventListener("LocalBasketUpdateCount", this._updateLocalBasketCount.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("UserReset", this.update.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("UserGradeUpdated", this.updatePremiumState.bind(this));
                    const r = this.layoutModel.$services.cartService.currentDeliveryType;
                    r && this.layoutModel.$analitic.setCurrentAddress(r.deliveryType, null !== (e = r.officeId) && void 0 !== e ? e : r.addressId),
                    (null === (n = null === (t = this.layoutModel) || void 0 === t ? void 0 : t.menuTop) || void 0 === n ? void 0 : n.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateBasket(this.basketInfo.BasketQuantity),
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this.toggleControl(!1)
                    }
                    )),
                    this.basketInfo.IsAuthenticated && this.layoutModel.$services.notifications.checkNotificationCountAsync().then((e => {
                        var t, n;
                        (null === (n = null === (t = this.layoutModel) || void 0 === t ? void 0 : t.menuTop) || void 0 === n ? void 0 : n.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateEvents(e),
                        $.observable(this.eventsModel).setAllProperty(e)
                    }
                    ))
                }
                ,
                t.update = function() {
                    var e;
                    const t = {
                        IsAuthenticated: this.layoutModel.$auth.isAuth,
                        BasketQuantity: this.layoutModel.$services.cartService.localCount,
                        UserIsPremium: null === (e = this.layoutModel.$user.getUserGradeFromCache()) || void 0 === e ? void 0 : e.isPremium
                    };
                    $.observable(this.basketInfo).setAllProperty(t),
                    (t.IsAuthenticated ? this.layoutModel.$services.notifications.checkNotificationCountAsync() : Promise.resolve({
                        eventsCount: 0
                    })).then((e => {
                        var t, n;
                        (null === (n = null === (t = this.layoutModel) || void 0 === t ? void 0 : t.menuTop) || void 0 === n ? void 0 : n.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateEvents(e),
                        $.observable(this.eventsModel).setAllProperty(e)
                    }
                    ))
                }
                ,
                t.updatePremiumState = function() {
                    var e;
                    $.observable(this.basketInfo).setProperty({
                        UserIsPremium: null === (e = this.layoutModel.$user.getUserGradeFromCache()) || void 0 === e ? void 0 : e.isPremium
                    })
                }
                ,
                t._updateLocalBasketCount = function(e) {
                    var t, n, r, s;
                    const o = null !== (n = null === (t = e.detail) || void 0 === t ? void 0 : t.count) && void 0 !== n ? n : 0;
                    $.observable(this.basketInfo).setProperty({
                        BasketQuantity: o
                    }),
                    (null === (s = null === (r = this.layoutModel) || void 0 === r ? void 0 : r.menuTop) || void 0 === s ? void 0 : s.mobileMenu) && this.layoutModel.menuTop.mobileMenu.updateBasket(o)
                }
                ,
                t.deliveriesPreviewEnterHandler = function() {
                    if (this.deliveriesPreview)
                        return this.toggleControl(!0);
                    this.layoutModel.$moduleLoader.loadModuleAsync("deliveriesPreview").then((e => {
                        const t = this.control.querySelector(".j-tooltip-delivery");
                        this.deliveriesPreview = new e,
                        e.template.link(t, this.deliveriesPreview, {
                            controlState: this.controlState
                        }),
                        this.toggleControl(!0)
                    }
                    ))
                }
                ,
                t.lkMenuMouseEnterHandler = function() {
                    if (this.lkMenuPreview)
                        return this.toggleControl(!0);
                    const e = WbSpaModel.prototype;
                    Promise.all([e.$moduleLoader.loadModuleAsync("cabinetMenuPreview"), e.$user.getBalance().catch((e => Promise.resolve({
                        isNetworkError: !0
                    }))), e.$services.userData.getUserDataAsync(!0)]).then(( ([e,t]) => {
                        const n = this.control.querySelector(".j-tooltip-profile");
                        this.lkMenuPreview = new e(t),
                        this.lkMenuPreview.template.link(n, this.lkMenuPreview, {
                            controlState: this.controlState
                        }),
                        this.toggleControl(!0)
                    }
                    ))
                }
                ,
                t.toggleControl = function(e) {
                    $.observable(this.controlState).setProperty({
                        hide: !e
                    })
                }
                ,
                e
            }();
            var i = n(92901);
            const a = Object.freeze({
                history: 0,
                catalog: 1,
                brands: 2,
                subjects: 3,
                goods: 4,
                grouped: 5,
                tags: 6,
                supplier: 7,
                redirect: 8
            });
            const l = new (function() {
                function e() {
                    this.isInited = !1
                }
                var t = e.prototype;
                return t.initMenu = async function() {
                    this.menu = await wb.spa.getCatalogMenu(),
                    this.isInited = this.menu.isInited
                }
                ,
                t.hasItem = function(e) {
                    return !!e && this.menu.menuById.has(e)
                }
                ,
                t.getCatalogLink = function(e) {
                    return this.menu.menuById.get(e).url
                }
                ,
                t.getParents = function(e) {
                    const t = [];
                    let n = this.menu.menuById.get(e).parentId;
                    for (; null != n; ) {
                        const e = this.menu.menuById.get(n);
                        t.push(e.name),
                        n = e.parentId
                    }
                    return t.reverse()
                }
                ,
                e
            }())
              , c = Object.freeze(new Map([["home", "/"], ["faq", "/services/voprosy-i-otvety"], ["lk", "/lk"], ["notifications", "/lk/newsfeed/events"], ["basket", "/lk/basket"], ["delivery", "/lk/myorders/delivery"], ["orders", "/lk/myorders/archive"], ["favorites", "/lk/favorites"], ["favorite_brands", "/lk/favoritebrands"], ["communications", "/lk/communications"], ["claims", "/lk/claims"], ["feedback", "/lk/discussion/feedback?type=Comments"], ["cards", "/lk/details#bankCard"], ["sessions", "/lk/details#personal-safety"], ["balance", "/lk/mywallet/purchases"], ["refunds", "/lk/myrefunds"], ["receipts", "/lk/receipts/get"], ["pickups", "/services/besplatnaya-dostavka"], ["make_refund", "/lk/refund"], ["make_order", "/services/kak-sdelat-zakaz"], ["payment_options", "/services/sposoby-oplaty"], ["goods_refund", "/services/vozvrat-tovara"], ["money_refund", "/services/vozvrat-denezhnyh-sredstv"], ["sale_rules", "/services/pravila-prodazhi"], ["market_rules", "/services/pravila-polzovaniya-torgovoy-ploshchadkoy"], ["about_us", "/services/o-nas"], ["requisites", "/services/rekvizity"], ["press", "/presservice"], ["contacts", "/services/kontakty"], ["bug_bounty", "/services/bug-bounty"]]))
              , u = async () => "https://suggests.wb.ru/suggests/api/v7/hint"
              , d = async (e, t) => {
                const n = e.suggests
                  , r = e.max_tags_rows
                  , s = [];
                if (!Array.isArray(n) && !t)
                    return s;
                if ((!Array.isArray(n) || Array.isArray(n) && 0 === n.length) && t.trim())
                    return [{
                        type: a.catalog,
                        suggestions: [{
                            name: t,
                            search: t,
                            type: 1,
                            typedText: t
                        }]
                    }];
                if (l.isInited || await l.initMenu(),
                0 !== r) {
                    const e = n.filter((e => "tag" === e.type)).map((e => ({
                        name: e.name,
                        type: a.catalog,
                        typeStr: e.type,
                        pos: e.pos,
                        maxTagsRows: r
                    })));
                    s.push({
                        type: a.tags,
                        suggestions: e
                    })
                }
                const o = n.filter((e => "category" === e.type || "brand" === e.type || "supplier" === e.type || "redirect" === e.type || "external_redirect" === e.type)).map((e => {
                    switch (e.type) {
                    case "category":
                        const n = parseInt(e.menu_id);
                        if (l.hasItem(n)) {
                            const r = l.menu.menuById.get(n);
                            return {
                                typeStr: e.type,
                                name: r.name,
                                search: r.name,
                                typedText: t,
                                type: a.subjects,
                                xParams: r.query,
                                xShard: r.shard,
                                url: l.getCatalogLink(n),
                                breadCrumbs: l.getParents(n),
                                src: $.views.converters.imgForPromoCategory(n, !0),
                                imgWidth: 36,
                                imgHeight: 48
                            }
                        }
                        break;
                    case "brand":
                        return {
                            typeStr: e.type,
                            typeName: "Бренд",
                            name: e.brand_name,
                            search: e.brand_name,
                            brandId: e.brand_id,
                            brandHash: e.brand_hash,
                            typedText: t,
                            type: a.brands,
                            src: $.views.helpers.forBrandLogoFromId(e.brand_hash),
                            imgOnError: `${wb.settings.staticSiteUrl}/i/v3/broken-img/brands.jpg`,
                            imgWidth: 32,
                            imgHeight: 13
                        };
                    case "supplier":
                        return {
                            typeStr: e.type,
                            typeName: "Магазин",
                            name: $.views.converters.trimWord(e.supplier_name, $.views.helpers.suppliersOrgForms),
                            search: e.supplier_name,
                            supplierId: e.supplier_id,
                            typedText: t,
                            type: a.supplier,
                            url: `/seller/${e.supplier_id}`,
                            src: $.views.helpers.forSellerLogo(e.supplier_id),
                            imgOnError: `${wb.settings.staticSiteUrl}/i/v3/catalog/seller-logo-new.jpg`,
                            imgWidth: 67,
                            imgHeight: 28
                        };
                    case "redirect":
                    case "external_redirect":
                        return {
                            typeStr: e.type,
                            typeName: "Раздел",
                            name: e.name,
                            search: e.name,
                            id: e.id,
                            typedText: t,
                            type: a.redirect,
                            url: "external_redirect" === e.type ? e.url : c.get(e.id),
                            src: "//static-basket-01.wb.ru/vol0/interface/shops/wb.png",
                            imgWidth: 67,
                            imgHeight: 28
                        }
                    }
                }
                )).filter((e => e));
                s.push({
                    type: a.grouped,
                    suggestions: o
                });
                const i = n.filter((e => "suggest" === e.type)).map((e => ({
                    name: e.name,
                    search: e.name,
                    type: a.catalog,
                    typedText: t,
                    typeStr: e.type,
                    xParams: e.query,
                    xShard: e.shard_key
                }))).slice(0, 7);
                return 0 === i.length && 0 === tagsSuggests.length && t.trim() && i.push({
                    name: t,
                    search: t,
                    type: a.catalog,
                    typedText: t,
                    typeStr: "self"
                }),
                s.push({
                    type: a.catalog,
                    suggestions: i
                }),
                s
            }
              , h = [34, 42]
              , p = [38, 40]
              , m = Object.freeze({
                6: 0,
                0: 1,
                1: 2,
                5: 3
            });
            let g = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).searchText = "",
                    t.searchQueryText = "",
                    t.showImageSearch = !1,
                    t.uploadingPhoto = !1,
                    t.suggestions = [],
                    t.allSuggestions = [],
                    t.suggestionsQueue = [],
                    t.prohibitSuggestions = !0,
                    t.searchTagClick = !1,
                    t.onlyTags = !1,
                    t.showSuggestionsDebouncer = t.showSuggestionsDebouncer(),
                    t.showSuggestionsDebounced = t.showSuggestionsDebouncer.debounce(t.showSuggestionsOuter.bind(t), 300),
                    t._hideSuggestionsByClick = t._hideSuggestionsByClick.bind(t),
                    t
                }
                (0,
                s.A)(t, e);
                var n = t.prototype;
                return n.clearSearch = function() {
                    this.searchTagClick = !1,
                    this.onlyTags = !1,
                    $.observable(this).setProperty({
                        searchText: ""
                    }),
                    this.inputEl.focus()
                }
                ,
                n.onSearchInputKeypress = function(e) {
                    var t;
                    if (h.indexOf(e.which) > -1)
                        return !1;
                    if (13 === e.which)
                        return this.showSuggestionsDebouncer.stop(),
                        this.applySearch(),
                        !1;
                    if (this.onlyTags) {
                        const e = this.allSuggestionsAnalitics;
                        this.$analitic.saveLastSearchAnaliticsData("Tag_Suggest", this.searchText, e),
                        this.onlyTags = !1
                    }
                    if (this.$isDesktop && p.indexOf(e.which) > -1 && this.allSuggestions.length) {
                        e.preventDefault();
                        const n = 38 === e.which
                          , r = this.allSuggestions.filter((e => 1 !== e.type || 1 === e.type && !e.hasOwnProperty("pos")));
                        let s = r.findIndex((e => e.selected));
                        n && -1 === s && (s = 0),
                        s += n ? -1 : 1,
                        s %= r.length,
                        s < 0 && (s += r.length);
                        const o = r[s];
                        null != o && ($.observable(this).setProperty({
                            searchText: o.name
                        }),
                        null === (t = this._markSuggestAsSelected) || void 0 === t || t.call(this, o))
                    }
                }
                ,
                n.onSearchSubmit = function(e) {
                    e.preventDefault()
                }
                ,
                n.applySearch = function() {
                    this.searchText.length && (this.inputEl.blur(),
                    this._hideSuggestionsByClick(),
                    this._loadSearchPage())
                }
                ,
                n.searchByImage = async function(e) {
                    const [t] = await Promise.all([this.$moduleLoader.loadModuleAsync("imageChip"), this.$moduleLoader.loadServiceAsync("searchByImageService")])
                      , n = new t;
                    n.uploading = !0,
                    $.observable(this).setProperty({
                        imageChipData: n
                    });
                    try {
                        this.$analitic.saveState({
                            l: "SPA"
                        });
                        const t = e.currentTarget.files[0]
                          , n = await this.$services.searchByImageService.searchByImage(t)
                          , r = this.$analitic.getTermByTermName("qid");
                        this.$analitic.saveQueryIdForSearch(r),
                        this.$analitic.sendEvent("Search_Request_Send", {
                            type: "Photo",
                            query_id: r
                        }),
                        this.$router.moveTo(n)
                    } catch (e) {
                        console.error(e)
                    } finally {
                        $.observable(this).setProperty({
                            showImageSearch: !1
                        })
                    }
                }
                ,
                n.enableSuggestions = function(e) {
                    if (!this.imageChipData)
                        return "focus" === e.type && (this.focusSearchTime = Date.now(),
                        this.focusSearchText = this.searchText),
                        $.observable(this).setProperty({
                            prohibitSuggestions: !1
                        }),
                        this.showSuggestions(e);
                    e.preventDefault()
                }
                ,
                n.showSuggestionsDebouncer = function() {
                    let e = null;
                    function t() {
                        e && clearTimeout(e)
                    }
                    return {
                        debounce: (n, r) => (...s) => {
                            t(),
                            e = setTimeout(( () => {
                                n.apply(this, s),
                                e = null
                            }
                            ), r)
                        }
                        ,
                        stop: t
                    }
                }
                ,
                n.showSuggestionsOuter = function(e) {
                    return this.prohibitSuggestions ? this.enableSuggestions(e) : this.showSuggestions(e)
                }
                ,
                n.showSuggestions = function(e) {
                    if (this.imageChipData)
                        return void (null == e || e.preventDefault());
                    clearTimeout(this._hideSuggestionsTimer);
                    const t = this.suggestionsHelper.loadSuggestionsAsync(this.searchText.toLowerCase(), null)
                      , n = this.$isDesktop ? $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl") : Promise.resolve();
                    this.suggestionsQueue.push(t),
                    Promise.all([t, n]).then(( ([e]) => {
                        var n;
                        if (this.prohibitSuggestions)
                            return void $.observable(this.suggestions).refresh([]);
                        const r = this.suggestionsQueue.findIndex((e => e == t));
                        if (r < 0)
                            return;
                        this.suggestionsQueue = this.suggestionsQueue.slice(r + 1);
                        const s = JSON.parse(JSON.stringify(e));
                        this._removeRepeats(s),
                        this._sortSuggests(s),
                        $.observable(this.suggestions).refresh(s);
                        const o = null === (n = s.find((e => 6 === e.type))) || void 0 === n ? void 0 : n.suggestions;
                        if (o) {
                            const e = o[0].maxTagsRows;
                            if (e > 0) {
                                const t = document.querySelector(".j-unmark-suggests");
                                document.documentElement.style.setProperty("--row-on-tags", e),
                                t.classList.add("autocomplete__list--row")
                            }
                        }
                        this.allSuggestions = s.reduce(( (e, t) => e.concat(t.suggestions)), []),
                        document.removeEventListener("click", this._hideSuggestionsByClick),
                        document.addEventListener("click", this._hideSuggestionsByClick),
                        this.toggleBackgroundBlur(!0)
                    }
                    )).catch((e => {
                        console.error(e)
                    }
                    ))
                }
                ,
                n.toggleBackgroundBlur = function(e) {
                    var t;
                    if (e && this.$isDesktop) {
                        if (!document.querySelector(".overlay--search")) {
                            const e = document.createElement("div");
                            e.classList.add("overlay", "overlay--search", "hide-mobile"),
                            document.querySelector("body").appendChild(e)
                        }
                    } else
                        null === (t = document.querySelector(".overlay--search")) || void 0 === t || t.remove()
                }
                ,
                n._hideSuggestionsByClick = function(e) {
                    if ("m" == wb.settings.displayMode || (null == e ? void 0 : e.target.closest(".search-catalog__btn--clear")))
                        return;
                    (e ? !e.target.closest(".j-menu-burger-btn") && this.inputEl == document.activeElement || e.target.closest(".j-clear-history") || e.target.closest(".j-clear-history-all") || e.target.closest(".j-suggest-tag") : null) ? this.inputEl.focus() : (clearTimeout(this._hideSuggestionsTimer),
                    $.observable(this).setProperty({
                        prohibitSuggestions: !0
                    }),
                    this._hideSuggestionsTimer = setTimeout(( () => {
                        $.observable(this.suggestions).refresh([]),
                        document.removeEventListener("click", this._hideSuggestionsByClick),
                        this.toggleBackgroundBlur(!1)
                    }
                    ), 150))
                }
                ,
                n.clearAllSearchHistories = function(e) {
                    this._clearSearchHistory(null, !0),
                    this.$analitic.sendEvent("Search_History_Delete")
                }
                ,
                n.clearSearchHistory = function(e) {
                    const {data: t} = $.view(e.currentTarget);
                    this._clearSearchHistory(t.name)
                }
                ,
                n._clearSearchHistory = function(e, t) {
                    this.suggestionsHelper.removeFromHistorySearch(e, t),
                    "m" === wb.settings.displayMode && this.showSuggestions(),
                    this.inputEl.focus()
                }
                ,
                n.fillWithTag = function(e) {
                    var t, n, r;
                    if (this.searchTagClick = !0,
                    e.target.closest(".j-clear-history"))
                        return;
                    const {data: s} = $.view(e.currentTarget);
                    if (!s)
                        return;
                    const o = null !== (t = s.name) && void 0 !== t ? t : ""
                      , i = (this.searchText,
                    this.searchText.trimLeft().split(/\s+/));
                    i[s.pos] = o,
                    this.onlyTags = !0,
                    this.$analitic.sendEvent("Search_Tag_Suggest_T", {
                        text: o,
                        text_typed: null !== (n = this.searchText) && void 0 !== n ? n : ""
                    }),
                    $.observable(this).setProperty({
                        searchText: i.join(" ") + " "
                    }),
                    null === (r = this.inputEl) || void 0 === r || r.focus()
                }
                ,
                n._setTextInSearchInput = function(e) {
                    console.log("_setTextInSearchInput"),
                    $.observable(this).setProperty({
                        searchText: e
                    }),
                    !this.$isDesktop && this.parentBlock && $.observable(this.parentBlock).setProperty({
                        searchText: e
                    })
                }
                ,
                n.followSuggest = function(e) {
                    var t, n;
                    if (e.target.closest(".j-clear-history"))
                        return;
                    this.onlyTags = !1;
                    const {data: r} = $.view(e.currentTarget);
                    if (null == r)
                        return;
                    const s = this.allSuggestionsAnalitics;
                    this._setTextInSearchInput(r.name),
                    this.suggestionsHelper.saveHistorySearch(r.name);
                    const o = this._getAnalyticsFromSuggest(r)
                      , i = {
                        type: o.type,
                        l: o.location,
                        t: this.searchText,
                        t1: null === (t = r.searchParams) || void 0 === t ? void 0 : t.get("xParams"),
                        t2: null === (n = r.searchParams) || void 0 === n ? void 0 : n.get("xShard"),
                        t3: r.typedText,
                        t4: this.searchTagClick
                    }
                      , a = o.type;
                    this.$analitic.saveLastSearchAnaliticsData("Suggest", this.searchText, s);
                    const l = this.$analitic.getTermByTermName("qid");
                    this.$analitic.saveQueryIdForSearch(l),
                    this.$analitic.saveState(i);
                    const c = {
                        type: a,
                        text: r.search,
                        text_typed: r.typedText,
                        text_suggest: s,
                        query_id: l,
                        suggests: this.suggestionsJsonString,
                        start_inputed_at: this.focusSearchTime,
                        start_inputed_text: this.focusSearchText
                    };
                    r.isBrand || r.isHistory || (c.group = "new"),
                    this.$analitic.sendEvent("Search_Request_Send", c),
                    this._getUrlToFollow(r).then((e => {
                        if (null != wb.spa)
                            return wb.spa.redirect(e);
                        window.location.href = e
                    }
                    ))
                }
                ,
                n.removeImageChip = function() {
                    $.observable(this).setProperty({
                        imageChipData: null
                    })
                }
                ,
                n._loadSearchPage = function() {
                    var e, t, n;
                    if (/^\s+$/.test(this.searchText)) {
                        switch (wb.analitics.getState().l) {
                        case "SNT":
                        case "STA":
                            this.typeSearch = "Text";
                            break;
                        case "STH":
                            this.typeSearch = "Suggest";
                            break;
                        case "SNH":
                        case "SHS":
                            this.typeSearch = "Hist";
                            break;
                        case "STC":
                            this.typeSearch = "Category";
                            break;
                        case "STB":
                            this.typeSearch = "Brand";
                            break;
                        case "SPA":
                            this.typeSearch = "Photo";
                            break;
                        case "AST":
                        case "SST":
                        case "SIS":
                            this.typeSearch = "Tag_Suggest"
                        }
                        let t = {
                            type: null !== (e = this.typeSearch) && void 0 !== e ? e : "",
                            text: this.searchText,
                            text_typed: this.searchText,
                            reason: "search",
                            query: "",
                            shardKey: "",
                            text_suggest: "",
                            suggests: this.suggestionsJsonString,
                            query_id: wb.analitics.retrieveQueryIdForSearch()
                        };
                        wb.analitics.sendEvent("Search_Empty_Respon", t)
                    }
                    this.suggestionsHelper.saveHistorySearch(this.searchText);
                    const r = this.allSuggestionsAnalitics;
                    this.$analitic.saveState({
                        l: this.onlyTags ? "SST" : "SNT",
                        t: this.searchText,
                        t1: null === (t = this.xData) || void 0 === t ? void 0 : t.xcatalogQuery,
                        t2: null === (n = this.xData) || void 0 === n ? void 0 : n.xcatalogShard,
                        t4: this.searchTagClick
                    });
                    const s = this.$analitic.getTermByTermName("qid");
                    this.$analitic.saveQueryIdForSearch(s),
                    this.$analitic.sendEvent("Search_Request_Send", {
                        text: this.searchText,
                        type: this.onlyTags ? "Tag_Suggest" : "Text",
                        group: "new",
                        text_typed: this.searchText,
                        text_suggest: r,
                        query_id: s,
                        suggests: this.suggestionsJsonString,
                        start_inputed_at: this.focusSearchTime,
                        start_inputed_text: this.focusSearchText
                    }),
                    $.observable(this).setProperty({
                        searchQueryText: this.searchText
                    });
                    let o = this._makeSafeString(this.searchText);
                    const i = `${wb.urlHelper.xSearchBase}?search=${o}`;
                    if (null != wb.spa)
                        return wb.spa.redirect(i);
                    window.location.href = i
                }
                ,
                n._makeSafeString = function(e) {
                    return e.toSafeString()
                }
                ,
                n._getUrlToFollow = async function(e) {
                    if (e.url)
                        return Promise.resolve(e.url);
                    if (2 === e.type) {
                        const t = await $.views.helpers.brandUrlById(e.brandId);
                        if (t)
                            return t
                    }
                    return Promise.resolve(`${wb.urlHelper.xSearchBase}?search=${this._makeSafeString(e.search)}`)
                }
                ,
                n.markSelected = function(e, t) {
                    let n = e.trim();
                    if (t) {
                        const e = t.trim().replace(wb.settings.regexp.escapingRegExp, "\\$&")
                          , r = $.views.converters.encode(n.replace(new RegExp(e,"i"), "")).replace(wb.settings.regexp.escapingRegExp, "\\$&");
                        return n = $.views.converters.encode(n.replace(new RegExp(`(${r})$`,"i"), "[b]$&[/b]")),
                        n.replace(new RegExp("\\[b\\](" + $.views.converters.encode(r) + ")\\[\\/b\\]","gi"), "<b>$1</b>")
                    }
                    return $.views.converters.encode(n)
                }
                ,
                n._removeRepeats = function(e) {
                    const {history: t, common: n} = e.reduce(( (e, t) => {
                        switch (t.type) {
                        case 0:
                            e.history = t;
                            break;
                        case 1:
                            e.common = t
                        }
                        return e
                    }
                    ), {
                        history: null,
                        common: null
                    });
                    if (!t || !n)
                        return;
                    const r = t.suggestions.reduce(( (e, t) => (e.add(t.name),
                    e)), new Set);
                    n.suggestions = n.suggestions.filter((e => !r.has(e.name)))
                }
                ,
                n._sortSuggests = function(e) {
                    e.sort(( (e, t) => m[e.type] - m[t.type]))
                }
                ,
                n._getAnalyticsFromSuggest = function(e) {
                    switch (e.type) {
                    case 0:
                        return {
                            location: "SNH",
                            type: "Hist"
                        };
                    case 1:
                        return {
                            location: "STH",
                            type: "Suggest"
                        };
                    case 2:
                        return {
                            location: "STB",
                            type: "Brand"
                        };
                    case 3:
                        return {
                            location: "STC",
                            type: "Category"
                        };
                    case 4:
                        return {
                            location: "SIS",
                            type: "Item"
                        };
                    case 7:
                        return {
                            location: "STS",
                            type: "Supplier"
                        };
                    default:
                        return {
                            location: "",
                            type: "Unknown"
                        }
                    }
                }
                ,
                (0,
                i.A)(t, [{
                    key: "allSuggestionsAnalitics",
                    get: function() {
                        return this.allSuggestions.map((e => e.name)).join("|")
                    }
                }, {
                    key: "suggestionsJsonString",
                    get: function() {
                        const e = {}
                          , t = this.allSuggestions.map((t => {
                            t.typeStr in e || (e[t.typeStr] = 0);
                            const n = e[t.typeStr];
                            return e[t.typeStr] += 1,
                            {
                                type: "history" === t.typeStr ? "hist" : t.typeStr,
                                value: t.name,
                                index: n
                            }
                        }
                        ));
                        return this.$analitic.saveLastSearchAnalyticsDataForSuggest(JSON.stringify(t)),
                        JSON.stringify(t)
                    }
                }])
            }(WbSpaModel)
              , f = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).imageChipData = null,
                    t._hideSuggestionsTimer = null,
                    t.inputEl = document.getElementById("searchInput"),
                    t.applySearchEl = document.getElementById("applySearchBtn"),
                    t.searchByImageBtnEl = document.getElementById("searchByImageBtn"),
                    t.searchByImageContainerEl = document.getElementById("searchByImageContainer"),
                    t.searchInputMobileEl = document.querySelector(".j-search-input-mobile"),
                    t._checkImageFormClick = t._checkImageFormClick.bind(t),
                    t.hasAnySuggestions.depends = ["suggestions"],
                    t
                }
                (0,
                s.A)(t, e);
                var n = t.prototype;
                return n.init = async function() {
                    await this._prepareSuggestionsHelper(),
                    this._observeProperties(),
                    this._bindEvents(),
                    $.link(!0, "#searchBlock", this)
                }
                ,
                n.hasAnySuggestions = function() {
                    return this.suggestions.some((e => e.suggestions.length > 0))
                }
                ,
                n.toggleImageSearch = function() {
                    this.toggleProperty("showImageSearch")
                }
                ,
                n.markSuggest = function(e) {
                    const {data: t} = $.view(e.currentTarget);
                    null != t && this._markSuggestAsSelected(t)
                }
                ,
                n.unmarkSuggests = function() {
                    this.allSuggestions.forEach((e => {
                        $.observable(e).setProperty({
                            selected: !1
                        })
                    }
                    ))
                }
                ,
                n._markSuggestAsSelected = function(e) {
                    this.allSuggestions.forEach((t => {
                        $.observable(t).setProperty({
                            selected: t == e
                        })
                    }
                    ))
                }
                ,
                n._observeProperties = function() {
                    $.observe(this, "showImageSearch", ( (e, {value: t}) => {
                        t ? this._addImageSearchHandlers() : this._removeImageSearchHandlers()
                    }
                    ))
                }
                ,
                n._bindEvents = function() {
                    window.addEventListener("spaTransition", (e => {
                        var t;
                        "SpaSearchEntrypoint" !== (null === (t = e.detail.dest) || void 0 === t ? void 0 : t.name) && ($.observable(this).setProperty({
                            searchText: ""
                        }),
                        $.observable(this).setProperty({
                            searchQueryText: ""
                        }))
                    }
                    )),
                    this.inputEl.addEventListener("focus", ( () => {
                        this.$isDesktop || this._showMobileSearchPopup()
                    }
                    )),
                    this.$eventBus.addEventListener("NeedSearchUpdate", (e => {
                        const {searchText: t} = e.detail;
                        $.observable(this).setProperty({
                            searchText: t
                        }),
                        $.observable(this).setProperty({
                            searchQueryText: t
                        })
                    }
                    )),
                    this.$eventBus.addEventListener("RenderImageChip", (e => {
                        const {imageChipData: t} = e.detail;
                        $.observable(this).setProperty({
                            imageChipData: t
                        })
                    }
                    )),
                    this._bindDisplayEvents()
                }
                ,
                n._bindDisplayEvents = function() {
                    var e;
                    const t = this
                      , n = this._showMobileSearchPopup.bind(this);
                    function r() {
                        var e, r;
                        "m" == wb.settings.displayMode ? null === (e = t.searchInputMobileEl) || void 0 === e || e.addEventListener("click", n) : null === (r = t.searchInputMobileEl) || void 0 === r || r.removeEventListener("click", n)
                    }
                    r(),
                    null === (e = wb.displayModeSettings) || void 0 === e || e.addObserver(( () => {
                        r()
                    }
                    ))
                }
                ,
                n._addImageSearchHandlers = function() {
                    document.documentElement.addEventListener("click", this._checkImageFormClick)
                }
                ,
                n._removeImageSearchHandlers = function() {
                    document.documentElement.removeEventListener("click", this._checkImageFormClick)
                }
                ,
                n._checkImageFormClick = function(e) {
                    e.target == this.searchByImageBtnEl || this.searchByImageContainerEl.contains(e.target) || $.observable(this).setProperty({
                        showImageSearch: !1
                    })
                }
                ,
                n._showMobileSearchPopup = async function() {
                    await $.views.loadTemplateDictionaryAsync("searchSuggestionsTmpl");
                    const e = wb.popup.showCustomPopup({
                        showCross: !1,
                        useCenteredFunction: !0,
                        useHtml: !0,
                        lockScroll: !0,
                        popupClassesList: ["popup-search", "shown"],
                        contentClasses: ["popup__content", "popup-search__content"],
                        onShow: async (t, n) => {
                            const r = new y(this);
                            r.searchByImage = t => {
                                this.searchByImage(t),
                                e.close()
                            }
                            ,
                            $.templates.searchMobilePopupTmpl.link(t.querySelector(".popup__content"), r, {
                                close: () => e.close()
                            }),
                            await n,
                            r.onAfterShown()
                        }
                    })
                }
                ,
                n._prepareSuggestionsHelper = async function() {
                    const e = await this.$moduleLoader.loadModuleAsync("suggestionsHelper");
                    let t = [[{
                        cacheKey: "historySearch",
                        historiesLimit: 20
                    }, e.suggestionsTypes.history]];
                    t.push([r, e.suggestionsTypes.grouped]),
                    this.suggestionsHelper = e.createSuggestionsHelper(t)
                }
                ,
                t
            }(g)
              , y = function(e) {
                function t(t) {
                    var n;
                    return (n = e.call(this) || this).suggestionsHelper = t.suggestionsHelper,
                    n.searchText = t.searchText,
                    n.parentBlock = t,
                    n
                }
                return (0,
                s.A)(t, e),
                t.prototype.onAfterShown = function() {
                    this.inputEl = document.getElementById("mobileSearchInput"),
                    this.inputElFullPage = document.getElementById("searchInput"),
                    this.inputEl.focus()
                }
                ,
                t
            }(g);
            const v = f;
            const b = function() {
                function e(e) {
                    var t;
                    this.layoutModel = e,
                    this.container = document.getElementById("balanceBlock"),
                    this.updateBalance = this.updateBalance.bind(this),
                    this.model = {
                        balance: 0
                    },
                    this._setWalletInfo(null === (t = e.$user.balance) || void 0 === t ? void 0 : t.walletTypeCode)
                }
                var t = e.prototype;
                return t.init = async function(e) {
                    e && await this._fetchBalanceAndLink().catch((e => Promise.resolve())),
                    this.layoutModel.$eventBus.addEventListener("BalanceReset", this._fetchBalanceAndLink.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("CurrencyChanged", this._fetchBalanceAndLink.bind(this)),
                    this.layoutModel.$eventBus.addEventListener("BalanceUpdated", this.updateBalance.bind(this))
                }
                ,
                t._fetchBalanceAndLink = async function() {
                    if (!this.layoutModel.$auth.isAuth)
                        return;
                    let e = await this.layoutModel.$user.getBalance();
                    this._link(e.totalBalance || 0, (null == e ? void 0 : e.balanceCurrency) || "RUB")
                }
                ,
                t._link = function(e, t) {
                    void 0 !== e && null != e && this.layoutModel.$router.userIsAuth && !this._isLinked && (this._isLinked = !0,
                    this.model.balance = e,
                    this.model.balanceCurrency = t,
                    $.link(!0, this.container, this.model),
                    $.observable(this.layoutModel.$userEnv).setProperty({
                        balance: e,
                        balanceCurrency: t
                    }))
                }
                ,
                t.updateBalance = function(e) {
                    const {totalBalance: t, balanceCurrency: n, walletTypeCode: r} = e.detail;
                    this._isLinked ? ($.observable(this.model).setProperty({
                        balance: t,
                        balanceCurrency: n
                    }),
                    $.observable(this.layoutModel.$userEnv).setProperty({
                        balance: t,
                        balanceCurrency: n
                    })) : this._link(t),
                    this._setWalletInfo(r)
                }
                ,
                t._setWalletInfo = function(e) {
                    $.observable(wb.settings).setProperty({
                        balanceTitle: this._getBalanceTitle(e),
                        walletTypeCode: e
                    })
                }
                ,
                t._getBalanceTitle = function(e=0) {
                    return e > 0 ? "WB Кошелёк" : "Баланс"
                }
                ,
                e
            }();
            let w = function() {
                function e(e) {
                    this.mainLayout = e;
                    const t = document.querySelector(".j-b-header-country")
                      , n = t.querySelector(".j-b-change-currency");
                    this.tooltip = document.querySelector(".j-tooltip-country"),
                    $.observable(e.$userEnv).setProperty({
                        currency: e.$user.getCurrency()
                    }),
                    this.currentCurrency = e.$user.getCurrency(),
                    this.changeCurrency = this.changeCurrency.bind(this),
                    $.templates({
                        changeCurrencyTmpl: '\n               <h2 class="popup__header">Выберите валюту</h2>\n                <div class="country">\n                    <div class="country__wrap" data-link="{on \'click\' \'.j-currency-item\' changeCurrency}">\n                    {^{radiogroup currentCurrency}}\n                        {^{props ~wbCurrencies sort=sort ^~current=currentCurrency}}\n                            <label class="radio-with-text{{if key == ~current}} radio-with-text--current{{/if}}">\n                                <input class="j-currency-item" type="radio" name="currency" value=\'{{:key}}\' ">\n                                <span class="radio-with-text__text radio-with-text__text--flag">\n                                    <span class="radio-with-text__language"><span class="radio-with-text__flag flag-{{:prop.locale}}"></span>{{:key}}</span>\n                                    <span class="radio-with-text__name">{{:prop.name}}</span>\n                                </span>\n                            </label>\n                        {{/props}}\n                    {{/radiogroup}}\n                    </div>\n                </div>\n        '
                    }),
                    $.templates.changeCurrencyTmpl.link(n, this),
                    $.link(!0, t, this),
                    $.link(!0, document.querySelector(".nav-element__currency"), this),
                    document.addEventListener("click", e.$helper.delegator(".j-currency-show-popup", ( (e, t) => this.showPopup())))
                }
                var t = e.prototype;
                return t.showPopup = function() {
                    this.currentPopup = wb.popup.showCustomPopup({
                        useHtml: !0,
                        popupClassesList: ["popup-country", "j-popup-country", "shown"],
                        contentClasses: ["popup__content"],
                        useCenteredFunction: !0,
                        modal: !0,
                        closeClass: ["j-close", "popup__close"],
                        closeSelector: ".j-close",
                        onShow: e => $.templates.changeCurrencyTmpl.link(e.querySelector(".popup__content"), this)
                    })
                }
                ,
                t.sort = function(e, t) {
                    return e.key === this.view.data.currentCurrency ? -1 : t.key === this.view.data.currentCurrency ? 1 : 0
                }
                ,
                t.changeCurrency = function(e) {
                    const t = e.target.value;
                    this.mainLayout.$user.setCurrency(t).then(( () => {
                        var e;
                        $.observable(this.mainLayout.$userEnv).setProperty({
                            currency: t
                        }),
                        this.mainLayout.$eventBus.dispatchEvent(new CustomEvent("CurrencyChanged",{
                            detail: {
                                currency: t
                            }
                        })),
                        null === (e = this.currentPopup) || void 0 === e || e.close()
                    }
                    )),
                    this.tooltip || (this.tooltip = document.querySelector(".j-tooltip-country")),
                    this._closeTooltip()
                }
                ,
                t.refresh = function(e) {
                    wb.currencies.info[e] && $.observable(this).setProperty("currentCurrency", e)
                }
                ,
                t._closeTooltip = function() {
                    if (this.tooltip)
                        return this.tooltip.style.pointerEvents = "none",
                        setTimeout(( () => this.tooltip.style.pointerEvents = "auto"), 100)
                }
                ,
                e
            }();
            const S = w;
            let _ = function() {
                function e(e) {
                    this.layoutModel = e.layoutModel,
                    this.shortBasketInfo = new o(e),
                    this.search = new v,
                    this.chatStartedRefunds = new this.layoutModel.$helper.Deferred
                }
                var t = e.prototype;
                return t._initOnlineChat = function(e) {
                    setTimeout(( () => {
                        this.layoutModel.$moduleLoader.loadModuleAsync("onlineChatPopup").then((t => {
                            var n, r;
                            this.onlineChat = new t({
                                auth: e.isAuth,
                                uid: e.isAuth ? e.uid : e.basketUid,
                                startedRefunds: this.chatStartedRefunds
                            }).init(),
                            wb.displayModeSettings.removeObserver(this.onlineChat.onBreakpoint),
                            (null === (r = null === (n = wb.global.settings) || void 0 === n ? void 0 : n.switches) || void 0 === r ? void 0 : r.enableOnlineChat) ? (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                            this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited"))) : wb.global.subscribe(( () => {
                                !this.onlineChat.inited && wb.global.settings.switches.enableOnlineChat && (wb.displayModeSettings.addObserver(this.onlineChat.onBreakpoint, !0),
                                this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("OnlineChatInited")))
                            }
                            )),
                            wb.global.subscribe((e => {
                                const t = e.switches.enableSellersChat;
                                this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("SellersChatSwitched",{
                                    detail: t
                                }))
                            }
                            ))
                        }
                        ))
                    }
                    ), 5e3)
                }
                ,
                t.init = async function() {
                    this.userBalance = new b(this.layoutModel),
                    this.changeCurrency = new S(this.layoutModel),
                    this.shortBasketInfo.init();
                    const e = WbSpaModel.prototype.$geoLocation.initPreferredLocation()
                      , t = this.search.init();
                    this.bindSignOut(),
                    this.bindStat();
                    const n = this.layoutModel.$user.getUserInfo();
                    return this._initOnlineChat(n),
                    this.userBalance.init(n.isAuth),
                    Promise.all([e, t])
                }
                ,
                t.bindSignOut = function() {
                    document.addEventListener("click", (e => {
                        const t = e.target.closest("a");
                        null == t || e._preventRouterTransition || t.href.endsWith("/security/exit") && (e.preventDefault(),
                        this.signOut())
                    }
                    ))
                }
                ,
                t.signOut = function(e) {
                    this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("onBeforeSignOut")),
                    this.layoutModel.$user.clearLocalUserData(),
                    this.layoutModel.$auth.signOut(e)
                }
                ,
                t.bindStat = function() {
                    const e = this.layoutModel.$analitic;
                    const t = document.querySelector(".j-header");
                    null == t || t.addEventListener("click", this.layoutModel.$helper.delegator(".j-wba-header-item", (function(t) {
                        const n = t.target.closest(".j-wba-header-item");
                        n && e.sendEvent("Header_T", {
                            name: n.dataset.wbaHeaderName
                        })
                    }
                    )));
                    const n = document.querySelector(".j-country");
                    null == n || n.addEventListener("click", this.layoutModel.$helper.delegator(".j-country-item input", (function(t) {
                        const n = t.target.closest(".j-country-item input");
                        n && e.sendEvent("Header_Country_Apl", {
                            name: n.value
                        })
                    }
                    )))
                }
                ,
                e
            }();
            const C = _;
            let I = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).bannersLoaded = !1,
                    t.footerBanners = [],
                    t._onChangeDisplayMode = t._onChangeDisplayMode.bind(t),
                    t._loadBanners = t._loadBanners.bind(t),
                    t.$eventBus.addEventListener("GeoUpdated", ( () => {
                        "ru" !== wb.settings.currentLocale && t.$observable.setProperty({
                            userLocale: t.$user.getLocale()
                        }),
                        t._loadBanners(!0)
                    }
                    )),
                    t
                }
                (0,
                s.A)(t, e);
                var n = t.prototype;
                return n.init = async function() {
                    await this.$helper.loadJsAsync(wb.settings.scripts.bannersTag),
                    this.userLocale = "ru" !== wb.settings.currentLocale && this.$user.getLocale() || "ru";
                    const e = document.querySelector(".j-footer");
                    $.link(!0, e, this),
                    this.showFooterObserver = WbSpaModel.prototype.$observerHelper.getVerticalObserver(e),
                    e.addEventListener(this.showFooterObserver.elementInViewportEventName, ( () => {
                        this._loadBanners(),
                        WbSpaModel.prototype.$analitic.sendEvent("Footer_S")
                    }
                    )),
                    this.showFooterObserver.observe()
                }
                ,
                n.onMenuSelected = function(e) {
                    if ("m" !== wb.settings.displayMode)
                        return;
                    e.currentTarget.parentNode.classList.toggle("dropdown-open")
                }
                ,
                n.sendStatEvent = function(e) {
                    const t = e.currentTarget;
                    t && WbSpaModel.prototype.$analitic.sendEvent("Footer_T", {
                        name: t.dataset.wbaFooterName
                    })
                }
                ,
                n._onChangeDisplayMode = function() {
                    this._setBanners()
                }
                ,
                n._setBanners = function() {
                    if (!this.banners)
                        return;
                    const e = "phone" == wb.settings.displayType;
                    $.observable(this).setProperty({
                        footerBanners: e ? this.banners.mobileBanners : this.banners.desktopBanners
                    })
                }
                ,
                n._loadBanners = async function(e) {
                    if (this.bannersLoaded && !e)
                        return;
                    this.bannersLoaded = !0;
                    const [t] = await Promise.all([this.$services.bannersService.getBannersForFooterAsync(), this.$helper.loadJsAsync(wb.settings.scripts.swiper)]);
                    this.banners = t,
                    this._onChangeDisplayMode(),
                    !e && $.observe(wb.settings, "displayType", this._onChangeDisplayMode)
                }
                ,
                t
            }(WbSpaModel);
            const M = I
              , k = Object.freeze({
                UNKNOWN: "unknown",
                HOME: "home",
                CATALOG: "catalog",
                PRODUCTCARD: "product-card",
                SECURITY: "security",
                BASKET: "basket",
                PONED: "poned",
                PROFILE: "profile",
                ARCHIVE: "archive",
                ORDERS: "orders",
                SERVICES: "services",
                CLAIMS: "claims",
                SUBSCRIPTION: "subscription"
            });
            const P = function() {
                function e() {}
                return e.getType = function() {
                    const e = location.pathname.toLowerCase();
                    return "/" == e ? k.HOME : /\/catalog\/\d+\/detail\.aspx/.test(e) ? k.PRODUCTCARD : e.startsWith("/catalog") ? k.CATALOG : e.startsWith("/subscription") ? k.SUBSCRIPTION : e.startsWith("/security") ? k.SECURITY : e.startsWith("/lk/basket") ? k.BASKET : e.startsWith("/lk/favorites") ? k.PONED : e.startsWith("/lk/myorders/archive") ? k.ARCHIVE : e.startsWith("/lk/myorders/delivery") ? k.ORDERS : e.startsWith("/lk/claims") || e.startsWith("/lk/refund") ? k.CLAIMS : e.startsWith("/lk") ? k.PROFILE : e.startsWith("/services/") || e.startsWith("/promo/") || e.startsWith("/presservice") ? k.SERVICES : k.UNKNOWN
                }
                ,
                (0,
                i.A)(e, null, [{
                    key: "types",
                    get: function() {
                        return k
                    }
                }])
            }();
            const T = function(e) {
                function t() {
                    var t, n, r;
                    return (t = e.call(this) || this).navbarContainer = document.querySelector(".j-navbar-mobile"),
                    t.navbarMenuLink = null === (n = t.navbarContainer) || void 0 === n ? void 0 : n.querySelector("#catalogNavbarLink"),
                    t.currentType = P.getType(),
                    t.menuModel = {
                        type: t.currentType,
                        catalogState: !1,
                        router: t.$router,
                        isPremium: !!t.$auth.isAuth && (null === (r = t.$user.getUserGradeFromCache()) || void 0 === r ? void 0 : r.isPremium)
                    },
                    t.catalogState = !1,
                    t
                }
                (0,
                s.A)(t, e);
                var n = t.prototype;
                return n.init = function() {
                    this._bindEvents(),
                    $.link(!0, this.navbarContainer, this.menuModel, {
                        sendAnalytics: e => {
                            const t = e.target.closest(".navbar-mobile__link");
                            t && this.$analitic.sendEvent("Header_T", {
                                name: t.dataset.wbaHeaderName
                            })
                        }
                        ,
                        showPopupLoginMobile: e => {
                            !1 === this.$router.userIsAuth && (e.preventDefault(),
                            wb.popup.showCustomPopup({
                                useHtml: !0,
                                popupClassesList: ["popup-login-mobile", "shown"],
                                contentClasses: ["popup__content"],
                                useCenteredFunction: !0,
                                onShow: e => {
                                    $.views.templates.popupLoginMobile.link(e.querySelector(".popup__content"), this)
                                }
                            }))
                        }
                    })
                }
                ,
                n.setType = function(e) {
                    this.catalogState = e == this.types.CATALOG,
                    this.catalogState ? e = null : this.currentType = e,
                    $.observable(this.menuModel).setProperty({
                        catalogState: this.catalogState,
                        type: e
                    })
                }
                ,
                n.setCatalog = function() {
                    this.setType("catalog")
                }
                ,
                n.isCatalog = function() {
                    return this.catalogState
                }
                ,
                n.isNavbarLink = function(e) {
                    return !!e.closest(".navbar-mobile__link")
                }
                ,
                n.revertActive = function() {
                    this.setType(this.currentType)
                }
                ,
                n.updatePremiumState = function() {
                    var e;
                    $.observable(this.menuModel).setProperty({
                        isPremium: null === (e = this.$user.getUserGradeFromCache()) || void 0 === e ? void 0 : e.isPremium
                    })
                }
                ,
                n.updateBasket = function(e) {
                    $.observable(this.menuModel).setProperty({
                        basketCount: e
                    })
                }
                ,
                n.updateEvents = function(e) {
                    $.observable(this.menuModel).setProperty({
                        eventsModel: e
                    })
                }
                ,
                n._bindEvents = function() {
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished || (this.currentType = P.getType(),
                        this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                            detail: {
                                currentType: this.currentType
                            }
                        })))
                    }
                    )),
                    this.$eventBus.addEventListener("OnlineChatInited", (e => {
                        this.$eventBus.dispatchEvent(new CustomEvent("MobileMenuTypeChange",{
                            detail: {
                                currentType: this.currentType,
                                isInit: !0
                            }
                        }))
                    }
                    )),
                    this.$eventBus.addEventListener("MobileMenuTypeChange", (e => {
                        const {currentType: t} = e.detail;
                        let n = "";
                        switch (t) {
                        case P.types.HOME:
                        case P.types.BASKET:
                        case P.types.PONED:
                        case P.types.ARCHIVE:
                        case P.types.ORDERS:
                        case P.types.PROFILE:
                        case P.types.SUBSCRIPTION:
                            n = t;
                            break;
                        case P.types.SECURITY:
                            n = P.types.PROFILE
                        }
                        this.setType(n)
                    }
                    )),
                    this.$eventBus.addEventListener("UserGradeUpdated", this.updatePremiumState.bind(this))
                }
                ,
                (0,
                i.A)(t, [{
                    key: "menuLink",
                    get: function() {
                        return this.navbarMenuLink
                    }
                }, {
                    key: "types",
                    get: function() {
                        return P.types
                    }
                }])
            }(WbSpaModel);
            const A = function() {
                function e(e) {
                    this.delay = e.delay,
                    this.menuContainer = e.menuContainer,
                    this.timerId = null,
                    this.updateFirstLvlMenuTask = null,
                    this.success = !1,
                    this.menuItemsUpdated = null
                }
                var t = e.prototype;
                return t.lazyUpdateMenu = function() {
                    this.timerId = setTimeout(this._setUpdateFirstLvlMenuTask.bind(this), this.delay)
                }
                ,
                t.forceUpdateMenu = async function() {
                    this._setUpdateFirstLvlMenuTask();
                    try {
                        const e = await this.updateFirstLvlMenuTask;
                        return Promise.resolve(e)
                    } catch (e) {
                        return Promise.reject(!1)
                    }
                }
                ,
                t.reloadMenu = function() {
                    this.updateFirstLvlMenuTask = null,
                    this.forceUpdateMenu()
                }
                ,
                t._stopUpdatingMenu = function() {
                    this.timerId && clearTimeout(this.timerId)
                }
                ,
                t._setUpdateFirstLvlMenuTask = function() {
                    this.updateFirstLvlMenuTask && this.success || (this.updateFirstLvlMenuTask = this._updateFirstLvlMenu()),
                    this._stopUpdatingMenu()
                }
                ,
                t._updateFirstLvlMenu = async function() {
                    const [e] = await Promise.all([wb.spa.getCatalogMenu(), $.views.loadTemplateDictionaryAsync("menuTopTmpl")])
                      , t = e.fullMenu;
                    return this.menuItemsUpdated = await this._addMenuItemsFirstLvl(t, this.menuContainer),
                    this.success = !0,
                    Promise.resolve(e)
                }
                ,
                t._addMenuItemsFirstLvl = async function(e, t) {
                    var n;
                    const r = t.querySelector(".menu-burger__main-list");
                    let s = r.querySelectorAll(".j-menu-main-item")
                      , o = null
                      , i = !0
                      , a = 0;
                    for (let t = 0; t < e.length; t++) {
                        const l = e[t];
                        if (i && (o = null == s ? void 0 : s[a]),
                        l.id == (null === (n = null == o ? void 0 : o.dataset) || void 0 === n ? void 0 : n.menuId)) {
                            i = !0,
                            a++;
                            continue
                        }
                        i = !1;
                        const c = $.templates.menuFirstLvlTmpl.render(l);
                        o ? o.insertAdjacentHTML("beforebegin", c) : r.insertAdjacentHTML("beforeend", c)
                    }
                    if (s = t.querySelectorAll(".j-menu-main-item"),
                    e.length < s.length)
                        for (let t = e.length; t < s.length; t++)
                            s[t].remove();
                    return Promise.resolve(s)
                }
                ,
                e
            }();
            let O = function(e) {
                function t(t) {
                    var n;
                    return (n = e.call(this) || this).mobileMenu = new T,
                    n.layoutModel = t.layoutModel,
                    n.menuBtn = document.querySelector(".j-menu-burger-btn"),
                    n.menuContainer = document.querySelector(".j-menu-burger"),
                    n.mainMenuContainer = n.menuContainer.querySelector(".j-menu-burger-main"),
                    n.header = document.querySelector(".j-header"),
                    n.widthScrollbar = Math.abs(window.innerWidth - document.documentElement.clientWidth),
                    n.bodyOverflowClass = "body--overflow",
                    n.menuContainerActiveClass = "menu-burger--active",
                    n.innerMenuContainerActiveClass = "menu-burger__drop--active",
                    n.innerMenuItemActiveClass = "menu-burger__drop-list-item--active",
                    n.menuActiveClass = "j-menu-active",
                    n.mainMenuItemActiveClass = "menu-burger__main-list-item--active",
                    n.headerFixedClass = "header--fixed",
                    n.headerFixedAnimateClass = "header--fixed-animate",
                    n.menuItemActiveClass = "menu-burger__drop-list-item--active",
                    n.menuBtnCloseClass = "nav-element__burger--close",
                    n.menuOverlay = n._getMenuOverlay(document.body.querySelector(".j-menu-burger")),
                    n._menuOpenHandler = n._menuOpenHandler.bind(n),
                    n._menuCloseHandler = n._menuCloseHandler.bind(n),
                    n.firstLvlMenuUpdater = new A({
                        menuContainer: n.menuContainer,
                        delay: 12e3
                    }),
                    n.firstLvlMenuUpdater.lazyUpdateMenu(),
                    n
                }
                (0,
                s.A)(t, e);
                var n = t.prototype;
                return n.isMenuOpened = function() {
                    return this.menuContainer.classList.contains(this.menuContainerActiveClass)
                }
                ,
                n.init = function() {
                    this.mobileMenu.init(),
                    this._bindEvents(),
                    this._initMobileSearchbar(!this.$isDesktop)
                }
                ,
                n._initMobileSearchbar = function(e) {
                    const t = this.mobileMenu.types;
                    let n = 0
                      , r = !1
                      , s = "";
                    function o() {
                        r || (window.requestAnimationFrame(a.bind(this)),
                        r = !0)
                    }
                    o = o.bind(this);
                    const i = (e, t) => {
                        e ? (this.header.classList.add(this.headerFixedClass),
                        window.requestAnimationFrame(( () => this.header.classList.add(this.headerFixedAnimateClass)))) : (t && this.header.classList.remove(this.headerFixedClass),
                        window.requestAnimationFrame(( () => this.header.classList.remove(this.headerFixedAnimateClass))))
                    }
                    ;
                    function a() {
                        const e = window.scrollY;
                        if (Math.abs(e - n) < 0)
                            return void (r = !1);
                        if (e <= this.headerFixedScrollTop)
                            return i(!1, !0),
                            void (r = !1);
                        const t = e > n;
                        t && "down" != s ? (this.$isDesktop ? i(!0) : i(!1),
                        s = "down") : t || "up" == s || (i(!0),
                        s = "up"),
                        n = e > 0 ? e : 0,
                        r = !1
                    }
                    const l = e => {
                        const {currentType: n} = e.detail;
                        n == t.PRODUCTCARD ? this.header.classList.add("hide-mobile") : this.header.classList.remove("hide-mobile"),
                        n == t.HOME || n == t.SERVICES ? window.addEventListener("scroll", o) : (this.header.classList.remove(this.headerFixedClass, this.headerFixedAnimateClass),
                        window.removeEventListener("scroll", o))
                    }
                    ;
                    this.$eventBus.addEventListener("MobileMenuTypeChange", l);
                    l({
                        detail: {
                            currentType: P.getType()
                        }
                    })
                }
                ,
                n._renderInnerMenu = async function() {
                    var e, t;
                    const [n,r,s] = await Promise.all([this.layoutModel.$moduleLoader.loadModuleAsync("sideMenu"), this.firstLvlMenuUpdater.forceUpdateMenu()])
                      , o = this.layoutModel.$services.bannersService.getMenuBanners()
                      , i = new n(this.menuContainer,r,o);
                    return i.checkMenuItemForHide(i.menuItems, null === (t = null === (e = this.$geoLocation) || void 0 === e ? void 0 : e.location) || void 0 === t ? void 0 : t.destinations),
                    i.relinkModel(),
                    i.onSearchImage = () => this._onMenuHide(),
                    i
                }
                ,
                n._bindEvents = function() {
                    var e, t, n;
                    this.menuBtn.addEventListener("mousedown", this._menuOpenHandler),
                    null === (t = null === (e = this.mobileMenu) || void 0 === e ? void 0 : e.menuLink) || void 0 === t || t.addEventListener("mousedown", this._menuOpenHandler),
                    null === (n = wb.displayModeSettings) || void 0 === n || n.addObserver(( () => {
                        this._onMenuHide(),
                        this._initMobileSearchbar(!this.$isDesktop)
                    }
                    )),
                    window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this._onMenuHide()
                    }
                    )),
                    this.$eventBus.addEventListener("HideSideMenu", ( () => {
                        this.isMenuOpened() && (document.body.classList.remove(this.bodyOverflowClass),
                        document.body.style.paddingRight = "")
                    }
                    )),
                    this.$eventBus.addEventListener("SelectedSideMenuItemUpdated", (e => {
                        const {menuId: t} = e.detail;
                        this.mainMenuItems.forEach((e => e.classList.toggle(this.mainMenuItemActiveClass, e.dataset.menuId == t)))
                    }
                    ))
                }
                ,
                n._bindMenuCloseHandlers = function() {
                    document.addEventListener("mousedown", this._menuCloseHandler)
                }
                ,
                n._unbindMenuCloseHandlers = function() {
                    document.removeEventListener("mousedown", this._menuCloseHandler)
                }
                ,
                n._menuOpenHandler = function(e) {
                    if (this.isMenuOpened() || !this.$isDesktop && this.mobileMenu.isCatalog())
                        return;
                    e.stopPropagation(),
                    e.preventDefault();
                    const t = e.currentTarget;
                    let n = "touchstart" === e.type ? "touchend" : "mouseup";
                    const r = () => {
                        t.removeEventListener(n, r),
                        this.layoutModel.$helper.loadCssAsync(wb.settings.styles.menuBurger).then(( () => this._onMenuShow()))
                    }
                    ;
                    t.addEventListener(n, r),
                    this.visibleCertItemMenu && wb.analitics.sendEvent("Certificate_S", {
                        location: "Catalog"
                    })
                }
                ,
                n._menuCloseHandler = function(e) {
                    var t;
                    const n = e.target
                      , r = this;
                    if (!(this.$isDesktop && n.closest(`.${this.menuActiveClass}`) || !this.$isDesktop && !this.mobileMenu.isNavbarLink(n) && !this.menuBtn.contains(n)))
                        if (this.$isDesktop) {
                            const o = e.currentTarget
                              , i = "touchstart" === e.type ? "touchend" : "mouseup";
                            function a() {
                                o.removeEventListener(i, a),
                                s()
                            }
                            o.addEventListener(i, a)
                        } else
                            null === (t = this.sideMenu) || void 0 === t || t.touchHandlerHelper(e, s);
                    function s() {
                        r._onMenuHide()
                    }
                }
                ,
                n.refreshMenu = function(e) {
                    e && (wb.spa.clearCatalogMenu(),
                    this.firstLvlMenuUpdater.reloadMenu()),
                    this.menuRendered = !1,
                    !this.$isDesktop && this.isMenuOpened() && this._onMenuShow()
                }
                ,
                n._onMenuShow = async function() {
                    var e;
                    if (document.body.classList.add(this.bodyOverflowClass),
                    document.body.style.paddingRight = `${this.widthScrollbar}px`,
                    "d" === wb.settings.displayMode && scrollY <= this.header.offsetHeight && document.documentElement.style.setProperty("--scroll-top", window.scrollY + "px"),
                    this.menuContainer.classList.add(this.menuContainerActiveClass),
                    this.mainMenuContainer.classList.add(this.menuActiveClass),
                    this.menuBtn.classList.add(this.menuBtnCloseClass),
                    this.menuOverlay.show(),
                    !this.$isDesktop && this.mobileMenu.setCatalog(),
                    this._bindMenuCloseHandlers(),
                    this.menuRendered)
                        null === (e = this.sideMenu) || void 0 === e || e.clearShownBanners();
                    else {
                        const e = await this._renderInnerMenu();
                        this.sideMenu = e,
                        this.mainMenuItems.forEach((e => {
                            var t, n, r;
                            if (!this.$isDesktop && ("2192" === e.dataset.id || "4853" === e.dataset.id))
                                return;
                            const s = this.sideMenu.findItem(e.dataset.menuId);
                            s && (((null === (t = s.childs) || void 0 === t ? void 0 : t.length) > 0 || (null === (n = s.banners) || void 0 === n ? void 0 : n.length) > 0) && e.classList.add("menu-burger__main-list-item--subcategory"),
                            e.classList.toggle("hide", null !== (r = s.hide) && void 0 !== r && r),
                            1234 === s.id && (this.visibleCertItemMenu = !0,
                            wb.analitics.sendEvent("Certificate_S", {
                                location: "Catalog"
                            })))
                        }
                        )),
                        this.menuRendered = !0
                    }
                    this._menuMainHoverHandler()
                }
                ,
                n._onMenuHide = function() {
                    var e, t;
                    null === (e = this.sideMenu) || void 0 === e || e.changeSelectedMenuItem(null),
                    null === (t = this.sideMenu) || void 0 === t || t.innerMenuHide(),
                    document.body.classList.remove(this.bodyOverflowClass),
                    document.body.style.paddingRight = "",
                    this.menuContainer.classList.remove(this.menuContainerActiveClass),
                    this.mainMenuContainer.classList.remove(this.menuActiveClass),
                    this.menuBtn.classList.remove(this.menuBtnCloseClass),
                    this.menuOverlay.hide(),
                    !this.$isDesktop && this.mobileMenu.revertActive(),
                    this._unbindMenuCloseHandlers()
                }
                ,
                n._menuMainHoverHandler = function() {
                    !this.subMenuShowerActivated && this.$isDesktop && (this.layoutModel.$moduleLoader.loadModuleAsync("subMenuShower").then((e => new e(this.mainMenuItems,{
                        over: e => {
                            this.$isDesktop && this.sideMenu.onMenuSelected(e)
                        }
                        ,
                        out: () => {}
                        ,
                        timeout: 30,
                        interval: 40,
                        sensitivity: 4
                    }))),
                    this.subMenuShowerActivated = !0)
                }
                ,
                n._getMenuOverlay = function(e) {
                    const t = e;
                    let n;
                    function r() {
                        n && n.remove(),
                        n = null
                    }
                    return {
                        show: function() {
                            "m" != wb.settings.displayMode ? n || (t.insertAdjacentHTML("beforebegin", '<div class="overlay overlay--menu-burger j-overlay"></div>'),
                            n = e.parentElement.querySelector(".j-overlay")) : r()
                        },
                        hide: r
                    }
                }
                ,
                (0,
                i.A)(t, [{
                    key: "headerFixedScrollTop",
                    get: function() {
                        return this.$isDesktop ? 24 : 400
                    }
                }, {
                    key: "mainMenuItems",
                    get: function() {
                        var e;
                        return (null === (e = this.firstLvlMenuUpdater) || void 0 === e ? void 0 : e.menuItemsUpdated) ? this.firstLvlMenuUpdater.menuItemsUpdated : this.menuContainer.querySelectorAll(".menu-burger__main-list-item")
                    }
                }])
            }(WbSpaModel);
            const D = O
              , E = "cookie_accepted"
              , B = "_cp";
            const x = function() {
                function e(e) {
                    this.layoutModel = e.layoutModel,
                    this.cookiesWrapper = document.querySelector(".j-fixed-block .fixed-block__cookies"),
                    this.check()
                }
                var t = e.prototype;
                return t.disable = function() {
                    wb.cookieHelper.deleteCookie(B),
                    window.location.reload()
                }
                ,
                t._show = function() {
                    var e;
                    (null === (e = this.cookiesWrapper) || void 0 === e ? void 0 : e.classList.contains("hide")) && ($.link(!0, this.cookiesWrapper, this),
                    this.cookiesWrapper.classList.remove("hide"),
                    this.layoutModel.$analitic.sendEvent("Alert_S", {
                        name: "cookies_alert"
                    }),
                    window.BroadcastChannel && (this.channel = new BroadcastChannel("_cookiePolicy"),
                    this.channel.addEventListener("message", this._hide.bind(this))))
                }
                ,
                t._hide = function() {
                    var e, t, n;
                    (null === (e = this.cookiesWrapper) || void 0 === e ? void 0 : e.classList.contains("hide")) || (null === (t = this.cookiesWrapper) || void 0 === t || t.classList.add("hide"),
                    $.unlink(this.cookiesWrapper),
                    null === (n = this.channel) || void 0 === n || n.close(),
                    this.channel = null,
                    this.layoutModel.$eventBus.dispatchEvent(new CustomEvent("CookiePolicyHide")))
                }
                ,
                t.check = function() {
                    const e = "1" === wb.cookieHelper.getCookie(B) || "true" === localStorage.getItem("wbx__cookieAccepted");
                    return e ? this._hide() : "false" !== sessionStorage.getItem(E) && this._show(),
                    e
                }
                ,
                t.ok = function() {
                    var e;
                    const t = this.check();
                    t || wb.cookieHelper.setCookie(B, "1", {
                        "max-age": 7776e3
                    }),
                    this.cookiesWrapper && (null === (e = this.channel) || void 0 === e || e.postMessage("hide"),
                    this._hide(),
                    t || this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "ok"
                    }))
                }
                ,
                t.no = function() {
                    sessionStorage.setItem(E, "false"),
                    this._hide(),
                    this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "no"
                    })
                }
                ,
                t.cookies = function() {
                    this.layoutModel.$analitic.sendEvent("Alert_T", {
                        name: "cookies_alert",
                        type: "cookies"
                    })
                }
                ,
                e
            }();
            let j = function() {
                function e(e) {
                    this.$base = e.layoutModel,
                    this.$base.$eventBus.addEventListener("onUserAuth", this._onAuthLogin.bind(this)),
                    this.$base.$auth.isAuth && window.addEventListener("spaTransition", (e => {
                        e.detail.isFinished && this._onAuthLogin()
                    }
                    ), {
                        once: !0
                    })
                }
                var t = e.prototype;
                return t._loadResources = function() {
                    return this.$base.$moduleLoader.loadModuleAsync("offer0724").then((e => {
                        this.oferta || (this.oferta = new e)
                    }
                    ))
                }
                ,
                t._onAuthLogin = function() {
                    this._loadResources().then((e => {
                        this.oferta.show()
                    }
                    ))
                }
                ,
                t.confirm = async function() {
                    var e;
                    this.$base.$auth.isAuth && (await this._loadResources(),
                    null === (e = this.oferta) || void 0 === e || e.confirm())
                }
                ,
                t.promise = async function() {
                    var e;
                    if (this.$base.$auth.isAuth)
                        return await this._loadResources(),
                        (null === (e = this.oferta) || void 0 === e ? void 0 : e.promise()) || new Promise((e => e()))
                }
                ,
                e
            }();
            const L = j;
            let U = function(e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).initTask = new t.$helper.Deferred,
                    t._initWba = t._initWba.bind(t),
                    t
                }
                (0,
                s.A)(t, e);
                var n = t.prototype;
                return n.preInit = function() {
                    const e = {
                        layoutModel: this
                    };
                    this.header = new C(e),
                    this.oferta = new L(e),
                    this.cookiePolicy = new x(e),
                    ["by"].includes(wb.settings.currentLocale) ? this.cookiePolicy.check() ? this._initWba() : (this._initWba(!0),
                    this.$eventBus.addEventListener("CookiePolicyHide", ( () => this._initWba()), {
                        once: !0
                    })) : this._initWba()
                }
                ,
                n.init = function() {
                    const e = {
                        layoutModel: this
                    };
                    this.footer = new M,
                    this.menuTop = new D(e),
                    this.menuTop.init();
                    const t = this.footer.init()
                      , n = this.header.init();
                    Promise.all([t, n]).then(( () => this.initTask.resolve()))
                }
                ,
                n._initWba = function(e=!1) {
                    var t, n, r, s, o, i;
                    t = window,
                    n = document,
                    r = "script",
                    t[s = "wba"] = t[s] || function() {
                        (t[s].q = t[s].q || []).push(arguments)
                    }
                    ,
                    t[s].l = Date.now(),
                    e || (o = n.createElement(r),
                    i = n.getElementsByTagName(r)[0],
                    o.async = 1,
                    o.src = "https://a.wb.ru/sdk/sdk.js",
                    i.parentNode.insertBefore(o, i)),
                    wba("init", {
                        counterId: 4
                    })
                }
                ,
                n.updateAfterLogin = function() {
                    this.$user.reset(),
                    this.header.shortBasketInfo.update(),
                    this.$geoLocation.updateLocation(),
                    this.$router.clearNotActiveContainer()
                }
                ,
                t
            }(WbSpaModel);
            Object.defineProperties(window, {
                MainLayoutSpa: {
                    value: U
                }
            });
            const F = U
        }
        ,
        14196: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => a
            });
            const r = "spa_history";
            new Set;
            let s = function() {
                function e() {
                    this.history = new o
                }
                var t = e.prototype;
                return t.addItem = function(e) {
                    this.history.push(e),
                    this._updateCache()
                }
                ,
                t.tryInitFromCache = function(e) {
                    const t = sessionStorage.getObject(r);
                    return t && e && this.history.tryRevokeFromCache(t) && this.history.findCurrent(e),
                    this
                }
                ,
                t.updateCurrent = function(e) {
                    this.history.findCurrent(e)
                }
                ,
                t.updateCurrentItem = function(e) {
                    this.history.tryUpdateCurrrent(e) || this.history.push(e),
                    this._updateCache()
                }
                ,
                t.canMove = function(e) {
                    return this.history.canMove(e)
                }
                ,
                t._updateCache = function() {
                    sessionStorage.putObject(r, this.history)
                }
                ,
                e.generateId = function() {
                    return WbSpaModel.prototype.$generateGuid()
                }
                ,
                e
            }()
              , o = function() {
                function e() {
                    this.head = null,
                    this.current = null
                }
                var t = e.prototype;
                return t.push = function(e) {
                    const t = new i(e,this.current);
                    null == this.head || null == this.current ? this.head = t : this.current.updateNext(t),
                    this.current = t
                }
                ,
                t.tryUpdateCurrrent = function(e) {
                    return null != this.current && (this.current.update(e),
                    !0)
                }
                ,
                t.findCurrent = function(e) {
                    const {id: t} = e;
                    let n = this.head;
                    for (; n; ) {
                        if (n.state.id == t) {
                            this.current = n;
                            break
                        }
                        n = n.next
                    }
                }
                ,
                t.tryRevokeFromCache = function(e) {
                    const t = e.reduce(( (e, t) => (e.set(t.state, new i(t.state)),
                    e)), new Map);
                    e.forEach((e => {
                        const n = t.get(e.state);
                        if (e.next) {
                            const r = t.find((t => t.state.id == e.next));
                            n.updateNext(r)
                        }
                        if (e.previous) {
                            const r = t.find((t => t.state.id == e.previous));
                            n.updatePrevious(r)
                        }
                    }
                    ));
                    const n = t.find((e => null == e.previous));
                    return !!n && (this.head = n,
                    !0)
                }
                ,
                t.toJSON = function() {
                    var e, t;
                    let n = this.head;
                    const r = [];
                    for (; n; )
                        r.push({
                            state: n.state,
                            next: null === (e = n.next) || void 0 === e ? void 0 : e.state.id,
                            previous: null === (t = n.previous) || void 0 === t ? void 0 : t.state.id
                        }),
                        n = n.next;
                    return r
                }
                ,
                t.canMove = function(e) {
                    let t = this.current
                      , n = e > 0 ? -1 : 1
                      , r = e > 0 ? "next" : "previous"
                      , s = e;
                    for (; 0 != s; )
                        if (t = t[r],
                        s += n,
                        null == t)
                            return;
                    return !0
                }
                ,
                e
            }()
              , i = function() {
                function e(e, t) {
                    this.state = e,
                    this.previous = t,
                    this.next = null
                }
                var t = e.prototype;
                return t.updateNext = function(e) {
                    this.next = e
                }
                ,
                t.updatePrevious = function(e) {
                    this.previous = e
                }
                ,
                t.update = function(e) {
                    this.state = e
                }
                ,
                e
            }();
            const a = s
        }
        ,
        30694: (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
            "use strict";
            __webpack_require__.d(__webpack_exports__, {
                A: () => __WEBPACK_DEFAULT_EXPORT__
            });
            var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92901)
              , _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14196)
              , __rest = function(e, t) {
                var n = {};
                for (var r in e)
                    Object.prototype.hasOwnProperty.call(e, r) && t.indexOf(r) < 0 && (n[r] = e[r]);
                if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                    var s = 0;
                    for (r = Object.getOwnPropertySymbols(e); s < r.length; s++)
                        t.indexOf(r[s]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[s]) && (n[r[s]] = e[r[s]])
                }
                return n
            };
            const DEFAULT_PREVIEW = "preview_General"
              , APP_CONTAINERS = Object.freeze([{
                containerId: 0,
                viewModel: null
            }, {
                containerId: 1,
                viewModel: null
            }, {
                containerId: 2,
                viewModel: null
            }])
              , VIEW_MODEL_STATUSES = Object.freeze({
                prepearing: 0,
                readyToInstall: 1,
                installed: 2,
                destroyed: 3
            })
              , VALID_EXTERNAL_DOMAINS = Object.freeze(["vmeste.wildberries.ru", "vmeste-stage.wildberries.ru", "digital.wildberries.ru", "vsemrabota.ru", "guru.wildberries.ru", "guru-stage.wildberries.ru", "travel.wildberries.ru", "digital.wb.ru", "seller.wildberries.ru"]);
            let Router = function() {
                function Router() {}
                var _proto = Router.prototype;
                return _proto.init = async function(e) {
                    var t, n;
                    this.customHistory = (new _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A).tryInitFromCache(window.history.state),
                    this.abortController = new AbortController,
                    this.routeParameters = {},
                    this.clientRenderInited = !1,
                    this.referrer = document.referrer,
                    Object.defineProperty(document, "referrer", {
                        get: function() {
                            return WbSpaModel.prototype.$router.referrer
                        }
                    });
                    let r = null === (t = this._findRoute(window.location.pathname)) || void 0 === t ? void 0 : t.name;
                    if (!r) {
                        try {
                            const e = await this.$httpClient.fetchJSON(`/webapi/check-redirect${window.location.pathname}${window.location.search}`);
                            (null == e ? void 0 : e.redirect) && (r = null === (n = this._findRoute(window.location.pathname)) || void 0 === n ? void 0 : n.name)
                        } catch (e) {}
                        if (!r)
                            return this._bindEvents(),
                            this.moveTo404Async()
                    }
                    this.currentRoute = this.routesDictionary[r],
                    this.targetRoute = r,
                    this._bindEvents();
                    const s = this.routesDictionary[r].useSSR;
                    return s || (this.current = $.templates["preview_" + r] ? "preview_" + r : DEFAULT_PREVIEW),
                    this._replaceState({
                        name: r
                    }, document.title, window.location.href),
                    this.loadingTemplate = r,
                    s && null != e ? this._initSSR(e, r) : this._routerTransitionAsync(r, window.location, !0).then(( ({needStateUpdate: e}) => Promise.resolve(e))).catch((e => (console.log(e),
                    e.isCancelled || this.moveTo500Async(),
                    Promise.resolve())))
                }
                ,
                _proto.setData = function(e, t) {
                    this.routesDictionary = e,
                    this.tmplHashes = t
                }
                ,
                _proto.refresh = function() {
                    const e = this.currentRoute;
                    this.clearNotActiveContainer(),
                    this.goToRoute(e, window.location, !0)
                }
                ,
                _proto.clearNotActiveContainer = function() {
                    this.appContainers.filter((e => e.containerId !== this.activeContainer)).forEach((e => {
                        var t, n;
                        null !== e.viewModel && ((null === (t = e.viewModel) || void 0 === t ? void 0 : t.__modelStatus__) != VIEW_MODEL_STATUSES.destroyed && (null === (n = e.viewModel) || void 0 === n || n.onBeforeUnrender()),
                        e.viewModel = null)
                    }
                    ))
                }
                ,
                _proto.move = function(e, t) {
                    var n;
                    null == (null === (n = null == t ? void 0 : t.currentTarget) || void 0 === n ? void 0 : n.href) ? window.history.go(e) : this.customHistory.canMove(e) && (t.preventDefault(),
                    window.history.go(e))
                }
                ,
                _proto.moveTo = function(e, t=!1, n=!1, r=!1) {
                    var s, o, i;
                    let a;
                    try {
                        a = new URL(e,window.location.origin)
                    } catch (e) {
                        return !1
                    }
                    if ("javascript:" === a.protocol)
                        return !1;
                    if (VALID_EXTERNAL_DOMAINS.includes(a.host))
                        return window.location = a.toString(),
                        !1;
                    const l = this._findRoute(a.pathname);
                    if (null == l || null == this.routesDictionary[l.name] || a.hostname !== window.location.host)
                        return this.isLeaving = !0,
                        t ? window.location.replace(encodeURIComponent(e)) : window.location = e;
                    this.isLeaving = !1,
                    (null === (s = this.currentRoute) || void 0 === s ? void 0 : s.name) === l.name && window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !0,
                            dest: l
                        }
                    })),
                    a.pathname !== window.location.pathname || window.location.search !== a.search || n ? (this.targetRoute = l.name,
                    this.referrer = window.location.href,
                    t ? this._replaceState({
                        name: l.name
                    }, document.title, a.href) : this._pushState({
                        name: l.name
                    }, document.title, a.href),
                    this.goToRoute(l, a, r).then((e => {
                        e && this._replaceState({
                            name: l.name
                        }, document.title, a.href)
                    }
                    )).catch(( () => {}
                    ))) : null === (i = null === (o = this.viewModel) || void 0 === o ? void 0 : o.onSamePageNavigation) || void 0 === i || i.call(o, e)
                }
                ,
                _proto.goToRoute = function(e, t, n=!1) {
                    return window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !1,
                            dest: e
                        }
                    })),
                    this._routerTransitionAsync(e.name, t, !1, n, !0)
                }
                ,
                _proto.getAppliedEntries = function() {
                    var e;
                    let t;
                    return "currentScript"in document && (null === (e = document.currentScript) || void 0 === e ? void 0 : e.src) ? (t = document.currentScript.src.replace(/https?:/, ""),
                    window._debug && (t = t.substring(t.indexOf("/j/")))) : t = this.routesDictionary[this.loadingTemplate].requiredModel,
                    Object.keys(this.routesDictionary).filter((e => this.routesDictionary[e].requiredModel === t))
                }
                ,
                _proto.prepareUrl = function(e) {
                    if (null == e.routePathSegments)
                        return e.path;
                    const t = e.routePathSegments.reduce(( (e, t) => (e += "/",
                    t.isParameter ? (!t.isOptional || t.isOptional && null != this.routeParameters[t.name]) && (e += this.routeParameters[t.name]) : e += t.content,
                    e)), "").replace(/[\/\?]$/, "");
                    return e.externalPath ? e.externalPath + t : t
                }
                ,
                _proto.addState = function(e, t, n) {
                    var r;
                    this._pushState(Object.assign({
                        isLocalHandler: !0,
                        name: (null === (r = this.currentRoute) || void 0 === r ? void 0 : r.name) || ""
                    }, e), t, n)
                }
                ,
                _proto.replaceState = function(e, t, n) {
                    var r;
                    this._replaceState(Object.assign({
                        isLocalHandler: !0,
                        name: (null === (r = this.currentRoute) || void 0 === r ? void 0 : r.name) || ""
                    }, e), t, n)
                }
                ,
                _proto._pushState = function(e, t, n) {
                    const r = _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A.generateId();
                    e.id = r,
                    window.history.pushState(e, t, n),
                    this.customHistory.addItem(e)
                }
                ,
                _proto._replaceState = function(e, t, n) {
                    e.id = _customHistory_customHistory__WEBPACK_IMPORTED_MODULE_0__.A.generateId(),
                    e.title = t,
                    window.history.replaceState(e, "", n),
                    this.customHistory.updateCurrentItem(e)
                }
                ,
                _proto.initCSR = function() {
                    const e = Object.create(WbSpaModel.prototype, {
                        router: {
                            value: this
                        }
                    });
                    $.link.appTemplate("#app", e),
                    this.clientRenderInited = !0
                }
                ,
                _proto.updateRouteDataExternal = async function(e, t) {
                    var n;
                    t = t || (null === (n = this.currentRoute) || void 0 === n ? void 0 : n.name) || "",
                    await this._updateRouteData(t, e)
                }
                ,
                _proto.moveTo404Async = async function() {
                    const e = await this.$moduleLoader.loadModuleAsync("error404")
                      , t = new e(e.data,e.template);
                    await t.showErrorPage(),
                    window.dispatchEvent(new CustomEvent("spaTransition",{
                        detail: {
                            isFinished: !0
                        }
                    }))
                }
                ,
                _proto.moveTo500Async = async function(e, t) {
                    try {
                        await Promise.all([this.$helper.loadCssAsync(wb.settings.styles.error500), this.$helper.loadJsAsync(wb.settings.scripts.spaRecommendationCarousel)]),
                        this._updateRouteData("criticalError")
                    } catch (e) {
                        console.error(e),
                        this._updateRouteData("absoluteCriticalError")
                    } finally {
                        wb.spa.logError(e, t, !0)
                    }
                }
                ,
                _proto.loadRouteDataAsync = async function(e, t=0, n=!1, r=!1) {
                    var s, o, i, a, l;
                    const c = this.$routeExtensions.extend(null == e ? void 0 : e.name);
                    let u;
                    try {
                        if (!e)
                            return {
                                viewData: {},
                                needStateUpdate: !1
                            };
                        u = {
                            url: new URL(`${this.prepareUrl(e)}?${this.queryParams.toString()}`,window.location.origin),
                            params: {
                                method: "POST"
                            },
                            options: {
                                redirectUnauth: !0,
                                replaceState: !0,
                                includeResponse: !0
                            }
                        },
                        await Promise.all((null !== (s = null == c ? void 0 : c.pipelines) && void 0 !== s ? s : []).map((e => {
                            var n;
                            return null === (n = e.onBeforeActionExecuting) || void 0 === n ? void 0 : n.call(e, u.url, u.params, u.options, r, t)
                        }
                        )));
                        const n = [];
                        u.options.cancelRequest || u.options.redirected ? n.push(Promise.resolve({})) : n.push(this.$httpClient.fetchJSON(u.url.toString(), u.params, u.options)),
                        n.push(...(null !== (o = null == c ? void 0 : c.pipelines) && void 0 !== o ? o : []).map((e => {
                            var n;
                            return null === (n = e.onActionExecuting) || void 0 === n ? void 0 : n.call(e, u.url, u.params, u.options, r, t)
                        }
                        )));
                        const [l] = await Promise.all(n);
                        u.options.redirected || await Promise.all((null !== (i = null == c ? void 0 : c.pipelines) && void 0 !== i ? i : []).map((e => {
                            var t;
                            return null === (t = e.onActionExecuted) || void 0 === t ? void 0 : t.call(e, l, r)
                        }
                        )));
                        let d = l.responseData;
                        return u.options.cancelRequest && (null == c ? void 0 : c.fallback) && (d = null == c ? void 0 : c.fallback(u)),
                        {
                            viewData: d,
                            needStateUpdate: !1,
                            needRouteUpdate: !(null !== (a = u.options.redirected) && void 0 !== a && a)
                        }
                    } catch (r) {
                        const s = null !== (l = c.maxTriesCount) && void 0 !== l ? l : 3;
                        if (r.isNotFound || r.isUnauthorize || r.isCancelled || t >= s || n) {
                            if ((null == c ? void 0 : c.fallback) && (r.isCancelled || t >= s))
                                return {
                                    viewData: null == c ? void 0 : c.fallback(u),
                                    needStateUpdate: !1
                                };
                            throw r
                        }
                        return await this.loadRouteDataAsync(e, ++t)
                    }
                }
                ,
                _proto.moveToSignIn = function(e, t) {
                    let n = $.views.helpers.urlSignIn(e && e.query && e.query.returnUrl);
                    this.moveTo(new URL(n,window.location.href).href, t)
                }
                ,
                _proto._bindEvents = function() {
                    window.addEventListener("popstate", (e => {
                        var t, n, r;
                        this.$analitic.updateStatInfo(!1);
                        const {name: s, isLocalHandler: o, title: i} = history.state;
                        if (i && (document.title = i),
                        null != this.routesDictionary[s]) {
                            if (this.customHistory.updateCurrent(history.state),
                            window.dispatchEvent(new CustomEvent("spaTransition",{
                                detail: {
                                    isFinished: !1,
                                    dest: {
                                        name: s
                                    }
                                }
                            })),
                            o && (null === (t = this.currentRoute) || void 0 === t ? void 0 : t.name) == s)
                                return this._updateRouteParametres(window.location.pathname.substring(1), this.currentRoute),
                                this._updateQueryModel(),
                                null === (r = null === (n = this.viewModel) || void 0 === n ? void 0 : n.onHistoryChange) || void 0 === r || r.call(n, history.state, null, {
                                    fromPopstate: !0
                                }, this.abortController.signal),
                                void window.dispatchEvent(new CustomEvent("spaTransition",{
                                    detail: {
                                        isFinished: !0,
                                        dest: {
                                            name: s
                                        }
                                    }
                                }));
                            this.targetRoute = s,
                            this._routerTransitionAsync(s)
                        } else
                            window.location.reload()
                    }
                    )),
                    window.addEventListener("click", (e => {
                        const t = e.target.closest("a");
                        if ((null == t ? void 0 : t.classList.contains("BDC_ReloadLink")) || e.defaultPrevented || e.ctrlKey)
                            return !1;
                        null == t || e._preventRouterTransition || (t.hasAttribute("target") && "_blank" === t.getAttribute("target") ? this.$analitic.updateStatInfo(!0) : (this.$analitic.updateStatInfo(!1),
                        e.preventDefault(),
                        this.moveTo(t.href)))
                    }
                    ))
                }
                ,
                _proto._routerTransitionAsync = async function(e, t=window.location, n=!1, r=!1, s=!1) {
                    window.scrollTo(0, 0),
                    this.abortController.abort(),
                    this.abortController = new AbortController;
                    const o = this.abortController.signal;
                    this.currentRoute = this.routesDictionary[e],
                    wb.stat.sendPageView(),
                    this.$analitic.sendEvent("pageview", {
                        cookies_alert: wb.spa.getMainLayout().cookiePolicy.check() ? 1 : 0
                    });
                    try {
                        const {viewData: i, needStateUpdate: a, needRouteUpdate: l} = await this._loadRouteData(e, t, n, r, o);
                        return l && this._updateRouteData(e, i, o, s),
                        window.dispatchEvent(new CustomEvent("spaTransition",{
                            detail: {
                                isFinished: !0,
                                dest: this.currentRoute
                            }
                        })),
                        a
                    } catch (t) {
                        if (t.isNotFound)
                            return this.moveTo404Async(),
                            !1;
                        if (!t.isCancelled && !t.isUnauthorize && null != t.message && "" != t.message)
                            return console.log(t.message),
                            this.moveTo500Async(t, {
                                method: "_routerTransitionAsync",
                                destRoute: e,
                                current: window.location.toString(),
                                initial: n,
                                forced: r
                            }),
                            !1;
                        throw t
                    }
                }
                ,
                _proto._findRoute = function(e) {
                    var t;
                    const n = e.substring(1).split("/")
                      , r = e.substring(1);
                    let s = null !== (t = Object.keys(this.routesDictionary).filter((e => {
                        const t = this.routesDictionary[e];
                        return null == t.routePathSegments ? t.path === r : ("SpaCatalogEntrypoint" !== t.name || ".aspx" !== r.slice(-5)) && t.routePathSegments.every(( (e, t) => {
                            var r;
                            return e.isParameter ? !(null !== (r = null == e ? void 0 : e.isOptional) && void 0 !== r && !r) || n[t] : e.content === n[t]
                        }
                        ))
                    }
                    )).map((e => this.routesDictionary[e]))) && void 0 !== t ? t : [];
                    if (s.length > 1) {
                        const e = e => {
                            var t, n;
                            return null !== (n = null === (t = e.routePathSegments) || void 0 === t ? void 0 : t.some((e => e.isCatchAll))) && void 0 !== n && n
                        }
                        ;
                        s.sort(( (t, n) => e(t) - e(n))),
                        s = s.filter((e => "SpaCatalogEntrypoint" !== e.name))
                    }
                    return s[0]
                }
                ,
                _proto._initSSR = async function(e, t) {
                    var n, r, s, o, i, a, l, c;
                    this.currentRoute = this.routesDictionary[t];
                    const u = this.currentRoute.requiredModel ? this.$helper.loadJsAsync(this.currentRoute.requiredModel) : Promise.resolve()
                      , d = this._loadTemplateAsync(t);
                    this._updateQueryModel(),
                    this._updateRouteParametres(window.location.pathname.substring(1), this.routesDictionary[t]);
                    try {
                        await Promise.all([d, u]);
                        const h = wb.spa.getViewModelByName(t)
                          , p = h ? new h(e,t) : Object.create(WbSpaModel.prototype, {});
                        p.fromSSR = !0;
                        const m = null !== (r = null === (n = this.currentRoute) || void 0 === n ? void 0 : n.targetContainer) && void 0 !== r ? r : 0
                          , g = this.appContainers.find((e => e.containerId == m));
                        $.observable(g).setProperty({
                            viewModel: p
                        }),
                        $.observable(this).setProperty({
                            activeContainer: m
                        });
                        const f = new this.$helper.Deferred;
                        await (null === (o = (s = this.viewModel).onBeforeRender) || void 0 === o ? void 0 : o.call(s, e, f.promise)),
                        $.link(!0, "#app", this.viewModel),
                        await this.$helper.nextTick(),
                        null === (a = (i = this.viewModel).onAfterRender) || void 0 === a || a.call(i, {
                            data: e
                        }),
                        wb.stat.sendPageView();
                        const y = null === (c = (l = this.viewModel).getScreenName) || void 0 === c ? void 0 : c.call(l);
                        y && this.$analitic.sendEvent("Screen_V", {
                            name: y
                        })
                    } catch (e) {
                        console.error(e.message)
                    }
                }
                ,
                _proto._loadRouteData = async function(e, t, n, r, s) {
                    var o, i, a, l, c, u;
                    this._updateRouteParametres(t.pathname.substring(1), this.routesDictionary[e]),
                    this._updateQueryModel(t);
                    const d = this.prepareUrl(this.currentRoute);
                    this.$menuLk.updateMenu(d, this.currentRoute.lkMenuOptions, this.userIsAuth);
                    const h = null !== (i = null === (o = this.currentRoute) || void 0 === o ? void 0 : o.targetContainer) && void 0 !== i ? i : 0
                      , p = null === (a = this.appContainers.find((e => e.containerId == h))) || void 0 === a ? void 0 : a.viewModel
                      , m = !r && null != p && p.__modelStatus__ != VIEW_MODEL_STATUSES.destroyed && p.__routeName__ == e && null != p.onHistoryChange;
                    if (this.clientRenderInited || m)
                        if (m || n) {
                            if (m) {
                                return this.activeContainer == h || $.observable(this).setProperty({
                                    showPreview: !0
                                }),
                                null === (c = null === (l = this.viewModel) || void 0 === l ? void 0 : l.onActiveViewChanged) || void 0 === c || c.call(l, !1),
                                await (null === (u = p.onHistoryChange) || void 0 === u ? void 0 : u.call(p, window.history.state, r, {}, s)),
                                s.aborted || $.observable(this).setProperty({
                                    activeContainer: h,
                                    showPreview: !1
                                }),
                                {
                                    viewData: null,
                                    needStateUpdate: !1,
                                    needRouteUpdate: !1
                                }
                            }
                        } else
                            $.observable(this).setProperty({
                                showPreview: !0
                            });
                    else
                        !n && (this.current = $.templates["preview_" + e] ? "preview_" + e : DEFAULT_PREVIEW);
                    !this.currentRoute.metaTagsUrl && this.$seoHelper.update(d, null);
                    const g = await this._loadRequiredResoursesAsync(e);
                    return Object.assign({
                        needRouteUpdate: !s.aborted
                    }, g)
                }
                ,
                _proto._loadRequiredResoursesAsync = function(e, t=0) {
                    this.loadingTemplate = e;
                    const n = this.routesDictionary[e]
                      , r = null == $.templates[e] && n.tmpl ? this._loadTemplateAsync(e, n.tmpl) : Promise.resolve()
                      , s = this.loadRouteDataAsync(n.requiredData, t, !0)
                      , o = n.requiredCss ? Promise.all(n.requiredCss.map(this.$helper.loadCssAsync)) : Promise.resolve()
                      , i = n.requiredJs ? Promise.all(n.requiredJs.map(this.$helper.loadJsAsync)) : Promise.resolve()
                      , a = n.requiredModel ? this.$helper.loadJsAsync(n.requiredModel) : Promise.resolve();
                    return Promise.all([s, i, o, a, r]).then(( ([e]) => Promise.resolve(e))).catch((n => n.isNotFound || n.isUnauthorize || n.isCancelled || t >= 3 ? Promise.reject(n) : this._loadRequiredResoursesAsync(e, ++t)))
                }
                ,
                _proto._updateRouteData = async function(e, t, n=this.abortController.signal, r=!1) {
                    var s, o, i, a, l, c, u, d, h, p, m, g;
                    if (n.aborted)
                        return;
                    if (e.indexOf("preview_") > -1)
                        return $.observable(this).setProperty({
                            showPreview: !0
                        });
                    const f = wb.spa.getViewModelByName(e)
                      , y = f ? new f(t,e) : Object.assign(Object.create(WbSpaModel.prototype), null != t ? t : {})
                      , v = null !== (o = null === (s = this.currentRoute) || void 0 === s ? void 0 : s.targetContainer) && void 0 !== o ? o : 0
                      , b = y.onBeforeRender
                      , w = y.onAfterRender
                      , S = y.onBeforeUnrender;
                    Object.defineProperties(y, {
                        __routeName__: {
                            value: e
                        },
                        __targetContainer__: {
                            value: v
                        },
                        __modelStatus__: {
                            value: VIEW_MODEL_STATUSES.prepearing,
                            writable: !0
                        },
                        routeTemplate: {
                            value: e
                        },
                        onBeforeRender: {
                            value: async function(e, t) {
                                n.aborted || (await (null == b ? void 0 : b.call(y, e, t)),
                                this.__modelStatus__ = VIEW_MODEL_STATUSES.readyToInstall)
                            }
                        },
                        onAfterRender: {
                            value: async function(e, t) {
                                n.aborted || (await (null == w ? void 0 : w.call(y, e, n, t)),
                                this.__modelStatus__ = VIEW_MODEL_STATUSES.installed)
                            }
                        },
                        onBeforeUnrender: {
                            value: async function(e) {
                                await (null == S ? void 0 : S.call(y, e)),
                                this.__modelStatus__ = VIEW_MODEL_STATUSES.destroyed
                            }
                        }
                    });
                    const _ = null == this ? void 0 : this.viewModel;
                    if (null == _ || _.__targetContainer__ != v && null != _.onHistoryChange ? null === (c = null === (l = null == this ? void 0 : this.viewModel) || void 0 === l ? void 0 : l.onActiveViewChanged) || void 0 === c || c.call(l, !1) : await (null === (a = null === (i = null == this ? void 0 : this.viewModel) || void 0 === i ? void 0 : i.onBeforeUnrender) || void 0 === a ? void 0 : a.call(i)),
                    n.aborted)
                        return;
                    const C = new this.$helper.Deferred;
                    await (null === (u = y.onBeforeRender) || void 0 === u ? void 0 : u.call(y, t, C.promise));
                    let I = window._debug && performance.now();
                    const M = this.appContainers.find((e => e.containerId == v));
                    (null === (d = M.viewModel) || void 0 === d ? void 0 : d.__modelStatus__) != VIEW_MODEL_STATUSES.destroyed && (null === (h = M.viewModel) || void 0 === h || h.onBeforeUnrender(t)),
                    n.aborted || ($.observable(M).setProperty({
                        viewModel: y
                    }),
                    $.observable(this).setProperty({
                        showPreview: !1,
                        activeContainer: v
                    })),
                    this.clientRenderInited || this.initCSR(),
                    I && console.log("[INITIAL MODEL RENDER]: ", performance.now() - I, e),
                    await this.$helper.nextTick(),
                    C.resolve(),
                    null === (p = y.onAfterRender) || void 0 === p || p.call(y, t, n),
                    r && (null === (m = y.onSpaTransition) || void 0 === m || m.call(y));
                    const k = null === (g = y.getScreenName) || void 0 === g ? void 0 : g.call(y);
                    k && this.$analitic.sendEvent("Screen_V", {
                        name: k
                    })
                }
                ,
                _proto._updateRouteParametres = function(e, t) {
                    if (null == t.routePathSegments)
                        return void (this.routeParameters = {});
                    const n = e.split("/")
                      , r = t.routePathSegments.reduce(( (e, t, r) => (t.isParameter && (t.isCatchAll ? e[t.name] = n.slice(r).join("/") : e[t.name] = n[r]),
                    e)), {});
                    this.routeParameters = r
                }
                ,
                _proto._updateQueryModel = function(e) {
                    this.queryParams = new URLSearchParams((null != e ? e : window.location).search)
                }
                ,
                _proto._loadTemplateAsync = function _loadTemplateAsync(routeName, tmplNameInput) {
                    const tmplName = ("string" == typeof tmplNameInput ? tmplNameInput : `${routeName.replace("Entrypoint", "")}`).toLowerCase()
                      , tmplFullName = window._debug ? `${tmplName}.json` : `${tmplName}-${wb.settings.currentLocale}-${this.$helper.currentCulture}.json`
                      , hash = this.tmplHashes[tmplFullName];
                    return (window._debug ? this.$httpClient.fetchBasicJSON($.views.converters.urlForJsTmpl(`${tmplFullName}?${hash}`)) : this.$httpClient.fetchStaticV2($.views.converters.urlForJsTmpl(tmplFullName.replace(".json", `.${hash}.json`)))).then((tmpl => {
                        const {main, localization} = tmpl
                          , templates = __rest(tmpl, ["main", "localization"]);
                        if (localization)
                            try {
                                Object.assign(this.$localziation, {
                                    [routeName]: eval(localization)
                                })
                            } catch (e) {}
                        return $.templates(Object.assign({
                            [routeName]: main
                        }, templates)),
                        Promise.resolve()
                    }
                    )).catch((e => Promise.reject(e)))
                }
                ,
                _proto._hardReload = function() {
                    return location.reload()
                }
                ,
                (0,
                _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__.A)(Router, [{
                    key: "appContainers",
                    get: function() {
                        return APP_CONTAINERS
                    }
                }, {
                    key: "previewTemplate",
                    get: function() {
                        return DEFAULT_PREVIEW
                    }
                }, {
                    key: "viewModel",
                    get: function() {
                        var e;
                        return null === (e = this.appContainers.find((e => e.containerId == this.activeContainer))) || void 0 === e ? void 0 : e.viewModel
                    }
                }])
            }();
            const __WEBPACK_DEFAULT_EXPORT__ = Router
        }
        ,
        17252: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => a
            });
            var r = n(92901);
            const s = "wb_delivery-points-"
              , o = "wb_allpickups_hash"
              , i = 36e4;
            const a = function() {
                function e() {
                    this._startJobSyncPickups(),
                    this.checkInterval = null
                }
                var t = e.prototype;
                return t._startJobSyncPickups = function() {
                    this._pickupDbName = "wb_allpickups",
                    this._objectStoreName = "pickups_active",
                    this._version = 1,
                    setTimeout(this._syncPickups.bind(this), 15e3)
                }
                ,
                t._openPickupDb = function() {
                    return this.$storageHelper.openDb(this._pickupDbName, {
                        onupgradeneeded: e => e.createObjectStore(this._objectStoreName, {
                            keyPath: "id"
                        }),
                        version: this._version
                    })
                }
                ,
                t._syncPickups = async function() {
                    const e = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("all-poo-v9.json.hash", 5e3, "text").catch((e => null));
                    if (null !== e)
                        if (e !== localStorage.getItem(o)) {
                            const t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2("all-poo-fr-v9.json", 6e4)
                              , n = null == t ? void 0 : t.selectMany((e => (e.items.forEach((t => {
                                t.country = e.country
                            }
                            )),
                            e.items)));
                            if (!(n && n.length || this.checkInterval))
                                return void setTimeout(this._syncPickups.bind(this), 15e3);
                            if ((!n || !n.length) && this.checkInterval)
                                return;
                            this.checkInterval || (this.checkInterval = setInterval(this._syncPickups.bind(this), i)),
                            this._openPickupDb().then((t => {
                                window._debug && console.time("transaction pickups");
                                let r = t.transaction([this._objectStoreName], "readwrite").objectStore(this._objectStoreName);
                                r.clear();
                                for (let e = 0; e < n.length; e++)
                                    r.add(n[e]);
                                window._debug && console.timeEnd("transaction pickups"),
                                localStorage.setItem(o, e)
                            }
                            ))
                        } else
                            this.checkInterval || (this.checkInterval = setInterval(this._syncPickups.bind(this), i));
                    else
                        this.checkInterval || setTimeout(this._syncPickups.bind(this), 15e3)
                }
                ,
                t.getPickupAsync = function(e) {
                    return this._openPickupDb().then((t => this.$storageHelper.getItem(t, this._objectStoreName, e)))
                }
                ,
                t.getActivePickupsAsync = async function(e={}) {
                    const [t,n] = await Promise.all([this._openPickupDb().then((e => this.$storageHelper.getAll(e, this._objectStoreName))), this.$auth.jwtData.user ? this.$services.userData.getUserDataAsync() : Promise.resolve({})]);
                    return [...this._filterPickups(t, null == n ? void 0 : n.userInfo, e)]
                }
                ,
                t._filterPickups = function*(e, {isEmployeeSynced: t, houseKeeping: n, isPickupPointOwner: r}={}, s={}) {
                    for (const o of e) {
                        o.isHkn && !n || o.emp && !t || o.isSortCenter && !(r || t) || (null == s ? void 0 : s.dest) && o.dest3 != s.dest || "changeOffice" === (null == s ? void 0 : s.source) && (2 === o.status || o.isExternalPostamat) || (yield o)
                    }
                }
                ,
                t.getDeliveryPointsAsync = function(e, t) {
                    return new Promise(( (n, r) => {
                        const s = Object.assign({
                            deliveryWay: e,
                            currency: WbSpaModel.prototype.$user.getCurrency()
                        }, t);
                        this.$httpClient.fetchJSON(this.deliveryPointsUrl, {
                            method: "POST",
                            body: this.$helper.objectSerializer(s),
                            credentials: "include"
                        }, {
                            timeout: 2e3
                        }).then((t => {
                            const r = this._updateDeliveryPoints(t, e);
                            n(r)
                        }
                        )).catch((t => {
                            console.log(t.message);
                            let r = this.restoreDeliveryPoints(e);
                            r && n(r)
                        }
                        ))
                    }
                    ))
                }
                ,
                t._updateDeliveryPoints = function(e, t) {
                    const n = [...e, ...this.restoreDeliveryPoints(t).filter((e => e._local))].reduce(( (e, t) => {
                        const n = e.findIndex((e => e.addressId === t.addressId));
                        return -1 === n ? e.push(t) : e[n]._local = e[n]._local && t._local,
                        e
                    }
                    ), []);
                    return this.backupDeliveryPoints(n, t),
                    this._syncDeliveryPoints(n.filter((e => e._local)).reverse(), t),
                    n
                }
                ,
                t._syncDeliveryPoints = async function(e, t) {
                    for (let n = 0; n < e.length; n++)
                        await this._saveAddressAsync(e[n], t)
                }
                ,
                t.get = function(e, t) {
                    var n;
                    const r = null === (n = this.restoreDeliveryPoints(t)) || void 0 === n ? void 0 : n.find((t => t.addressId == e));
                    return r && r._local && this._syncDeliveryPoints([r], t),
                    r
                }
                ,
                t.getByCoordinates = function(e, t, n) {
                    return ["self", "courier"].forEach((r => {
                        var s;
                        const o = null === (s = this.restoreDeliveryPoints(r)) || void 0 === s ? void 0 : s.find((r => r.lat == e && r.lon == t && r.address === n));
                        if (o && o._local && this._syncDeliveryPoints([o], r),
                        o)
                            return o
                    }
                    )),
                    null
                }
                ,
                t.backupDeliveryPoints = function(e, t) {
                    this.deliveryPoints[t] = e;
                    const n = this._key;
                    localStorage.putObject(n, this.deliveryPoints),
                    Object.entries(localStorage).filter((e => e[0].startsWith(s) && e[0] !== n)).forEach((e => {
                        localStorage.removeItem(e[0])
                    }
                    ))
                }
                ,
                t.restoreDeliveryPoints = function(e) {
                    var t, n;
                    return this.deliveryPoints = null !== (t = localStorage.getObject(this._key)) && void 0 !== t ? t : {},
                    this.deliveryPoints.self || (this.deliveryPoints.self = []),
                    this.deliveryPoints.courier || (this.deliveryPoints.courier = []),
                    [...this.deliveryPoints.courier, ...this.deliveryPoints.self].forEach((e => {
                        e.latitude && e.longitude || !e.lat || !e.lon || (e.latitude = e.lat,
                        e.longitude = e.lon)
                    }
                    )),
                    null !== (n = this.deliveryPoints[e]) && void 0 !== n ? n : []
                }
                ,
                t.add = async function(e, t) {
                    let n = this.restoreDeliveryPoints(t);
                    const r = this._convertModel(e, t);
                    if (!n.find((e => (null == e ? void 0 : e.addressId) == r.addressId))) {
                        if ("courier" === t) {
                            const e = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://user-geo-data.wildberries.ru/get-office?latitude=${r.lat}&longitude=${r.lon}`, {}, {
                                timeout: 3e3,
                                nullOnError: !0
                            });
                            e && Object.assign(r, e)
                        }
                        n.unshift(r),
                        this.backupDeliveryPoints(n, t)
                    }
                    return this._saveAddressAsync(r, t),
                    n
                }
                ,
                t.remove = function(e, t) {
                    let n = this.restoreDeliveryPoints(t);
                    return n = n.filter((t => t.addressId != e)),
                    this.backupDeliveryPoints(n, t),
                    this._removeAddressAsync(e, t),
                    n
                }
                ,
                t._removeAddressAsync = function(e, t) {
                    this.$httpClient.fetchJSON(this.removeUrl, {
                        method: "POST",
                        body: this.$helper.objectSerializer({
                            addressId: e,
                            deliveryWay: t
                        }),
                        credentials: "include"
                    }).then((e => {
                        this.backupDeliveryPoints(e, t)
                    }
                    ))
                }
                ,
                t._saveAddressAsync = function(e, t) {
                    const n = "self" === t ? {
                        "Item.AddressId": e.addressId
                    } : e;
                    return this.$httpClient.fetchJSON(this._dataUrl(t), {
                        method: "POST",
                        credentials: "include",
                        body: this.$helper.objectSerializer(n, new URLSearchParams, !0)
                    }).then((e => (this.backupDeliveryPoints(e, t),
                    e)))
                }
                ,
                t._dataUrl = function(e) {
                    return "self" === e ? this.editPooUrl : this.editCourierAddressUrl
                }
                ,
                t._convertModel = function(e, t) {
                    if ("courier" === t) {
                        let n = Object.assign({}, e);
                        return n._local = !0,
                        n.deliveryType = t,
                        n.addressId = btoa(wb.helpers.generateGuid().slice(12)),
                        n.address = `${n.city ? n.city : n.province}, `,
                        n.area && !n.city && (n.address += `${n.area}, `),
                        n.street && (n.address += `${n.street}, `),
                        n.home && (n.address += `д. ${n.home}, `),
                        n.flat && (n.address += `кв. ${n.flat}, `),
                        n.entrance && (n.address += `под. ${n.entrance}, `),
                        n.doorCode && (n.address += `дмф. ${n.doorCode}, `),
                        n.floor && (n.address += `этаж ${n.floor}, `),
                        n.index && (n.address += `индекс ${$.views.converters.leadZero(n.index, 6)}, `),
                        n.address = n.address.slice(0, -2),
                        n.lat || (n.lat = n.latitude),
                        n.lon || (n.lon = n.longitude),
                        n
                    }
                    if ("self" === t)
                        return {
                            _local: !0,
                            address: e.address,
                            addressId: e.id,
                            lat: e.coordinates[0],
                            lon: e.coordinates[1],
                            workTime: e.workTime,
                            deliveryType: t,
                            pointTypeName: this._getPointTypeName(e.dtype),
                            IsSortCenter: 63 === t,
                            status: e.status,
                            rate: e.rate,
                            deliveryPrice: $.views.helpers.priceFromRub(e.deliveryPrice, !0),
                            country: e.country,
                            dest: e.dest,
                            sign: e.sign
                        }
                }
                ,
                t._getPointTypeName = function(e) {
                    return 63 === e ? "СЦ / Склад" : "Пункт выдачи"
                }
                ,
                (0,
                r.A)(e, [{
                    key: "removeUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/removeaddress"
                    }
                }, {
                    key: "editPooUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/poos/create?version=1"
                    }
                }, {
                    key: "editCourierAddressUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/yandexaddress/editajax?version=2"
                    }
                }, {
                    key: "deliveryPointsUrl",
                    get: function() {
                        return this.$services.cartService.publicBasketApiUrl + "/spa/deliverypoints"
                    }
                }, {
                    key: "_key",
                    get: function() {
                        const e = this.$services.sessionService.getUserUid();
                        return `${s}_${e}`
                    }
                }])
            }()
        }
        ,
        75281: () => {
            "use strict";
            let e = function() {
                function e() {}
                return e.getCookie = function(e) {
                    const t = document.cookie.split(";").find((t => {
                        const [n] = t.trim().split("=");
                        return n == e
                    }
                    ));
                    return t ? decodeURIComponent(t.trim().split("=")[1]) : null
                }
                ,
                e.setCookie = function(e, t, n={}) {
                    n = Object.assign({
                        path: "/",
                        "max-age": 31536e3
                    }, n);
                    let r = encodeURIComponent(e) + "=" + encodeURIComponent(t);
                    Object.keys(n).forEach((e => {
                        r += `; ${e}`,
                        1 != n[e] && (r += `=${n[e]}`)
                    }
                    )),
                    document.cookie = r
                }
                ,
                e.deleteCookie = function(t, n={}) {
                    e.setCookie(t, "", Object.assign({
                        "max-age": -1
                    }, n))
                }
                ,
                e
            }();
            wb.cookieHelper = e
        }
        ,
        61506: () => {
            "use strict";
            let e = function() {
                function e() {}
                return e.canShowWalletDiscount = function(e=0, t="", n=0, r=0, s=0) {
                    if (1048576 & n)
                        return 0;
                    const o = r || (wb.settings.walletTypeCode > 1 ? wb.settings.wlt2DiscountPercent : wb.settings.wlt1DiscountPercent)
                      , i = s || (wb.settings.walletTypeCode > 1 ? wb.global.settings.variables.wlt2DiscountDisplayMaxPrice : wb.global.settings.variables.wlt1DiscountDisplayMaxPrice);
                    return o > 0 && i >= e && "RUB" === t ? o : 0
                }
                ,
                e.calcWalletDiscount = function(t=0, n="", r=0, s=0, o=0) {
                    const i = e.canShowWalletDiscount(t, n, r, s, o);
                    return i > 0 ? e.calculateDiscount(t, i, n) : 0
                }
                ,
                e.calculateDiscount = function(e=0, t=0, n="", r=!1) {
                    if (!t)
                        return 0;
                    let s = e * (t / 100);
                    const o = $.views.helpers.minFiscalPriceInCurrency(n);
                    return s < o ? o : Math[r ? "floor" : "ceil"](s / o) * o
                }
                ,
                e.calculateCommission = function(e, t, n="") {
                    return this.calculateDiscount(e, t, n, !0)
                }
                ,
                e.calculateCustomCharges = function(e, t, n) {
                    const r = 100 * e;
                    if (!n)
                        return 0;
                    if (r < n.dutyFreelimit)
                        return 0;
                    const s = .15 * (r - n.dutyFreelimit) + n.fixedAmount;
                    return $.views.helpers.toLocalPrice(s / 100, t)
                }
                ,
                e
            }();
            wb.priceHelper = e
        }
        ,
        85340: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => d
            });
            var r = n(92901);
            const s = JSON.parse('{"RUB":{"locale":"ru","name":"Российский рубль","sign":"₽","code":"643"},"BYN":{"locale":"by","name":"Белорусский рубль","sign":"р.","code":"933"},"KZT":{"locale":"kz","name":"Казахстанский тенге","sign":"тг.","code":"398"},"AMD":{"locale":"am","name":"Армянский драм","sign":"драм","code":"051"},"KGS":{"locale":"kg","name":"Кыргызский сом","sign":"сом","code":"417"},"UZS":{"locale":"uz","name":"Узбекский сум","sign":"сум","code":"860"}}')
              , o = Object.entries(s).reduce(( (e, [t,n]) => (e[n.sign] = t,
            e)), {});
            wb.currencies = {
                info: s,
                getIsoBySign: e => o[e] || wb.settings.currencyCodeByLetters,
                getDefaultForLocale: function(e) {
                    let t;
                    for (const n in s)
                        s[n].locale === e && (t = n);
                    return null != t ? t : "RUB"
                }
            },
            $.views.helpers({
                wbCurrencies: wb.currencies.info
            }),
            $.views.converters({
                isoCode: e => {
                    var t;
                    return null === (t = wb.currencies.info[null == e ? void 0 : e.toUpperCase()] || wb.currencies.info[wb.settings.currencyCodeByLetters]) || void 0 === t ? void 0 : t.code
                }
                ,
                currencySign: e => {
                    var t;
                    return null === (t = wb.currencies.info[e] || wb.currencies.info[wb.settings.currencyCodeByLetters]) || void 0 === t ? void 0 : t.sign
                }
            });
            const i = "_sys_auth"
              , a = "user-balance"
              , l = "https://fin-person-installment.wildberries.ru"
              , c = ["65896095", "6182663", "8175888", "16474491", "126051733", "112501232", "13539779", "15800639", "60152764", "27921069", "20432466", "7127629", "146311557", "124235485", "11253735", "19089801"];
            let u = function() {
                function e() {
                    var t;
                    for (const t in e.syncData)
                        e.syncData[t].init();
                    this.balance = localStorage.getObject(e.storageKey(a)),
                    this.balance && (this._savedBalance = Object.assign(this.balance)),
                    this._balanceTs = (null === (t = this.balance) || void 0 === t ? void 0 : t.balanceTs) || 0,
                    this.getUserGrade = WbSpaModel.prototype.$helper.lockPromise(this.getUserGrade),
                    this.getCustomsDuty = WbSpaModel.prototype.$helper.lockPromise(this.getCustomsDuty),
                    window.addEventListener("storage", this._onSync.bind(this))
                }
                var t = e.prototype;
                return t.getUid = function() {
                    return e._getUserUid()
                }
                ,
                t.getId = function() {
                    return WbSpaModel.prototype.$auth.jwtData.user || 0
                }
                ,
                t.getUserInfo = function() {
                    return this.userInfo
                }
                ,
                t.initUser = function() {
                    const t = this.$auth.jwtData
                      , n = this.$auth.isAuth
                      , r = this.$services.sessionService.getBasketUid()
                      , s = n ? e._getUserUid() : "";
                    localStorage.setItem(i, n ? t.user : "unauth"),
                    this.userInfo = n ? {
                        uid: s,
                        basketUid: void 0,
                        isAuth: n,
                        t: t.user
                    } : {
                        uid: 0,
                        basketUid: r,
                        isAuth: n
                    },
                    wb.analitics.sendUserEvent(s, n ? t.user : ""),
                    wb.analitics.sendSessionStartEvent(),
                    n ? this.getUserGrade(this.getCurrency()) : this._setDiscountForUnAuth(),
                    wb.spa && wb.spa.setUserStatus({
                        userIsAuth: n,
                        userUid: n ? s : r,
                        userId: parseInt(t.user, 10)
                    })
                }
                ,
                t.getBalance = async function({force: t, timeout: n}={}) {
                    var r, s;
                    let o = !1;
                    if (t || (null === (r = this._savedBalance) || void 0 === r ? void 0 : r.balanceCurrency) && this._savedBalance.balanceCurrency !== this.getCurrency() || !this.balance || this._balanceTs < (new Date).getTime()) {
                        this._balanceTs = (new Date).getTime() + 3e4;
                        try {
                            this.balance = await this.$httpClient.fetchJSON("/webapi/account/getsignedbalance", {
                                method: "POST"
                            }, n ? {
                                timeout: n
                            } : {}),
                            this.balance.balanceCurrency = this.getCurrency(),
                            this.balance.walletTypeCode = this._getWalletTypeCode(this.balance.walletType, this.balance.walletStatus),
                            this._savedBalance = Object.assign(this.balance),
                            this.balance.balanceTs = this._balanceTs,
                            localStorage.putObject(e.storageKey(a), this.balance),
                            o = !0
                        } catch (e) {
                            if (!this._savedBalance)
                                throw this._balanceTs = (new Date).getTime() + 15e3,
                                e;
                            this.balance = Object.assign(this._savedBalance)
                        }
                    }
                    if (null === this.balance)
                        return {
                            walletLimit: 0,
                            moneyBalanceRUB: 0,
                            walletBalance: 0,
                            totalBalanceRub: 0,
                            totalBalance: 0,
                            balanceCurrency: this.getCurrency()
                        };
                    const i = null !== (s = this.balance[`moneyBalance${this.balance.balanceCurrency}`]) && void 0 !== s ? s : "RUB" === this.balance.balanceCurrency ? this.balance.moneyBalance : 0;
                    return this.balance.totalBalance = i + ("RUB" === this.balance.balanceCurrency ? this.balance.bonusBalance + this.balance.walletBalance : 0),
                    "RUB" === this.balance.balanceCurrency && (this.balance.totalBalance = Math.floor(Math.abs(this.balance.totalBalance) < 1 ? 0 : this.balance.totalBalance)),
                    this.balance.totalBalanceRub = (this.balance.moneyBalanceRUB || 0) + (this.balance.bonusBalance || 0) + (this.balance.walletBalance || 0),
                    this.balance.totalBalanceRub = Math.floor(Math.abs(this.balance.totalBalanceRub) < 1 ? 0 : this.balance.totalBalanceRub),
                    o && this.$eventBus.dispatchEvent(new CustomEvent("BalanceUpdated",{
                        detail: this.balance
                    })),
                    this.balance
                }
                ,
                t._getWalletTypeCode = function(e="", t="") {
                    return "rejected" === t || "closed" === t ? 0 : "verified" === e ? 2 : "anonymous" === e ? 1 : 0
                }
                ,
                t.resetBalance = function() {
                    this.balance = null,
                    this.$eventBus.dispatchEvent(new CustomEvent("BalanceReset"))
                }
                ,
                t.getBrokerInstallmentConfig = async function() {
                    if (!this.isBrokerInstEnabled())
                        return null;
                    if (this.brokerInstallmentConfig)
                        return this.brokerInstallmentConfig;
                    if (this.brokerInstallmentConfig = localStorage.getObject("wbx_br_inst_config"),
                    !this.brokerInstallmentConfig || this.brokerInstallmentConfig.expire < Date.now())
                        try {
                            const e = await this.$wbxHttpClient.fetch(`${l}/v1/config`, {
                                method: "GET",
                                timeout: 1e3
                            })
                              , t = await e.json();
                            t.expire = Date.now() + 36e5,
                            localStorage.putObject("wbx_br_inst_config", t),
                            this.brokerInstallmentConfig = t
                        } catch (e) {
                            wb.spa.logError(e, "[WBX_BR_INST_CONFIG]: failed to fetch broker installment config")
                        }
                    return this.brokerInstallmentConfig
                }
                ,
                t.resetBrokerInstStatusTs = function() {
                    this._resetBrokerInstStatusTs = !0
                }
                ,
                t.isBrokerInstEnabled = function() {
                    var e, t, n;
                    return this.$isRangeEnabledFor(null === (n = null === (t = null === (e = wb.global) || void 0 === e ? void 0 : e.settings) || void 0 === t ? void 0 : t.variables) || void 0 === n ? void 0 : n.cwbInstRange) || c.indexOf(this.$auth.jwtData.user) > -1
                }
                ,
                t.getBrokerInstallmentStatus = async function(e=!1) {
                    if (!this.isBrokerInstEnabled())
                        return null;
                    if (e && this.resetBrokerInstStatusTs(),
                    this._brokerInstStatusTs = this._resetBrokerInstStatusTs ? 0 : Date.now() + 3e5,
                    !this.brokerInstallmentStatus || this._brokerInstStatusTs < Date.now())
                        try {
                            const e = await this.$wbxHttpClient.fetch(`${l}/v1/status`, {
                                method: "GET",
                                credentials: "include",
                                timeout: 1e3
                            });
                            this.brokerInstallmentStatus = await e.json(),
                            this._resetBrokerInstStatusTs = !1
                        } catch (e) {
                            this.brokerInstallmentStatus = null
                        }
                    return this.brokerInstallmentStatus
                }
                ,
                t.resetInstallmentLimit = function() {
                    this.installmentLimit = null,
                    this.pdlInstallmentLimit = null
                }
                ,
                t.getUserGrade = async function(e="RUB") {
                    var t, n, r;
                    if (!this.$auth.isAuth)
                        return null;
                    let s = this._userGrade || localStorage.getObject("wbx_user_grade");
                    this.$auth.jwtData.user !== (null == s ? void 0 : s.user_id) && (s = null);
                    const o = this.$useCatalogReturnCost() ? 4 : 3;
                    if (null == s || s.expire < Date.now() || this.$auth.jwtData.user !== s.user_id || s.currency !== e || s.version != o)
                        try {
                            const i = await this.$wbxHttpClient.fetch(`https://user-grade.wildberries.ru/api/v${o}/grade?curr=${e}`);
                            if (!i.ok)
                                throw new Error(`resp_status=${i.status}`);
                            const a = await i.json();
                            if (null == a.payload || 0 !== a.state)
                                throw new Error(`resp=${JSON.stringify(i || {})}`);
                            s = a.payload,
                            s.sign = a.sign,
                            s.sign_version = a.sign_version,
                            s.expire = Date.now() + 3e5,
                            s.fraud && (null === (t = JSON.parse(s.fraud)) || void 0 === t ? void 0 : t.is_trust) ? (s.premiumIsAvailable = !0,
                            s.wbClub = "available") : s.premiumIsAvailable = !1,
                            (null === (n = s.subscription_features) || void 0 === n ? void 0 : n.length) && (s.wbClub = "subscribed"),
                            s.isPremium = (null === (r = s.subscription_features) || void 0 === r ? void 0 : r.indexOf("extra_discount")) > -1,
                            localStorage.putObject("wbx_user_grade", s),
                            this._userGrade = s,
                            this.$eventBus.dispatchEvent(new CustomEvent("UserGradeUpdated"))
                        } catch (e) {
                            wb.spa.logError(e, "[WBX_USER_GRADE]: failed to fetch user grade data")
                        }
                    if (null == s ? void 0 : s.payments) {
                        const e = s.payments.find((e => 1 === e.wctype_id));
                        wb.settings.wlt1DiscountPercent = (null == e ? void 0 : e.anonymous_discount) || 0,
                        wb.settings.wlt2DiscountPercent = (null == e ? void 0 : e.uprid_discount) || 0
                    }
                    return s || {
                        spp: 0,
                        postpaid_limit: 0,
                        currency: e
                    }
                }
                ,
                t.getUserGradeFromCache = function() {
                    return this.$auth.isAuth ? this._userGrade || localStorage.getObject("wbx_user_grade") : null
                }
                ,
                t.resetUserGrade = function() {
                    const e = this.getUserGradeFromCache();
                    e && (e.expire = 0,
                    localStorage.putObject("wbx_user_grade", e))
                }
                ,
                t._setDiscountForUnAuth = async function() {
                    var e;
                    let t = localStorage.getObject("wbx_default_discounts");
                    if (null == t || t.expire < Date.now()) {
                        const n = await this.$httpClient.fetchBasicJSON("https://static-basket-01.wb.ru/vol1/global-payment/default-payment.json", {}, {
                            nullOnError: !0
                        });
                        if (0 === (null == n ? void 0 : n.state)) {
                            const r = null === (e = n.data) || void 0 === e ? void 0 : e.find((e => 1 === e.wctype_id));
                            t = {
                                wctype_id: null == r ? void 0 : r.wctype_id,
                                discount_value: (null == r ? void 0 : r.discount_value) || 0,
                                expire: Date.now() + 3e5
                            },
                            t.expire = Date.now() + 3e5,
                            localStorage.putObject("wbx_default_discounts", t)
                        }
                    }
                    wb.settings.wlt1DiscountPercent = (null == t ? void 0 : t.discount_value) || wb.global.settings.variables.wlt1DiscountPercent
                }
                ,
                t.getCustomsDuty = async function(e) {
                    var t, n, r;
                    if (!(null === (n = null === (t = wb.global.settings) || void 0 === t ? void 0 : t.switches) || void 0 === n ? void 0 : n.enableCustomsDuty))
                        return null;
                    let s = this._customsData || localStorage.getObject("customs_duty");
                    try {
                        if (!s || !s.dutyForImportedGoods || s.dutyForImportedGoods.find((e => new Date(1e3 * e.timestamp).addDays(1) < new Date))) {
                            const e = await this.$httpClient.fetchBasicJSON("https://static-basket-03.wb.ru/vol44/duty/duty.json", {
                                timeout: 500
                            }).catch((e => (wb.spa.logError(e, "[CUSTOMS_DUTY]: failed to fetch customs duty data"),
                            this._customsData)));
                            e && (localStorage.putObject("customs_duty", e),
                            this._customsData = s = e)
                        }
                        return null === (r = null == s ? void 0 : s.dutyForImportedGoods) || void 0 === r ? void 0 : r.find((t => t.curr == e))
                    } catch (e) {
                        return wb.spa.logError(e, "[CUSTOMS_DUTY]: customs duty exception"),
                        null
                    }
                }
                ,
                t.getCustomsDutyFromCache = function() {
                    return this._customsData || localStorage.getObject("customs_duty")
                }
                ,
                t.reset = function() {
                    this.resetUserGrade(),
                    wb.cookieHelper.deleteCookie("access_token"),
                    this.initUser(),
                    this.resetBalance(),
                    this.clearXInfo(),
                    this.$services.userData.clear(),
                    this.$getService("groupedDeliveriesService").then((e => e.resetCache()))
                }
                ,
                t.clearLocalUserData = function() {
                    this.$services.userData.clearLocalUserInfo(),
                    localStorage.removeItem(e.storageKey(a)),
                    localStorage.removeItem("offerRateMain")
                }
                ,
                e._getUserUid = function() {
                    return WbSpaModel.prototype.$auth.um.userUid || "0"
                }
                ,
                t._getUserData = async function() {
                    return e.syncData.userData.time <= Date.now() && !e.syncData.userData.updateInProgress && await this._xInfoUpdate(),
                    e.syncData.userData.data
                }
                ,
                e.storageKey = function(t) {
                    return `${t}-${e._getUserUid()}`
                }
                ,
                t._xInfoUpdate = async function() {
                    const t = e.syncData.userData;
                    t.updateInProgress = !0;
                    const n = e.storageKey(t.prefix);
                    await navigator.locks.request(`lock-${n}`, (async r => {
                        var s;
                        const o = e.syncData.userData;
                        if (!o || o.time < Date.now()) {
                            const e = null == t ? void 0 : t.data;
                            let r = new URLSearchParams;
                            (null == e ? void 0 : e.currency) && r.set("currency", e.currency),
                            e && (r.set("latitude", e.latitude),
                            r.set("longitude", e.longitude),
                            r.set("locale", e.locale),
                            r.set("address", e.address),
                            r.set("dt", e.dt || "0"),
                            e.addressId && r.set("addressId", e.addressId),
                            e.addressType && r.set("addressType", e.addressType));
                            const o = t.fetchParam.url(r)
                              , i = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(o, {
                                credentials: "include"
                            }, {
                                timeout: t.fetchParam.timeout,
                                nullOnError: !0,
                                addAuthHeader: !0
                            });
                            if (i) {
                                const e = null === (s = localStorage.getObject(n)) || void 0 === s ? void 0 : s.data
                                  , r = {
                                    time: Date.now() + t.interval,
                                    data: Object.assign(Object.assign({}, e), i)
                                };
                                localStorage.putObject(n, r),
                                Object.assign(t, r),
                                this._checkForRefresh(e, i)
                            } else
                                e.time = Date.now() + 1e4
                        } else
                            o && o.time !== t.time && Object.assign(t, o);
                        t.updateInProgress = !1
                    }
                    ))
                }
                ,
                t.getXinfo = function() {
                    return this._getUserData().then((e => Promise.resolve(e.xinfo)))
                }
                ,
                t.getXinfoWithClustersAndVectors = function(t) {
                    return this._checkNeedUpdateData(e.syncData.userClusters),
                    this._checkNeedUpdateData(e.syncData.userVector),
                    this._getUserData().then((n => {
                        var r, s;
                        let o = e.syncData.userClusters.data.length > 0 ? n.xinfo + `&uclusters=${e.syncData.userClusters.data.join(",")}` : n.xinfo;
                        if ((wb.global.settings.switches.addUserVector && "search" === t || wb.global.settings.switches.addUserVectorCatalog && "catalog" === t) && (null === (s = null === (r = e.syncData.userVector) || void 0 === r ? void 0 : r.data[t]) || void 0 === s ? void 0 : s.value)) {
                            const n = e.syncData.userVector.data[t];
                            o += `&uv=${n.value}&uiv=${n.version}`
                        }
                        return Promise.resolve(o)
                    }
                    ))
                }
                ,
                t.getUserClusters = function() {
                    return this._checkNeedUpdateData(e.syncData.userClusters),
                    e.syncData.userClusters.data.join(",")
                }
                ,
                t.getBannersClusters = function() {
                    return this._checkNeedUpdateData(e.syncData.userClustersBanners),
                    e.syncData.userClustersBanners.data.length > 0 ? e.syncData.userClustersBanners.data : []
                }
                ,
                t.getXinfoSignedV1 = function() {
                    return this._getUserData().then((e => {
                        var t;
                        return Promise.resolve({
                            xinfo: e.xinfo,
                            userDataSign: e.userDataSign,
                            addressDataSign: e.addressDataSign,
                            shard: e.shard,
                            latitude: e.latitude,
                            longitude: e.longitude,
                            address: e.address,
                            dest: null === (t = e.destinations) || void 0 === t ? void 0 : t.last()
                        })
                    }
                    ))
                }
                ,
                t.getLocationData = async function() {
                    const e = await this._getUserData();
                    return {
                        latitude: e.latitude,
                        longitude: e.longitude,
                        address: e.address,
                        destinations: e.destinations,
                        locale: e.locale
                    }
                }
                ,
                t.setGeo = async function(t) {
                    var n, r, s;
                    const o = null !== (n = t.lat) && void 0 !== n ? n : t.latitude
                      , i = null !== (r = t.lon) && void 0 !== r ? r : t.longitude
                      , a = t.address;
                    if (o && i && a) {
                        const n = e.syncData.userData
                          , r = e.storageKey(n.prefix);
                        const l = `officeId=${"self" === t.deliveryType ? t.addressId : t.officeId}&dest=${t.dest}&sign=${t.sign}&lat=${o}&lng=${i}`
                          , c = Object.assign(Object.assign(Object.assign({}, null == n ? void 0 : n.data), null === (s = localStorage.getObject(r)) || void 0 === s ? void 0 : s.data), {
                            latitude: o,
                            longitude: i,
                            address: a,
                            addressId: t.addressId,
                            addressType: t.deliveryType,
                            addressDataSign: l,
                            dt: Date.now() / 1e3 | 0,
                            relevant: !1
                        });
                        c.xinfo = this._changeXDest(c.xinfo, t.dest);
                        const u = {
                            data: c,
                            time: e._timeInPast(n.interval)
                        };
                        Object.assign(n, u),
                        localStorage.putObject(r, u),
                        WbSpaModel.prototype.$geoLocation.setCityName(a),
                        await this._xInfoUpdate()
                    }
                }
                ,
                t.setCurrency = async function(t) {
                    var n;
                    if (t) {
                        const r = e.syncData.userData
                          , s = e.storageKey(r.prefix)
                          , o = Object.assign(Object.assign(Object.assign({}, null == r ? void 0 : r.data), null === (n = localStorage.getObject(s)) || void 0 === n ? void 0 : n.data), {
                            currency: t,
                            relevant: !1
                        });
                        o.xinfo = this._changeXCurrency(o.xinfo, t),
                        Object.assign(r, {
                            data: o,
                            time: e._timeInPast(r.interval)
                        }),
                        await this._xInfoUpdate()
                    }
                }
                ,
                t.clearXInfo = function() {
                    for (const t in e.syncData)
                        e.syncData[t].time = e._timeInPast(e.syncData[t].interval);
                    Object.keys(localStorage).forEach((t => {
                        for (const n in e.syncData)
                            -1 !== t.indexOf(e.syncData[n].prefix) && localStorage.removeItem(t)
                    }
                    ))
                }
                ,
                t.clearUserVectors = function() {
                    e.syncData.userVector.time = e._timeInPast(e.syncData.userVector.interval),
                    Object.keys(localStorage).forEach((t => {
                        -1 !== t.indexOf(e.syncData.userVector.prefix) && localStorage.removeItem(t)
                    }
                    ))
                }
                ,
                t.getShardAsync = async function() {
                    return (await this._getUserData()).shard
                }
                ,
                t.getIp = function() {
                    return e.syncData.userData.data.ip
                }
                ,
                t.getCurrency = function() {
                    return e.syncData.userData.data.currency
                }
                ,
                t.getCurrencyAsync = async function() {
                    return (await this._getUserData()).currency
                }
                ,
                t.getLocale = function() {
                    return e.syncData.userData.data.locale
                }
                ,
                t._changeXCurrency = function(e, t) {
                    const n = `$1${t.toLowerCase()}$3`;
                    return e.replace(/(&curr=)(.*?)(&)/, n)
                }
                ,
                t._changeXDest = function(e, t) {
                    const n = `$1${t}$3`;
                    return e.replace(/(&dest=)(.*?)(&)/, n)
                }
                ,
                e.getXCurrency = function(e) {
                    var t;
                    return null === (t = /curr=(.*?)&/.exec(e)) || void 0 === t ? void 0 : t[1]
                }
                ,
                t._checkForRefresh = function(t, n, r) {
                    var s, o, i, a, l, c, u, d;
                    let h = !1;
                    (null == t ? void 0 : t.currency) !== (null == n ? void 0 : n.currency) && (e._checkCurrencyInvalid(n) && location.reload(),
                    null === (s = wb.spa.getMainLayout().header) || void 0 === s || s.changeCurrency.refresh(n.currency),
                    h = !0),
                    (null == t ? void 0 : t.destinations[t.destinations.length - 1]) !== (null == n ? void 0 : n.destinations[n.destinations.length - 1]) && (h = !0),
                    (null == n ? void 0 : n.address) && (null === (o = WbSpaModel.prototype.$geoLocation.location) || void 0 === o ? void 0 : o.address) !== (null == n ? void 0 : n.address) && WbSpaModel.prototype.$geoLocation.updateLocation(),
                    h && (this.$eventBus.dispatchEvent(new CustomEvent("GeoUpdated")),
                    null === (l = null === (a = null === (i = wb.spa) || void 0 === i ? void 0 : i.getMainLayout()) || void 0 === a ? void 0 : a.menuTop) || void 0 === l || l.refreshMenu((null == t ? void 0 : t.locale) !== (null == n ? void 0 : n.locale)),
                    this.$router.clearNotActiveContainer(),
                    (r || WbSpaModel.prototype.$router.currentRoute && "SpaBasketEntrypoint" !== (null === (c = WbSpaModel.prototype.$router.currentRoute) || void 0 === c ? void 0 : c.name) && "SpaBasketBuyItNowEntrypoint" !== (null === (u = WbSpaModel.prototype.$router.currentRoute) || void 0 === u ? void 0 : u.name)) && (null === (d = wb.spa) || void 0 === d || d.refresh()))
                }
                ,
                t._onSync = function({key: t, oldValue: n, newValue: r}) {
                    if (t === i && r)
                        n !== r && (r && "unauth" !== r && !this.$router.userIsAuth ? wb.spa.getMainLayout().updateAfterLogin() : location.reload());
                    else if (t === e.storageKey(e.syncData.userData.prefix)) {
                        if (r) {
                            const t = JSON.parse(n)
                              , s = JSON.parse(r);
                            Object.assign(e.syncData.userData, s),
                            setTimeout(( () => this._checkForRefresh(null == t ? void 0 : t.data, s.data, !0)), 1e3)
                        }
                    } else
                        for (const n in e.syncData)
                            if (t === e.storageKey(e.syncData[n].prefix)) {
                                const t = JSON.parse(r);
                                Object.assign(e.syncData[n], t)
                            }
                }
                ,
                e._getFallbackData = function() {
                    const t = e._getDefaultLocale()
                      , n = e._getDefaultCurrency(t);
                    let r;
                    switch (t) {
                    case "ru":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=-1257786&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Москва",
                            latitude: 55.753737,
                            longitude: 37.6201,
                            currency: n,
                            destinations: [-1029256, -102269, -2162196, -1257786]
                        };
                        break;
                    case "by":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=-8139704&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Минск",
                            latitude: 53.901328,
                            longitude: 27.549044,
                            currency: n,
                            destinations: [12358386, 12358403, -70563, -8139704]
                        };
                        break;
                    case "kz":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=85&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Нур-Султан",
                            latitude: 51.129669,
                            longitude: 71.495475,
                            currency: n,
                            destinations: [12358388, 12358412, -3479876, 85]
                        };
                        break;
                    case "kg":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=28&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Бишкек",
                            latitude: 42.8618,
                            longitude: 74.5831,
                            currency: n,
                            destinations: [12358387, 12358395, -10860151, 28]
                        };
                        break;
                    case "am":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=36&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Ереван",
                            latitude: 40.177628,
                            longitude: 44.512547,
                            currency: n,
                            destinations: [12358387, 12358400, -13404218, 36]
                        };
                        break;
                    case "uz":
                        r = {
                            xinfo: `appType=1&curr=${n.toLowerCase()}&dest=491&locale=${t}&spp=30&lang=${WbSpaModel.prototype.$helper.currentCulture}`,
                            address: "Ташкент",
                            latitude: 41.311158,
                            longitude: 69.279737,
                            currency: n,
                            destinations: [12358390, 12358442, -2448072, 491]
                        }
                    }
                    return r.locale = t,
                    r.shard = 0,
                    r
                }
                ,
                e._getDefaultCurrency = function(e) {
                    const t = localStorage.getItem("wbx__currency")
                      , n = wb.currencies.info[t];
                    return t && localStorage.removeItem("wbx__currency"),
                    n ? t : wb.currencies.getDefaultForLocale(e)
                }
                ,
                e._getDefaultLocale = function() {
                    switch (document.location.hostname) {
                    case "www.wildberries.by":
                        return "by";
                    case "www.wildberries.kz":
                        return "kz";
                    case "www.wildberries.kg":
                        return "kg";
                    case "www.wildberries.am":
                        return "am";
                    case "www.wildberries.uz":
                        return "uz"
                    }
                    return "ru"
                }
                ,
                e._timeInPast = function(e) {
                    return Date.now() - e
                }
                ,
                e._checkCurrencyInvalid = function(t) {
                    var n;
                    return !t || !wb.currencies.info[t.currency] || !wb.currencies.info[null === (n = e.getXCurrency(t.xinfo)) || void 0 === n ? void 0 : n.toUpperCase()]
                }
                ,
                t._checkNeedUpdateData = function(t) {
                    if (t.time >= Date.now() || t.updateInProgress)
                        return;
                    t.updateInProgress = !0;
                    const n = e.storageKey(t.prefix);
                    navigator.locks.request(`lock-${n}`, (async r => {
                        const s = localStorage.getObject(n);
                        if (!s || s.time < Date.now()) {
                            let r;
                            if ("0" !== e._getUserUid())
                                if (t.disableFetch && await t.disableFetch())
                                    r = [];
                                else {
                                    const n = t.fetchParam.url(e._getUserUid())
                                      , s = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(n, {
                                        credentials: "omit"
                                    }, {
                                        timeout: t.fetchParam.timeout,
                                        nullOnError: !0,
                                        addAuthHeader: t.fetchParam.jwt
                                    });
                                    r = t.processData(s)
                                }
                            else
                                r = [];
                            if (r) {
                                const e = {
                                    time: Date.now() + t.interval,
                                    data: r
                                };
                                localStorage.putObject(n, e),
                                Object.assign(t, e)
                            } else
                                t.time = Date.now() - t.interval + 6e4
                        } else
                            s && s.time !== t.time && Object.assign(t, s);
                        t.updateInProgress = !1
                    }
                    ))
                }
                ,
                (0,
                r.A)(e, [{
                    key: "geoDataStorageKey",
                    get: function() {
                        return e.storageKey(e.syncData.userData.prefix)
                    }
                }])
            }();
            u.syncData = {
                userData: {
                    prefix: "geo-data-v1",
                    data: null,
                    interval: 18e4,
                    fetchParam: {
                        url: e => `https://user-geo-data.wildberries.ru/get-geo-info?${e}`,
                        timeout: 3e3
                    },
                    init: function() {
                        const e = {
                            data: u._getFallbackData(),
                            time: u._timeInPast(Date.now())
                        }
                          , t = localStorage.getObject(u.storageKey(this.prefix));
                        (null == t ? void 0 : t.data) && u._checkCurrencyInvalid(t.data) && (t.time = u._timeInPast(this.interval)),
                        Object.assign(this, Object.assign(Object.assign({}, e), t))
                    }
                },
                userClusters: {
                    prefix: "user-clusters",
                    data: null,
                    processData: function(e) {
                        return this.fetchParam.dataField ? e[this.fetchParam.dataField] : e
                    },
                    interval: 432e5,
                    fetchParam: {
                        url: e => `https://personal-clusters.wildberries.ru/api/v1/clusters?id=${e}`,
                        dataField: "uclusters",
                        timeout: 2e4
                    },
                    init: function() {
                        Object.assign(this, Object.assign({
                            data: [],
                            time: u._timeInPast(this.interval)
                        }, localStorage.getObject(u.storageKey(this.prefix))))
                    }
                },
                userClustersBanners: {
                    prefix: "user-clusters-banners",
                    data: null,
                    processData: function(e) {
                        return this.fetchParam.dataField ? e[this.fetchParam.dataField] : e
                    },
                    interval: 432e5,
                    fetchParam: {
                        url: e => `https://user-banner.wb.ru/api/v1/clusters?id=${e}`,
                        timeout: 2e4
                    },
                    init: function() {
                        Object.assign(this, Object.assign({
                            data: [],
                            time: u._timeInPast(this.interval)
                        }, localStorage.getObject(u.storageKey(this.prefix))))
                    }
                },
                userVector: {
                    prefix: "user-vector",
                    data: null,
                    processData: function(e) {
                        var t;
                        return e ? null === (t = e.data[0]) || void 0 === t ? void 0 : t.vectors.reduce(( (e, t) => (e[t.space] = {
                            value: t.value,
                            version: t.version
                        },
                        e)), {}) : this.data
                    },
                    interval: 432e5,
                    fetchParam: {
                        url: () => "https://user-vector-info.wb.ru/api/v1/vector",
                        timeout: 2e4,
                        jwt: !0
                    },
                    init: function() {
                        Object.assign(this, Object.assign({
                            data: [],
                            time: u._timeInPast(this.interval)
                        }, localStorage.getObject(u.storageKey(this.prefix))))
                    },
                    disableFetch: async function() {
                        const e = await WbSpaModel.prototype.$services.userData.getUserDataAsync();
                        return !e || !e.userInfo.enableUserVectors
                    }
                }
            };
            const d = u
        }
        ,
        34784: () => {
            "use strict";
            window.wb = {
                namespace: function(e, t) {
                    for (var n = e.split("."), r = this, s = n.length, o = 0; o < s; o++)
                        void 0 === r[n[o]] && (r[n[o]] = t && o === s - 1 ? t : {}),
                        r = r[n[o]];
                    return r
                },
                getURLparam: function(e) {
                    return (RegExp("[\\?&]" + e + "=([^&#]*)", "i").exec(location.href) || [, null])[1]
                }
            },
            $.processResponse = function(e, t, n, r) {
                var s;
                if (null == e)
                    return !1;
                let o = void 0 !== e.ResultState ? e.ResultState : e.resultState;
                switch (e.hasOwnProperty("resultState") || e.hasOwnProperty("ResultState") || (o = e.state),
                o) {
                case -1:
                    const i = e.Value || e.value || (null === (s = e.data) || void 0 === s ? void 0 : s.errorMsg) || "Ошибка сервера";
                    if ("boolean" == $.type(n)) {
                        n && wb.popup.renderModalError(i);
                        break
                    }
                    null != n ? n(i) : alert(i);
                    break;
                case 0:
                    if (null == t)
                        return !1;
                    t(e.Value || e.value);
                    break;
                case 1:
                    window.location.href = e.Value || e.value;
                    break;
                case 2:
                case 4:
                    if (4 === o && wb.spa) {
                        wb.spa.refresh();
                        break
                    }
                    let a = window.location.href;
                    const l = a.indexOf("#");
                    -1 !== l && (a = a.substr(0, l)),
                    null != e.Value || null != e.value ? (window.location.href = a + (e.Value || e.value),
                    window.location.reload()) : window.location.href = a;
                    break;
                case 3:
                    const c = e.Value || e.value;
                    if (null == wb.spa)
                        return window.location.href = c.url;
                    const u = new URL(decodeURIComponent(c.url),window.location.origin);
                    c.redirect = !0,
                    null == r || r(c),
                    wb.spa.redirect(u.href, c.replaceState, c.forceUpdate)
                }
                return !0
            }
            ,
            wb.quickNav = function(e) {
                var t = e || {}
                  , n = document.querySelector(".j-quicknav");
                n.addEventListener("click", (function() {
                    return window.scrollTo({
                        top: 0,
                        behavior: "smooth"
                    }),
                    !1
                }
                ));
                let r;
                function s() {
                    n.style.display = "block"
                }
                function o() {
                    n.style.display = "none"
                }
                window.addEventListener("scroll", (function() {
                    if (n) {
                        document.documentElement.clientWidth >= 768 ? function() {
                            const e = t.bottomPx || function() {
                                const e = document.querySelector("#app");
                                return e ? e.offsetTop + parseFloat(getComputedStyle(e, null).height.replace("px", "")) : 0
                            }();
                            (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0) > e ? s() : o()
                        }() : function() {
                            const e = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
                            r || (r = e),
                            function() {
                                if (e >= r)
                                    return !1;
                                const t = document.documentElement.clientHeight;
                                return !(e < 1.5 * t)
                            }() ? s() : o(),
                            r = e
                        }()
                    }
                }
                ))
            }
            ,
            wb.namespace("utils.script", function() {
                var e = {};
                function t(e) {
                    var t = $("html").attr("lang");
                    if ("ru" == t)
                        return Promise.resolve();
                    var n = e.substring(e.lastIndexOf("/") + 1).replace(".min.js", ".js").split("?");
                    return fetch("j/localized/" + n[0] + "?v=" + n[1] + "&c=" + t)
                }
                return {
                    require: function(n, r) {
                        var s, o = e[n];
                        return o || ($.isEmptyObject(e) && document.querySelectorAll("script[type='text/javascript']").forEach((function(t) {
                            if (t.type) {
                                var n = t.src.replace("http:", "").replace("https:", "");
                                e[n] = Promise.resolve()
                            }
                        }
                        )),
                        e[n] || (o = Promise.all([r ? t(n) : Promise.resolve(), (s = n,
                        new Promise(( (e, t) => {
                            try {
                                var n = document.createElement("script");
                                n.type = "text/javascript",
                                n.src = s,
                                n.readyState ? n.onreadystatechange = function() {
                                    "loaded" !== n.readyState && "complete" !== n.readyState || (n.onreadystatechange = null,
                                    e())
                                }
                                : (n.onload = function() {
                                    e()
                                }
                                ,
                                n.onerror = function() {
                                    t()
                                }
                                ),
                                document.body.appendChild(n)
                            } catch (e) {
                                t()
                            }
                        }
                        )))]),
                        e[n] = o)),
                        o
                    }
                }
            }()),
            wb.namespace("displayModeSettings", function() {
                const e = "displayMode";
                let t;
                var n = new Map;
                return {
                    init: function() {
                        function n() {
                            const n = wb.settings.breakponts
                              , r = window.innerWidth;
                            for (var s in t = "d",
                            n)
                                r < s && (t = n[s]);
                            let o = "desktop";
                            r <= 767.98 && (o = "phone"),
                            r >= 768 && r <= 1023.98 && (o = "tablet"),
                            $.observable(wb.settings).setProperty(e, t),
                            $.observable(wb.settings).setProperty({
                                displayType: o
                            })
                        }
                        n(),
                        window.addEventListener("resize", n)
                    },
                    addObserver: function(r, s) {
                        if ("function" == typeof r) {
                            s && r(t);
                            var o = () => r(t);
                            $.observe(wb.settings, e, o),
                            $.observe(wb.settings, "displayType", o),
                            n.set(r, o)
                        }
                    },
                    removeObserver: function(t) {
                        let r = n.get(t);
                        r && ($.unobserve(wb.settings, e, r),
                        $.unobserve(wb.settings, "displayType", r))
                    }
                }
            }()),
            wb.namespace("network", {
                init: function() {
                    function e() {
                        $.observable(wb.settings).setProperty("isOffline", !window.navigator.onLine)
                    }
                    e(),
                    window.addEventListener("online", e),
                    window.addEventListener("offline", e)
                }
            })
        }
        ,
        88798: () => {
            "use strict";
            var e, t, n, r;
            wb.stat = function() {
                let e, t = [];
                function n() {
                    const e = t;
                    return t = [],
                    e
                }
                function r() {
                    if (!t.length)
                        return;
                    const r = n()
                      , s = {};
                    s.pageViewGuid = e,
                    s.path = window.location.pathname,
                    s.queryString = window.location.search,
                    s.urlReferrer = null != wb.spa ? wb.spa.getReferrer() : document.referrer,
                    s.deviceId = wb.cookieHelper.getCookie("_wbauid"),
                    s.statisticEvents = r,
                    WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/events", {
                        method: "POST",
                        body: JSON.stringify(s),
                        headers: {
                            "Content-Type": "application/json"
                        }
                    }).catch((e => {
                        t = t.concat(r)
                    }
                    ))
                }
                return setInterval((function() {
                    r()
                }
                ), 3e3),
                {
                    sendEvent: function(e, n, s) {
                        const o = n.slice();
                        t.push({
                            EventName: e,
                            EventParams: o
                        }),
                        s && r()
                    },
                    wrapParam: function(e, t) {
                        return {
                            ParamName: e,
                            ParamValue: void 0 === t ? null : t.toString().replace(/"/g, "\\x22")
                        }
                    },
                    sendPageView: function() {
                        const r = {};
                        let s;
                        r.statusCode = 200,
                        r.path = window.location.pathname,
                        r.queryString = window.location.search,
                        r.urlReferrer = document.referrer,
                        r.deviceId = wb.cookieHelper.getCookie("_wbauid"),
                        t.length > 0 && (s = n(),
                        r.statisticEvents = s),
                        WbSpaModel.prototype.$user.getLocationData().then((e => (e && (r.address = e.address,
                        r.latitude = e.latitude,
                        r.longitude = e.longitude),
                        WbSpaModel.prototype.$httpClient.fetch("/webapi/stats/pageview", {
                            method: "POST",
                            body: JSON.stringify(r),
                            headers: {
                                "Content-Type": "application/json"
                            }
                        })))).then((e => e.json())).then((t => {
                            e = t
                        }
                        )).catch((e => {
                            t = t.concat(s)
                        }
                        ))
                    }
                }
            }(),
            wb.stat.banners = function() {
                const e = {
                    ths: this,
                    cl: {
                        banner: "j-banner"
                    }
                };
                e.sl = {
                    shownStat: ".j-banner-shown-stat",
                    clickStat: ".j-banner-click-stat",
                    banner: "." + e.cl.banner
                };
                const t = function(e) {
                    const t = []
                      , n = e.data("banner-id")
                      , r = e.data("section")
                      , s = e.data("statistic-fields");
                    return "" === n ? null : (t.push(wb.stat.wrapParam("BID", n)),
                    t.push(wb.stat.wrapParam("SCTN", r)),
                    s && (t.push(wb.stat.wrapParam("BUT", s.urlType)),
                    t.push(wb.stat.wrapParam("BLT", s.locationType)),
                    t.push(wb.stat.wrapParam("BDT", s.displayType)),
                    t.push(wb.stat.wrapParam("SORT", s.sort))),
                    t)
                }
                  , n = function(e) {
                    e instanceof jQuery || (e = $(e));
                    if (e.data("shown-stat-sent"))
                        return;
                    const n = t(e);
                    if (!n)
                        return;
                    const r = e[0].classList.contains("j-banner-stat-send");
                    wb.stat.sendEvent("BSE", n, r),
                    e.attr("data-shown-stat-sent", !0)
                };
                var r = function(e, n) {
                    var r, s;
                    if ((null == e ? void 0 : e.length) > 0) {
                        const t = e[0];
                        if (t.classList.contains("j-banner-wba")) {
                            let {data: e} = $.view(t);
                            e = e.length > 0 ? e[0] : e,
                            e.banner && (e = e.banner);
                            const n = !!e.ordBannerMark
                              , s = (null === (r = e.bannerSelections) || void 0 === r ? void 0 : r.length) > 0 ? e.bannerSelections.map((e => e.href)).toString() : e.link;
                            wb.analitics.sendBannersWbaEvent("Banner_T", e.alt, t.dataset.analiticsCode, s, t.dataset.bannerIndex, e.id, n)
                        }
                    }
                    n || (e.data("click-stat-sent") || (s = t(e)) && (wb.stat.sendEvent("BCE", s, !0),
                    e.attr("data-click-stat-sent", !0)))
                };
                return {
                    initClickEvent: function(t) {
                        $("body").off("mousedown", e.sl.clickStat).on("mousedown", e.sl.clickStat, (function(n) {
                            if (3 !== n.which) {
                                var s, o = n.currentTarget.classList.contains(e.cl.banner), i = $(n.currentTarget);
                                o || (s = $this.data("banner-id"),
                                i = $(e.sl.banner).filter((function(e, t) {
                                    return $(t).data("banner-id") === s
                                }
                                )).first()),
                                r(i, t)
                            }
                        }
                        ))
                    },
                    sendShownStatistic: n,
                    sendAllShownStatistic: function() {
                        var t = $(e.sl.shownStat);
                        wb.scrollListener.addElements(t, (function(e) {
                            n($(e))
                        }
                        ), !1, .6),
                        wb.scrollListener.start()
                    },
                    sendStatisticNow: function() {
                        $.each($(e.sl.shownStat), (function(e, t) {
                            wb.stat.banners.sendShownStatistic($(t))
                        }
                        ))
                    },
                    sendShownCarousel: function(e) {
                        var t;
                        t = e.find("li:not(.jc-clone)").find(".j-banner"),
                        $.each(t, (function(e, t) {
                            wb.stat.banners.sendShownStatistic($(t))
                        }
                        ))
                    },
                    callShownVisibleHandlerForCarousel: function(e, t) {
                        var n;
                        n = e.find("li").find(".j-banner:not(.j-banner-section)"),
                        wb.scrollListener.addElements(n, (function(e) {
                            wb.stat.banners.sendShownStatistic($(e))
                        }
                        ), !1, t),
                        wb.scrollListener.start()
                    },
                    getShownAfterSetActiveEvent: function(e) {
                        return function(t) {
                            var n = t.find(".j-banner").first();
                            wb.scrollListener.checkRatio(n, e) && wb.stat.banners.sendShownStatistic(n)
                        }
                    },
                    sendClickStatistic: r,
                    destroyClickEvent: function() {
                        $("body").off("mousedown", e.sl.clickStat)
                    },
                    bannerBlockShownStatWba: function(e) {
                        const t = function(e) {
                            if (!e)
                                return;
                            const t = document.querySelectorAll(".j-banners-block")
                              , n = [];
                            function r(t) {
                                const r = t.querySelectorAll(".j-banner-wba").toArray()
                                  , s = e.$observerHelper.getVerticalObserver(r, {
                                    threshold: .5
                                });
                                function o(t) {
                                    const n = t.target;
                                    let {data: r} = $.view(n);
                                    const i = !!r.ordBannerMark;
                                    e.$analitic.sendBannersWbaEvent("Banner_S", n.title, n.dataset.analiticsCode, n.href, n.dataset.bannerIndex, n.dataset.bannerId, i, r.pixelSrc),
                                    e.$stat.banners.sendShownStatistic(n),
                                    n.removeEventListener(s.elementInViewportEventName, o)
                                }
                                n.push(s),
                                r.forEach((e => {
                                    e.addEventListener(s.elementInViewportEventName, o)
                                }
                                )),
                                s.observe()
                            }
                            return t.forEach((e => {
                                r(e)
                            }
                            )),
                            {
                                destroy: function() {
                                    n.forEach((e => {
                                        e.destroy()
                                    }
                                    ))
                                },
                                addBlocks: function(e) {
                                    (null == e ? void 0 : e.length) && e.filter((e => e.classList.contains("j-banners-block"))).forEach((e => {
                                        r(e)
                                    }
                                    ))
                                }
                            }
                        }(e);
                        return {
                            destroy: function() {
                                t.destroy()
                            },
                            addBlocks: function(e) {
                                t.addBlocks(e)
                            }
                        }
                    }
                }
            }(),
            function() {
                var e = document.createElement("a");
                if (e.href = document.referrer,
                function(e) {
                    let t = !0;
                    return ["wb.", "wildberries."].forEach((function(n) {
                        e.indexOf(n) >= 0 && -1 === $.inArray(e.split(".")[0], ["style", "blog", "lookshop"]) && (t = !1)
                    }
                    )),
                    t
                }(e.hostname)) {
                    var t = wb.helpers.getParamsFromUrlQuery(location.search)
                      , n = wb.stat
                      , r = [];
                    e.hostname || t.utm_medium || t.utm_campaign || t.utm_source ? (r.push(n.wrapParam("UTMM", t.utm_medium ? t.utm_medium : "not_set")),
                    r.push(n.wrapParam("UTMC", t.utm_campaign ? t.utm_campaign : "not_set")),
                    r.push(n.wrapParam("UTMS", t.utm_source ? t.utm_source : e.hostname ? e.hostname : "not_set")),
                    t.gclid && r.push(n.wrapParam("GCID", "adwords")),
                    e.hostname && r.push(n.wrapParam("Rfr", e.hostname))) : r.push(n.wrapParam("Rfr", "direct")),
                    wb.stat.sendEvent("RFR", r)
                }
            }(),
            e = wb.getURLparam("wb_tp"),
            t = wb.getURLparam("wb_bnd"),
            n = wb.stat,
            r = [],
            e && t && (r.push(n.wrapParam("Btp", e)),
            r.push(n.wrapParam("Bbnd", t)),
            n.sendEvent("BV", r))
        }
        ,
        32767: () => {
            "use strict";
            $.observable.Object.prototype.setAllProperty = function(e, t) {
                var n = this;
                $.each(e, (function(e, r) {
                    var s = e;
                    t && (s = t + "." + s),
                    $.isPlainObject(r) ? n.setAllProperty(r, s) : !$.isArray(r) && n.setProperty(s, r)
                }
                ))
            }
            ,
            $.observable.Array.prototype.refreshArray = function(e) {
                for (var t = this, n = 0; n < e.length; n++)
                    t._data.length === n ? t.insert(e[n]) : $.observable(t._data[n]).setProperty(e[n]);
                for (; e.length < t._data.length; )
                    t.remove(t._data.length - 1)
            }
            ,
            $.views.helpers({
                suppliersOrgForms: ["ООО", "ПАО", "ОАО", "ЗАО", "ИП", "Фонд", "Ассоциации", "Союзы", "НАО", "ТОО", "АО"],
                isDefaultSupplier: function(e, t) {
                    return 32477 === e || 12399 === e || 17887 === e || 23316 === e || 28906 === e || "Brands Seller" === t || "Best Brands" === t || "First Choice" === t || "WILDBERRIES" === t
                },
                supplierFineName: function(e, t) {
                    return 20624 === t ? "" : 1876 === t && "Wildberries" === e ? "Brands Seller" : 20253 === t && "Wildberries" === e ? "Best Brands" : 154 === t && "Wildberries" === e ? "First Choice" : "Wildberries" === e ? "WILDBERRIES" : $.views.converters.trimWord(e, $.views.helpers.suppliersOrgForms)
                },
                ImageUrl: wb.helpers.url.imageUrl,
                urlFeedbackPhoto: wb.helpers.url.urlFeedbackPhoto,
                urlProductVideo: wb.helpers.url.urlVideoProduct,
                urlFeedbackVideoPreview: wb.helpers.url.urlFeedbackVideoPreview,
                productCardUrl: function(e, t, n) {
                    return $.views.converters.urlForGood(e, null, n, null, null, t)
                },
                forBrandLogoFromId: function(e) {
                    return e ? wb.helpers.url.urlToExternalStatic(`/vol1/sellers/brands/${e}.webp`) : `${wb.settings.staticSiteUrl}/i/nologo.gif`
                },
                forSellerLogo: function(e, t=!1) {
                    return wb.helpers.url.urlToExternalStatic(`/vol1/crm-bnrs/shops/${e}_${t ? "main_banner" : "logo"}.webp`)
                },
                isEmptyObject: function(e) {
                    return $.isEmptyObject(e)
                },
                PersonalPhoto: function() {
                    return "https://static-basket-01.wbbasket.ru/vol0/i/v3/user/avatar.png"
                },
                Declension: function(e, t, n, r, s) {
                    var o, i = e % 10, a = e % 100;
                    return o = 1 == i && 11 != a ? t : 2 == i && 12 != a || 3 == i && 13 != a || 4 == i && 14 != a ? n : r || n,
                    void 0 === s ? o : String.format(s, e, String.format(o, e))
                },
                pluralize: function(e) {
                    return $.pluralize(null != e ? e : 0, Array.prototype.slice.call(arguments, 1))
                },
                debug: function(e) {
                    console.log(e)
                },
                toDateFormat: function(e, t) {
                    return new Date(parseInt(e.replace("/Date(", "").replace(")\\/", ""), 10)).format(t)
                },
                formatDate: function(e, t) {
                    return new Date(e).format(t)
                },
                toJson: function(e) {
                    return JSON.stringify(e)
                },
                fromJson: function(e) {
                    return JSON.parse(e)
                },
                encode: function() {
                    for (var e = "", t = 0; t < arguments.length; t++)
                        e = e.concat(arguments[t]);
                    return encodeURIComponent(e)
                },
                isLazyImgInCarousel: function(e, t, n, r, s) {
                    return !0 === e && (!0 === n ? t >= 2 * r && t < s - r : t >= 2 * r)
                },
                timeLeft: function(e) {
                    var t = $.views.helpers.parseFromDotNet(e);
                    return wb.helpers.date.leftBefore(t)
                },
                parseFromDotNet: function(e) {
                    return new Date(parseInt(e.replace("/Date(", "").replace(")\\/", ""), 10))
                },
                timeLeftSpa: function(e) {
                    var t = new Date(e);
                    return wb.helpers.date.leftBefore(t)
                },
                isPriceEqual: function(e, t) {
                    return e === t
                },
                isNullOrWhiteSpace: function(e) {
                    return !e || 0 === e.length || /^\s*$/.test(e)
                },
                HasFlag: function(e, t) {
                    return (e & t) == t
                },
                blurAdult: function(e) {
                    return e && !wb.adult.isConfirmed
                },
                nonBreakingSpaceFormatted: function(e) {
                    return String(e).replace(/\B(?=(\d{3})+(?!\d))/g, "&nbsp;")
                },
                pickupType: function(e, t) {
                    if (86 == e.dtype)
                        return e.name;
                    if ("courier" == e.deliveryType)
                        return "Курьерский адрес";
                    if (63 == e.dtype || e.isSortCenter)
                        return t ? "СЦ / Склад" : "СЦ / Склад Wildberries";
                    if (29 == e.dtype || 31 == e.dtype || 32 == e.dtype)
                        return t ? "Почта" : "Отделение Почты";
                    if (23 == e.dtype)
                        return 2 == e.pickupType ? "Партнерский&nbsp;пункт выдачи (Почта&nbsp;России)" : t ? "Почта&nbsp;России" : "Отделение Почты России";
                    if (14 == e.dtype)
                        return "Постамат Халва";
                    if (15 == e.dtype && e.pickupType >= 0) {
                        if (1 == e.pickupType)
                            return "Отделение&nbsp;Сбербанка";
                        if (0 == e.pickupType)
                            return "Постамат&nbsp;Сбербанка"
                    }
                    return 16 == e.dtype ? "Постамат&nbsp;Пятерочка" : e.isExternalPostamat ? "Партнерский&nbsp;постамат" : e.isWb ? "Пункт выдачи" : "Партнерский&nbsp;пункт выдачи"
                },
                pickupPhotos: e => {
                    var t, n;
                    if (!e.photos)
                        return [];
                    if (86 == e.dtype)
                        return e.photos;
                    const r = new Set
                      , s = new Set;
                    for (let t of e.photos) {
                        const e = t.split(".").pop();
                        t = t.replace("preview", ""),
                        "webp" == (null == e ? void 0 : e.toLowerCase()) ? r.add(t) : s.add(t)
                    }
                    return [...r.size > 0 && (null === (n = null === (t = WbSpaModel.prototype) || void 0 === t ? void 0 : t.$apiSupport) || void 0 === n ? void 0 : n.webpImage) ? r : s]
                }
                ,
                priceFromRub: (e, t, n) => {
                    var r, s;
                    if (!(null === (s = null === (r = wb.global) || void 0 === r ? void 0 : r.settings) || void 0 === s ? void 0 : s.currencies))
                        return e;
                    const o = n || WbSpaModel.prototype.$user.getCurrency();
                    if ("RUB" === o)
                        return e;
                    if (!wb.global.settings.currencies[o])
                        return e;
                    let i = e / wb.global.settings.currencies[o].rubRate;
                    return t ? "AMD" === o || "KZT" === o ? 10 * Math.floor(i / 10) : "BYN" === o ? Math.floor(100 * i) / 100 : "UZS" === o ? 100 * Math.floor(i / 100) : Math.floor(i) : i
                }
                ,
                priceToRub: (e, t) => {
                    var n, r;
                    return (null === (r = null === (n = wb.global) || void 0 === n ? void 0 : n.settings) || void 0 === r ? void 0 : r.currencies) && wb.global.settings.currencies[t] ? e * wb.global.settings.currencies[t].rubRate : e
                }
                ,
                toLocalPrice: (e, t) => "AMD" === t || "KZT" === t ? 10 * Math.floor(e / 10) : "BYN" === t ? Math.floor(100 * e) / 100 : "UZS" === t ? 100 * Math.floor(e / 100) : Math.floor(e),
                max: e => Math.max(e, 0),
                abs: e => Math.abs(e),
                trimWord: function(e, t) {
                    if (!(null == t ? void 0 : t.length) || !e)
                        return e;
                    if ((null == (t = [].concat(t)) ? void 0 : t.length) > 0) {
                        const r = (e = e.trim()).toLowerCase();
                        for (var n = 0; n < t.length; n++) {
                            const s = t[n].toLowerCase()
                              , o = r.indexOf(s + " ", 0);
                            0 == o && (e = e.substring(s.length).trim());
                            const i = e.toLowerCase().indexOf(s, e.length - s.length);
                            if (i > 0 && (e = e.substring(0, i)),
                            0 == o || i > 0)
                                return e.trim()
                        }
                    }
                    return e
                },
                brandUrl: function(e) {
                    return `/brands/${encodeURIComponent(e)}`
                },
                brandUrlById: async function(e) {
                    if (!e)
                        return null;
                    const t = await WbSpaModel.prototype.$httpClient.fetchBasicJSON(`https://static-basket-01.wbbasket.ru/vol0/data/brands-by-id/${e}.json`, {}, {
                        nullOnError: !0
                    }).catch((e => null));
                    return t ? $.views.helpers.brandUrl(t.url) : null
                },
                formatPrice: function(e, t, n) {
                    let r = $.views.converters.divideNumberBySeparator(e) + (t ? `,${t}` : "");
                    return "" != n && (r += "&nbsp;" + (n || wb.settings.currencyShortName)),
                    r
                },
                isDateToday: e => new Date(e).dateEqual(new Date),
                isClosedByUser: e => {
                    var t;
                    return (null === (t = wb.global.userSettings.closed) || void 0 === t ? void 0 : t.includes(e)) || !1
                }
                ,
                getCurrentCurrency: function() {
                    return $.views.converters.currencySign(WbSpaModel.prototype.$user.getCurrency())
                },
                fillFeedbackPhotosAndVideo(e) {
                    return e ? e.map((e => {
                        const t = e.isVideo ? this.fillFeedbackVideos([e]) : this.fillFeedbackPhotos([e]);
                        return null == t ? void 0 : t[0]
                    }
                    )) : []
                },
                fillFeedbackPhotos: function(e) {
                    const t = [];
                    return e ? e.map((e => {
                        const t = e.id || e;
                        return {
                            id: t,
                            preview: wb.helpers.url.urlFeedbackPhoto(t, "ms"),
                            fullPath: wb.helpers.url.urlFeedbackPhoto(t, "fs")
                        }
                    }
                    )) : t
                },
                fillFeedbackVideos: function(e) {
                    if (!e)
                        return [];
                    return (Array.isArray(e) ? e : [e]).map((e => {
                        const t = e.id
                          , [n,r] = null == t ? void 0 : t.split("/")
                          , s = ("00" + n).slice(-2)
                          , o = e.durationSec ? wb.helpers.formatVideoDuration(e.durationSec) : "-";
                        return {
                            id: t,
                            preview: `https://videofeedback${s}.wbbasket.ru/${r}/preview.${$.views.converters.toWebp("jpg")}`,
                            video: `https://videofeedback${s}.wbbasket.ru/${r}/index.m3u8`,
                            mp4: `https://videofeedback${s}.wbbasket.ru/${r}/preview.mp4`,
                            isVideo: !0,
                            duration: o
                        }
                    }
                    ))
                },
                stripHtml: (e, t) => {
                    if (!e)
                        return "";
                    if (t)
                        return e;
                    return (new DOMParser).parseFromString(e, "text/html").body.textContent || ""
                }
                ,
                isIosDevice: wb.helpers.iOS,
                isHuaweiDevice: wb.helpers.huawei,
                sumBy: (e, t) => t && e && 0 != e.length ? e.reduce(( (e, n) => (isNaN(n[t]) || (e += +n[t]),
                e)), 0) : 0,
                minFiscalPriceInCurrency: function(e) {
                    switch (e.toUpperCase()) {
                    case "UZS":
                        return 100;
                    case "AMD":
                    case "KZT":
                        return 10;
                    case "BYN":
                    case "USD":
                        return .01;
                    default:
                        return 1
                    }
                },
                stopPropagation: e => e.stopPropagation(),
                subtract: function(e, t=0) {
                    return (Math.round(100 * e) - Math.round(100 * t)) / 100
                },
                isExpressDeliveryToday: function(e, t, n) {
                    if (!t || !e || !n)
                        return !1;
                    const r = new Date
                      , s = 60 * r.getHours() + r.getMinutes()
                      , o = n[0]
                      , i = n[1]
                      , a = s + 60 * e;
                    if (s >= o && s <= i) {
                        if (t.some((e => a < e.start)) && e < 5)
                            return !0
                    }
                    return !1
                }
            }),
            $.views.converters({
                not: function(e) {
                    return !e
                },
                formatPhone: function(e, t) {
                    return e.toString().formatPhone(t)
                },
                toOrdinalDigitByFemaleGender: function(e) {
                    return ["Первая", "Вторая", "Третья", "Четвертая", "Пятая", "Шестая", "Седьмая", "Восьмая", "Девятая", "Десятая"][e] || e + 1
                },
                spaceFormatted: function(e) {
                    return String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1 ")
                },
                plusMinus: e => {
                    let t = "";
                    return e > 0 ? t = "+" : e < 0 && (t = "-"),
                    t + " " + $.views.converters.spaceFormatted(Math.abs(e))
                }
                ,
                toInt: function(e) {
                    return parseInt(e, 10)
                },
                toFixed: function(e, t) {
                    var n = parseFloat(e);
                    return isNaN(n) ? "" : n.toFixed(t)
                },
                leadZero: function(e, t) {
                    if (isNaN(e) || null == e)
                        return null;
                    for (var n = Math.floor(e); n.toString().length < t; )
                        n = "0" + n;
                    return n
                },
                basketDeliveryDate: function(e, t, n, r, s=!1, o=!1, i=!1, a=!1, l=!1) {
                    if (!e)
                        return "";
                    if (i && o && o > 540 && (s = "9:00–23:00"),
                    !(8 & ~n)) {
                        const t = (new Date).daysBetween(e);
                        if (s) {
                            const t = $.views.converters.dayNameFromDate(e, l);
                            return a ? t : `${t}, ${s}`
                        }
                        if (r < 5 && 0 == t)
                            return $.views.converters.deliveryDateTxt(r, !0)
                    }
                    if (!t) {
                        if (s) {
                            const t = $.views.converters.dayNameFromDate(e, l);
                            return a ? t : `${t}, ${s}`
                        }
                        return $.views.converters.dayNameFromDate(e, l)
                    }
                    const c = t instanceof Date ? t : new Date;
                    return "number" == typeof t && (c.setTime(e.getTime()),
                    c.setDate(c.getDate() + t)),
                    c.is1stJan() && c.setDate(c.getDate() + 1),
                    e.getMonth() !== c.getMonth() ? `${e.format("d MMMM")}-${c.format("d MMMM")}` : `${e.format("d")}-${c.format("d MMMM")}`
                },
                priceWithCoins: function(e, t, n=!1) {
                    var r, s, o, i, a, l, c = Math.abs(Math.round(100 * (e % 1).toFixed(2)));
                    e = e > 0 ? Math.floor(e) : Math.ceil(e);
                    const u = (null === (o = null === (s = null === (r = this.tagCtx) || void 0 === r ? void 0 : r.props) || void 0 === s ? void 0 : s.iso) || void 0 === o ? void 0 : o.toUpperCase()) || this.ctxPrm && (null === (i = this.ctxPrm("iso")) || void 0 === i ? void 0 : i.toUpperCase());
                    return u && (t = null === (l = null === (a = wb.currencies) || void 0 === a ? void 0 : a.info[u]) || void 0 === l ? void 0 : l.sign),
                    0 == c && n ? c = null : c < 10 && (c = "0" + c),
                    $.views.helpers.formatPrice(e, c, t)
                },
                priceWithCurrencyOld: function(e, t, n, r=!1) {
                    if (!t && (isNaN(e) || !e))
                        return "";
                    if (("byn" === n || !n && "" !== n) && ("by" === wb.settings.currentLocale || "byn" === n || r)) {
                        let t = Math.round(100 * (e % 1).toFixed(2));
                        return e = Math.floor(e),
                        t < 10 && (t = "0" + t),
                        n && "byn" !== n && (t = null),
                        n = "р.",
                        $.views.helpers.formatPrice(e, t, n)
                    }
                    let s = "" === n ? "" : n || wb.settings.currencyShortName;
                    return e = Math.floor(100 * e) / 100,
                    $.views.helpers.formatPrice(e, null, s)
                },
                priceWithCurrencyV2: function(e, t, n) {
                    var r, s, o, i, a, l, c, u, d, h, p;
                    if (!t && (isNaN(e) || !e))
                        return "";
                    const m = e.toString().split(".")
                      , g = n ? null === (s = null === (r = wb.currencies) || void 0 === r ? void 0 : r.getIsoBySign) || void 0 === s ? void 0 : s.call(r, n) : (null === (a = null === (i = null === (o = this.tagCtx) || void 0 === o ? void 0 : o.props) || void 0 === i ? void 0 : i.iso) || void 0 === a ? void 0 : a.toUpperCase()) || this.ctxPrm && (null === (l = this.ctxPrm("iso")) || void 0 === l ? void 0 : l.toUpperCase()) || WbSpaModel.prototype.$user.getCurrency();
                    n || (n = null === (u = null === (c = wb.currencies) || void 0 === c ? void 0 : c.info[g]) || void 0 === u ? void 0 : u.sign);
                    const f = null !== (p = null === (h = null === (d = this.tagCtx) || void 0 === d ? void 0 : d.props) || void 0 === h ? void 0 : h.sale) && void 0 !== p ? p : 0;
                    if (f > 0) {
                        e = Number(e);
                        let t = Math.ceil(e * (f / 100));
                        const r = $.views.helpers.minFiscalPriceInCurrency(n);
                        t = t < r ? -r : -Math.ceil(t / r) * r,
                        e += t,
                        m[0] = `${e}`
                    }
                    if ("RUB" === g && "byn" !== n)
                        return $.views.helpers.formatPrice(m[0], null, n || "₽");
                    let y, v = e;
                    if ("byn" === n || "BYN" === g) {
                        v = Math.floor(e),
                        y = "00";
                        const t = e.toString().replace(",", ".").split(".")[1];
                        (null == t ? void 0 : t.length) > 0 && (y = t.substring(0, 2),
                        1 == y.length && (y += "0")),
                        n = "р."
                    } else
                        "AMD" !== g && "KZT" !== g || "string" == typeof e ? "UZS" === g ? v = 100 * parseInt(e / 100) : "KGS" === g && (v = Math.floor(e)) : v = 10 * parseInt(e / 10);
                    return $.views.helpers.formatPrice(v, y, n)
                },
                priceUsdRaw: function(e) {
                    var t, n, r;
                    if (!(null === (r = null === (n = null === (t = wb.global) || void 0 === t ? void 0 : t.settings) || void 0 === n ? void 0 : n.variables) || void 0 === r ? void 0 : r.toUsdExchangeRate))
                        return 0;
                    return (parseInt(e * wb.global.settings.variables.toUsdExchangeRate * 100) / 100).toFixedNumber(2)
                },
                priceUsd: function(e) {
                    var t, n, r;
                    if (!(null === (r = null === (n = null === (t = wb.global) || void 0 === t ? void 0 : t.settings) || void 0 === n ? void 0 : n.variables) || void 0 === r ? void 0 : r.toUsdExchangeRate))
                        return "";
                    return "$" + $.views.converters.priceUsdRaw(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g, "&nbsp;").replace(".", ",")
                },
                urlForGood: function(e, t, n, r, s, o, i) {
                    const a = new URL("/catalog/" + e + "/detail.aspx",window.location.origin);
                    return n && a.searchParams.set("targetUrl", n),
                    o && a.searchParams.set("size", o),
                    i && a.searchParams.set("helpKursk", "true"),
                    r && (a.hash = r),
                    a.toString()
                },
                urlForStatic: function(e, t) {
                    return wb.settings.staticSiteUrl + e
                },
                toLower: function(e) {
                    return null == e ? void 0 : e.toLowerCase()
                },
                dateFromTimestamp: function(e, t) {
                    return new Date(e).format(t || "dd.MM.yyyy HH:mm")
                },
                formatDate: function(e, t) {
                    var n;
                    if (!e)
                        return "";
                    const r = new Date(e);
                    return (null === (n = this.tagCtx) || void 0 === n ? void 0 : n.props.yearFormat) && (new Date).getFullYear() != r.getFullYear() && (t += this.tagCtx.props.yearFormat),
                    r.format(t)
                },
                humanDate: function(e, t) {
                    if (!e)
                        return "";
                    "string" == typeof e && (e = new Date(e));
                    const n = e => `${e} мес`
                      , r = e => $.pluralize(e, "{0} год", "{0} года", "{0} лет")
                      , {years: s, months: o, days: i} = wb.helpers.date.diff(e);
                    let a = (s > 0 || o > 0) && i > 15 ? o + 1 : o;
                    return s > 0 ? 0 == a ? r(s) : 12 == a ? r(s + 1) : `${r(s)} ${n(a)}` : o > 0 ? 12 == a ? r(s + 1) : n(a) : null != t ? t : $.pluralize(i, "{0} день", "{0} дня", "{0} дней")
                },
                humanTime: function(e) {
                    var t, n, r, s;
                    if (e <= 0 || isNaN(e))
                        return "";
                    const o = null === (n = null === (t = this.tagCtx) || void 0 === t ? void 0 : t.props) || void 0 === n ? void 0 : n.genitive
                      , i = []
                      , a = Math.floor(e % 86400 / 3600);
                    a && i.push(o ? $.pluralize(a, "{0} часа", "{0} часов") : $.pluralize(a, "{0} час", "{0} часа", "{0} часов"));
                    const l = null === (s = null === (r = this.tagCtx) || void 0 === r ? void 0 : r.props) || void 0 === s ? void 0 : s.withSeconds
                      , c = Math.floor(e % 3600 / 60) + (l ? 0 : 1);
                    if (c && i.push(o ? $.pluralize(c, "{0} минуты", "{0} минут") : $.pluralize(c, "{0} минута", "{0} минуты", "{0} минут")),
                    l) {
                        const t = e % 60;
                        t && i.push(o ? $.pluralize(t, "{0} секунды", "{0} секунд") : $.pluralize(t, "{0} секунда", "{0} секунды", "{0} секунд"))
                    }
                    return i.reduce(( (e, t, n, r) => {
                        if (0 == n)
                            return t;
                        return `${e}${r.length - 1 == n ? " и " : ", "}${t}`
                    }
                    ), "")
                },
                differenceDatesInSeconds: function(e=new Date, t=0) {
                    const n = new Date(e).addDays(t)
                      , r = new Date
                      , s = Math.floor((n - r) / 1e3);
                    return Math.max(0, s)
                },
                humanTimerFormat: function(e=0, t=!1) {
                    if (e <= 0 || isNaN(e))
                        return "время закончилось";
                    const n = Math.floor(e / 3600)
                      , r = Math.floor(e % 3600 / 60)
                      , s = e % 60;
                    if (e < 86400)
                        return `${t ? "" : $.pluralize(n, "остался", "осталось")} ${n < 10 ? "0" : ""}${n}${t ? " ч " : ":"}${r < 10 ? "0" : ""}${r}${t ? " мин " : ":"}${s < 10 ? "0" : ""}${s}${t ? " сек" : ""}`;
                    {
                        const t = Math.floor(e / 86400);
                        return $.pluralize(t, "остался {0} день", " осталось {0} дня", "осталось {0} дней")
                    }
                },
                humanTimerFormatSimple: function(e=0) {
                    const t = Math.floor(e / 3600)
                      , n = Math.floor(e % 3600 / 60)
                      , r = e % 60;
                    return `${t > 0 ? `${t < 10 ? "0" : ""}${t}:` : ""}${n < 10 ? "0" : ""}${n}:${r < 10 ? "0" : ""}${r}`
                },
                dateStringToFormat: function(e, t) {
                    if (!e || "string" != typeof e)
                        return "";
                    const [n,r,s] = e.split(".").map((e => parseInt(e)));
                    try {
                        return new Date(s,r - 1,n).format(t || "dd MMMM yyyy")
                    } catch (e) {
                        return ""
                    }
                },
                localize: function(e) {
                    return $.localize(e, Array.prototype.slice.call(arguments, 1))
                },
                pluralize: function(e) {
                    return $.pluralize(null != e ? e : 0, Array.prototype.slice.call(arguments, 1))
                },
                customDateTimeFormat: function(e, t, n, r, s) {
                    s || (s = "HH:mm");
                    var o = new Date(e)
                      , i = new Date;
                    if (o.toDateString() === i.toDateString())
                        return n + ", " + o.format(s);
                    var a = function() {
                        return this.setDate(this.getDate() - 1),
                        this
                    }
                    .call(i);
                    if (o.toDateString() === a.toDateString())
                        return r + ", " + o.format(s);
                    var l = o.format(t);
                    return o.getFullYear() < i.getFullYear() ? l + " " + o.getFullYear() + ", " + o.format(s) : l + ", " + o.format(s)
                },
                divideNumberBySeparator: function(e, t) {
                    return Object.is(e, -0) ? "-0" : null == e ? void 0 : e.toString().replace(/\B(?=(\d{3})+(?!\d))/g, t || "&nbsp;")
                },
                trimWord: $.views.helpers.trimWord,
                join: function(e) {
                    if (!e || 0 == e.length)
                        return "";
                    const {upper: t, prefix: n, separator: r} = this.tagCtx.props;
                    return e.map((e => (t && (e = e.toUpperCase()),
                    n && (e = `${n}${e}`),
                    e))).join(r)
                },
                humanBytes: e => {
                    const t = ["Б", "КБ", "МБ", "ГБ"];
                    let n = 0;
                    for (; n < t.length - 1 && e >= 1024; )
                        e /= 1024,
                        n++;
                    return `${+e.toFixed(2)} ${t[n]}`
                }
                ,
                deliveryDateTxt: function(e, t) {
                    if (!e || "number" != typeof e)
                        return "";
                    let n;
                    const r = new Date(Date.now())
                      , s = new Date(r.getTime() + 60 * e * 60 * 1e3);
                    s.is1stJan() && (s.setDate(s.getDate() + 1),
                    e += 24);
                    const o = 24 - r.getHours()
                      , i = s.getHours();
                    return r.getDate() === s.getDate() && e < 24 ? n = i < 9 ? "Сегодня утром" : i < 23 ? t ? e < 5 ? "Сегодня за 2–4 часа" : $.pluralize(e, "Сегодня за {0} час", "Сегодня за {0} часа", "Сегодня за {0} часов") : $.pluralize(e, "За {0} час", "За {0} часа", "За {0} часов") : "Завтра утром" : e < o + 9 ? n = e < 5 ? "Завтра утром" : "Завтра" : e < 24 + o ? n = i < 23 ? "Завтра" : "Послезавтра" : e < 48 + o && i < 23 ? n = "Послезавтра" : (i >= 23 && (e += o),
                    n = $.views.converters.dateFromTimestamp(Date.now() + 60 * e * 60 * 1e3, "d MMMM")),
                    n
                },
                minutesToTime: function(e) {
                    return Math.floor(e / 60) + ":" + (e % 60).toString().padStart(2, "0")
                },
                fastDeliveryText: function(e, t, n) {
                    if (!t || !e || !n)
                        return;
                    const r = new Date
                      , s = 60 * r.getHours() + r.getMinutes()
                      , o = n[0]
                      , i = n[1]
                      , a = s + 60 * e
                      , l = t[0].start
                      , c = $.views.converters.minutesToTime(l);
                    if (s <= o)
                        return `Сегодня с ${c}`;
                    if (s >= o && s <= i) {
                        return t.some((e => a < e.start)) ? e < 5 ? "За 2–4 часа" : $.pluralize(e, "За {0} час", "За {0} часа", "За {0} часов") : `Завтра с ${c}`
                    }
                    return `Завтра с ${c}`
                },
                formatTimeStr: function(e) {
                    return e.replace(/^0(\d):/, "$1:")
                },
                dayNameFromDate: function(e, t=!1, n=!1) {
                    if (!e)
                        return;
                    const r = new Date
                      , s = e instanceof Date ? e : new Date(e)
                      , o = r.daysBetween(s);
                    return 0 === o ? "Сегодня" : 1 === o ? "Завтра" : 2 === o && t ? "Послезавтра" : n && s.getFullYear() !== r.getFullYear() ? s.format("d MMMM yyyy") : s.format("d MMMM")
                },
                catalogDeliveryDate: function(e) {
                    return `Доставка <span class="product-card__delivery-date">${$.views.converters.deliveryDateTxt(e)}</span>`
                },
                deliveryType: function() {
                    const {storeType: e} = this.tagCtx.props;
                    return `${4 & ~e ? "Доставка" : "Грузовая доставка"} ${8 & ~e ? "Wildberries" : "продавца"}`
                },
                formatString: function() {
                    let[e,t,n,r] = arguments;
                    if ("string" != typeof e)
                        throw new Error("Template must be a string");
                    return n && (e = e.replace(/\[(\d+)\]/gm, "{$1}")),
                    r && (t = $.views.converters.encode(t)),
                    String.format.apply(null, [e, t])
                },
                trim: function(e) {
                    return null == e ? void 0 : e.trim()
                },
                imgForPromoCategory: function(e=0, t=!1, n, r) {
                    const s = t ? "small/" : ""
                      , o = n ? `promo_custom/pack_${r}/` : "promo_v2/"
                      , i = e < 1e6 ? e : parseInt((e + "").slice(-6));
                    return wb.helpers.url.urlToExternalStatic(`/vol1/wbx-catalog/${o}${s}${i}.webp`)
                },
                fileName: function(e) {
                    var t, n;
                    const r = e.substring(e.lastIndexOf("/") + 1)
                      , s = null === (n = null === (t = this.tagCtx) || void 0 === t ? void 0 : t.props) || void 0 === n ? void 0 : n.mode;
                    return "name" == s ? r.substring(0, r.lastIndexOf(".")) || r : "extension" == s ? r.slice(1 + (Math.max(r.lastIndexOf("."), 0) || r.length)) || "" : r
                },
                convertToText: function(e) {
                    if (!Array.isArray(e) || 0 === e.length)
                        return "";
                    const t = {
                        text: "комментарий",
                        photo: "фото",
                        video: "видео"
                    }
                      , n = e.map((e => t[e.toLowerCase()])).filter(Boolean);
                    if (0 === n.length)
                        return "";
                    if (1 === n.length)
                        return $.localize(n[0]);
                    const r = n.pop()
                      , s = n.join(", ");
                    return $.localize(`${s} и&nbsp;${r}`)
                },
                toHttps: e => $.views.converters.url(null == e ? void 0 : e.replace(/^http:/i, "https:")),
                onlyDigits: e => null == e ? void 0 : e.replace(/[^\d\.]/g, ""),
                toWebp: function(e) {
                    var t, n;
                    return (null === (n = null === (t = WbSpaModel.prototype) || void 0 === t ? void 0 : t.$apiSupport) || void 0 === n ? void 0 : n.webpImage) ? "webp" : e
                },
                useWebp: function(e) {
                    var t, n;
                    return (null === (n = null === (t = WbSpaModel.prototype) || void 0 === t ? void 0 : t.$apiSupport) || void 0 === n ? void 0 : n.webpImage) ? null == e ? void 0 : e.replace(/^(.*\.)(jpg|jpeg)$/i, "$1webp") : e
                },
                toNumber: e => +e,
                fixHtml: e => e ? (new DOMParser).parseFromString(e, "text/html").body.innerHTML : ""
            }),
            $.views.tags({
                range: {
                    boundProps: ["start", "end"],
                    baseTag: "for",
                    render: function(e) {
                        var t = e
                          , n = this.tagCtx
                          , r = n.props.start || 0
                          , s = n.props.end
                          , o = n.params.props;
                        if (r || s)
                            if (n.args.length)
                                $.isArray(t) && (t = t.slice(r, s));
                            else {
                                t = [],
                                s = s || 0;
                                for (var i = r; i <= s; i++)
                                    t.push(i)
                            }
                        return arguments.length || o && (o.start || o.end) ? this.base(t) : this.base()
                    },
                    onArrayChange: function(e, t) {
                        this.refresh()
                    }
                },
                calendarV2: {
                    dataBoundOnly: !0,
                    onUpdate: !1,
                    bindTo: ["selected", "limitTo", "limitFrom"],
                    linkedCtxParam: ["selected", "limitTo", "limitFrom"],
                    format: "dd.MM.yyyy",
                    init: function(e) {
                        e.props.format && (this.format = e.props.format),
                        e.props.appendTo && (this.appendTo = e.props.appendTo)
                    },
                    onBind: function(e) {
                        const t = {
                            x: 0,
                            y: 1
                        };
                        e.props.offsetX && (t.x = e.props.offsetX),
                        this.datePicker = $(e.props.target).glDatePicker({
                            selectedDate: this.ctxPrm("selected") ? this.ctxPrm("selected") : e.props.limitTo,
                            customWidth: e.props.width,
                            zIndex: e.props.zIndex,
                            appendTo: this.appendTo,
                            overlay: "m" === wb.settings.displayMode,
                            useClick: !0,
                            calendarOffset: t,
                            onClick: (t, n, r, s) => {
                                this.ctxPrm("selected", r),
                                "function" == typeof e.props.onSelect && e.props.onSelect(r.format(this.format))
                            }
                        }).glDatePicker(!0)
                    },
                    onAfterLink: function(e, t, n, r, s) {
                        var o = {
                            from: e.props.defaultFrom ? e.props.defaultFrom : new Date(2001,1,1),
                            to: new Date
                        };
                        e.props.limitFrom && (o.from = e.props.limitFrom),
                        e.props.limitTo && (o.to = e.props.limitTo),
                        this.datePicker.options.selectableDateRange = [o];
                        for (var i = [], a = o.from.getFullYear(); a <= o.to.getFullYear(); a++)
                            i.push(a);
                        this.datePicker.options.selectableYears = i,
                        this.datePicker.render()
                    }
                },
                swiper: {
                    dataBoundOnly: !0,
                    mainElement: ".custom-slider",
                    boundProps: ["total", "needRefresh", "activeSlide"],
                    template: '\n                <div class="custom-slider{{if ~tag.showArrows}} {{: ~tag.sliderClass}}{{/if}}">\n                    <div class="custom-slider__list">\n                        {{include tmpl=#content/}}\n                    </div>\n                    {{if ~tag.showArrows}}\n                    <button type="button" aria-label="Назад" class="custom-slider__arrow custom-slider__arrow--prev" data-link="{on ~tag.scroll \'left\'}disabled{:~leftArrowDisabled}"></button>\n                    <button type="button" aria-label="Вперёд" class="custom-slider__arrow custom-slider__arrow--next" data-link="{on ~tag.scroll \'right\'}disabled{:~rightArrowDisabled}"></button>\n                    {{/if}}\n                </div>\n            ',
                    init: function() {
                        var e, t, n;
                        const r = this.tagCtx.props.slidesPerView;
                        this.slidesPerView = "auto" === r || "number" == typeof r ? r : 1,
                        this.showArrows = null !== (e = this.tagCtx.props.showArrows) && void 0 !== e && e,
                        this.sliderClass = null !== (t = this.tagCtx.props.sliderClass) && void 0 !== t && t,
                        this.slideSelector = null !== (n = this.tagCtx.props.slideSelector) && void 0 !== n ? n : ".custom-slider__item",
                        this.checkArrows = this.checkArrows.bind(this),
                        this.doOnScroll = WbSpaModel.prototype.$helper.throttle(this.doOnScroll.bind(this), 300),
                        this.scrollToSlide = this.scrollToSlide.bind(this)
                    },
                    onAfterLink: function() {
                        this.checkArrows();
                        const e = this.tagCtx.props.activeSlide;
                        void 0 !== e && this.scrollToSlide(e)
                    },
                    onBind: function(e) {
                        this.containerList = this.mainElem[0].querySelector(".custom-slider__list"),
                        this.containerList.addEventListener("scroll", this.doOnScroll)
                    },
                    onUpdate: function(e, t, n) {
                        return "propertyChange" === e.type && ("needRefresh" === t.path ? (this.containerList.scrollLeft = 0,
                        this.checkArrows()) : "activeSlide" === t.path && this.scrollToSlide(t.value)),
                        !1
                    },
                    scroll: function(e) {
                        const t = this.containerList.querySelector(this.slideSelector).clientWidth + parseInt(getComputedStyle(this.containerList).gap);
                        let n = this.slidesPerView;
                        if ("auto" === this.slidesPerView) {
                            const e = this.mainElem[0].getBoundingClientRect();
                            n = Math.floor(e.width / t)
                        }
                        const r = t * n
                          , s = Math.round(this.containerList.scrollLeft) + ("left" === e ? -r : r);
                        this.containerList.scrollLeft = Math.round(s / t) * t
                    },
                    scrollToSlide: function(e) {
                        const t = e * (this.containerList.querySelector(this.slideSelector).clientWidth + parseInt(getComputedStyle(this.containerList).gap));
                        this.containerList.scrollLeft = t
                    },
                    doOnScroll: async function(e) {
                        this.checkArrows()
                    },
                    checkArrows: async function() {
                        window.requestAnimationFrame(( () => {
                            const e = this.containerList.querySelectorAll(this.slideSelector);
                            if (!e.length > 0)
                                this.ctxPrm("leftArrowDisabled", !0),
                                this.ctxPrm("rightArrowDisabled", !0);
                            else {
                                const t = this.mainElem[0].getBoundingClientRect()
                                  , n = e[e.length - 1].getBoundingClientRect();
                                this.ctxPrm("leftArrowDisabled", this.containerList.scrollLeft <= 0),
                                this.ctxPrm("rightArrowDisabled", t.right + 5 >= n.right)
                            }
                        }
                        ))
                    }
                },
                btnAdvertising: {
                    template: "\n            {{if ordBannerMark}}<button type=\"button\" class=\"btn-advertising\" title=\"\" data-link=\"{on ~tag.onClickBtn}{tooltip classes='tooltip-advertising j-tooltip-advertising tooltip--dark' pos='alignright bottom' trigger='hover' distance=0 tmplName='advertisingTooltipTmpl' tmplData=ordBannerMark}\"><span>Реклама</span></button>{{/if}}\n        ",
                    onClickBtn: function(e) {
                        e.preventDefault()
                    }
                },
                infiniteScroll: {
                    mainElement: "div",
                    template: '<div class="scroll-loader"></div>',
                    onAfterLink() {
                        this.scrollObserver = new IntersectionObserver(( (e, t) => {
                            e.forEach((e => {
                                e.isIntersecting && this.tagCtx.props.callback()
                            }
                            ))
                        }
                        ),{
                            threshold: 0,
                            rootMargin: "0px 0px 50% 0px"
                        }),
                        this.scrollObserver.observe(this.mainElem[0])
                    },
                    onDispose() {
                        this.scrollObserver.disconnect()
                    }
                },
                onSwipe: {
                    init: function(e) {
                        var t;
                        this.threshold = 10,
                        1 == (null === (t = e.args) || void 0 === t ? void 0 : t.length) && "function" == typeof e.args[0] && (this.onSwiped = e.args[0]),
                        this.onTouchStart = this.onTouchStart.bind(this),
                        this.onTouchMove = this.onTouchMove.bind(this),
                        this.onTouchEnd = this.onTouchEnd.bind(this)
                    },
                    onBind: function() {
                        this.onSwiped && (this.linkCtx.elem.addEventListener("touchstart", this.onTouchStart, !1),
                        this.linkCtx.elem.addEventListener("touchmove", this.onTouchMove, !1),
                        this.linkCtx.elem.addEventListener("touchend", this.onTouchEnd, !1))
                    },
                    onUnbind: function() {
                        this.linkCtx.elem.removeEventListener("touchstart", this.onTouchStart, !1),
                        this.linkCtx.elem.removeEventListener("touchmove", this.onTouchMove, !1),
                        this.linkCtx.elem.removeEventListener("touchend", this.onTouchEnd, !1)
                    },
                    onTouchStart: function(e) {
                        const t = e.changedTouches[0];
                        this.startX = t.pageX,
                        this.startY = t.pageY,
                        e.cancelable && e.preventDefault()
                    },
                    onTouchMove: function(e) {
                        const t = e.changedTouches[0];
                        this.deltaX = t.pageX - this.startX,
                        this.deltaY = t.pageY - this.startY,
                        e.cancelable && e.preventDefault()
                    },
                    onTouchEnd: function(e) {
                        const t = Math.atan2(-this.deltaY, -this.deltaX)
                          , n = 3 * Math.PI / 4
                          , r = Math.PI / 4;
                        let s;
                        s = r <= t && t <= n ? "up" : -n <= t && t <= -r ? "down" : -n < t && t < n ? "left" : "right",
                        (Math.abs(this.deltaX) >= this.threshold || Math.abs(this.deltaY) >= this.threshold) && this.onSwiped(s),
                        e.cancelable && e.preventDefault()
                    }
                }
            })
        }
        ,
        31383: () => {
            "use strict";
            const e = "tail_object_data"
              , t = ["SNT", "SNH", "SNS", "SST", "SHT"]
              , n = ["SNS", "ANS", "SNH", "ANH", "SHT"]
              , r = ["SAB", "ANH", "ANS", "AST", "ATR"]
              , s = ["MBB", "MBM", "MBS", "BBB", "BBA", "CBB", "CBA", "CBU", "CBS"];
            const o = function() {
                function o() {}
                var i = o.prototype;
                return i.getTermsFromTailObject = function(e, o) {
                    var i;
                    const a = this.getTailObjectData()
                      , l = {
                        filters: a.filters,
                        filters_entry_point: a.filters_entry_point
                    }
                      , c = {
                        bid: a.bid,
                        bid_index: a.bid_index
                    }
                      , u = {
                        category: a.category,
                        id_category: a.id_category
                    };
                    if ("AAA" === e || "ADI" === e) {
                        const e = this.getTailObjectData();
                        let t = "";
                        switch (e.page_type) {
                        case "brand":
                            t = e.brand;
                            break;
                        case "catalog":
                            t = e.id_category;
                            break;
                        case "search":
                            t = e.search_text;
                            break;
                        case "seller":
                            t = e.page_info;
                            break;
                        default:
                            t = ""
                        }
                        return {
                            page_type: e.page_type,
                            page_info: t
                        }
                    }
                    if ("AHT" === e) {
                        const e = this.getTailObjectData();
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            normquery: e.normquery,
                            query_id: e.query_id,
                            filters: e.filters,
                            filters_entry_point: e.filters_entry_point,
                            rmi: e.rmi,
                            search_text: e.search_text
                        }
                    }
                    if ("SCL" === e) {
                        const e = this.getTailObjectData();
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            query_id: e.query_id,
                            rmi: e.rmi
                        }
                    }
                    if ("SCM" === e) {
                        const e = this.getTailObjectData();
                        return {
                            catalog_type: e.catalog_type,
                            catalog_value: e.catalog_value,
                            query_id: e.query_id,
                            rmi: e.rmi
                        }
                    }
                    function d() {
                        return Object.assign(Object.assign({}, l), u)
                    }
                    if (s.includes(e))
                        return Object.assign(Object.assign({}, c), l);
                    if (t.includes(e) || r.includes(e)) {
                        const t = Object.assign({
                            catalog_type: a.catalog_type,
                            catalog_value: a.catalog_value,
                            normquery: a.normquery,
                            query_id: a.query_id,
                            rmi: a.rmi,
                            search_text: a.search_text
                        }, l);
                        return n.includes(e) && (t.text_typed = null !== (i = a.text_typed) && void 0 !== i ? i : ""),
                        t
                    }
                    return "STB" === e ? function() {
                        var e;
                        return {
                            filters: a.filters,
                            filters_entry_point: a.filters_entry_point,
                            brand: a.brand,
                            query_id: a.query_id,
                            text_typed: null !== (e = a.text_typed) && void 0 !== e ? e : ""
                        }
                    }() : "SCF" === e ? {
                        search_text: a.search_text
                    } : "SPA" === e ? {
                        query_id: a.query_id
                    } : "MAB" === e || "MCS" === e ? Object.assign({
                        catalog_type: a.catalog_type,
                        catalog_value: a.catalog_value,
                        preset_type: a.preset_type,
                        recid: a.recid
                    }, o) : "MBL" === e ? Object.assign({
                        bid: a.bid
                    }, l) : "MBT" === e ? Object.assign(Object.assign(Object.assign({}, c), l), {
                        tv_block: 1
                    }) : ["BCR", "IBN", "IBC"].includes(e) ? l : "BCA" === e ? d() : "CCT" === e || "CCR" === e ? {} : ["CCC", "CTC", "CAB"].includes(e) ? d() : "ICC" === e ? l : "IAB" === e ? Object.assign(Object.assign({}, l), {
                        banner_name: a.banner_name
                    }) : ["ICO", "ICV", "ICR", "ICS", "ISP"].includes(e) ? {
                        parent_item_id: a.parent_item_id
                    } : "ISC" === e ? Object.assign(Object.assign({}, l), {
                        parent_item_id: a.parent_item_id
                    }) : "IPT" === e ? {
                        parent_item_id: a.parent_item_id
                    } : ["CCB", "CCM", "CPF"].includes(e) ? {
                        item_ids: a.item_ids
                    } : "CRV" === e ? {
                        empty_cart: a.empty_cart
                    } : "CSI" === e || "TCM" === e ? {
                        parent_item_id: a.parent_item_id
                    } : ["CSD", "CAD", "WLC", "WLA"].includes(e) ? Object.assign(Object.assign({
                        discount_name: "Скидка WB клуба"
                    }, l), u) : ["PBC", "PBB"].includes(e) ? c : "PCB" === e ? u : ["PSA", "PBA", "PAP", "AMB", "PPA", "PCS", "DLV", "DCV", "DRE"].includes(e) ? {} : "FBR" === e ? l : ["AAA", "ADI"].includes(e) ? {
                        page_type: a.page_type,
                        page_info: a.page_info
                    } : ["LLI", "AIL"].includes(e) ? {
                        special_project: a.special_project
                    } : null
                }
                ,
                i.getTailObjectData = function() {
                    var t;
                    return null !== (t = sessionStorage.getObject(e)) && void 0 !== t ? t : {}
                }
                ,
                i.updateTailObjectDataFromHtml = function(e) {
                    if ([...s, "MBL", "MBT"].includes(e.l)) {
                        const t = {
                            bid: e.t,
                            bid_index: e.t2
                        };
                        this.updateTailObjectData(t)
                    } else if ("IAB" === e.l) {
                        const t = {
                            banner_name: e.t
                        };
                        this.updateTailObjectData(t)
                    } else if (["ICO", "ICV", "ICR", "ICS", "ISC", "ISP"].includes(e.l)) {
                        const t = {
                            parent_item_id: e.t
                        };
                        this.updateTailObjectData(t)
                    }
                }
                ,
                i.updateTailObjectData = function(e) {
                    const t = this.getTailObjectData();
                    e.terms && (e.terms = Object.assign(Object.assign({}, t.terms), e.terms));
                    const n = Object.assign(Object.assign({}, t), e);
                    this._saveTailObjectData(n)
                }
                ,
                i._saveTailObjectData = function(t) {
                    try {
                        if (!t)
                            return;
                        sessionStorage.putObject(e, t)
                    } catch (e) {}
                }
                ,
                o
            }();
            wb.namespace("analitics", ( () => {
                const e = "wbAnalitic"
                  , t = "__wba_s"
                  , n = "lats_search_type"
                  , r = "search_suggest"
                  , s = "purchase_checkout"
                  , i = "stat_helper"
                  , a = "query_id_search"
                  , l = {
                    l: "AAA",
                    iid: 1
                }
                  , c = 3e5
                  , u = new o;
                let d = {
                    moveFrom: ""
                }
                  , h = "";
                if (null == sessionStorage.getItem(e)) {
                    const t = JSON.parse(localStorage.getItem(e));
                    (null == t ? void 0 : t.expired) > Date.now() - c && sessionStorage.setItem(e, JSON.stringify(t.payload))
                }
                const p = JSON.parse(localStorage.getItem(i));
                function m() {
                    return d
                }
                async function g() {
                    return WbSpaModel.prototype.$services.splitterService.getSplitInfo()
                }
                async function f(e) {
                    return WbSpaModel.prototype.$services.splitterService.getSplitInfoV2(e)
                }
                function y(e) {
                    u.updateTailObjectData(e)
                }
                function v(e, t=null, n="", r=!1) {
                    var s;
                    e || (e = "");
                    const o = ["targetUrl", "iid", "l", "lw", "s", "t", "t1", "t2", "t3", "t4", "logs"]
                      , i = (e, r) => {
                        var s;
                        return null !== (s = null != e ? e : null == t ? void 0 : t[r]) && void 0 !== s ? s : n
                    }
                      , a = {}
                      , l = e.split("|");
                    for (let e = r ? 2 : 0; e < o.length; e++) {
                        let t = null !== (s = l[e]) && void 0 !== s ? s : null
                          , n = o[e];
                        if (!n)
                            return;
                        a[n] = i(t, n)
                    }
                    return a
                }
                return (null == p ? void 0 : p.expired) > Date.now() - c && (d = p.info),
                {
                    getTermsFromTailObject: function(e) {
                        return u.getTermsFromTailObject(e)
                    },
                    updateTailObjectData: y,
                    getTailObjectData: function() {
                        return u.getTailObjectData()
                    },
                    getTermByTermName: function(e) {
                        const t = wb.cookieHelper.getCookie("_wbauid")
                          , n = (new Date).format("yyyyMMddHHmmss", !0)
                          , r = {
                            qid: "qid",
                            recid: "recid"
                        };
                        return r[e] ? `${r[e]}${t}${n}` : void 0
                    },
                    analiticsInfoToListName: function(e={}, t={}) {
                        const n = Object.assign(Object.assign({}, e), t)
                          , {l: r="", lw: s="", s: o="", t: i="", t1: a="", t2: l="", t3: c="", t4: u="", t5: d=""} = n;
                        return `${r}|${s}|${o}|${i}|${a}|${l}|${c}|${u}|${d}`
                    },
                    getAnaliticsInfoFromTargetUrl: v,
                    getTailObjectFromAnalyticsInfo: function(e, t, n) {
                        return function({l: e="", lw: t="", s: n="", t: r="", t1: s="", t2: o="", t3: i="", t4: a="", t5: l="", t6: c="", t7: u=""}={}, d=null) {
                            const h = {
                                loc: e,
                                loc_way: t,
                                sort: n
                            };
                            if (d)
                                return h.terms = d,
                                h;
                            const p = l
                              , m = u
                              , g = o
                              , f = {
                                catalog_type: o,
                                catalog_value: s,
                                normquery: "",
                                rmi: ""
                            }
                              , y = {
                                catalog_type: "",
                                catalog_value: "",
                                normquery: "",
                                rmi: ""
                            }
                              , v = {
                                filters: "",
                                filters_entry_point: ""
                            }
                              , b = {}
                              , w = {
                                category: r,
                                id_category: s
                            }
                              , S = {
                                bid: r,
                                bid_index: o
                            }
                              , _ = {
                                supplier_type: s
                            };
                            return ["SVR", "STA", "SNT", "SHS", "SNH", "STH", "SNS", "SHT", "SCF", "STC", "STB"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign(Object.assign({}, f), v), {
                                    search_text: r,
                                    query_id: p
                                })
                            }) : ["SST"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    search_text: r,
                                    catalog_value: s,
                                    catalog_type: o
                                }
                            }) : ["SAB", "AVR", "ANH", "ANS", "AST", "AHT", "ATR"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    search_text: i,
                                    query_id: p
                                })
                            }) : ["ATC"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    id_category: i,
                                    query_id: p
                                })
                            }) : ["ATB"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    brand: i,
                                    query_id: p,
                                    filtersT7: m
                                })
                            }) : "STB" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    brand: r,
                                    catalog_value: s,
                                    catalog_type: o,
                                    query_id: p
                                }
                            }) : "STC" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign(Object.assign({}, f), v), {
                                    category: r,
                                    query_id: p
                                })
                            }) : "STS" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign(Object.assign({}, f), v), {
                                    supplier_name: r,
                                    supplier_id: "",
                                    query_id: p
                                })
                            }) : ["STR", "STG"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign(Object.assign({}, v), y), {
                                    tag_text: r,
                                    tag_index: s,
                                    supplier_id: "",
                                    query_id: p
                                })
                            }) : ["SBA", "SIS", "SCM", "SCN", "SPH", "STM", "SCR", "SPA"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    query_id: p
                                }
                            }) : ["MBB", "MBH", "MBM", "MBS", "MBV"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, S), v)
                            }) : "MBT" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign(Object.assign({}, S), v), {
                                    tv_block: s
                                })
                            }) : ["MBG", "MBF"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, S)
                            }) : ["MAB", "AMB"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, b)
                            }) : ["MCS", "MCB", "MCP", "MCV", "MCO", "MPF", "MCM", "MCN", "MSA"].includes(e) ? Object.assign({}, h) : "MCD" === e || "MAD" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    promo_name: r,
                                    promo_id: s,
                                    type_of_block: l
                                }
                            }) : ["BBB", "BBA", "BBD"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, v), S)
                            }) : "BCA" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({
                                    filters: g
                                }, w)
                            }) : ["BPA"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    brand: i,
                                    filters: m
                                })
                            }) : ["BCR", "BCB", "BCP"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, v)
                            }) : ["CCC", "CTC"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, w), {
                                    filters: g,
                                    filters_entry_point: ""
                                })
                            }) : "CAB" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign(Object.assign({}, v), b), {
                                    id_category: i
                                })
                            }) : "CAA" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign(Object.assign({}, v), b), {
                                    search_text: i,
                                    query_id: p,
                                    filters: m
                                })
                            }) : ["CBB", "CBA", "CBS", "CBU"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, S), v)
                            }) : ["CCA", "CCR", "CCT", "CAR", "CBP", "CPA"].includes(e) ? Object.assign({}, h) : "CAR" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    search_text: r,
                                    catalog_value: s,
                                    catalog_type: o,
                                    query_id: p,
                                    filters: m
                                }
                            }) : "SPL" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, _)
                            }) : ["SBB", "SBT", "SBC"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, _), S)
                            }) : "SCA" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, _), {
                                    category: r
                                })
                            }) : "SBR" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, _), {
                                    brand_index: o
                                })
                            }) : ["SCB", "SCO", "SCP"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, _)
                            }) : ["ABP", "ABC", "ABN"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }, b), {
                                    brand: i,
                                    filters: m
                                })
                            }) : ["ICO", "ICB", "ICF", "ICV", "ICD", "ICR", "ICE", "ICS", "IBS", "ICL", "ICI", "ISC", "IAD"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }, v)
                            }) : "ICA" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    parent_item_id: null == r ? void 0 : r.toString()
                                })
                            }) : "IAB" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, S), v)
                            }) : ["IBN", "IBP", "IBC", "ICC", "IRC", "ISP", "ITA"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, v)
                            }) : ["CCM", "CPF", "CRA"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    item_ids: r
                                }
                            }) : "CSI" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }
                            }) : "CRV" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    empty_cart: r
                                }
                            }) : ["CCS", "CSA"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: {}
                            }) : ["CRT", "CER", "CEB"].includes(e) ? Object.assign({}, h) : "CCB" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    item_ids: r,
                                    parent_item_id: null == s ? void 0 : s.toString(),
                                    subject_id: o,
                                    subject_parent_id: i,
                                    carousel_type: a
                                }
                            }) : ["DLV", "DCR", "DCV", "DRC", "DRE"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, v)
                            }) : "TCB" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }
                            }) : "TCM" === e || ["FCR", "FCS", "FRP", "FCV"].includes(e) || ["VRW", "VCV"].includes(e) || ["AAA", "ADI", "AAB", "AAC", "AAS"].includes(e) || ["LCS", "LCR", "WTL"].includes(e) || ["WSH", "WCA", "WCV", "WCS", "WCR", "WAB"].includes(e) || "RWA" === e || ["NCV", "NCB", "NCM", "NCR"].includes(e) || "NIA" === e || ["PRC", "PCV"].includes(e) || "PPM" === e ? Object.assign({}, h) : ["FBR", "FBV"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, v)
                            }) : "FBA" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    brand: i,
                                    filters: m
                                })
                            }) : "LBA" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, v)
                            }) : "PCA" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, v), {
                                    type: r,
                                    name: s,
                                    link: o
                                })
                            }) : "ITO" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString(),
                                    type_of_block: s
                                }
                            }) : "LSP" === e ? Object.assign(Object.assign({}, h), {
                                sort: "default",
                                terms: {
                                    project_name: r
                                }
                            }) : ["PBC", "PBB"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, S)
                            }) : ["PSA", "PBA", "PPA"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    bid: l,
                                    bid_index: c
                                })
                            }) : "PAP" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign(Object.assign({}, b), {
                                    category: l,
                                    id_category: c
                                })
                            }) : "PCB" === e ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, w)
                            }) : "PSP" === e ? Object.assign(Object.assign({}, h), {
                                terms: {
                                    parent_item_id: null == r ? void 0 : r.toString()
                                }
                            }) : "PCS" === e || ["WCI", "WCD"].includes(e) ? Object.assign({}, h) : ["TBV", "TBN", "TBC", "TBA", "TBP", "TBT"].includes(e) ? Object.assign(Object.assign({}, h), {
                                terms: Object.assign({}, S)
                            }) : {}
                        }(e, t = t || u.getTermsFromTailObject(null == e ? void 0 : e.l, n))
                    },
                    tryGetAnaliticsCodeForSearchAdvert: function(e) {
                        switch (e) {
                        case "SNH":
                            return "ANH";
                        case "SNS":
                            return "ANS";
                        case "SHT":
                            return "AHT";
                        case "STC":
                            return "ATC";
                        case "SNT":
                            return "SAB";
                        case "SST":
                            return "AST";
                        case "AAA":
                            return "ADI";
                        case "MBB":
                            return "AMB";
                        case "PBC":
                            return "PBA";
                        case "PBB":
                            return "PPA";
                        case "PCB":
                            return "PAP";
                        case "CSD":
                            return "CAD";
                        case "WLC":
                            return "WLA";
                        case "WCI":
                            return "WCD";
                        default:
                            return null
                        }
                    },
                    tryGetAdvertCode: function(e) {
                        switch (e) {
                        case "ANH":
                            return "SNH";
                        case "ANS":
                            return "SNS";
                        case "AHT":
                            return "SHT";
                        case "ATC":
                            return "STC";
                        case "SAB":
                            return "SNT";
                        case "AST":
                            return "SST";
                        case "ADI":
                            return "AAA";
                        default:
                            return null
                        }
                    },
                    getRecomendationsSplitterHeaders: async function() {
                        return await async function(e) {
                            var t;
                            const n = await f(e)
                              , r = WbSpaModel.prototype.$user.getUserInfo()
                              , s = (null !== (t = null == r ? void 0 : r.uid) && void 0 !== t ? t : 0).toString();
                            let o = "";
                            (null == n ? void 0 : n.length) && n.forEach((e => {
                                o += `${e.key}=${e.value};`
                            }
                            ));
                            const i = new Headers;
                            return i.set("UserID", s),
                            i.set("Test-Properties", (null == o ? void 0 : o.substring(0, o.length - 1)) || ""),
                            i
                        }("rec")
                    },
                    checkDataInSplitterServiceV2: async function(e, t, n) {
                        let r = !1;
                        if (e) {
                            const s = await f(e);
                            for (let e = 0; e < s.length; e++)
                                s[e].key === t && s[e].value === n && (r = !0,
                                e = s.length)
                        }
                        return r
                    },
                    getSplitInfo: g,
                    getSplitInfoV2: f,
                    appendSplitInfoV2: async function(e, t) {
                        return WbSpaModel.prototype.$services.splitterService.appendSplitInfoV2(e, t)
                    },
                    getStatInfo: m,
                    updateStatInfo: function(e) {
                        const t = m();
                        t.moveFrom = h || "",
                        h = "",
                        function(e, t) {
                            try {
                                null === localStorage || void 0 === localStorage || localStorage.putObject(i, {
                                    info: e,
                                    expired: Date.now() + c
                                }),
                                t || (d = e)
                            } catch (e) {
                                console.warn("Saving analitics state has failed"),
                                console.error(e.message)
                            }
                        }(t, e)
                    },
                    sendWbaEcomStat: function(e, t, n, r) {
                        var s;
                        try {
                            if (!window.wba || (!r && !(null == t ? void 0 : t.length)) > 0)
                                return;
                            if ((n = null != n ? n : {}).hasOwnProperty("cookies_alert") || (n.cookies_alert = wb.spa.getMainLayout().cookiePolicy.check() ? 1 : 0),
                            n.hasOwnProperty("country") || (n.country = wb.settings.currentLocale),
                            !n.hasOwnProperty("cluster")) {
                                const e = WbSpaModel.prototype.$user.getUserClusters();
                                e && (n.cluster = e)
                            }
                            n.address = null !== (s = this.currentAddress) && void 0 !== s ? s : "not_selected";
                            const o = (new Date).format("yyyy-MM-dd HH:mm:ss");
                            t.length && !r ? t.forEach((e => {
                                var t, r, s, i, a, l, c, u, d, h;
                                let p = {
                                    utcTime: o,
                                    id: null === (t = e.id) || void 0 === t ? void 0 : t.toString(),
                                    nm: Number(e.id),
                                    chrt: Number(e.chrt),
                                    rid: null === (r = e.rid) || void 0 === r ? void 0 : r.toString(),
                                    name: e.name,
                                    brand: e.brand,
                                    price: parseInt(e.price),
                                    inListIndex: parseInt(e.inListIndex) || 1,
                                    listName: e.listName,
                                    variant: null !== (s = e.variant) && void 0 !== s ? s : "",
                                    quantity: 1,
                                    affiliation: `${null !== (i = e.affiliation) && void 0 !== i ? i : ""}|${null !== (a = e.storeId) && void 0 !== a ? a : ""}`,
                                    category: null !== (l = e.category) && void 0 !== l ? l : "regular",
                                    category2: e.subjectId > 0 ? e.subjectId.toString() : "",
                                    category3: e.subjectParentId > 0 ? e.subjectParentId.toString() : "",
                                    coupon: `${null !== (c = e.feedbacksCount) && void 0 !== c ? c : ""}|${null !== (u = e.rating) && void 0 !== u ? u : ""}`,
                                    logs: null !== (d = e.logs) && void 0 !== d ? d : "",
                                    tailObject: e.tailObject
                                };
                                if ("cart_del" === (null == n ? void 0 : n.type_remove) || "after_check_data" === (null == n ? void 0 : n.type_remove) || "card" === (null == n ? void 0 : n.type_add))
                                    return p.quantity = e.quantity,
                                    void window.wba("ec:addProduct", p);
                                const m = parseInt(e.quantity) || 1;
                                window.wba("ec:setCurrency", WbSpaModel.prototype.$user.getCurrency());
                                const g = !!e.rid && m > 1 && (null === (h = p.rid) || void 0 === h ? void 0 : h.split(",")) || [];
                                for (let e = 0; e < m; e++)
                                    (null == g ? void 0 : g.length) > e && (p = Object.assign({}, p),
                                    p.rid = g[e]),
                                    window.wba("ec:addProduct", p)
                            }
                            )) : window.wba("ec:setCurrency", WbSpaModel.prototype.$user.getCurrency()),
                            window.wba("ec:setAction", e),
                            window.wba("ec:send", n)
                        } catch (e) {
                            console.log("wba exception", e)
                        }
                    },
                    savePurchaseCheckout: function(e) {
                        sessionStorage.setItem(s, e)
                    },
                    getPurchaseCheckout: function() {
                        var e;
                        return null !== (e = sessionStorage.getItem(s)) && void 0 !== e ? e : "not_found"
                    },
                    sendCarouselWbaEvent: function(e, t, n, r, s, o) {
                        "Carousel_All" === e && (h = "carousel");
                        let i = {
                            location: t = t || this.getState().l,
                            index: null == n ? void 0 : n.toString(),
                            item_id: null == r ? void 0 : r.toString(),
                            name: s
                        };
                        o && (i = Object.assign(i, o)),
                        this.sendEvent(e, i)
                    },
                    sendEvent: function(e, t={}) {
                        var n;
                        if (!window.wba)
                            return;
                        t.country = wb.settings.currentLocale;
                        const r = WbSpaModel.prototype.$user.getUserClusters();
                        r && (t.cluster = r),
                        t.address = null !== (n = this.currentAddress) && void 0 !== n ? n : "not_selected",
                        "Header_T" === e && (t.type = "d" === wb.settings.displayMode ? "desktop" : "mobile"),
                        window.wba(e, t)
                    },
                    sendAddressSelection: function({source: e, deliveryType: t, addressId: n, address: r, isChanged: s}) {
                        const o = s ? "DLV_Address_Add_Ok" : "DLV_Address_Slt"
                          , i = {
                            location: e
                        };
                        "courier" === t ? (i.type = "CRR",
                        i.address_crr = r) : (i.type = "PUP",
                        i.pup_id = n.toString()),
                        this.sendEvent(o, i)
                    },
                    sendBannersWbaEvent: function(e, t, n, r, s="0", o, i, a=null) {
                        n = n || this.getState().l,
                        "Banner_T" === e && (h = "banner");
                        const l = {
                            name: null != t ? t : "",
                            location: n,
                            link: r,
                            index: (s = parseInt(s) + 1).toString(),
                            id: o,
                            promo: i ? "yes" : "no"
                        };
                        "MBT" === n && (l.tv_block = 1),
                        this.sendEvent(e, l),
                        a && this.sendTrackingPixel(a)
                    },
                    sendSessionStartEvent: function() {
                        const e = localStorage.getItem(t)
                          , n = Date.now();
                        localStorage.setItem(t, (n + 18e5).toString()),
                        e && e > n || this.sendEvent("session_start")
                    },
                    sendEventTmpl(e, ...t) {
                        if (!window.wba)
                            return;
                        const n = t.slice(0, -2)
                          , r = {};
                        if (n && n.length % 2 == 0)
                            for (let e = 0; e < n.length; e += 2)
                                r[n[e]] = n[e + 1];
                        this.sendEvent(e, r)
                    },
                    proceedAndSave(e, t, n, r, s, o, i, a, l) {
                        if ("string" != typeof e)
                            return;
                        "string" != typeof t && "number" != typeof t && (t = null),
                        "string" != typeof n && "number" != typeof n && (n = null),
                        "string" != typeof r && "number" != typeof r && (r = null),
                        "string" != typeof s && "number" != typeof s && (s = null),
                        "string" != typeof o && "number" != typeof o && (o = null),
                        "string" != typeof i && "number" != typeof i && (i = null),
                        "string" != typeof a && "number" != typeof a && (a = null),
                        "string" != typeof l && (l = null);
                        const c = {
                            l: e
                        };
                        let d = parseInt(t);
                        null == t || isNaN(d) || (c.iid = Math.max(1, d)),
                        null != n && (c.opt = n),
                        null != r && (c.t = r),
                        null != s && (c.t1 = s),
                        null != o && (c.t2 = o),
                        null != i && (c.t3 = i),
                        null != a && (c.t4 = a),
                        null != l && (c.logs = l),
                        u.updateTailObjectDataFromHtml(c),
                        this.saveState(c)
                    },
                    updateAnalyticsFromQuery() {
                        const e = new URL(window.location.href);
                        if (document.referrer.indexOf("guru.wildberries.ru") > 0 && e.searchParams.has("externalSource") && e.searchParams.has("analyticsCode"))
                            this.saveState(e.searchParams.get("analyticsCode"), !1, !0);
                        else if (e.searchParams.has("listName")) {
                            const t = v(`||${e.searchParams.get("listName")}`);
                            this.saveState(t),
                            ["LLI", "AIL"].includes(t.l) && y({
                                special_project: t.t
                            })
                        } else
                            e.searchParams.has("analiticsCode") && this.saveState({
                                l: e.searchParams.get("analiticsCode")
                            }, !0)
                    },
                    saveState(t, n=!1, r=!1) {
                        try {
                            "string" == typeof t && (t = v(`||${t}`));
                            const s = JSON.stringify({
                                payload: t,
                                expired: Date.now() + c
                            });
                            r || (t.s = function(e) {
                                var t, n;
                                const r = null === (n = null === (t = function(e) {
                                    let t = document.cookie.match(new RegExp("(?:^|; )" + e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, "\\$1") + "=([^;]*)"));
                                    return t ? decodeURIComponent(t[1]) : void 0
                                }("__catalogOptions")) || void 0 === t ? void 0 : t.split("&").find((e => {
                                    const [t] = e.trim().split(":");
                                    return "Sort" === t
                                }
                                ))) || void 0 === n ? void 0 : n.split(":")
                                  , s = (null == r ? void 0 : r.length) > 0 ? r[1] : "popular";
                                return "DRE" === e.l ? "" : s.toLowerCase()
                            }(t));
                            const o = JSON.stringify(t);
                            sessionStorage.setItem(e, o),
                            n || localStorage.setItem(e, s)
                        } catch (e) {
                            console.warn("Saving analitics state has failed"),
                            console.error(e.message)
                        }
                    },
                    updateState(e, t) {
                        const n = this.getState(!1);
                        let r = Object.assign(Object.assign({}, n), e);
                        !e.extraTerms && t && t[n.l] && (r = Object.assign(Object.assign({}, r), t[n.l])),
                        this.saveState(r)
                    },
                    getState(t=!0) {
                        var n;
                        let r = null !== (n = sessionStorage.getObject(e)) && void 0 !== n ? n : l;
                        return t && r.extraL && (r.l = r.extraL,
                        r.extraTerms && (r = Object.assign(Object.assign({}, r), r.extraTerms))),
                        this._validateAndFix(r)
                    },
                    saveLastSearchAnaliticsData(e, t, r) {
                        sessionStorage.setItem(n, `${e}&${t}&${r}`)
                    },
                    saveLastSearchAnalyticsDataForSuggest(e) {
                        sessionStorage.setItem(r, e)
                    },
                    saveQueryIdForSearch(e) {
                        sessionStorage.setItem(a, e)
                    },
                    retrieveQueryIdForSearch() {
                        const e = sessionStorage.getItem(a);
                        if (e)
                            return e;
                        {
                            const e = this.getTermByTermName("qid");
                            return this.saveQueryIdForSearch(e),
                            e
                        }
                    },
                    getLastSearchAnaliticsData() {
                        var e;
                        return null !== (e = sessionStorage.getItem(n)) && void 0 !== e ? e : ""
                    },
                    getLastSearchAnalyticsDataForSuggest() {
                        var e;
                        return null !== (e = sessionStorage.getItem(r)) && void 0 !== e ? e : ""
                    },
                    _validateAndFix(e) {
                        return (null == e.iid || isNaN(e.iid) || e.iid < 1) && (e.iid = 1),
                        e.t = this._escape(e.t),
                        e.t1 = this._escape(e.t1),
                        e.t2 = this._escape(e.t2),
                        e
                    },
                    _escape: e => e ? "string" != typeof e ? e : e.replace(/'/g, " ") : "",
                    async isAbTest133Approved() {
                        const {splitId: e, title: t} = await g();
                        return "133" === e && "test_1" === t
                    },
                    async isAbTest155Approved() {
                        const {splitId: e, title: t} = await g();
                        return "155" === e && "test_1" === t
                    },
                    sendUserEvent(e, t) {
                        this.sendEvent("user_id", {
                            clientId: e,
                            account_id: t
                        })
                    },
                    setCurrentAddress(e, t) {
                        this.currentAddress = `${"courier" === e ? "CRR" : ""}${t}`
                    },
                    saveLastViewedNm(e) {
                        sessionStorage.putObject("LAST_VIEWED_NM", e)
                    },
                    getLastViewedNm: () => sessionStorage.getObject("LAST_VIEWED_NM"),
                    updateAnalyticsSource(e) {
                        this.updateState({
                            source: e
                        })
                    },
                    sendTrackingPixel(e) {
                        document.createElement("img").src = e
                    }
                }
            }
            )())
        }
        ,
        40397: () => {
            "use strict";
            wb.xnm = function() {
                const e = [7031, 7032, 3382, 3392, 8332, 5020, 8411, 7018, 8251, 6217, 7019, 6296, 6304, 6302, 5783, 5519, 5948, 5814, 5784, 5789, 5813, 5553, 7015, 5779, 5780, 5292, 5293, 5294, 5297, 5478, 8588, 5132, 5129, 5150, 5121, 5126, 8590, 5361, 5127, 5128, 5158, 5193, 5194, 5159, 5019, 5186, 5021, 5023, 5119, 5122, 5125, 5156, 5065, 5050, 5084, 5025, 5037, 5026, 5086, 5040, 5043, 5045, 5046, 5052, 5064, 5066, 5068, 5070, 5073, 5076, 5085, 5087, 5088, 5091, 8589, 5051, 5090, 7014, 5117, 5118, 7025, 7733, 5069, 5071, 5120, 4256, 3489, 5075, 5080, 5197, 5534, 5482, 5288, 53, 5289, 5039, 2909, 5273, 2603, 2604, 2606, 2611, 3490, 2610, 2612, 7710, 2616, 2609, 2613, 2618, 5360, 2602, 2605, 5630, 7540, 5074, 5067, 2617, 2607, 7571, 6998, 5116, 5042, 5668, 2608, 5083, 2614, 5082, 5047, 8145, 5044, 7016, 5328, 7731, 8256, 5332, 5925, 5340, 5355, 7666, 7655, 5576, 7106, 5593, 5356, 7020, 5812, 400, 5049, 7755, 8110, 7012, 5072, 5048, 3517, 2615, 5325, 6303, 5153, 5359, 7770, 8111, 6315, 8248, 5326, 6246, 880, 5324, 5513, 5624, 5295, 8243, 2596, 5296, 5327, 1354, 7017, 5354, 5406, 6062, 6976, 7013, 7438, 5497, 5353, 5041, 5298, 7732, 5880, 6412, 5484, 5357, 3415, 3452, 3451, 3410, 6975, 6986, 6939, 6972, 6980, 6990, 7030, 6981, 6989, 6974, 6977, 6983, 6979, 6984, 6978, 6987, 6982, 6973, 6985, 5089, 5772];
                let t = [];
                const n = 864e5
                  , r = "adultSubjectIds";
                async function s() {
                    if (t.length > 0)
                        return Promise.resolve();
                    const e = JSON.parse(localStorage.getItem(r));
                    if ((null == e ? void 0 : e.expired) > Date.now() - n)
                        return t = e.info,
                        Promise.resolve();
                    try {
                        const e = "adult-subjects.json"
                          , s = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 5e3);
                        return s && 0 !== s.length ? (t = s,
                        null === localStorage || void 0 === localStorage || localStorage.putObject(r, {
                            info: s,
                            expired: Date.now() + n
                        }),
                        Promise.resolve()) : (console.warn("Getting adult subjects has failed"),
                        Promise.reject())
                    } catch (e) {
                        return console.warn("Getting adult subjects has failed"),
                        console.error(e.message),
                        Promise.resolve()
                    }
                }
                let o = {};
                const i = 36e5
                  , a = "no-return-subjects.json";
                function l(n, r) {
                    const s = t.length > 0 ? t : e;
                    return -1 !== s.indexOf(n) || !!r && -1 !== s.indexOf(r)
                }
                let c = function(e) {
                    let t = this;
                    this.width = this.weight = this.length = this.depth = 0,
                    null == e || e.forEach((function(e, n) {
                        "Вес с упаковкой (кг)" === e.name && (t.weight = parseFloat(e.value) || 0),
                        "Ширина упаковки (мм)" === e.name && (t.width = parseInt(e.value, 10) || 0),
                        "Длина упаковки (мм)" === e.name && (t.length = parseInt(e.value, 10) || 0),
                        "Высота упаковки (мм)" === e.name && (t.depth = parseInt(e.value, 10) || 0)
                    }
                    )),
                    this.v = this.width / 1e3 * (this.length / 1e3) * (this.depth / 1e3),
                    this.sum3d = this.width + this.length + this.depth
                };
                const u = (e, t) => {
                    if (e) {
                        if ("BYN" !== t && "byn" !== t)
                            return e.toString().slice(0, -2);
                        {
                            const t = e.toString();
                            return (t.slice(0, -2) || "0") + "." + t.slice(-2)
                        }
                    }
                    return e
                }
                ;
                function d(e, t) {
                    if (t && e.pics > 0)
                        return !0;
                    if (!e.price)
                        return !1;
                    if (0 === e.pics || !e.sizes || 0 === e.sizes.length)
                        return !1;
                    for (let t = 0; t < e.sizes.length; t++) {
                        const n = e.sizes[t];
                        if (n.stocks && n.stocks.length > 0)
                            return !0
                    }
                    return !1
                }
                function h(e) {
                    return !!(e.sizes && e.sizes.length > 0)
                }
                function p(e, t) {
                    return !t || !e.isAdult
                }
                async function m(e, t, n) {
                    const r = `${(e => e ? "https://card.wb.ru/cards/v2/list" : "https://card.wb.ru/cards/v2/detail")(n)}?${e}&nm=${t.join(";")}`;
                    return WbSpaModel.prototype.$httpClient.fetchBasicJSON(r, {
                        xhrFields: {
                            withCredentials: !1
                        },
                        processData: !1,
                        dataType: "json"
                    }, {
                        addAuthHeader: !0,
                        addCatalogCaptcha: !0,
                        retry: 2,
                        nullOnError: !0
                    })
                }
                function g(e, t=!1, n=null) {
                    return new Promise(( (r, o) => {
                        Promise.all([wb.user.getXinfo(), s()]).then(( ([s]) => {
                            var i, a;
                            ~~n && (s = WbSpaModel.prototype.$user._changeXDest(s, n));
                            const c = [];
                            let u = 0
                              , d = 0
                              , h = [];
                            const p = new URLSearchParams;
                            WbSpaModel.prototype.$analitic.appendSplitInfoV2(p, "catalog"),
                            p.size > 0 && (s += `&${p}`),
                            e.forEach((e => {
                                100 === u && (c[d] = m(s, h, t),
                                d += 1,
                                u = 0,
                                h = []),
                                h[u++] = e
                            }
                            )),
                            h.length > 0 && (c[d] = m(s, h, t));
                            const g = {}
                              , v = new URLSearchParams(s)
                              , b = null === (i = v.get("curr")) || void 0 === i ? void 0 : i.toUpperCase()
                              , w = +v.get("spp")
                              , S = +v.get("dest")
                              , _ = !(wb.global.settings.switches.showLogisticsInPrice || (null === (a = wb.global.settings.variables.destToShowLogistics) || void 0 === a ? void 0 : a.indexOf(S)) >= 0) || "ru" !== WbSpaModel.prototype.$user.getLocale();
                            Promise.all(c).then((e => {
                                e.forEach((e => {
                                    var t;
                                    0 === (t = e).state && t.data.products && t.data.products.forEach((e => {
                                        var t;
                                        e.name = (null === (t = e.name) || void 0 === t ? void 0 : t.length) > 0 ? e.name : "Название не указано",
                                        e.isAdult = e.isAdult || l(e.subjectId, e.subjectParentId),
                                        e.currency = b,
                                        e.spp = w,
                                        e.dest = S,
                                        y(e),
                                        f(e, _),
                                        g[e.id] = e
                                    }
                                    ))
                                }
                                )),
                                r(g)
                            }
                            )).catch((e => {
                                console.log(e.statusText + " " + e.responseText),
                                o()
                            }
                            ))
                        }
                        ))
                    }
                    ))
                }
                function f(e, t=!0) {
                    var n;
                    if (!e || !e.sizes)
                        return;
                    let r = {}
                      , s = !1;
                    const o = e.premiumSale > 0 && ((null === (n = WbSpaModel.prototype.$user.getUserGradeFromCache()) || void 0 === n ? void 0 : n.isPremium) || (null == e ? void 0 : e.showPremium));
                    o || (e.premiumSale = 0),
                    e.sizes.forEach((n => {
                        if (!n.price)
                            return;
                        let i = t ? n.price.total : n.price.product;
                        n.price.priceForBasket = i,
                        o && (i -= 100 * wb.priceHelper.calculateDiscount(n.price.product / 100, e.premiumSale, e.currency));
                        const a = ~~(100 * (n.price.basic - i) / n.price.basic);
                        n.price.sale = a > 0 ? a : 0,
                        n.price.priceToShow = i,
                        (n.price.basic < i || n.price.basic === i && n.sale > 0 || n.price.sale <= wb.global.settings.variables.pricesDeltaToShowSale) && (n.price.basic = i,
                        n.price.sale = 0),
                        r.priceToShow || (r = n.price),
                        r.priceToShow !== n.price.priceToShow && (s = !0,
                        r.priceToShow > n.price.priceToShow && (r = n.price))
                    }
                    )),
                    e.price = r,
                    s && (e.diffPrice = !0)
                }
                function y(e, t, n) {
                    var r, s, o, i, a;
                    return e ? (t || (t = null !== (a = null !== (o = null === (s = null === (r = e.sizes) || void 0 === r ? void 0 : r.filter((e => e.payload))) || void 0 === s ? void 0 : s[0]) && void 0 !== o ? o : null === (i = e.sizes) || void 0 === i ? void 0 : i[0]) && void 0 !== a ? a : e),
                    t && t.saleConditions ? (1 & t.saleConditions && (e.isUnrefusable = !0),
                    2 & t.saleConditions && (e[1 === n ? "needPrepay" : "isPrepaid"] = !0),
                    4 & t.saleConditions && (e.isUnreturnable = !0),
                    8 & t.saleConditions && (e.isVerificationReturn = !0),
                    128 & t.saleConditions && (e.isWbInstCompliant = !0),
                    1048576 & t.saleConditions && (e.wltSaleBan = !0),
                    e.premiumSale = t.saleConditions >> 22 & 31,
                    e) : e) : e
                }
                function v() {
                    try {
                        return localStorage.getObject("product_colors") || {}
                    } catch (e) {
                        return console.warn("[ProductColorsCache]: failed to read from local storage", e),
                        {}
                    }
                }
                function b(e) {
                    var t;
                    if (!wb.global.settings.switches.enableManualGluingOnProduct)
                        return null;
                    let n = {
                        isOnlyColor: !1,
                        value: ""
                    }
                      , r = null == e ? void 0 : e.map((e => {
                        var t;
                        if (e.is_variable) {
                            let n = /^[\d.,]+$/
                              , r = null === (t = e.variable_values) || void 0 === t ? void 0 : t.filter((e => {
                                if (!n.test(e))
                                    return e
                            }
                            )).join(", ");
                            if (4 === e.charc_type && !n.test(e.value))
                                return {
                                    value: e.value,
                                    name: e.name
                                };
                            if (r)
                                return {
                                    value: r,
                                    name: e.name
                                }
                        }
                    }
                    )).filter((e => e)).splice(0, 3);
                    return 1 == (null == r ? void 0 : r.length) && "Цвет" == (null === (t = r[0]) || void 0 === t ? void 0 : t.name) ? (n.isOnlyColor = !0,
                    n.value = null == r ? void 0 : r.map((e => e.value)).toString(),
                    n) : (null == r ? void 0 : r.length) >= 1 ? (n.isOnlyColor = !1,
                    n.value = null == r ? void 0 : r.map((e => e.value)).join(" • "),
                    n) : null
                }
                function w(e, t=!1, n=!1) {
                    var r, s, o, i, a, c, d;
                    const h = !(wb.global.settings.switches.showLogisticsInPrice || (null === (r = wb.global.settings.variables.destToShowLogistics) || void 0 === r ? void 0 : r.indexOf(e.dest)) >= 0) || "ru" !== WbSpaModel.prototype.$user.getLocale();
                    f(e, h);
                    const p = null !== (i = null === (o = null === (s = e.sizes) || void 0 === s ? void 0 : s.filter((e => e.payload))) || void 0 === o ? void 0 : o[0]) && void 0 !== i ? i : null === (a = e.sizes) || void 0 === a ? void 0 : a[0];
                    y(e, p),
                    f(e, h);
                    const m = null !== (c = e.price) && void 0 !== c ? c : {}
                      , g = 20624 === e.brandId || 30624 === e.siteBrandId;
                    let v = {
                        rcId: e.rcId,
                        nmId: e.id,
                        cod1S: e.id,
                        imtId: e.root,
                        name: e.name,
                        pics: e.pics,
                        subjectId: e.subjectId,
                        subjectParentId: e.subjectParentId,
                        kindId: e.kindId,
                        brand: e.brand,
                        brandId: e.siteBrandId,
                        brandCod: e.brandId,
                        price: u(m.basic, e.currency),
                        salePrice: u(m.priceToShow, e.currency),
                        productSalePrice: u(m.product, e.currency),
                        priceForBasket: u(m.priceForBasket, e.currency),
                        logisticsCost: m.logistics,
                        colorCodes: e.colors.map((e => e.id)),
                        sale: m.sale,
                        priceDiff: e.diffPrice,
                        star: e.rating,
                        reviewRating: e.reviewRating,
                        feedbacks: e.feedbacks,
                        adult: e.isAdult || l(e.subjectId, e.subjectParentId) || !1,
                        isDigitalGood: e.isDigital || !1,
                        sizes: S(e.sizes, t, n, e.currency),
                        panelPromoId: e.panelPromoId,
                        promoTxt: e.promoTextCat,
                        promoTextCard: e.promoTextCard,
                        color: e.colors.map((e => e.name)).join(","),
                        woSize: 1 === (null === (d = e.sizes) || void 0 === d ? void 0 : d.length) && "" === p.name,
                        canQuickOrder: !e.isDigital,
                        soldOut: e.soldOut || !1,
                        deliveryHours: (e.time1 || 0) + (e.time2 || 0),
                        fastestStore: e.wh,
                        isPreorder: 5772 === e.brandId && wb.settings.preOrderList.includes(e.id),
                        currency: e.currency,
                        spp: e.spp,
                        dest: e.dest,
                        saleConditions: null == p ? void 0 : p.saleConditions,
                        isUnrefusable: e.isUnrefusable,
                        isPrepaid: e.isPrepaid,
                        isUnreturnable: e.isUnreturnable,
                        isVerificationReturn: e.isVerificationReturn,
                        dist: e.dist,
                        time1: e.time1,
                        time2: e.time2,
                        totalQuantity: e.totalQuantity,
                        payloadV2: null == p ? void 0 : p.payload,
                        optionId: null == p ? void 0 : p.optionId,
                        whDtype: null == p ? void 0 : p.dtype,
                        log: e.log,
                        logs: e.logs,
                        supplierId: e.supplierId,
                        supplier: $.views.helpers.supplierFineName(e.supplier, e.brandId),
                        supplierRating: e.supplierRating,
                        sort: e.sort || 0,
                        viewFlags: e.viewFlags,
                        shouldShowOriginalMark: !g && !!(8 & e.viewFlags),
                        paymentDiscountAmount: wb.priceHelper.calcWalletDiscount(m.priceToShow / 100, e.currency, null == p ? void 0 : p.saleConditions),
                        catalogPrice: m,
                        supplierFlags: e.supplierFlags,
                        normQuery: e.normQuery,
                        rs: e.rs,
                        isAdv: e.isAdv,
                        extraAnaliticsCode: e.extraAnaliticsCode,
                        preset_type: e.preset_type,
                        premiumSale: e.premiumSale,
                        isPremiumAccent: wb.global.settings.switches.enablePremiumSellerAccent && !!(8 & e.supplierFlags)
                    };
                    return v.priceWithCouponAndDiscount = v.salePrice,
                    v.productPriceWithCouponAndDiscount = v.productSalePrice,
                    _(v.panelPromoId) && (v.showRedPrice = !0),
                    function(e) {
                        if (!WbSpaModel.prototype.$auth.isAuth || !e.totalQuantity || e.totalQuantity > 1e3)
                            return;
                        WbSpaModel.prototype.$promotionsHelper.isThermometerNeeded(e.panelPromoId) && (e.showThermometer = !0)
                    }(v),
                    v
                }
                const S = (e, t=!1, n=!1, r=null) => {
                    if (null == e)
                        return;
                    e.sort((function(e, t) {
                        return e.rank - t.rank
                    }
                    ));
                    let s = e;
                    return t && (s = e.filter((e => {
                        var t;
                        return (null === (t = e.stocks) || void 0 === t ? void 0 : t.length) > 0
                    }
                    ))),
                    s.map((e => {
                        var t, s;
                        const o = {
                            ch: e.optionId,
                            s: 1,
                            nm: e.origName,
                            rusNm: e.name,
                            stocks: null !== (t = e.stocks) && void 0 !== t ? t : [{
                                wh: e.wh,
                                dtype: e.dtype,
                                qty: 1
                            }],
                            unavailable: (null === (s = e.stocks) || void 0 === s ? void 0 : s.length) <= 0,
                            payloadV2: e.payload,
                            saleConditions: e.saleConditions,
                            whDtype: e.dtype,
                            deliveryHours: (e.time1 || 0) + (e.time2 || 0)
                        };
                        return n && e.price && (o.price = u(e.price.basic, e.currency || r),
                        o.salePrice = u(e.price.priceToShow, e.currency || r),
                        o.priceForBasket = u(e.price.priceForBasket, e.currency || r),
                        o.catalogPrice = e.price,
                        o.returnCost = e.price.return,
                        o.logisticsCost = e.price.logistics),
                        o
                    }
                    ))
                }
                ;
                function _(e) {
                    return !!WbSpaModel.prototype.$promotionsHelper.isRedPriceNeeded(e)
                }
                return {
                    getGoodsForRecommendAndCatalog: function(e, t, n, r) {
                        return new Promise(( (s, o) => {
                            const i = [];
                            if (!e)
                                return i;
                            const a = !t;
                            g(e, a).then((o => {
                                e.forEach((e => {
                                    if (o[e]) {
                                        const s = o[e];
                                        if (a) {
                                            if (s && h(s) && p(s, n)) {
                                                const e = w(s, !1, !0);
                                                e.soldOut = !s.sizes || 0 === s.sizes.length,
                                                i.push(e)
                                            }
                                        } else if (s && d(s, t) && p(s, n)) {
                                            const e = w(s, !r, !0);
                                            e.soldOut = !d(s, !1),
                                            i.push(e)
                                        }
                                    }
                                }
                                )),
                                s(i)
                            }
                            )).catch(( () => {
                                e.forEach((e => {
                                    i.push({
                                        nmId: e,
                                        cod1S: e,
                                        isFail: !0
                                    })
                                }
                                )),
                                s(i)
                            }
                            ))
                        }
                        ))
                    },
                    getXnmProducts: g,
                    getInfoForWbaStat: async function(e, t) {
                        try {
                            const n = e.map((e => e.nmId))
                              , r = t ? await t : await g(n);
                            return e.reduce(( (e, t) => {
                                var n, s;
                                const {nmId: o, size: i} = t;
                                let a = null;
                                if (null == r ? void 0 : r.hasOwnProperty(t.nmId)) {
                                    const e = r[o]
                                      , t = null === (s = null === (n = e.sizes.find((e => e.optionId === i))) || void 0 === n ? void 0 : n.price) || void 0 === s ? void 0 : s.total
                                      , l = i ? e.sizes.find((e => e.optionId === i)) : S(e.sizes).filter((e => {
                                        var t;
                                        return (null === (t = e.stocks) || void 0 === t ? void 0 : t.length) > 0
                                    }
                                    ))[0];
                                    a = {
                                        salePrice: t / 100,
                                        stores: null == l ? void 0 : l.stocks
                                    }
                                }
                                return e.set(o, a),
                                e
                            }
                            ), new Map)
                        } catch (e) {
                            return console.error(e),
                            new Map
                        }
                    },
                    getCatalogCards: function(e, t, n, r=!1) {
                        return new Promise(( (s, o) => {
                            const i = {};
                            e.forEach((e => {
                                i[e] = {}
                            }
                            ));
                            const a = !n;
                            g(e, a).then((e => {
                                Object.keys(e).forEach((s => {
                                    let o = e[s];
                                    const l = i[o.id];
                                    function c(e, t) {
                                        return e.rank > t.rank ? 1 : e.rank === t.rank ? 0 : e.rank < t.rank ? -1 : void 0
                                    }
                                    if (a)
                                        l && h(o) && p(o, t) && (i[o.id] = o,
                                        i[o.id].sizes.sort(c),
                                        o.soldOut = !1);
                                    else if (l && d(o, n) && p(o, t)) {
                                        if (i[o.id] = o,
                                        o.sizes && o.sizes.length > 0) {
                                            const e = r ? o.sizes : o.sizes.filter((e => e.stocks && e.stocks.length > 0));
                                            e.sort(c),
                                            i[o.id].sizes = e
                                        }
                                        o.soldOut = !d(o, !1)
                                    }
                                }
                                ))
                            }
                            )).then(( () => s(i)), ( () => o()))
                        }
                        ))
                    },
                    convertXProductToSpaCatalogProduct: w,
                    getProductNamesMap: v,
                    getProductColorsByNmIdsAsync: function(e) {
                        return new Promise(( (t, n) => {
                            let r = v()
                              , s = {}
                              , o = [];
                            if (e.forEach((e => {
                                let t = r[e];
                                t && t.dims ? s[e] = t : o.push(e)
                            }
                            )),
                            !o.length)
                                return void t(s);
                            let i = o.map((e => fetch(wb.helpers.url.urlProductStatic(e)).then((e => e.json())).then((e => Promise.resolve({
                                options: e.options,
                                nmId: e.nm_id,
                                color: e.nm_colors_names,
                                name: e.imt_name,
                                dims: new c(e.options),
                                gluedOptions: b(e.options)
                            }))).catch(( () => Promise.resolve({
                                nmId: e,
                                color: ""
                            })))));
                            return Promise.all(i).then((e => {
                                !function(e, t) {
                                    try {
                                        const n = 255;
                                        t = null != t ? t : v(),
                                        e.forEach((e => t[e.nmId] = {
                                            nmId: e.nmId,
                                            c: e.color,
                                            n: e.name,
                                            dims: e.dims,
                                            gluedOptions: e.gluedOptions,
                                            ts: Date.now()
                                        }));
                                        let r = Object.values(t);
                                        return r.length > n && (r.sort(( (e, t) => t.ts - e.ts)),
                                        r.splice(n),
                                        t = r.reduce(( (e, t) => (e[t.nmId] = t,
                                        e)), {})),
                                        localStorage.putObject("product_colors", t),
                                        t
                                    } catch (e) {
                                        return console.warn("[ProductColorsCache]: failed to update colors map", e),
                                        {}
                                    }
                                }(e, r),
                                t(r)
                            }
                            ))
                        }
                        ))
                    },
                    fillOtherSellersProducts: function(e) {
                        return new Promise((t => {
                            g(e.map((e => e.nmId))).then((n => {
                                e.forEach((e => {
                                    const t = n[e.nmId];
                                    null != t && d(t) && (Object.assign(e, w(t, !0)),
                                    e.stocks = function(e) {
                                        return Object.keys(e.sizes.reduce(( (e, t) => {
                                            var n;
                                            return (null === (n = t.stocks) || void 0 === n ? void 0 : n.length) > 0 && t.stocks.forEach((t => e[t.wh] = !0)),
                                            e
                                        }
                                        ), {}))
                                    }(t),
                                    e.isAvailable = !0)
                                }
                                )),
                                t()
                            }
                            ))
                        }
                        ))
                    },
                    getMiniProductCard: async function(e) {
                        if (isNaN(e))
                            throw new TypeError("nmId at getMiniProductCard is not a number");
                        const t = await g([e]);
                        return t[e] ? w(t[e], !1, !0) : null
                    },
                    proceedPrices: f,
                    waitNoReturnSubjectsInitialized: async function() {
                        if (Object.keys(o).length > 0)
                            return Promise.resolve();
                        const e = JSON.parse(localStorage.getItem(a));
                        if ((null == e ? void 0 : e.expired) > Date.now() - i)
                            return o = e.info,
                            Promise.resolve();
                        try {
                            const e = "no-return-subjects.json"
                              , t = await WbSpaModel.prototype.$httpClient.fetchStaticDataV2(e, 5e3);
                            return t && 0 !== t.length ? (o = t,
                            null === localStorage || void 0 === localStorage || localStorage.putObject(a, {
                                info: t,
                                expired: Date.now() + i
                            }),
                            Promise.resolve()) : (console.warn("Getting subjects has failed"),
                            Promise.reject())
                        } catch (e) {
                            return console.warn("Getting adult subjects has failed"),
                            console.error(e.message),
                            Promise.resolve()
                        }
                    },
                    setNoRefund: function(e) {
                        const t = o[e];
                        if (!t)
                            return !1;
                        let n;
                        switch (WbSpaModel.prototype.$user.getLocale()) {
                        case "by":
                            n = 2;
                            break;
                        case "kz":
                            n = 3;
                            break;
                        case "kg":
                            n = 4;
                            break;
                        case "am":
                            n = 5;
                            break;
                        case "uz":
                            n = 13;
                            break;
                        default:
                            n = 1
                        }
                        return !!(t & 1 << n - 1)
                    },
                    expandSaleConditions: y,
                    isRedPrice: _,
                    fillFeedbacksPayment: async function(e) {
                        if (!wb.global.settings.switches.enableFeedbacksForPoints || !(null == e ? void 0 : e.length))
                            return null;
                        await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPayments(e)
                    },
                    fillFeedbacksPaymentByUser: async function(e) {
                        if (!wb.global.settings.switches.enableFeedbacksForPoints || !(null == e ? void 0 : e.length))
                            return null;
                        await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.fillFeedbacksPaymentsByUser(e)
                    },
                    getFeedbacksPaymentByUser: async function() {
                        return wb.global.settings.switches.enableFeedbacksForPoints ? (await WbSpaModel.prototype.$moduleLoader.loadServiceAsync("feedbacksPaymentService"),
                        await WbSpaModel.prototype.$services.feedbacksPaymentService.getFeedbacksPaymentByUser()) : null
                    },
                    convertOptionsToGluedOptions: b,
                    isAdvert: function(e) {
                        return e && !!(64 & e.viewFlags)
                    }
                }
            }()
        }
        ,
        92151: e => {
            var t = {
                utf8: {
                    stringToBytes: function(e) {
                        return t.bin.stringToBytes(unescape(encodeURIComponent(e)))
                    },
                    bytesToString: function(e) {
                        return decodeURIComponent(escape(t.bin.bytesToString(e)))
                    }
                },
                bin: {
                    stringToBytes: function(e) {
                        for (var t = [], n = 0; n < e.length; n++)
                            t.push(255 & e.charCodeAt(n));
                        return t
                    },
                    bytesToString: function(e) {
                        for (var t = [], n = 0; n < e.length; n++)
                            t.push(String.fromCharCode(e[n]));
                        return t.join("")
                    }
                }
            };
            e.exports = t
        }
        ,
        3939: e => {
            var t, n;
            t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
            n = {
                rotl: function(e, t) {
                    return e << t | e >>> 32 - t
                },
                rotr: function(e, t) {
                    return e << 32 - t | e >>> t
                },
                endian: function(e) {
                    if (e.constructor == Number)
                        return 16711935 & n.rotl(e, 8) | 4278255360 & n.rotl(e, 24);
                    for (var t = 0; t < e.length; t++)
                        e[t] = n.endian(e[t]);
                    return e
                },
                randomBytes: function(e) {
                    for (var t = []; e > 0; e--)
                        t.push(Math.floor(256 * Math.random()));
                    return t
                },
                bytesToWords: function(e) {
                    for (var t = [], n = 0, r = 0; n < e.length; n++,
                    r += 8)
                        t[r >>> 5] |= e[n] << 24 - r % 32;
                    return t
                },
                wordsToBytes: function(e) {
                    for (var t = [], n = 0; n < 32 * e.length; n += 8)
                        t.push(e[n >>> 5] >>> 24 - n % 32 & 255);
                    return t
                },
                bytesToHex: function(e) {
                    for (var t = [], n = 0; n < e.length; n++)
                        t.push((e[n] >>> 4).toString(16)),
                        t.push((15 & e[n]).toString(16));
                    return t.join("")
                },
                hexToBytes: function(e) {
                    for (var t = [], n = 0; n < e.length; n += 2)
                        t.push(parseInt(e.substr(n, 2), 16));
                    return t
                },
                bytesToBase64: function(e) {
                    for (var n = [], r = 0; r < e.length; r += 3)
                        for (var s = e[r] << 16 | e[r + 1] << 8 | e[r + 2], o = 0; o < 4; o++)
                            8 * r + 6 * o <= 8 * e.length ? n.push(t.charAt(s >>> 6 * (3 - o) & 63)) : n.push("=");
                    return n.join("")
                },
                base64ToBytes: function(e) {
                    e = e.replace(/[^A-Z0-9+\/]/gi, "");
                    for (var n = [], r = 0, s = 0; r < e.length; s = ++r % 4)
                        0 != s && n.push((t.indexOf(e.charAt(r - 1)) & Math.pow(2, -2 * s + 8) - 1) << 2 * s | t.indexOf(e.charAt(r)) >>> 6 - 2 * s);
                    return n
                }
            },
            e.exports = n
        }
        ,
        87206: e => {
            function t(e) {
                return !!e.constructor && "function" == typeof e.constructor.isBuffer && e.constructor.isBuffer(e)
            }
            e.exports = function(e) {
                return null != e && (t(e) || function(e) {
                    return "function" == typeof e.readFloatLE && "function" == typeof e.slice && t(e.slice(0, 0))
                }(e) || !!e._isBuffer)
            }
        }
        ,
        83503: (e, t, n) => {
            var r, s, o, i, a;
            r = n(3939),
            s = n(92151).utf8,
            o = n(87206),
            i = n(92151).bin,
            (a = function(e, t) {
                e.constructor == String ? e = t && "binary" === t.encoding ? i.stringToBytes(e) : s.stringToBytes(e) : o(e) ? e = Array.prototype.slice.call(e, 0) : Array.isArray(e) || e.constructor === Uint8Array || (e = e.toString());
                for (var n = r.bytesToWords(e), l = 8 * e.length, c = 1732584193, u = -271733879, d = -1732584194, h = 271733878, p = 0; p < n.length; p++)
                    n[p] = 16711935 & (n[p] << 8 | n[p] >>> 24) | 4278255360 & (n[p] << 24 | n[p] >>> 8);
                n[l >>> 5] |= 128 << l % 32,
                n[14 + (l + 64 >>> 9 << 4)] = l;
                var m = a._ff
                  , g = a._gg
                  , f = a._hh
                  , y = a._ii;
                for (p = 0; p < n.length; p += 16) {
                    var v = c
                      , b = u
                      , w = d
                      , S = h;
                    c = m(c, u, d, h, n[p + 0], 7, -680876936),
                    h = m(h, c, u, d, n[p + 1], 12, -389564586),
                    d = m(d, h, c, u, n[p + 2], 17, 606105819),
                    u = m(u, d, h, c, n[p + 3], 22, -1044525330),
                    c = m(c, u, d, h, n[p + 4], 7, -176418897),
                    h = m(h, c, u, d, n[p + 5], 12, 1200080426),
                    d = m(d, h, c, u, n[p + 6], 17, -1473231341),
                    u = m(u, d, h, c, n[p + 7], 22, -45705983),
                    c = m(c, u, d, h, n[p + 8], 7, 1770035416),
                    h = m(h, c, u, d, n[p + 9], 12, -1958414417),
                    d = m(d, h, c, u, n[p + 10], 17, -42063),
                    u = m(u, d, h, c, n[p + 11], 22, -1990404162),
                    c = m(c, u, d, h, n[p + 12], 7, 1804603682),
                    h = m(h, c, u, d, n[p + 13], 12, -40341101),
                    d = m(d, h, c, u, n[p + 14], 17, -1502002290),
                    c = g(c, u = m(u, d, h, c, n[p + 15], 22, 1236535329), d, h, n[p + 1], 5, -165796510),
                    h = g(h, c, u, d, n[p + 6], 9, -1069501632),
                    d = g(d, h, c, u, n[p + 11], 14, 643717713),
                    u = g(u, d, h, c, n[p + 0], 20, -373897302),
                    c = g(c, u, d, h, n[p + 5], 5, -701558691),
                    h = g(h, c, u, d, n[p + 10], 9, 38016083),
                    d = g(d, h, c, u, n[p + 15], 14, -660478335),
                    u = g(u, d, h, c, n[p + 4], 20, -405537848),
                    c = g(c, u, d, h, n[p + 9], 5, 568446438),
                    h = g(h, c, u, d, n[p + 14], 9, -1019803690),
                    d = g(d, h, c, u, n[p + 3], 14, -187363961),
                    u = g(u, d, h, c, n[p + 8], 20, 1163531501),
                    c = g(c, u, d, h, n[p + 13], 5, -1444681467),
                    h = g(h, c, u, d, n[p + 2], 9, -51403784),
                    d = g(d, h, c, u, n[p + 7], 14, 1735328473),
                    c = f(c, u = g(u, d, h, c, n[p + 12], 20, -1926607734), d, h, n[p + 5], 4, -378558),
                    h = f(h, c, u, d, n[p + 8], 11, -2022574463),
                    d = f(d, h, c, u, n[p + 11], 16, 1839030562),
                    u = f(u, d, h, c, n[p + 14], 23, -35309556),
                    c = f(c, u, d, h, n[p + 1], 4, -1530992060),
                    h = f(h, c, u, d, n[p + 4], 11, 1272893353),
                    d = f(d, h, c, u, n[p + 7], 16, -155497632),
                    u = f(u, d, h, c, n[p + 10], 23, -1094730640),
                    c = f(c, u, d, h, n[p + 13], 4, 681279174),
                    h = f(h, c, u, d, n[p + 0], 11, -358537222),
                    d = f(d, h, c, u, n[p + 3], 16, -722521979),
                    u = f(u, d, h, c, n[p + 6], 23, 76029189),
                    c = f(c, u, d, h, n[p + 9], 4, -640364487),
                    h = f(h, c, u, d, n[p + 12], 11, -421815835),
                    d = f(d, h, c, u, n[p + 15], 16, 530742520),
                    c = y(c, u = f(u, d, h, c, n[p + 2], 23, -995338651), d, h, n[p + 0], 6, -198630844),
                    h = y(h, c, u, d, n[p + 7], 10, 1126891415),
                    d = y(d, h, c, u, n[p + 14], 15, -1416354905),
                    u = y(u, d, h, c, n[p + 5], 21, -57434055),
                    c = y(c, u, d, h, n[p + 12], 6, 1700485571),
                    h = y(h, c, u, d, n[p + 3], 10, -1894986606),
                    d = y(d, h, c, u, n[p + 10], 15, -1051523),
                    u = y(u, d, h, c, n[p + 1], 21, -2054922799),
                    c = y(c, u, d, h, n[p + 8], 6, 1873313359),
                    h = y(h, c, u, d, n[p + 15], 10, -30611744),
                    d = y(d, h, c, u, n[p + 6], 15, -1560198380),
                    u = y(u, d, h, c, n[p + 13], 21, 1309151649),
                    c = y(c, u, d, h, n[p + 4], 6, -145523070),
                    h = y(h, c, u, d, n[p + 11], 10, -1120210379),
                    d = y(d, h, c, u, n[p + 2], 15, 718787259),
                    u = y(u, d, h, c, n[p + 9], 21, -343485551),
                    c = c + v >>> 0,
                    u = u + b >>> 0,
                    d = d + w >>> 0,
                    h = h + S >>> 0
                }
                return r.endian([c, u, d, h])
            }
            )._ff = function(e, t, n, r, s, o, i) {
                var a = e + (t & n | ~t & r) + (s >>> 0) + i;
                return (a << o | a >>> 32 - o) + t
            }
            ,
            a._gg = function(e, t, n, r, s, o, i) {
                var a = e + (t & r | n & ~r) + (s >>> 0) + i;
                return (a << o | a >>> 32 - o) + t
            }
            ,
            a._hh = function(e, t, n, r, s, o, i) {
                var a = e + (t ^ n ^ r) + (s >>> 0) + i;
                return (a << o | a >>> 32 - o) + t
            }
            ,
            a._ii = function(e, t, n, r, s, o, i) {
                var a = e + (n ^ (t | ~r)) + (s >>> 0) + i;
                return (a << o | a >>> 32 - o) + t
            }
            ,
            a._blocksize = 16,
            a._digestsize = 16,
            e.exports = function(e, t) {
                if (null == e)
                    throw new Error("Illegal argument " + e);
                var n = r.wordsToBytes(a(e, t));
                return t && t.asBytes ? n : t && t.asString ? i.bytesToString(n) : r.bytesToHex(n)
            }
        }
        ,
        92901: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => o
            });
            var r = n(49922);
            function s(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var s = t[n];
                    s.enumerable = s.enumerable || !1,
                    s.configurable = !0,
                    "value"in s && (s.writable = !0),
                    Object.defineProperty(e, (0,
                    r.A)(s.key), s)
                }
            }
            function o(e, t, n) {
                return t && s(e.prototype, t),
                n && s(e, n),
                Object.defineProperty(e, "prototype", {
                    writable: !1
                }),
                e
            }
        }
        ,
        77387: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => s
            });
            var r = n(63662);
            function s(e, t) {
                e.prototype = Object.create(t.prototype),
                e.prototype.constructor = e,
                (0,
                r.A)(e, t)
            }
        }
        ,
        63662: (e, t, n) => {
            "use strict";
            function r(e, t) {
                return r = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                    return e.__proto__ = t,
                    e
                }
                ,
                r(e, t)
            }
            n.d(t, {
                A: () => r
            })
        }
        ,
        92327: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => s
            });
            var r = n(82284);
            function s(e, t) {
                if ("object" != (0,
                r.A)(e) || !e)
                    return e;
                var n = e[Symbol.toPrimitive];
                if (void 0 !== n) {
                    var s = n.call(e, t || "default");
                    if ("object" != (0,
                    r.A)(s))
                        return s;
                    throw new TypeError("@@toPrimitive must return a primitive value.")
                }
                return ("string" === t ? String : Number)(e)
            }
        }
        ,
        49922: (e, t, n) => {
            "use strict";
            n.d(t, {
                A: () => o
            });
            var r = n(82284)
              , s = n(92327);
            function o(e) {
                var t = (0,
                s.A)(e, "string");
                return "symbol" == (0,
                r.A)(t) ? t : t + ""
            }
        }
        ,
        82284: (e, t, n) => {
            "use strict";
            function r(e) {
                return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                r(e)
            }
            n.d(t, {
                A: () => r
            })
        }
    }
      , __webpack_module_cache__ = {};
    function __webpack_require__(e) {
        var t = __webpack_module_cache__[e];
        if (void 0 !== t)
            return t.exports;
        var n = __webpack_module_cache__[e] = {
            exports: {}
        };
        return __webpack_modules__[e](n, n.exports, __webpack_require__),
        n.exports
    }
    __webpack_require__.n = e => {
        var t = e && e.__esModule ? () => e.default : () => e;
        return __webpack_require__.d(t, {
            a: t
        }),
        t
    }
    ,
    __webpack_require__.d = (e, t) => {
        for (var n in t)
            __webpack_require__.o(t, n) && !__webpack_require__.o(e, n) && Object.defineProperty(e, n, {
                enumerable: !0,
                get: t[n]
            })
    }
    ,
    __webpack_require__.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t),
    __webpack_require__.r = e => {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }),
        Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }
    ,
    __webpack_require__(34784),
    __webpack_require__(31383);
    var __webpack_exports__ = __webpack_require__(86867)
}
)();
